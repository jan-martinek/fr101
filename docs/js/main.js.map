{"version":3,"sources":["main.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","global","factory","define","amd","mod","autosize","this","assign","ta","changeOverflow","value","width","style","offsetWidth","overflowY","getParentOverflows","el","arr","parentNode","Element","scrollTop","push","node","resize","originalHeight","height","overflows","docTop","document","documentElement","endHeight","scrollHeight","heightOffset","clientWidth","forEach","update","styleHeight","Math","round","parseFloat","computed","window","getComputedStyle","actualHeight","boxSizing","offsetHeight","cachedHeight","evt","createEvent","dispatchEvent","err","nodeName","map","has","pageResize","destroy","removeEventListener","Object","keys","key","bind","overflowX","wordWrap","addEventListener","set","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","isNaN","init","methods","get","Map","values","indexOf","delete","index","splice","name","Event","bubbles","initEvent","options","Array","prototype","x","2","decodeComponents","components","split","decodeURIComponent","join","left","slice","right","concat","decode","input","tokens","match","singleMatcher","customDecodeURIComponent","replaceMap","%FE%FF","%FF%FE","multiMatcher","exec","result","entries","replace","RegExp","encodedURI","TypeError","3","exprEval","Instruction","type","undefined","unaryInstruction","IOP1","binaryInstruction","IOP2","ternaryInstruction","IOP3","simplify","unaryOps","binaryOps","ternaryOps","n1","n2","n3","nstack","newexpression","item","INUMBER","IVAR","hasOwnProperty","pop","IEXPR","shift","IMEMBER","substitute","variable","expr","j","replitem","expritem","evaluate","functions","v","IFUNCALL","argCount","args","unshift","apply","expressionToString","toJS","escapeValue","JSON","stringify","contains","array","obj","getSymbols","symbols","withMembers","prevVar","Expression","parser","Token","TokenStream","expression","pos","current","consts","savedPosition","savedCurrent","getOptionName","op","optionNameMap","ParserState","tokenStream","nextToken","next","savedNextToken","allowMemberAccess","add","b","Number","sub","mul","div","equal","notEqual","greaterThan","lessThan","greaterThanEqual","lessThanEqual","andOperator","Boolean","orOperator","inOperator","sinh","exp","cosh","tanh","Infinity","asinh","log","sqrt","acosh","atanh","log10","LOG10E","neg","not","trunc","ceil","floor","random","factorial","gamma","isInteger","isFinite","NaN","res","PI","sin","twoN","threeN","fourN","fiveN","pow","E","GAMMA_P","GAMMA_G","stringLength","String","hypot","sum","larg","arguments","arg","abs","condition","cond","yep","nope","Parser","cos","tan","asin","acos","atan","ln","lg","-","+","!","*","/","%","^","||","==","!=",">","<",">=","<=","and","or","in","?","fac","min","max","pyt","atan2","if","true","false","toString","parse","vars","variables","filter","toJSFunction","param","Function","TOP","newToken","save","restore","isWhitespace","isComment","isRadixInteger","isNumber","isOperator","isString","isParen","isComma","isNamedOp","isConst","isName","parseError","charAt","startPos","quote","rawString","substring","unescape","c","toUpperCase","toLowerCase","str","isOperatorEnabled","hasLetter","codePointPattern","buffer","codePoint","test","fromCharCode","parseInt","backslash","radix","validDigit","valid","resetPos","foundDot","foundDigits","acceptSign","validExponent",":","optionName","operators","getCoordinates","column","line","newline","msg","coords","tokenMatches","token","isArray","accept","expect","parseAtom","instr","parseExpression","parseConditionalExpression","parseOrExpression","trueBranch","falseBranch","parseAndExpression","parseComparison","COMPARISON_OPERATORS","parseAddSub","ADD_SUB_OPERATORS","parseTerm","TERM_OPERATORS","parseFactor","parseExponential","parsePostfixExpression","parseFunctionCall","parseMemberExpression","parseArgumentList","parserState","sharedParser","4","saveAs","view","navigator","userAgent","get_URL","URL","webkitURL","save_link","createElementNS","can_use_save_link","click","event","MouseEvent","is_safari","HTMLElement","safari","is_chrome_ios","throw_outside","ex","setImmediate","setTimeout","revoke","file","revokeObjectURL","remove","dispatch","filesaver","event_types","listener","auto_bom","blob","Blob","FileSaver","no_auto_bom","object_url","force","dispatch_all","readyState","INIT","createObjectURL","href","download","DONE","FileReader","reader","onloadend","url","open","location","readAsDataURL","fs_error","FS_proto","msSaveOrOpenBlob","abort","WRITING","error","onwritestart","onprogress","onwrite","onabort","onerror","onwriteend","self","content","5","LZString","getBaseValue","alphabet","character","baseReverseDic","keyStrBase64","keyStrUriSafe","compressToBase64","_compress","decompressFromBase64","_decompress","compressToUTF16","decompressFromUTF16","compressed","charCodeAt","compressToUint8Array","uncompressed","compress","buf","Uint8Array","TotalLen","current_value","decompressFromUint8Array","decompress","compressToEncodedURIComponent","decompressFromEncodedURIComponent","bitsPerChar","getCharFromInt","ii","context_dictionary","context_dictionaryToCreate","context_c","context_wc","context_w","context_enlargeIn","context_dictSize","context_numBits","context_data","context_data_val","context_data_position","resetValue","getNextValue","w","bits","resb","maxpower","power","dictionary","enlargeIn","dictSize","numBits","entry","data","val","position","6","moment","hooks","hookCallback","isObject","isObjectEmpty","k","isUndefined","isDate","Date","fn","hasOwnProp","extend","valueOf","createUTC","format","locale","strict","createLocalOrUTC","utc","defaultParsingFlags","empty","unusedTokens","unusedInput","overflow","charsLeftOver","nullInput","invalidMonth","invalidFormat","userInvalidated","iso","parsedDateParts","meridiem","rfc2822","weekdayMismatch","getParsingFlags","m","_pf","isValid","_isValid","flags","parsedParts","some$1","isNowValid","_d","getTime","invalidWeekday","_strict","bigHour","isFrozen","createInvalid","copyConfig","to","from","prop","_isAMomentObject","_i","_f","_l","_tzm","_isUTC","_offset","_locale","momentProperties","Moment","config","updateInProgress","updateOffset","isMoment","absFloor","number","toInt","argumentForCoercion","coercedNumber","compareArrays","array1","array2","dontConvert","len","lengthDiff","diffs","warn","suppressDeprecationWarnings","console","deprecate","firstTime","deprecationHandler","stack","deprecateSimple","deprecations","isFunction","mergeConfigs","parentConfig","childConfig","Locale","addUnitAlias","unit","shorthand","lowerCase","aliases","normalizeUnits","units","normalizeObjectUnits","inputObject","normalizedProp","normalizedInput","addUnitPriority","priority","priorities","getPrioritizedUnits","unitsObj","sort","makeGetSet","keepTime","set$1","mom","zeroFill","targetLength","forceSign","absNumber","zerosToFill","substr","addFormatToken","padded","ordinal","callback","func","formatTokenFunctions","localeData","removeFormattingTokens","makeFormatFunction","formattingTokens","output","formatMoment","expandFormat","formatFunctions","invalidDate","localFormattingTokens","lastIndex","longDateFormat","addRegexToken","regex","strictRegex","regexes","isStrict","getParseRegexForToken","unescapeFormat","regexEscape","matched","p1","p2","p3","p4","addParseToken","addWeekParseToken","_w","addTimeToArrayFromToken","_a","daysInMonth","year","month","UTC","getUTCDate","handleStrictParse","monthName","llc","toLocaleLowerCase","_monthsParse","_longMonthsParse","_shortMonthsParse","monthsShort","months","indexOf$1","setMonth","dayOfMonth","monthsParse","date","getSetMonth","computeMonthsParse","cmpLenRev","shortPieces","longPieces","mixedPieces","_monthsRegex","_monthsShortRegex","_monthsStrictRegex","_monthsShortStrictRegex","daysInYear","isLeapYear","createDate","y","d","h","M","ms","getFullYear","setFullYear","createUTCDate","getUTCFullYear","setUTCFullYear","firstWeekOffset","dow","doy","fwd","getUTCDay","dayOfYearFromWeeks","week","weekday","resYear","resDayOfYear","dayOfYear","weekOfYear","resWeek","weekOffset","weeksInYear","weekOffsetNext","parseWeekday","weekdaysParse","parseIsoWeekday","handleStrictParse$1","weekdayName","_weekdaysParse","_shortWeekdaysParse","_minWeekdaysParse","day","weekdaysMin","weekdaysShort","weekdays","computeWeekdaysParse","minp","shortp","longp","minPieces","_weekdaysRegex","_weekdaysShortRegex","_weekdaysMinRegex","_weekdaysStrictRegex","_weekdaysShortStrictRegex","_weekdaysMinStrictRegex","hFormat","hours","lowercase","minutes","matchMeridiem","_meridiemParse","normalizeLocale","chooseLocale","names","loadLocale","oldLocale","locales","globalLocale","_abbr","getSetGlobalLocale","getLocale","defineLocale","baseConfig","abbr","_config","parentLocale","localeFamilies","checkOverflow","MONTH","DATE","YEAR","HOUR","MINUTE","SECOND","MILLISECOND","_overflowDayOfYear","_overflowWeeks","WEEK","_overflowWeekday","WEEKDAY","configFromISO","allowTime","dateFormat","timeFormat","tzFormat","string","extendedIsoRegex","basicIsoRegex","isoDates","isoTimes","tzRegex","configFromStringAndFormat","configFromRFC2822","dayFormat","timezone","timezoneIndex","timezones"," GMT"," EDT"," EST"," CDT"," CST"," MDT"," MST"," PDT"," PST","basicRfcRegex","momentDay","getDay","configFromString","aspNetJsonRegex","createFromInputFallback","defaults","currentDateArray","nowValue","now","_useUTC","getUTCMonth","getMonth","getDate","configFromArray","currentDate","yearToUse","dayOfYearFromWeekInfo","_dayOfYear","_nextDay","setUTCMinutes","getUTCMinutes","weekYear","temp","weekdayOverflow","GG","W","createLocal","_week","curWeek","gg","ISO_8601","RFC_2822","parsedInput","skipped","totalParsedInputLength","_meridiem","meridiemFixWrap","hour","isPm","meridiemHour","isPM","configFromStringAndArray","tempConfig","bestMoment","scoreToBeat","currentScore","score","configFromObject","minute","second","millisecond","createFromConfig","prepareConfig","preparse","configFromInput","isUTC","pickBy","moments","isDurationValid","ordering","unitHasDecimal","Duration","duration","years","quarters","quarter","weeks","days","seconds","milliseconds","_milliseconds","_days","_months","_data","_bubble","isDuration","absRound","offset","separator","utcOffset","sign","offsetFromString","matcher","matches","parts","chunkOffset","cloneWithOffset","model","diff","clone","setTime","local","getDateOffset","getTimezoneOffset","isUtc","createDuration","ret","diffRes","aspNetRegex","isoRegex","parseIso","momentsDifference","inp","positiveMomentsDifference","base","other","isAfter","isBefore","createAdder","direction","period","dur","tmp","addSubtract","isAdding","monthDiff","adjust","wholeMonthDiff","anchor","newLocaleData","addWeekYearFormatToken","getter","getSetWeekYearHelper","weeksTarget","setWeekAll","dayOfYearData","preParsePostFormat","get$1","field","setter","listMonthsImpl","out","listWeekdaysImpl","localeSorted","addSubtract$1","absCeil","daysToMonths","monthsToDays","makeAs","alias","as","makeGetter","substituteTimeAgo","withoutSuffix","isFuture","relativeTime","relativeTime$1","posNegDuration","thresholds","ss","toISOString$1","abs$1","Y","D","total","asSeconds","some","fun","keys$1","defaultCalendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","defaultLongDateFormat","LTS","LT","L","LL","LLL","LLLL","defaultDayOfMonthOrdinalParse","defaultRelativeTime","future","past","mm","hh","dd","MM","yy","match1","match2","match3","match4","match6","match1to2","match3to4","match5to6","match1to3","match1to4","match1to6","matchUnsigned","matchSigned","matchOffset","matchShortOffset","matchTimestamp","matchWord","monthsShortRegex","monthsRegex","MONTHS_IN_FORMAT","defaultLocaleMonths","defaultLocaleMonthsShort","defaultMonthsShortRegex","defaultMonthsRegex","parseTwoDigitYear","getSetYear","defaultLocaleWeek","weekdaysMinRegex","weekdaysShortRegex","weekdaysRegex","defaultLocaleWeekdays","defaultLocaleWeekdaysShort","defaultLocaleWeekdaysMin","defaultWeekdaysRegex","defaultWeekdaysShortRegex","defaultWeekdaysMinRegex","kInput","_isPm","pos1","pos2","defaultLocaleMeridiemParse","getSetHour","calendar","dayOfMonthOrdinalParse","meridiemParse","prototypeMin","prototypeMax","invalid","subtract","defaultFormat","defaultFormatUtc","lang","isoWeekYear","_dayOfMonthOrdinalParse","_ordinalParse","_dayOfMonthOrdinalParseLenient","getSetDayOfMonth","getSetMinute","getSetSecond","getSetMillisecond","proto","time","formats","sod","startOf","calendarFormat","asFloat","that","zoneDelta","delta","endOf","inputString","postformat","humanize","fromNow","toNow","invalidAt","localInput","isBetween","inclusivity","isSame","inputMs","isSameOrAfter","isSameOrBefore","parsingFlags","prioritized","isoWeekday","toArray","toObject","toDate","toISOString","inspect","zone","isLocal","prefix","suffix","toJSON","unix","creationData","isoWeek","isoWeeks","weekInfo","isoWeeksInYear","keepLocalTime","keepMinutes","localAdjust","_changeInProgress","parseZone","tZone","hasAlignedHourOffset","isDST","isUtcOffset","zoneAbbr","zoneName","dates","isDSTShifted","_isDSTShifted","proto$1","_calendar","_longDateFormat","formatUpper","_invalidDate","_ordinal","_relativeTime","pastFuture","source","isFormat","_monthsShort","_monthsParseExact","firstDayOfYear","firstDayOfWeek","_weekdays","_weekdaysMin","_weekdaysShort","_weekdaysParseExact","_fullWeekdaysParse","isLower","langData","mathAbs","asMilliseconds","asMinutes","asHours","asDays","asWeeks","asMonths","asYears","proto$2","monthsFromDays","withSuffix","toIsoString","version","setHookCallback","updateLocale","relativeTimeRounding","roundingFunction","relativeTimeThreshold","threshold","limit","myMoment","7","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","test1","getOwnPropertyNames","test2","test3","letter","shouldUseNative","target","8","root","req","Pikaday","hasMoment","hasEventListeners","sto","addEvent","capture","attachEvent","removeEvent","detachEvent","trim","hasClass","cn","className","addClass","removeClass","isWeekend","getDaysInMonth","setToStartOfDay","setHours","compareDates","overwrite","hasProp","fireEvent","eventName","ev","createEventObject","adjustCalendar","bound","reposition","defaultDate","setDefaultDate","firstDay","formatStrict","minDate","maxDate","yearRange","showWeekNumber","pickWholeWeek","minYear","maxYear","minMonth","maxMonth","startRange","endRange","isRTL","yearSuffix","showMonthAfterYear","showDaysInNextAndPreviousMonths","enableSelectionDaysInNextAndPreviousMonths","numberOfMonths","mainCalendar","container","blurFieldOnSelect","i18n","previousMonth","nextMonth","theme","events","onSelect","onOpen","onClose","onDraw","renderDayName","opts","renderDay","ariaSelected","isEmpty","isDisabled","isToday","isSelected","hasEvent","isInRange","isStartRange","isEndRange","renderWeek","onejan","renderRow","isRowSelected","reverse","renderBody","rows","renderHead","renderTitle","instance","refYear","randId","monthHtml","yearHtml","_o","isMinYear","isMaxYear","html","prev","renderTable","_onMouseDown","_v","srcElement","prevMonth","setDate","getAttribute","hide","blur","_c","preventDefault","returnValue","_onChange","gotoMonth","gotoYear","_onKeyChange","isVisible","keyCode","adjustDate","_onInputChange","firedBy","show","_onInputFocus","_onInputClick","_onInputBlur","pEl","activeElement","_b","_onClick","onchange","setAttribute","trigger","createElement","appendChild","body","insertBefore","nextSibling","defDate","gotoDate","disableWeekends","disableDayFn","nom","setMinDate","setMaxDate","fallback","toDateString","getMoment","setMoment","preventOnSelect","draw","newCalendar","calendars","firstVisibleDate","lastVisibleDate","visibleDate","adjustCalendars","newDay","difference","gotoToday","setStartRange","setEndRange","_y","_m","render","innerHTML","focus","adjustPosition","viewportWidth","viewportHeight","top","clientRect","innerWidth","innerHeight","clientHeight","pageYOffset","getBoundingClientRect","pageXOffset","bottom","offsetLeft","offsetTop","offsetParent","before","row","yearOfPreviousMonth","yearOfNextMonth","daysInPreviousMonth","cells","after","isWeekSelected","dayNumber","monthNumber","yearNumber","dayConfig","removeChild","9","encoderForArrayFormat","arrayFormat","encode","parserForArrayFormat","accumulator","strictUriEncode","encodeURIComponent","keysSorter","objectAssign","decodeComponent","extract","formatter","create","reduce","val2","decode-uri-component","object-assign","strict-uri-encode","10","Sortable","nodeType","_extend","expando","group","disabled","store","handle","scroll","scrollSensitivity","scrollSpeed","draggable","ghostClass","chosenClass","dragClass","ignore","preventOnFilter","animation","setData","dataTransfer","dragEl","textContent","dropBubble","dragoverBubble","dataIdAttr","delay","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","_prepareGroup","nativeDraggable","supportDraggable","_on","_onTapStart","touchDragOverListeners","_onDragOver","_cloneHide","sortable","state","lastPullMode","cloneEl","_css","revertClone","rootEl","nextEl","_animate","_closest","selector","ctx","_matches","_getParentOrHost","parent","host","_globalDragOver","dropEffect","captureMode","_off","_toggleClass","classList","R_SPACE","defaultView","currentStyle","_find","tagName","iterator","list","getElementsByTagName","_dispatchEvent","targetEl","fromEl","startIndex","newIndex","onName","oldIndex","_onMove","toEl","dragRect","targetRect","originalEvt","willInsertAfter","retVal","onMoveFn","onMove","dragged","draggedRect","related","relatedRect","_disableDraggable","_unsilent","_silent","_ghostIsLast","rect","lastElementChild","clientY","clientX","_generateId","src","_index","previousElementSibling","tag","re","_throttle","_this","dst","_clone","$","Polymer","dom","cloneNode","_saveInputCheckedState","inputs","idx","checked","savedInputChecked","parentEl","ghostEl","lastDownEl","scrollEl","scrollParentEl","scrollCustomFn","lastEl","lastCSS","lastParentCSS","activeGroup","putSortable","tapEvt","touchEvt","moved","autoScroll","R_FLOAT","win","jQuery","Zepto","supportCssPointerEvents","cssText","pointerEvents","_autoScroll","vx","vy","scrollOffsetX","scrollOffsetY","sens","speed","winWidth","winHeight","scrollFn","scrollWidth","clearInterval","pid","setInterval","scrollTo","scrollLeft","toFn","pull","fromGroup","originalGroup","checkPull","checkPut","put","constructor","touch","touches","originalTarget","shadowRoot","path","button","criteria","_prepareDragStart","dragStartFn","ownerDocument","_lastX","_lastY","_disableDelayedDrag","_triggerDragStart","_onDrop","_dragStartTimer","clearTimeout","pointerType","_onDragStart","selection","getSelection","removeAllRanges","_dragStarted","active","_nulling","_emulateDragOver","elementFromPoint","_onTouchMove","dx","dy","translate3d","_appendGhost","ghostRect","css","marginTop","marginLeft","useFallback","_offUpEvents","_loopId","effectAllowed","revert","activeSortable","isOwner","isMovingBetweenSortable","canSort","stopPropagation","animated","children","floating","cssFloat","display","isWide","isLong","halfway","nextElementSibling","elTop","tgTop","moveVector","prevRect","currentRect","handleEvent","order","items","id","closest","option","querySelectorAll","removeAttribute","defineProperty","passive","utils","on","off","find","is","throttle","toggleClass","11","12","getCode","_require","wrap","assemble","block","./util","13","acc","read","querySelector","write","hideEmpty","lastEmpty","_require2","header","totals","repeat","./../fields/fields","14","15","16","17","18","19","20","21","22","price","23","24","25","26","pollFieldType","wrapper","fieldName","allArray","fields","pollNames","pollFormulas","fill","fillFieldType","descriptions","fillNames","fillFormulas","formulas","all","bigtext","countlist","dateinput","dateoutput","doubletext","final","indicator","pricelist","note","subhead","nav","text","context","poll","dataset","./../util.js","./_bigtext","./_countlist","./_dateinput","./_dateoutput","./_doubletext","./_final","./_header","./_indicator","./_note","./_number","./_pricelist","./_separator","./_subhead","./_sum","27","updateCardGently","translate","tools","insertAdjacentElement","./../translator","28","activate","29","30","decorate","_typeof","Symbol","pikaday","31","32","parseNumber","numeric","isFloat","33","34","bool","desc","checkbox","activeField","./_bool","./_checkbox","./_date","./_desc","./_text","35","cel","classNames","nameInput","appendFormula","formula","label","_label","36","run","ui","./ui","37","load","localStorage","getItem","currentId","templateName","cardName","setItem","mtime","card","close","removeItem","38","wrapExport","title","json","lzs","unwrapExport","exportCard","contents","today","fileSaver","importCardFromFile","readAsText","onload","importCardFromUrl","request","XMLHttpRequest","send","onreadystatechange","status","responseText","importCardFromEncodedString","exportTemplate","file-saver","lz-string","39","pikadayNames","blocks","blockNav","40","dictionaries","cs","selectDictionary","curr","./translations/cs","41","closeCard","opened","pollData","getTemplateName","getCardName","getElementById","showDashboard","refreshOpened","setDisplay","showCard","initMode","toggleMode","mode","detectedMode","modeInitializations","createAddBlockTool","addBlockTool","navGroup","fragment","createDocumentFragment","section","blockLink","initBlockTools","blockActions","initExportCard","nameEl","cardExport","info","initImportCard","files","loadCard","query","queryString","search","highlightFileImport","removeUrlParams","cardurl","cardjson","findAncestor","createTextNode","history","replaceState","pathname","updateCard","blockSort","initCloseCard","preventSubmit","initOpened","listEl","translator","edit","swap-blocks","previous","previousSibling","remove-block","add-block","add-block-type","newBlock","./blocks/blocks","./opened","./store","./translator","query-string","sortablejs","42","makeArray","nodelist","parentElement","updateFormulaResults","collectVariables","customFunctions","timer","daysAfter","daysBefore","./fields/fields","expr-eval"],"mappings":"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","file":"main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/*!\n\tAutosize 4.0.0\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/\n(function (global, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(['exports', 'module'], factory);\n\t} else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n\t\tfactory(exports, module);\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod.exports, mod);\n\t\tglobal.autosize = mod.exports;\n\t}\n})(this, function (exports, module) {\n\t'use strict';\n\n\tvar map = typeof Map === \"function\" ? new Map() : (function () {\n\t\tvar keys = [];\n\t\tvar values = [];\n\n\t\treturn {\n\t\t\thas: function has(key) {\n\t\t\t\treturn keys.indexOf(key) > -1;\n\t\t\t},\n\t\t\tget: function get(key) {\n\t\t\t\treturn values[keys.indexOf(key)];\n\t\t\t},\n\t\t\tset: function set(key, value) {\n\t\t\t\tif (keys.indexOf(key) === -1) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t},\n\t\t\t'delete': function _delete(key) {\n\t\t\t\tvar index = keys.indexOf(key);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tkeys.splice(index, 1);\n\t\t\t\t\tvalues.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t})();\n\n\tvar createEvent = function createEvent(name) {\n\t\treturn new Event(name, { bubbles: true });\n\t};\n\ttry {\n\t\tnew Event('test');\n\t} catch (e) {\n\t\t// IE does not support `new Event()`\n\t\tcreateEvent = function (name) {\n\t\t\tvar evt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, false);\n\t\t\treturn evt;\n\t\t};\n\t}\n\n\tfunction assign(ta) {\n\t\tif (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || map.has(ta)) return;\n\n\t\tvar heightOffset = null;\n\t\tvar clientWidth = ta.clientWidth;\n\t\tvar cachedHeight = null;\n\n\t\tfunction init() {\n\t\t\tvar style = window.getComputedStyle(ta, null);\n\n\t\t\tif (style.resize === 'vertical') {\n\t\t\t\tta.style.resize = 'none';\n\t\t\t} else if (style.resize === 'both') {\n\t\t\t\tta.style.resize = 'horizontal';\n\t\t\t}\n\n\t\t\tif (style.boxSizing === 'content-box') {\n\t\t\t\theightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom));\n\t\t\t} else {\n\t\t\t\theightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\n\t\t\t}\n\t\t\t// Fix when a textarea is not on document body and heightOffset is Not a Number\n\t\t\tif (isNaN(heightOffset)) {\n\t\t\t\theightOffset = 0;\n\t\t\t}\n\n\t\t\tupdate();\n\t\t}\n\n\t\tfunction changeOverflow(value) {\n\t\t\t{\n\t\t\t\t// Chrome/Safari-specific fix:\n\t\t\t\t// When the textarea y-overflow is hidden, Chrome/Safari do not reflow the text to account for the space\n\t\t\t\t// made available by removing the scrollbar. The following forces the necessary text reflow.\n\t\t\t\tvar width = ta.style.width;\n\t\t\t\tta.style.width = '0px';\n\t\t\t\t// Force reflow:\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tta.offsetWidth;\n\t\t\t\t/* jshint ignore:end */\n\t\t\t\tta.style.width = width;\n\t\t\t}\n\n\t\t\tta.style.overflowY = value;\n\t\t}\n\n\t\tfunction getParentOverflows(el) {\n\t\t\tvar arr = [];\n\n\t\t\twhile (el && el.parentNode && el.parentNode instanceof Element) {\n\t\t\t\tif (el.parentNode.scrollTop) {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tnode: el.parentNode,\n\t\t\t\t\t\tscrollTop: el.parentNode.scrollTop\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tel = el.parentNode;\n\t\t\t}\n\n\t\t\treturn arr;\n\t\t}\n\n\t\tfunction resize() {\n\t\t\tvar originalHeight = ta.style.height;\n\t\t\tvar overflows = getParentOverflows(ta);\n\t\t\tvar docTop = document.documentElement && document.documentElement.scrollTop; // Needed for Mobile IE (ticket #240)\n\n\t\t\tta.style.height = '';\n\n\t\t\tvar endHeight = ta.scrollHeight + heightOffset;\n\n\t\t\tif (ta.scrollHeight === 0) {\n\t\t\t\t// If the scrollHeight is 0, then the element probably has display:none or is detached from the DOM.\n\t\t\t\tta.style.height = originalHeight;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tta.style.height = endHeight + 'px';\n\n\t\t\t// used to check if an update is actually necessary on window.resize\n\t\t\tclientWidth = ta.clientWidth;\n\n\t\t\t// prevents scroll-position jumping\n\t\t\toverflows.forEach(function (el) {\n\t\t\t\tel.node.scrollTop = el.scrollTop;\n\t\t\t});\n\n\t\t\tif (docTop) {\n\t\t\t\tdocument.documentElement.scrollTop = docTop;\n\t\t\t}\n\t\t}\n\n\t\tfunction update() {\n\t\t\tresize();\n\n\t\t\tvar styleHeight = Math.round(parseFloat(ta.style.height));\n\t\t\tvar computed = window.getComputedStyle(ta, null);\n\n\t\t\t// Using offsetHeight as a replacement for computed.height in IE, because IE does not account use of border-box\n\t\t\tvar actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(computed.height)) : ta.offsetHeight;\n\n\t\t\t// The actual height not matching the style height (set via the resize method) indicates that\n\t\t\t// the max-height has been exceeded, in which case the overflow should be allowed.\n\t\t\tif (actualHeight !== styleHeight) {\n\t\t\t\tif (computed.overflowY === 'hidden') {\n\t\t\t\t\tchangeOverflow('scroll');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Normally keep overflow set to hidden, to avoid flash of scrollbar as the textarea expands.\n\t\t\t\tif (computed.overflowY !== 'hidden') {\n\t\t\t\t\tchangeOverflow('hidden');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cachedHeight !== actualHeight) {\n\t\t\t\tcachedHeight = actualHeight;\n\t\t\t\tvar evt = createEvent('autosize:resized');\n\t\t\t\ttry {\n\t\t\t\t\tta.dispatchEvent(evt);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Firefox will throw an error on dispatchEvent for a detached element\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=889376\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar pageResize = function pageResize() {\n\t\t\tif (ta.clientWidth !== clientWidth) {\n\t\t\t\tupdate();\n\t\t\t}\n\t\t};\n\n\t\tvar destroy = (function (style) {\n\t\t\twindow.removeEventListener('resize', pageResize, false);\n\t\t\tta.removeEventListener('input', update, false);\n\t\t\tta.removeEventListener('keyup', update, false);\n\t\t\tta.removeEventListener('autosize:destroy', destroy, false);\n\t\t\tta.removeEventListener('autosize:update', update, false);\n\n\t\t\tObject.keys(style).forEach(function (key) {\n\t\t\t\tta.style[key] = style[key];\n\t\t\t});\n\n\t\t\tmap['delete'](ta);\n\t\t}).bind(ta, {\n\t\t\theight: ta.style.height,\n\t\t\tresize: ta.style.resize,\n\t\t\toverflowY: ta.style.overflowY,\n\t\t\toverflowX: ta.style.overflowX,\n\t\t\twordWrap: ta.style.wordWrap\n\t\t});\n\n\t\tta.addEventListener('autosize:destroy', destroy, false);\n\n\t\t// IE9 does not fire onpropertychange or oninput for deletions,\n\t\t// so binding to onkeyup to catch most of those events.\n\t\t// There is no way that I know of to detect something like 'cut' in IE9.\n\t\tif ('onpropertychange' in ta && 'oninput' in ta) {\n\t\t\tta.addEventListener('keyup', update, false);\n\t\t}\n\n\t\twindow.addEventListener('resize', pageResize, false);\n\t\tta.addEventListener('input', update, false);\n\t\tta.addEventListener('autosize:update', update, false);\n\t\tta.style.overflowX = 'hidden';\n\t\tta.style.wordWrap = 'break-word';\n\n\t\tmap.set(ta, {\n\t\t\tdestroy: destroy,\n\t\t\tupdate: update\n\t\t});\n\n\t\tinit();\n\t}\n\n\tfunction destroy(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.destroy();\n\t\t}\n\t}\n\n\tfunction update(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.update();\n\t\t}\n\t}\n\n\tvar autosize = null;\n\n\t// Do nothing in Node.js environment and IE8 (or lower)\n\tif (typeof window === 'undefined' || typeof window.getComputedStyle !== 'function') {\n\t\tautosize = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\treturn el;\n\t\t};\n\t} else {\n\t\tautosize = function (el, options) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], function (x) {\n\t\t\t\t\treturn assign(x, options);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], destroy);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], update);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t}\n\n\tmodule.exports = autosize;\n});\n},{}],2:[function(require,module,exports){\n'use strict';\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp(token, 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn decodeURIComponent(components.join(''));\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher);\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher);\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n\n},{}],3:[function(require,module,exports){\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.exprEval = factory());\n}(this, (function () { 'use strict';\n\nvar INUMBER = 'INUMBER';\nvar IOP1 = 'IOP1';\nvar IOP2 = 'IOP2';\nvar IOP3 = 'IOP3';\nvar IVAR = 'IVAR';\nvar IFUNCALL = 'IFUNCALL';\nvar IEXPR = 'IEXPR';\nvar IMEMBER = 'IMEMBER';\n\nfunction Instruction(type, value) {\n  this.type = type;\n  this.value = (value !== undefined && value !== null) ? value : 0;\n}\n\nInstruction.prototype.toString = function () {\n  switch (this.type) {\n    case INUMBER:\n    case IOP1:\n    case IOP2:\n    case IOP3:\n    case IVAR:\n      return this.value;\n    case IFUNCALL:\n      return 'CALL ' + this.value;\n    case IMEMBER:\n      return '.' + this.value;\n    default:\n      return 'Invalid Instruction';\n  }\n};\n\nfunction unaryInstruction(value) {\n  return new Instruction(IOP1, value);\n}\n\nfunction binaryInstruction(value) {\n  return new Instruction(IOP2, value);\n}\n\nfunction ternaryInstruction(value) {\n  return new Instruction(IOP3, value);\n}\n\nfunction simplify(tokens, unaryOps, binaryOps, ternaryOps, values) {\n  var nstack = [];\n  var newexpression = [];\n  var n1, n2, n3;\n  var f;\n  for (var i = 0; i < tokens.length; i++) {\n    var item = tokens[i];\n    var type = item.type;\n    if (type === INUMBER) {\n      nstack.push(item);\n    } else if (type === IVAR && values.hasOwnProperty(item.value)) {\n      item = new Instruction(INUMBER, values[item.value]);\n      nstack.push(item);\n    } else if (type === IOP2 && nstack.length > 1) {\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      f = binaryOps[item.value];\n      item = new Instruction(INUMBER, f(n1.value, n2.value));\n      nstack.push(item);\n    } else if (type === IOP3 && nstack.length > 2) {\n      n3 = nstack.pop();\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      if (item.value === '?') {\n        nstack.push(n1.value ? n2.value : n3.value);\n      } else {\n        f = ternaryOps[item.value];\n        item = new Instruction(INUMBER, f(n1.value, n2.value, n3.value));\n        nstack.push(item);\n      }\n    } else if (type === IOP1 && nstack.length > 0) {\n      n1 = nstack.pop();\n      f = unaryOps[item.value];\n      item = new Instruction(INUMBER, f(n1.value));\n      nstack.push(item);\n    } else if (type === IEXPR) {\n      while (nstack.length > 0) {\n        newexpression.push(nstack.shift());\n      }\n      newexpression.push(new Instruction(IEXPR, simplify(item.value, unaryOps, binaryOps, ternaryOps, values)));\n    } else if (type === IMEMBER && nstack.length > 0) {\n      n1 = nstack.pop();\n      nstack.push(new Instruction(INUMBER, n1.value[item.value]));\n    } else {\n      while (nstack.length > 0) {\n        newexpression.push(nstack.shift());\n      }\n      newexpression.push(item);\n    }\n  }\n  while (nstack.length > 0) {\n    newexpression.push(nstack.shift());\n  }\n  return newexpression;\n}\n\nfunction substitute(tokens, variable, expr) {\n  var newexpression = [];\n  for (var i = 0; i < tokens.length; i++) {\n    var item = tokens[i];\n    var type = item.type;\n    if (type === IVAR && item.value === variable) {\n      for (var j = 0; j < expr.tokens.length; j++) {\n        var expritem = expr.tokens[j];\n        var replitem;\n        if (expritem.type === IOP1) {\n          replitem = unaryInstruction(expritem.value);\n        } else if (expritem.type === IOP2) {\n          replitem = binaryInstruction(expritem.value);\n        } else if (expritem.type === IOP3) {\n          replitem = ternaryInstruction(expritem.value);\n        } else {\n          replitem = new Instruction(expritem.type, expritem.value);\n        }\n        newexpression.push(replitem);\n      }\n    } else if (type === IEXPR) {\n      newexpression.push(new Instruction(IEXPR, substitute(item.value, variable, expr)));\n    } else {\n      newexpression.push(item);\n    }\n  }\n  return newexpression;\n}\n\nfunction evaluate(tokens, expr, values) {\n  var nstack = [];\n  var n1, n2, n3;\n  var f;\n  for (var i = 0; i < tokens.length; i++) {\n    var item = tokens[i];\n    var type = item.type;\n    if (type === INUMBER) {\n      nstack.push(item.value);\n    } else if (type === IOP2) {\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      f = expr.binaryOps[item.value];\n      nstack.push(f(n1, n2));\n    } else if (type === IOP3) {\n      n3 = nstack.pop();\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      if (item.value === '?') {\n        nstack.push(evaluate(n1 ? n2 : n3, expr, values));\n      } else {\n        f = expr.ternaryOps[item.value];\n        nstack.push(f(n1, n2, n3));\n      }\n    } else if (type === IVAR) {\n      if (item.value in expr.functions) {\n        nstack.push(expr.functions[item.value]);\n      } else {\n        var v = values[item.value];\n        if (v !== undefined) {\n          nstack.push(v);\n        } else {\n          throw new Error('undefined variable: ' + item.value);\n        }\n      }\n    } else if (type === IOP1) {\n      n1 = nstack.pop();\n      f = expr.unaryOps[item.value];\n      nstack.push(f(n1));\n    } else if (type === IFUNCALL) {\n      var argCount = item.value;\n      var args = [];\n      while (argCount-- > 0) {\n        args.unshift(nstack.pop());\n      }\n      f = nstack.pop();\n      if (f.apply && f.call) {\n        nstack.push(f.apply(undefined, args));\n      } else {\n        throw new Error(f + ' is not a function');\n      }\n    } else if (type === IEXPR) {\n      nstack.push(item.value);\n    } else if (type === IMEMBER) {\n      n1 = nstack.pop();\n      nstack.push(n1[item.value]);\n    } else {\n      throw new Error('invalid Expression');\n    }\n  }\n  if (nstack.length > 1) {\n    throw new Error('invalid Expression (parity)');\n  }\n  return nstack[0];\n}\n\nfunction expressionToString(tokens, toJS) {\n  var nstack = [];\n  var n1, n2, n3;\n  var f;\n  for (var i = 0; i < tokens.length; i++) {\n    var item = tokens[i];\n    var type = item.type;\n    if (type === INUMBER) {\n      if (typeof item.value === 'number' && item.value < 0) {\n        nstack.push('(' + item.value + ')');\n      } else {\n        nstack.push(escapeValue(item.value));\n      }\n    } else if (type === IOP2) {\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      f = item.value;\n      if (toJS) {\n        if (f === '^') {\n          nstack.push('Math.pow(' + n1 + ', ' + n2 + ')');\n        } else if (f === 'and') {\n          nstack.push('(!!' + n1 + ' && !!' + n2 + ')');\n        } else if (f === 'or') {\n          nstack.push('(!!' + n1 + ' || !!' + n2 + ')');\n        } else if (f === '||') {\n          nstack.push('(String(' + n1 + ') + String(' + n2 + '))');\n        } else if (f === '==') {\n          nstack.push('(' + n1 + ' === ' + n2 + ')');\n        } else if (f === '!=') {\n          nstack.push('(' + n1 + ' !== ' + n2 + ')');\n        } else {\n          nstack.push('(' + n1 + ' ' + f + ' ' + n2 + ')');\n        }\n      } else {\n        nstack.push('(' + n1 + ' ' + f + ' ' + n2 + ')');\n      }\n    } else if (type === IOP3) {\n      n3 = nstack.pop();\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      f = item.value;\n      if (f === '?') {\n        nstack.push('(' + n1 + ' ? ' + n2 + ' : ' + n3 + ')');\n      } else {\n        throw new Error('invalid Expression');\n      }\n    } else if (type === IVAR) {\n      nstack.push(item.value);\n    } else if (type === IOP1) {\n      n1 = nstack.pop();\n      f = item.value;\n      if (f === '-' || f === '+') {\n        nstack.push('(' + f + n1 + ')');\n      } else if (toJS) {\n        if (f === 'not') {\n          nstack.push('(' + '!' + n1 + ')');\n        } else if (f === '!') {\n          nstack.push('fac(' + n1 + ')');\n        } else {\n          nstack.push(f + '(' + n1 + ')');\n        }\n      } else if (f === '!') {\n        nstack.push('(' + n1 + '!)');\n      } else {\n        nstack.push('(' + f + ' ' + n1 + ')');\n      }\n    } else if (type === IFUNCALL) {\n      var argCount = item.value;\n      var args = [];\n      while (argCount-- > 0) {\n        args.unshift(nstack.pop());\n      }\n      f = nstack.pop();\n      nstack.push(f + '(' + args.join(', ') + ')');\n    } else if (type === IMEMBER) {\n      n1 = nstack.pop();\n      nstack.push(n1 + '.' + item.value);\n    } else if (type === IEXPR) {\n      nstack.push('(' + expressionToString(item.value, toJS) + ')');\n    } else {\n      throw new Error('invalid Expression');\n    }\n  }\n  if (nstack.length > 1) {\n    throw new Error('invalid Expression (parity)');\n  }\n  return nstack[0];\n}\n\nfunction escapeValue(v) {\n  if (typeof v === 'string') {\n    return JSON.stringify(v).replace(/\\u2028/g, '\\\\u2028').replace(/\\u2029/g, '\\\\u2029');\n  }\n  return v;\n}\n\nfunction contains(array, obj) {\n  for (var i = 0; i < array.length; i++) {\n    if (array[i] === obj) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction getSymbols(tokens, symbols, options) {\n  options = options || {};\n  var withMembers = !!options.withMembers;\n  var prevVar = null;\n\n  for (var i = 0; i < tokens.length; i++) {\n    var item = tokens[i];\n    if (item.type === IVAR && !contains(symbols, item.value)) {\n      if (!withMembers) {\n        symbols.push(item.value);\n      } else if (prevVar !== null) {\n        if (!contains(symbols, prevVar)) {\n          symbols.push(prevVar);\n        }\n        prevVar = item.value;\n      } else {\n        prevVar = item.value;\n      }\n    } else if (item.type === IMEMBER && withMembers && prevVar !== null) {\n      prevVar += '.' + item.value;\n    } else if (item.type === IEXPR) {\n      getSymbols(item.value, symbols, options);\n    } else if (prevVar !== null) {\n      if (!contains(symbols, prevVar)) {\n        symbols.push(prevVar);\n      }\n      prevVar = null;\n    }\n  }\n\n  if (prevVar !== null && !contains(symbols, prevVar)) {\n    symbols.push(prevVar);\n  }\n}\n\nfunction Expression(tokens, parser) {\n  this.tokens = tokens;\n  this.parser = parser;\n  this.unaryOps = parser.unaryOps;\n  this.binaryOps = parser.binaryOps;\n  this.ternaryOps = parser.ternaryOps;\n  this.functions = parser.functions;\n}\n\nExpression.prototype.simplify = function (values) {\n  values = values || {};\n  return new Expression(simplify(this.tokens, this.unaryOps, this.binaryOps, this.ternaryOps, values), this.parser);\n};\n\nExpression.prototype.substitute = function (variable, expr) {\n  if (!(expr instanceof Expression)) {\n    expr = this.parser.parse(String(expr));\n  }\n\n  return new Expression(substitute(this.tokens, variable, expr), this.parser);\n};\n\nExpression.prototype.evaluate = function (values) {\n  values = values || {};\n  return evaluate(this.tokens, this, values);\n};\n\nExpression.prototype.toString = function () {\n  return expressionToString(this.tokens, false);\n};\n\nExpression.prototype.symbols = function (options) {\n  options = options || {};\n  var vars = [];\n  getSymbols(this.tokens, vars, options);\n  return vars;\n};\n\nExpression.prototype.variables = function (options) {\n  options = options || {};\n  var vars = [];\n  getSymbols(this.tokens, vars, options);\n  var functions = this.functions;\n  return vars.filter(function (name) {\n    return !(name in functions);\n  });\n};\n\nExpression.prototype.toJSFunction = function (param, variables) {\n  var expr = this;\n  var f = new Function(param, 'with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return ' + expressionToString(this.simplify(variables).tokens, true) + '; }'); // eslint-disable-line no-new-func\n  return function () {\n    return f.apply(expr, arguments);\n  };\n};\n\nvar TEOF = 'TEOF';\nvar TOP = 'TOP';\nvar TNUMBER = 'TNUMBER';\nvar TSTRING = 'TSTRING';\nvar TPAREN = 'TPAREN';\nvar TCOMMA = 'TCOMMA';\nvar TNAME = 'TNAME';\n\nfunction Token(type, value, index) {\n  this.type = type;\n  this.value = value;\n  this.index = index;\n}\n\nToken.prototype.toString = function () {\n  return this.type + ': ' + this.value;\n};\n\nfunction TokenStream(parser, expression) {\n  this.pos = 0;\n  this.current = null;\n  this.unaryOps = parser.unaryOps;\n  this.binaryOps = parser.binaryOps;\n  this.ternaryOps = parser.ternaryOps;\n  this.consts = parser.consts;\n  this.expression = expression;\n  this.savedPosition = 0;\n  this.savedCurrent = null;\n  this.options = parser.options;\n}\n\nTokenStream.prototype.newToken = function (type, value, pos) {\n  return new Token(type, value, pos != null ? pos : this.pos);\n};\n\nTokenStream.prototype.save = function () {\n  this.savedPosition = this.pos;\n  this.savedCurrent = this.current;\n};\n\nTokenStream.prototype.restore = function () {\n  this.pos = this.savedPosition;\n  this.current = this.savedCurrent;\n};\n\nTokenStream.prototype.next = function () {\n  if (this.pos >= this.expression.length) {\n    return this.newToken(TEOF, 'EOF');\n  }\n\n  if (this.isWhitespace() || this.isComment()) {\n    return this.next();\n  } else if (this.isRadixInteger() ||\n      this.isNumber() ||\n      this.isOperator() ||\n      this.isString() ||\n      this.isParen() ||\n      this.isComma() ||\n      this.isNamedOp() ||\n      this.isConst() ||\n      this.isName()) {\n    return this.current;\n  } else {\n    this.parseError('Unknown character \"' + this.expression.charAt(this.pos) + '\"');\n  }\n};\n\nTokenStream.prototype.isString = function () {\n  var r = false;\n  var startPos = this.pos;\n  var quote = this.expression.charAt(startPos);\n\n  if (quote === '\\'' || quote === '\"') {\n    var index = this.expression.indexOf(quote, startPos + 1);\n    while (index >= 0 && this.pos < this.expression.length) {\n      this.pos = index + 1;\n      if (this.expression.charAt(index - 1) !== '\\\\') {\n        var rawString = this.expression.substring(startPos + 1, index);\n        this.current = this.newToken(TSTRING, this.unescape(rawString), startPos);\n        r = true;\n        break;\n      }\n      index = this.expression.indexOf(quote, index + 1);\n    }\n  }\n  return r;\n};\n\nTokenStream.prototype.isParen = function () {\n  var c = this.expression.charAt(this.pos);\n  if (c === '(' || c === ')') {\n    this.current = this.newToken(TPAREN, c);\n    this.pos++;\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isComma = function () {\n  var c = this.expression.charAt(this.pos);\n  if (c === ',') {\n    this.current = this.newToken(TCOMMA, ',');\n    this.pos++;\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isConst = function () {\n  var startPos = this.pos;\n  var i = startPos;\n  for (; i < this.expression.length; i++) {\n    var c = this.expression.charAt(i);\n    if (c.toUpperCase() === c.toLowerCase()) {\n      if (i === this.pos || (c !== '_' && c !== '.' && (c < '0' || c > '9'))) {\n        break;\n      }\n    }\n  }\n  if (i > startPos) {\n    var str = this.expression.substring(startPos, i);\n    if (str in this.consts) {\n      this.current = this.newToken(TNUMBER, this.consts[str]);\n      this.pos += str.length;\n      return true;\n    }\n  }\n  return false;\n};\n\nTokenStream.prototype.isNamedOp = function () {\n  var startPos = this.pos;\n  var i = startPos;\n  for (; i < this.expression.length; i++) {\n    var c = this.expression.charAt(i);\n    if (c.toUpperCase() === c.toLowerCase()) {\n      if (i === this.pos || (c !== '_' && (c < '0' || c > '9'))) {\n        break;\n      }\n    }\n  }\n  if (i > startPos) {\n    var str = this.expression.substring(startPos, i);\n    if (this.isOperatorEnabled(str) && (str in this.binaryOps || str in this.unaryOps || str in this.ternaryOps)) {\n      this.current = this.newToken(TOP, str);\n      this.pos += str.length;\n      return true;\n    }\n  }\n  return false;\n};\n\nTokenStream.prototype.isName = function () {\n  var startPos = this.pos;\n  var i = startPos;\n  var hasLetter = false;\n  for (; i < this.expression.length; i++) {\n    var c = this.expression.charAt(i);\n    if (c.toUpperCase() === c.toLowerCase()) {\n      if (i === this.pos && c === '$') {\n        continue;\n      } else if (i === this.pos || !hasLetter || (c !== '_' && (c < '0' || c > '9'))) {\n        break;\n      }\n    } else {\n      hasLetter = true;\n    }\n  }\n  if (hasLetter) {\n    var str = this.expression.substring(startPos, i);\n    this.current = this.newToken(TNAME, str);\n    this.pos += str.length;\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isWhitespace = function () {\n  var r = false;\n  var c = this.expression.charAt(this.pos);\n  while (c === ' ' || c === '\\t' || c === '\\n' || c === '\\r') {\n    r = true;\n    this.pos++;\n    if (this.pos >= this.expression.length) {\n      break;\n    }\n    c = this.expression.charAt(this.pos);\n  }\n  return r;\n};\n\nvar codePointPattern = /^[0-9a-f]{4}$/i;\n\nTokenStream.prototype.unescape = function (v) {\n  var index = v.indexOf('\\\\');\n  if (index < 0) {\n    return v;\n  }\n\n  var buffer = v.substring(0, index);\n  while (index >= 0) {\n    var c = v.charAt(++index);\n    switch (c) {\n      case '\\'':\n        buffer += '\\'';\n        break;\n      case '\"':\n        buffer += '\"';\n        break;\n      case '\\\\':\n        buffer += '\\\\';\n        break;\n      case '/':\n        buffer += '/';\n        break;\n      case 'b':\n        buffer += '\\b';\n        break;\n      case 'f':\n        buffer += '\\f';\n        break;\n      case 'n':\n        buffer += '\\n';\n        break;\n      case 'r':\n        buffer += '\\r';\n        break;\n      case 't':\n        buffer += '\\t';\n        break;\n      case 'u':\n        // interpret the following 4 characters as the hex of the unicode code point\n        var codePoint = v.substring(index + 1, index + 5);\n        if (!codePointPattern.test(codePoint)) {\n          this.parseError('Illegal escape sequence: \\\\u' + codePoint);\n        }\n        buffer += String.fromCharCode(parseInt(codePoint, 16));\n        index += 4;\n        break;\n      default:\n        throw this.parseError('Illegal escape sequence: \"\\\\' + c + '\"');\n    }\n    ++index;\n    var backslash = v.indexOf('\\\\', index);\n    buffer += v.substring(index, backslash < 0 ? v.length : backslash);\n    index = backslash;\n  }\n\n  return buffer;\n};\n\nTokenStream.prototype.isComment = function () {\n  var c = this.expression.charAt(this.pos);\n  if (c === '/' && this.expression.charAt(this.pos + 1) === '*') {\n    this.pos = this.expression.indexOf('*/', this.pos) + 2;\n    if (this.pos === 1) {\n      this.pos = this.expression.length;\n    }\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isRadixInteger = function () {\n  var pos = this.pos;\n\n  if (pos >= this.expression.length - 2 || this.expression.charAt(pos) !== '0') {\n    return false;\n  }\n  ++pos;\n\n  var radix;\n  var validDigit;\n  if (this.expression.charAt(pos) === 'x') {\n    radix = 16;\n    validDigit = /^[0-9a-f]$/i;\n    ++pos;\n  } else if (this.expression.charAt(pos) === 'b') {\n    radix = 2;\n    validDigit = /^[01]$/i;\n    ++pos;\n  } else {\n    return false;\n  }\n\n  var valid = false;\n  var startPos = pos;\n\n  while (pos < this.expression.length) {\n    var c = this.expression.charAt(pos);\n    if (validDigit.test(c)) {\n      pos++;\n      valid = true;\n    } else {\n      break;\n    }\n  }\n\n  if (valid) {\n    this.current = this.newToken(TNUMBER, parseInt(this.expression.substring(startPos, pos), radix));\n    this.pos = pos;\n  }\n  return valid;\n};\n\nTokenStream.prototype.isNumber = function () {\n  var valid = false;\n  var pos = this.pos;\n  var startPos = pos;\n  var resetPos = pos;\n  var foundDot = false;\n  var foundDigits = false;\n  var c;\n\n  while (pos < this.expression.length) {\n    c = this.expression.charAt(pos);\n    if ((c >= '0' && c <= '9') || (!foundDot && c === '.')) {\n      if (c === '.') {\n        foundDot = true;\n      } else {\n        foundDigits = true;\n      }\n      pos++;\n      valid = foundDigits;\n    } else {\n      break;\n    }\n  }\n\n  if (valid) {\n    resetPos = pos;\n  }\n\n  if (c === 'e' || c === 'E') {\n    pos++;\n    var acceptSign = true;\n    var validExponent = false;\n    while (pos < this.expression.length) {\n      c = this.expression.charAt(pos);\n      if (acceptSign && (c === '+' || c === '-')) {\n        acceptSign = false;\n      } else if (c >= '0' && c <= '9') {\n        validExponent = true;\n        acceptSign = false;\n      } else {\n        break;\n      }\n      pos++;\n    }\n\n    if (!validExponent) {\n      pos = resetPos;\n    }\n  }\n\n  if (valid) {\n    this.current = this.newToken(TNUMBER, parseFloat(this.expression.substring(startPos, pos)));\n    this.pos = pos;\n  } else {\n    this.pos = resetPos;\n  }\n  return valid;\n};\n\nTokenStream.prototype.isOperator = function () {\n  var startPos = this.pos;\n  var c = this.expression.charAt(this.pos);\n\n  if (c === '+' || c === '-' || c === '*' || c === '/' || c === '%' || c === '^' || c === '?' || c === ':' || c === '.') {\n    this.current = this.newToken(TOP, c);\n  } else if (c === '∙' || c === '•') {\n    this.current = this.newToken(TOP, '*');\n  } else if (c === '>') {\n    if (this.expression.charAt(this.pos + 1) === '=') {\n      this.current = this.newToken(TOP, '>=');\n      this.pos++;\n    } else {\n      this.current = this.newToken(TOP, '>');\n    }\n  } else if (c === '<') {\n    if (this.expression.charAt(this.pos + 1) === '=') {\n      this.current = this.newToken(TOP, '<=');\n      this.pos++;\n    } else {\n      this.current = this.newToken(TOP, '<');\n    }\n  } else if (c === '|') {\n    if (this.expression.charAt(this.pos + 1) === '|') {\n      this.current = this.newToken(TOP, '||');\n      this.pos++;\n    } else {\n      return false;\n    }\n  } else if (c === '=') {\n    if (this.expression.charAt(this.pos + 1) === '=') {\n      this.current = this.newToken(TOP, '==');\n      this.pos++;\n    } else {\n      return false;\n    }\n  } else if (c === '!') {\n    if (this.expression.charAt(this.pos + 1) === '=') {\n      this.current = this.newToken(TOP, '!=');\n      this.pos++;\n    } else {\n      this.current = this.newToken(TOP, c);\n    }\n  } else {\n    return false;\n  }\n  this.pos++;\n\n  if (this.isOperatorEnabled(this.current.value)) {\n    return true;\n  } else {\n    this.pos = startPos;\n    return false;\n  }\n};\n\nvar optionNameMap = {\n  '+': 'add',\n  '-': 'subtract',\n  '*': 'multiply',\n  '/': 'divide',\n  '%': 'remainder',\n  '^': 'power',\n  '!': 'factorial',\n  '<': 'comparison',\n  '>': 'comparison',\n  '<=': 'comparison',\n  '>=': 'comparison',\n  '==': 'comparison',\n  '!=': 'comparison',\n  '||': 'concatenate',\n  'and': 'logical',\n  'or': 'logical',\n  'not': 'logical',\n  '?': 'conditional',\n  ':': 'conditional'\n};\n\nfunction getOptionName(op) {\n  return optionNameMap.hasOwnProperty(op) ? optionNameMap[op] : op;\n}\n\nTokenStream.prototype.isOperatorEnabled = function (op) {\n  var optionName = getOptionName(op);\n  var operators = this.options.operators || {};\n\n  // in is a special case for now because it's disabled by default\n  if (optionName === 'in') {\n    return !!operators['in'];\n  }\n\n  return !(optionName in operators) || !!operators[optionName];\n};\n\nTokenStream.prototype.getCoordinates = function () {\n  var line = 0;\n  var column;\n  var newline = -1;\n  do {\n    line++;\n    column = this.pos - newline;\n    newline = this.expression.indexOf('\\n', newline + 1);\n  } while (newline >= 0 && newline < this.pos);\n\n  return {\n    line: line,\n    column: column\n  };\n};\n\nTokenStream.prototype.parseError = function (msg) {\n  var coords = this.getCoordinates();\n  throw new Error('parse error [' + coords.line + ':' + coords.column + ']: ' + msg);\n};\n\nfunction ParserState(parser, tokenStream, options) {\n  this.parser = parser;\n  this.tokens = tokenStream;\n  this.current = null;\n  this.nextToken = null;\n  this.next();\n  this.savedCurrent = null;\n  this.savedNextToken = null;\n  this.allowMemberAccess = options.allowMemberAccess !== false;\n}\n\nParserState.prototype.next = function () {\n  this.current = this.nextToken;\n  return (this.nextToken = this.tokens.next());\n};\n\nParserState.prototype.tokenMatches = function (token, value) {\n  if (typeof value === 'undefined') {\n    return true;\n  } else if (Array.isArray(value)) {\n    return contains(value, token.value);\n  } else if (typeof value === 'function') {\n    return value(token);\n  } else {\n    return token.value === value;\n  }\n};\n\nParserState.prototype.save = function () {\n  this.savedCurrent = this.current;\n  this.savedNextToken = this.nextToken;\n  this.tokens.save();\n};\n\nParserState.prototype.restore = function () {\n  this.tokens.restore();\n  this.current = this.savedCurrent;\n  this.nextToken = this.savedNextToken;\n};\n\nParserState.prototype.accept = function (type, value) {\n  if (this.nextToken.type === type && this.tokenMatches(this.nextToken, value)) {\n    this.next();\n    return true;\n  }\n  return false;\n};\n\nParserState.prototype.expect = function (type, value) {\n  if (!this.accept(type, value)) {\n    var coords = this.tokens.getCoordinates();\n    throw new Error('parse error [' + coords.line + ':' + coords.column + ']: Expected ' + (value || type));\n  }\n};\n\nParserState.prototype.parseAtom = function (instr) {\n  if (this.accept(TNAME)) {\n    instr.push(new Instruction(IVAR, this.current.value));\n  } else if (this.accept(TNUMBER)) {\n    instr.push(new Instruction(INUMBER, this.current.value));\n  } else if (this.accept(TSTRING)) {\n    instr.push(new Instruction(INUMBER, this.current.value));\n  } else if (this.accept(TPAREN, '(')) {\n    this.parseExpression(instr);\n    this.expect(TPAREN, ')');\n  } else {\n    throw new Error('unexpected ' + this.nextToken);\n  }\n};\n\nParserState.prototype.parseExpression = function (instr) {\n  this.parseConditionalExpression(instr);\n};\n\nParserState.prototype.parseConditionalExpression = function (instr) {\n  this.parseOrExpression(instr);\n  while (this.accept(TOP, '?')) {\n    var trueBranch = [];\n    var falseBranch = [];\n    this.parseConditionalExpression(trueBranch);\n    this.expect(TOP, ':');\n    this.parseConditionalExpression(falseBranch);\n    instr.push(new Instruction(IEXPR, trueBranch));\n    instr.push(new Instruction(IEXPR, falseBranch));\n    instr.push(ternaryInstruction('?'));\n  }\n};\n\nParserState.prototype.parseOrExpression = function (instr) {\n  this.parseAndExpression(instr);\n  while (this.accept(TOP, 'or')) {\n    this.parseAndExpression(instr);\n    instr.push(binaryInstruction('or'));\n  }\n};\n\nParserState.prototype.parseAndExpression = function (instr) {\n  this.parseComparison(instr);\n  while (this.accept(TOP, 'and')) {\n    this.parseComparison(instr);\n    instr.push(binaryInstruction('and'));\n  }\n};\n\nvar COMPARISON_OPERATORS = ['==', '!=', '<', '<=', '>=', '>', 'in'];\n\nParserState.prototype.parseComparison = function (instr) {\n  this.parseAddSub(instr);\n  while (this.accept(TOP, COMPARISON_OPERATORS)) {\n    var op = this.current;\n    this.parseAddSub(instr);\n    instr.push(binaryInstruction(op.value));\n  }\n};\n\nvar ADD_SUB_OPERATORS = ['+', '-', '||'];\n\nParserState.prototype.parseAddSub = function (instr) {\n  this.parseTerm(instr);\n  while (this.accept(TOP, ADD_SUB_OPERATORS)) {\n    var op = this.current;\n    this.parseTerm(instr);\n    instr.push(binaryInstruction(op.value));\n  }\n};\n\nvar TERM_OPERATORS = ['*', '/', '%'];\n\nParserState.prototype.parseTerm = function (instr) {\n  this.parseFactor(instr);\n  while (this.accept(TOP, TERM_OPERATORS)) {\n    var op = this.current;\n    this.parseFactor(instr);\n    instr.push(binaryInstruction(op.value));\n  }\n};\n\nParserState.prototype.parseFactor = function (instr) {\n  var unaryOps = this.tokens.unaryOps;\n  function isPrefixOperator(token) {\n    return token.value in unaryOps;\n  }\n\n  this.save();\n  if (this.accept(TOP, isPrefixOperator)) {\n    if ((this.current.value !== '-' && this.current.value !== '+' && this.nextToken.type === TPAREN && this.nextToken.value === '(')) {\n      this.restore();\n      this.parseExponential(instr);\n    } else {\n      var op = this.current;\n      this.parseFactor(instr);\n      instr.push(unaryInstruction(op.value));\n    }\n  } else {\n    this.parseExponential(instr);\n  }\n};\n\nParserState.prototype.parseExponential = function (instr) {\n  this.parsePostfixExpression(instr);\n  while (this.accept(TOP, '^')) {\n    this.parseFactor(instr);\n    instr.push(binaryInstruction('^'));\n  }\n};\n\nParserState.prototype.parsePostfixExpression = function (instr) {\n  this.parseFunctionCall(instr);\n  while (this.accept(TOP, '!')) {\n    instr.push(unaryInstruction('!'));\n  }\n};\n\nParserState.prototype.parseFunctionCall = function (instr) {\n  var unaryOps = this.tokens.unaryOps;\n  function isPrefixOperator(token) {\n    return token.value in unaryOps;\n  }\n\n  if (this.accept(TOP, isPrefixOperator)) {\n    var op = this.current;\n    this.parseAtom(instr);\n    instr.push(unaryInstruction(op.value));\n  } else {\n    this.parseMemberExpression(instr);\n    while (this.accept(TPAREN, '(')) {\n      if (this.accept(TPAREN, ')')) {\n        instr.push(new Instruction(IFUNCALL, 0));\n      } else {\n        var argCount = this.parseArgumentList(instr);\n        instr.push(new Instruction(IFUNCALL, argCount));\n      }\n    }\n  }\n};\n\nParserState.prototype.parseArgumentList = function (instr) {\n  var argCount = 0;\n\n  while (!this.accept(TPAREN, ')')) {\n    this.parseExpression(instr);\n    ++argCount;\n    while (this.accept(TCOMMA)) {\n      this.parseExpression(instr);\n      ++argCount;\n    }\n  }\n\n  return argCount;\n};\n\nParserState.prototype.parseMemberExpression = function (instr) {\n  this.parseAtom(instr);\n  while (this.accept(TOP, '.')) {\n    if (!this.allowMemberAccess) {\n      throw new Error('unexpected \".\", member access is not permitted');\n    }\n\n    this.expect(TNAME);\n    instr.push(new Instruction(IMEMBER, this.current.value));\n  }\n};\n\nfunction add(a, b) {\n  return Number(a) + Number(b);\n}\n\nfunction sub(a, b) {\n  return a - b;\n}\n\nfunction mul(a, b) {\n  return a * b;\n}\n\nfunction div(a, b) {\n  return a / b;\n}\n\nfunction mod(a, b) {\n  return a % b;\n}\n\nfunction concat(a, b) {\n  return '' + a + b;\n}\n\nfunction equal(a, b) {\n  return a === b;\n}\n\nfunction notEqual(a, b) {\n  return a !== b;\n}\n\nfunction greaterThan(a, b) {\n  return a > b;\n}\n\nfunction lessThan(a, b) {\n  return a < b;\n}\n\nfunction greaterThanEqual(a, b) {\n  return a >= b;\n}\n\nfunction lessThanEqual(a, b) {\n  return a <= b;\n}\n\nfunction andOperator(a, b) {\n  return Boolean(a && b);\n}\n\nfunction orOperator(a, b) {\n  return Boolean(a || b);\n}\n\nfunction inOperator(a, b) {\n  return contains(b, a);\n}\n\nfunction sinh(a) {\n  return ((Math.exp(a) - Math.exp(-a)) / 2);\n}\n\nfunction cosh(a) {\n  return ((Math.exp(a) + Math.exp(-a)) / 2);\n}\n\nfunction tanh(a) {\n  if (a === Infinity) return 1;\n  if (a === -Infinity) return -1;\n  return (Math.exp(a) - Math.exp(-a)) / (Math.exp(a) + Math.exp(-a));\n}\n\nfunction asinh(a) {\n  if (a === -Infinity) return a;\n  return Math.log(a + Math.sqrt((a * a) + 1));\n}\n\nfunction acosh(a) {\n  return Math.log(a + Math.sqrt((a * a) - 1));\n}\n\nfunction atanh(a) {\n  return (Math.log((1 + a) / (1 - a)) / 2);\n}\n\nfunction log10(a) {\n  return Math.log(a) * Math.LOG10E;\n}\n\nfunction neg(a) {\n  return -a;\n}\n\nfunction not(a) {\n  return !a;\n}\n\nfunction trunc(a) {\n  return a < 0 ? Math.ceil(a) : Math.floor(a);\n}\n\nfunction random(a) {\n  return Math.random() * (a || 1);\n}\n\nfunction factorial(a) { // a!\n  return gamma(a + 1);\n}\n\nfunction isInteger(value) {\n  return isFinite(value) && (value === Math.round(value));\n}\n\nvar GAMMA_G = 4.7421875;\nvar GAMMA_P = [\n  0.99999999999999709182,\n  57.156235665862923517, -59.597960355475491248,\n  14.136097974741747174, -0.49191381609762019978,\n  0.33994649984811888699e-4,\n  0.46523628927048575665e-4, -0.98374475304879564677e-4,\n  0.15808870322491248884e-3, -0.21026444172410488319e-3,\n  0.21743961811521264320e-3, -0.16431810653676389022e-3,\n  0.84418223983852743293e-4, -0.26190838401581408670e-4,\n  0.36899182659531622704e-5\n];\n\n// Gamma function from math.js\nfunction gamma(n) {\n  var t, x;\n\n  if (isInteger(n)) {\n    if (n <= 0) {\n      return isFinite(n) ? Infinity : NaN;\n    }\n\n    if (n > 171) {\n      return Infinity; // Will overflow\n    }\n\n    var value = n - 2;\n    var res = n - 1;\n    while (value > 1) {\n      res *= value;\n      value--;\n    }\n\n    if (res === 0) {\n      res = 1; // 0! is per definition 1\n    }\n\n    return res;\n  }\n\n  if (n < 0.5) {\n    return Math.PI / (Math.sin(Math.PI * n) * gamma(1 - n));\n  }\n\n  if (n >= 171.35) {\n    return Infinity; // will overflow\n  }\n\n  if (n > 85.0) { // Extended Stirling Approx\n    var twoN = n * n;\n    var threeN = twoN * n;\n    var fourN = threeN * n;\n    var fiveN = fourN * n;\n    return Math.sqrt(2 * Math.PI / n) * Math.pow((n / Math.E), n) *\n      (1 + (1 / (12 * n)) + (1 / (288 * twoN)) - (139 / (51840 * threeN)) -\n      (571 / (2488320 * fourN)) + (163879 / (209018880 * fiveN)) +\n      (5246819 / (75246796800 * fiveN * n)));\n  }\n\n  --n;\n  x = GAMMA_P[0];\n  for (var i = 1; i < GAMMA_P.length; ++i) {\n    x += GAMMA_P[i] / (n + i);\n  }\n\n  t = n + GAMMA_G + 0.5;\n  return Math.sqrt(2 * Math.PI) * Math.pow(t, n + 0.5) * Math.exp(-t) * x;\n}\n\nfunction stringLength(s) {\n  return String(s).length;\n}\n\nfunction hypot() {\n  var sum = 0;\n  var larg = 0;\n  for (var i = 0; i < arguments.length; i++) {\n    var arg = Math.abs(arguments[i]);\n    var div;\n    if (larg < arg) {\n      div = larg / arg;\n      sum = (sum * div * div) + 1;\n      larg = arg;\n    } else if (arg > 0) {\n      div = arg / larg;\n      sum += div * div;\n    } else {\n      sum += arg;\n    }\n  }\n  return larg === Infinity ? Infinity : larg * Math.sqrt(sum);\n}\n\nfunction condition(cond, yep, nope) {\n  return cond ? yep : nope;\n}\n\nfunction Parser(options) {\n  this.options = options || {};\n  this.unaryOps = {\n    sin: Math.sin,\n    cos: Math.cos,\n    tan: Math.tan,\n    asin: Math.asin,\n    acos: Math.acos,\n    atan: Math.atan,\n    sinh: Math.sinh || sinh,\n    cosh: Math.cosh || cosh,\n    tanh: Math.tanh || tanh,\n    asinh: Math.asinh || asinh,\n    acosh: Math.acosh || acosh,\n    atanh: Math.atanh || atanh,\n    sqrt: Math.sqrt,\n    log: Math.log,\n    ln: Math.log,\n    lg: Math.log10 || log10,\n    log10: Math.log10 || log10,\n    abs: Math.abs,\n    ceil: Math.ceil,\n    floor: Math.floor,\n    round: Math.round,\n    trunc: Math.trunc || trunc,\n    '-': neg,\n    '+': Number,\n    exp: Math.exp,\n    not: not,\n    length: stringLength,\n    '!': factorial\n  };\n\n  this.binaryOps = {\n    '+': add,\n    '-': sub,\n    '*': mul,\n    '/': div,\n    '%': mod,\n    '^': Math.pow,\n    '||': concat,\n    '==': equal,\n    '!=': notEqual,\n    '>': greaterThan,\n    '<': lessThan,\n    '>=': greaterThanEqual,\n    '<=': lessThanEqual,\n    and: andOperator,\n    or: orOperator,\n    'in': inOperator\n  };\n\n  this.ternaryOps = {\n    '?': condition\n  };\n\n  this.functions = {\n    random: random,\n    fac: factorial,\n    min: Math.min,\n    max: Math.max,\n    hypot: Math.hypot || hypot,\n    pyt: Math.hypot || hypot, // backward compat\n    pow: Math.pow,\n    atan2: Math.atan2,\n    'if': condition,\n    gamma: gamma\n  };\n\n  this.consts = {\n    E: Math.E,\n    PI: Math.PI,\n    'true': true,\n    'false': false\n  };\n}\n\nParser.prototype.parse = function (expr) {\n  var instr = [];\n  var parserState = new ParserState(\n    this,\n    new TokenStream(this, expr),\n    { allowMemberAccess: this.options.allowMemberAccess }\n  );\n\n  parserState.parseExpression(instr);\n  parserState.expect(TEOF, 'EOF');\n\n  return new Expression(instr, this);\n};\n\nParser.prototype.evaluate = function (expr, variables) {\n  return this.parse(expr).evaluate(variables);\n};\n\nvar sharedParser = new Parser();\n\nParser.parse = function (expr) {\n  return sharedParser.parse(expr);\n};\n\nParser.evaluate = function (expr, variables) {\n  return sharedParser.parse(expr).evaluate(variables);\n};\n\n/*!\n Based on ndef.parser, by Raphael Graf(r@undefined.ch)\n http://www.undefined.ch/mparser/index.html\n\n Ported to JavaScript and modified by Matthew Crumley (email@matthewcrumley.com, http://silentmatt.com/)\n\n You are free to use and modify this code in anyway you find useful. Please leave this comment in the code\n to acknowledge its original source. If you feel like it, I enjoy hearing about projects that use my code,\n but don't feel like you have to let me know or ask permission.\n*/\n\nvar index = {\n  Parser: Parser,\n  Expression: Expression\n};\n\nreturn index;\n\n})));\n\n},{}],4:[function(require,module,exports){\n/* FileSaver.js\n * A saveAs() FileSaver implementation.\n * 1.3.2\n * 2016-06-16 18:25:19\n *\n * By Eli Grey, http://eligrey.com\n * License: MIT\n *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\n\nvar saveAs = saveAs || (function(view) {\n\t\"use strict\";\n\t// IE <10 is explicitly unsupported\n\tif (typeof view === \"undefined\" || typeof navigator !== \"undefined\" && /MSIE [1-9]\\./.test(navigator.userAgent)) {\n\t\treturn;\n\t}\n\tvar\n\t\t  doc = view.document\n\t\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\n\t\t, get_URL = function() {\n\t\t\treturn view.URL || view.webkitURL || view;\n\t\t}\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\n\t\t, can_use_save_link = \"download\" in save_link\n\t\t, click = function(node) {\n\t\t\tvar event = new MouseEvent(\"click\");\n\t\t\tnode.dispatchEvent(event);\n\t\t}\n\t\t, is_safari = /constructor/i.test(view.HTMLElement) || view.safari\n\t\t, is_chrome_ios =/CriOS\\/[\\d]+/.test(navigator.userAgent)\n\t\t, throw_outside = function(ex) {\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\n\t\t\t\tthrow ex;\n\t\t\t}, 0);\n\t\t}\n\t\t, force_saveable_type = \"application/octet-stream\"\n\t\t// the Blob API is fundamentally broken as there is no \"downloadfinished\" event to subscribe to\n\t\t, arbitrary_revoke_timeout = 1000 * 40 // in ms\n\t\t, revoke = function(file) {\n\t\t\tvar revoker = function() {\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\n\t\t\t\t\tget_URL().revokeObjectURL(file);\n\t\t\t\t} else { // file is a File\n\t\t\t\t\tfile.remove();\n\t\t\t\t}\n\t\t\t};\n\t\t\tsetTimeout(revoker, arbitrary_revoke_timeout);\n\t\t}\n\t\t, dispatch = function(filesaver, event_types, event) {\n\t\t\tevent_types = [].concat(event_types);\n\t\t\tvar i = event_types.length;\n\t\t\twhile (i--) {\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\n\t\t\t\tif (typeof listener === \"function\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\tthrow_outside(ex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t, auto_bom = function(blob) {\n\t\t\t// prepend BOM for UTF-8 XML and text/* types (including HTML)\n\t\t\t// note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n\t\t\tif (/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n\t\t\t\treturn new Blob([String.fromCharCode(0xFEFF), blob], {type: blob.type});\n\t\t\t}\n\t\t\treturn blob;\n\t\t}\n\t\t, FileSaver = function(blob, name, no_auto_bom) {\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\t// First try a.download, then web filesystem, then object URLs\n\t\t\tvar\n\t\t\t\t  filesaver = this\n\t\t\t\t, type = blob.type\n\t\t\t\t, force = type === force_saveable_type\n\t\t\t\t, object_url\n\t\t\t\t, dispatch_all = function() {\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n\t\t\t\t}\n\t\t\t\t// on any filesys errors revert to saving with object URLs\n\t\t\t\t, fs_error = function() {\n\t\t\t\t\tif ((is_chrome_ios || (force && is_safari)) && view.FileReader) {\n\t\t\t\t\t\t// Safari doesn't allow downloading of blob urls\n\t\t\t\t\t\tvar reader = new FileReader();\n\t\t\t\t\t\treader.onloadend = function() {\n\t\t\t\t\t\t\tvar url = is_chrome_ios ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');\n\t\t\t\t\t\t\tvar popup = view.open(url, '_blank');\n\t\t\t\t\t\t\tif(!popup) view.location.href = url;\n\t\t\t\t\t\t\turl=undefined; // release reference before dispatching\n\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\tdispatch_all();\n\t\t\t\t\t\t};\n\t\t\t\t\t\treader.readAsDataURL(blob);\n\t\t\t\t\t\tfilesaver.readyState = filesaver.INIT;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// don't create more object URLs than needed\n\t\t\t\t\tif (!object_url) {\n\t\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t\t}\n\t\t\t\t\tif (force) {\n\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar opened = view.open(object_url, \"_blank\");\n\t\t\t\t\t\tif (!opened) {\n\t\t\t\t\t\t\t// Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html\n\t\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t}\n\t\t\t;\n\t\t\tfilesaver.readyState = filesaver.INIT;\n\n\t\t\tif (can_use_save_link) {\n\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tsave_link.href = object_url;\n\t\t\t\t\tsave_link.download = name;\n\t\t\t\t\tclick(save_link);\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfs_error();\n\t\t}\n\t\t, FS_proto = FileSaver.prototype\n\t\t, saveAs = function(blob, name, no_auto_bom) {\n\t\t\treturn new FileSaver(blob, name || blob.name || \"download\", no_auto_bom);\n\t\t}\n\t;\n\t// IE 10+ (native saveAs)\n\tif (typeof navigator !== \"undefined\" && navigator.msSaveOrOpenBlob) {\n\t\treturn function(blob, name, no_auto_bom) {\n\t\t\tname = name || blob.name || \"download\";\n\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\treturn navigator.msSaveOrOpenBlob(blob, name);\n\t\t};\n\t}\n\n\tFS_proto.abort = function(){};\n\tFS_proto.readyState = FS_proto.INIT = 0;\n\tFS_proto.WRITING = 1;\n\tFS_proto.DONE = 2;\n\n\tFS_proto.error =\n\tFS_proto.onwritestart =\n\tFS_proto.onprogress =\n\tFS_proto.onwrite =\n\tFS_proto.onabort =\n\tFS_proto.onerror =\n\tFS_proto.onwriteend =\n\t\tnull;\n\n\treturn saveAs;\n}(\n\t   typeof self !== \"undefined\" && self\n\t|| typeof window !== \"undefined\" && window\n\t|| this.content\n));\n// `self` is undefined in Firefox for Android content script context\n// while `this` is nsIContentFrameMessageManager\n// with an attribute `content` that corresponds to the window\n\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports.saveAs = saveAs;\n} else if ((typeof define !== \"undefined\" && define !== null) && (define.amd !== null)) {\n  define(\"FileSaver.js\", function() {\n    return saveAs;\n  });\n}\n\n},{}],5:[function(require,module,exports){\n// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\n// This work is free. You can redistribute it and/or modify it\n// under the terms of the WTFPL, Version 2\n// For more information see LICENSE.txt or http://www.wtfpl.net/\n//\n// For more information, the home page:\n// http://pieroxy.net/blog/pages/lz-string/testing.html\n//\n// LZ-based compression algorithm, version 1.4.4\nvar LZString = (function() {\n\n// private property\nvar f = String.fromCharCode;\nvar keyStrBase64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\nvar keyStrUriSafe = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$\";\nvar baseReverseDic = {};\n\nfunction getBaseValue(alphabet, character) {\n  if (!baseReverseDic[alphabet]) {\n    baseReverseDic[alphabet] = {};\n    for (var i=0 ; i<alphabet.length ; i++) {\n      baseReverseDic[alphabet][alphabet.charAt(i)] = i;\n    }\n  }\n  return baseReverseDic[alphabet][character];\n}\n\nvar LZString = {\n  compressToBase64 : function (input) {\n    if (input == null) return \"\";\n    var res = LZString._compress(input, 6, function(a){return keyStrBase64.charAt(a);});\n    switch (res.length % 4) { // To produce valid Base64\n    default: // When could this happen ?\n    case 0 : return res;\n    case 1 : return res+\"===\";\n    case 2 : return res+\"==\";\n    case 3 : return res+\"=\";\n    }\n  },\n\n  decompressFromBase64 : function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrBase64, input.charAt(index)); });\n  },\n\n  compressToUTF16 : function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 15, function(a){return f(a+32);}) + \" \";\n  },\n\n  decompressFromUTF16: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 16384, function(index) { return compressed.charCodeAt(index) - 32; });\n  },\n\n  //compress into uint8array (UCS-2 big endian format)\n  compressToUint8Array: function (uncompressed) {\n    var compressed = LZString.compress(uncompressed);\n    var buf=new Uint8Array(compressed.length*2); // 2 bytes per character\n\n    for (var i=0, TotalLen=compressed.length; i<TotalLen; i++) {\n      var current_value = compressed.charCodeAt(i);\n      buf[i*2] = current_value >>> 8;\n      buf[i*2+1] = current_value % 256;\n    }\n    return buf;\n  },\n\n  //decompress from uint8array (UCS-2 big endian format)\n  decompressFromUint8Array:function (compressed) {\n    if (compressed===null || compressed===undefined){\n        return LZString.decompress(compressed);\n    } else {\n        var buf=new Array(compressed.length/2); // 2 bytes per character\n        for (var i=0, TotalLen=buf.length; i<TotalLen; i++) {\n          buf[i]=compressed[i*2]*256+compressed[i*2+1];\n        }\n\n        var result = [];\n        buf.forEach(function (c) {\n          result.push(f(c));\n        });\n        return LZString.decompress(result.join(''));\n\n    }\n\n  },\n\n\n  //compress into a string that is already URI encoded\n  compressToEncodedURIComponent: function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 6, function(a){return keyStrUriSafe.charAt(a);});\n  },\n\n  //decompress from an output of compressToEncodedURIComponent\n  decompressFromEncodedURIComponent:function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    input = input.replace(/ /g, \"+\");\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrUriSafe, input.charAt(index)); });\n  },\n\n  compress: function (uncompressed) {\n    return LZString._compress(uncompressed, 16, function(a){return f(a);});\n  },\n  _compress: function (uncompressed, bitsPerChar, getCharFromInt) {\n    if (uncompressed == null) return \"\";\n    var i, value,\n        context_dictionary= {},\n        context_dictionaryToCreate= {},\n        context_c=\"\",\n        context_wc=\"\",\n        context_w=\"\",\n        context_enlargeIn= 2, // Compensate for the first entry which should not count\n        context_dictSize= 3,\n        context_numBits= 2,\n        context_data=[],\n        context_data_val=0,\n        context_data_position=0,\n        ii;\n\n    for (ii = 0; ii < uncompressed.length; ii += 1) {\n      context_c = uncompressed.charAt(ii);\n      if (!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)) {\n        context_dictionary[context_c] = context_dictSize++;\n        context_dictionaryToCreate[context_c] = true;\n      }\n\n      context_wc = context_w + context_c;\n      if (Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)) {\n        context_w = context_wc;\n      } else {\n        if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n          if (context_w.charCodeAt(0)<256) {\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<8 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          } else {\n            value = 1;\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1) | value;\n              if (context_data_position ==bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = 0;\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<16 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          }\n          context_enlargeIn--;\n          if (context_enlargeIn == 0) {\n            context_enlargeIn = Math.pow(2, context_numBits);\n            context_numBits++;\n          }\n          delete context_dictionaryToCreate[context_w];\n        } else {\n          value = context_dictionary[context_w];\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n\n\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        // Add wc to the dictionary.\n        context_dictionary[context_wc] = context_dictSize++;\n        context_w = String(context_c);\n      }\n    }\n\n    // Output the code for w.\n    if (context_w !== \"\") {\n      if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n        if (context_w.charCodeAt(0)<256) {\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<8 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        } else {\n          value = 1;\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | value;\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = 0;\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<16 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        delete context_dictionaryToCreate[context_w];\n      } else {\n        value = context_dictionary[context_w];\n        for (i=0 ; i<context_numBits ; i++) {\n          context_data_val = (context_data_val << 1) | (value&1);\n          if (context_data_position == bitsPerChar-1) {\n            context_data_position = 0;\n            context_data.push(getCharFromInt(context_data_val));\n            context_data_val = 0;\n          } else {\n            context_data_position++;\n          }\n          value = value >> 1;\n        }\n\n\n      }\n      context_enlargeIn--;\n      if (context_enlargeIn == 0) {\n        context_enlargeIn = Math.pow(2, context_numBits);\n        context_numBits++;\n      }\n    }\n\n    // Mark the end of the stream\n    value = 2;\n    for (i=0 ; i<context_numBits ; i++) {\n      context_data_val = (context_data_val << 1) | (value&1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data_position = 0;\n        context_data.push(getCharFromInt(context_data_val));\n        context_data_val = 0;\n      } else {\n        context_data_position++;\n      }\n      value = value >> 1;\n    }\n\n    // Flush the last char\n    while (true) {\n      context_data_val = (context_data_val << 1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data.push(getCharFromInt(context_data_val));\n        break;\n      }\n      else context_data_position++;\n    }\n    return context_data.join('');\n  },\n\n  decompress: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 32768, function(index) { return compressed.charCodeAt(index); });\n  },\n\n  _decompress: function (length, resetValue, getNextValue) {\n    var dictionary = [],\n        next,\n        enlargeIn = 4,\n        dictSize = 4,\n        numBits = 3,\n        entry = \"\",\n        result = [],\n        i,\n        w,\n        bits, resb, maxpower, power,\n        c,\n        data = {val:getNextValue(0), position:resetValue, index:1};\n\n    for (i = 0; i < 3; i += 1) {\n      dictionary[i] = i;\n    }\n\n    bits = 0;\n    maxpower = Math.pow(2,2);\n    power=1;\n    while (power!=maxpower) {\n      resb = data.val & data.position;\n      data.position >>= 1;\n      if (data.position == 0) {\n        data.position = resetValue;\n        data.val = getNextValue(data.index++);\n      }\n      bits |= (resb>0 ? 1 : 0) * power;\n      power <<= 1;\n    }\n\n    switch (next = bits) {\n      case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 2:\n        return \"\";\n    }\n    dictionary[3] = c;\n    w = c;\n    result.push(c);\n    while (true) {\n      if (data.index > length) {\n        return \"\";\n      }\n\n      bits = 0;\n      maxpower = Math.pow(2,numBits);\n      power=1;\n      while (power!=maxpower) {\n        resb = data.val & data.position;\n        data.position >>= 1;\n        if (data.position == 0) {\n          data.position = resetValue;\n          data.val = getNextValue(data.index++);\n        }\n        bits |= (resb>0 ? 1 : 0) * power;\n        power <<= 1;\n      }\n\n      switch (c = bits) {\n        case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 2:\n          return result.join('');\n      }\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n      if (dictionary[c]) {\n        entry = dictionary[c];\n      } else {\n        if (c === dictSize) {\n          entry = w + w.charAt(0);\n        } else {\n          return null;\n        }\n      }\n      result.push(entry);\n\n      // Add w+entry[0] to the dictionary.\n      dictionary[dictSize++] = w + entry.charAt(0);\n      enlargeIn--;\n\n      w = entry;\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n    }\n  }\n};\n  return LZString;\n})();\n\nif (typeof define === 'function' && define.amd) {\n  define(function () { return LZString; });\n} else if( typeof module !== 'undefined' && module != null ) {\n  module.exports = LZString\n}\n\n},{}],6:[function(require,module,exports){\n//! moment.js\n//! version : 2.18.1\n//! authors : Tim Wood, Iskren Chernev, Moment.js contributors\n//! license : MIT\n//! momentjs.com\n\n;(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    global.moment = factory()\n}(this, (function () { 'use strict';\n\nvar hookCallback;\n\nfunction hooks () {\n    return hookCallback.apply(null, arguments);\n}\n\n// This is done to register the method called with moment()\n// without creating circular dependencies.\nfunction setHookCallback (callback) {\n    hookCallback = callback;\n}\n\nfunction isArray(input) {\n    return input instanceof Array || Object.prototype.toString.call(input) === '[object Array]';\n}\n\nfunction isObject(input) {\n    // IE8 will treat undefined and null as object if it wasn't for\n    // input != null\n    return input != null && Object.prototype.toString.call(input) === '[object Object]';\n}\n\nfunction isObjectEmpty(obj) {\n    var k;\n    for (k in obj) {\n        // even if its not own property I'd still call it non-empty\n        return false;\n    }\n    return true;\n}\n\nfunction isUndefined(input) {\n    return input === void 0;\n}\n\nfunction isNumber(input) {\n    return typeof input === 'number' || Object.prototype.toString.call(input) === '[object Number]';\n}\n\nfunction isDate(input) {\n    return input instanceof Date || Object.prototype.toString.call(input) === '[object Date]';\n}\n\nfunction map(arr, fn) {\n    var res = [], i;\n    for (i = 0; i < arr.length; ++i) {\n        res.push(fn(arr[i], i));\n    }\n    return res;\n}\n\nfunction hasOwnProp(a, b) {\n    return Object.prototype.hasOwnProperty.call(a, b);\n}\n\nfunction extend(a, b) {\n    for (var i in b) {\n        if (hasOwnProp(b, i)) {\n            a[i] = b[i];\n        }\n    }\n\n    if (hasOwnProp(b, 'toString')) {\n        a.toString = b.toString;\n    }\n\n    if (hasOwnProp(b, 'valueOf')) {\n        a.valueOf = b.valueOf;\n    }\n\n    return a;\n}\n\nfunction createUTC (input, format, locale, strict) {\n    return createLocalOrUTC(input, format, locale, strict, true).utc();\n}\n\nfunction defaultParsingFlags() {\n    // We need to deep clone this object.\n    return {\n        empty           : false,\n        unusedTokens    : [],\n        unusedInput     : [],\n        overflow        : -2,\n        charsLeftOver   : 0,\n        nullInput       : false,\n        invalidMonth    : null,\n        invalidFormat   : false,\n        userInvalidated : false,\n        iso             : false,\n        parsedDateParts : [],\n        meridiem        : null,\n        rfc2822         : false,\n        weekdayMismatch : false\n    };\n}\n\nfunction getParsingFlags(m) {\n    if (m._pf == null) {\n        m._pf = defaultParsingFlags();\n    }\n    return m._pf;\n}\n\nvar some;\nif (Array.prototype.some) {\n    some = Array.prototype.some;\n} else {\n    some = function (fun) {\n        var t = Object(this);\n        var len = t.length >>> 0;\n\n        for (var i = 0; i < len; i++) {\n            if (i in t && fun.call(this, t[i], i, t)) {\n                return true;\n            }\n        }\n\n        return false;\n    };\n}\n\nvar some$1 = some;\n\nfunction isValid(m) {\n    if (m._isValid == null) {\n        var flags = getParsingFlags(m);\n        var parsedParts = some$1.call(flags.parsedDateParts, function (i) {\n            return i != null;\n        });\n        var isNowValid = !isNaN(m._d.getTime()) &&\n            flags.overflow < 0 &&\n            !flags.empty &&\n            !flags.invalidMonth &&\n            !flags.invalidWeekday &&\n            !flags.nullInput &&\n            !flags.invalidFormat &&\n            !flags.userInvalidated &&\n            (!flags.meridiem || (flags.meridiem && parsedParts));\n\n        if (m._strict) {\n            isNowValid = isNowValid &&\n                flags.charsLeftOver === 0 &&\n                flags.unusedTokens.length === 0 &&\n                flags.bigHour === undefined;\n        }\n\n        if (Object.isFrozen == null || !Object.isFrozen(m)) {\n            m._isValid = isNowValid;\n        }\n        else {\n            return isNowValid;\n        }\n    }\n    return m._isValid;\n}\n\nfunction createInvalid (flags) {\n    var m = createUTC(NaN);\n    if (flags != null) {\n        extend(getParsingFlags(m), flags);\n    }\n    else {\n        getParsingFlags(m).userInvalidated = true;\n    }\n\n    return m;\n}\n\n// Plugins that add properties should also add the key here (null value),\n// so we can properly clone ourselves.\nvar momentProperties = hooks.momentProperties = [];\n\nfunction copyConfig(to, from) {\n    var i, prop, val;\n\n    if (!isUndefined(from._isAMomentObject)) {\n        to._isAMomentObject = from._isAMomentObject;\n    }\n    if (!isUndefined(from._i)) {\n        to._i = from._i;\n    }\n    if (!isUndefined(from._f)) {\n        to._f = from._f;\n    }\n    if (!isUndefined(from._l)) {\n        to._l = from._l;\n    }\n    if (!isUndefined(from._strict)) {\n        to._strict = from._strict;\n    }\n    if (!isUndefined(from._tzm)) {\n        to._tzm = from._tzm;\n    }\n    if (!isUndefined(from._isUTC)) {\n        to._isUTC = from._isUTC;\n    }\n    if (!isUndefined(from._offset)) {\n        to._offset = from._offset;\n    }\n    if (!isUndefined(from._pf)) {\n        to._pf = getParsingFlags(from);\n    }\n    if (!isUndefined(from._locale)) {\n        to._locale = from._locale;\n    }\n\n    if (momentProperties.length > 0) {\n        for (i = 0; i < momentProperties.length; i++) {\n            prop = momentProperties[i];\n            val = from[prop];\n            if (!isUndefined(val)) {\n                to[prop] = val;\n            }\n        }\n    }\n\n    return to;\n}\n\nvar updateInProgress = false;\n\n// Moment prototype object\nfunction Moment(config) {\n    copyConfig(this, config);\n    this._d = new Date(config._d != null ? config._d.getTime() : NaN);\n    if (!this.isValid()) {\n        this._d = new Date(NaN);\n    }\n    // Prevent infinite loop in case updateOffset creates new moment\n    // objects.\n    if (updateInProgress === false) {\n        updateInProgress = true;\n        hooks.updateOffset(this);\n        updateInProgress = false;\n    }\n}\n\nfunction isMoment (obj) {\n    return obj instanceof Moment || (obj != null && obj._isAMomentObject != null);\n}\n\nfunction absFloor (number) {\n    if (number < 0) {\n        // -0 -> 0\n        return Math.ceil(number) || 0;\n    } else {\n        return Math.floor(number);\n    }\n}\n\nfunction toInt(argumentForCoercion) {\n    var coercedNumber = +argumentForCoercion,\n        value = 0;\n\n    if (coercedNumber !== 0 && isFinite(coercedNumber)) {\n        value = absFloor(coercedNumber);\n    }\n\n    return value;\n}\n\n// compare two arrays, return the number of differences\nfunction compareArrays(array1, array2, dontConvert) {\n    var len = Math.min(array1.length, array2.length),\n        lengthDiff = Math.abs(array1.length - array2.length),\n        diffs = 0,\n        i;\n    for (i = 0; i < len; i++) {\n        if ((dontConvert && array1[i] !== array2[i]) ||\n            (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))) {\n            diffs++;\n        }\n    }\n    return diffs + lengthDiff;\n}\n\nfunction warn(msg) {\n    if (hooks.suppressDeprecationWarnings === false &&\n            (typeof console !==  'undefined') && console.warn) {\n        console.warn('Deprecation warning: ' + msg);\n    }\n}\n\nfunction deprecate(msg, fn) {\n    var firstTime = true;\n\n    return extend(function () {\n        if (hooks.deprecationHandler != null) {\n            hooks.deprecationHandler(null, msg);\n        }\n        if (firstTime) {\n            var args = [];\n            var arg;\n            for (var i = 0; i < arguments.length; i++) {\n                arg = '';\n                if (typeof arguments[i] === 'object') {\n                    arg += '\\n[' + i + '] ';\n                    for (var key in arguments[0]) {\n                        arg += key + ': ' + arguments[0][key] + ', ';\n                    }\n                    arg = arg.slice(0, -2); // Remove trailing comma and space\n                } else {\n                    arg = arguments[i];\n                }\n                args.push(arg);\n            }\n            warn(msg + '\\nArguments: ' + Array.prototype.slice.call(args).join('') + '\\n' + (new Error()).stack);\n            firstTime = false;\n        }\n        return fn.apply(this, arguments);\n    }, fn);\n}\n\nvar deprecations = {};\n\nfunction deprecateSimple(name, msg) {\n    if (hooks.deprecationHandler != null) {\n        hooks.deprecationHandler(name, msg);\n    }\n    if (!deprecations[name]) {\n        warn(msg);\n        deprecations[name] = true;\n    }\n}\n\nhooks.suppressDeprecationWarnings = false;\nhooks.deprecationHandler = null;\n\nfunction isFunction(input) {\n    return input instanceof Function || Object.prototype.toString.call(input) === '[object Function]';\n}\n\nfunction set (config) {\n    var prop, i;\n    for (i in config) {\n        prop = config[i];\n        if (isFunction(prop)) {\n            this[i] = prop;\n        } else {\n            this['_' + i] = prop;\n        }\n    }\n    this._config = config;\n    // Lenient ordinal parsing accepts just a number in addition to\n    // number + (possibly) stuff coming from _dayOfMonthOrdinalParse.\n    // TODO: Remove \"ordinalParse\" fallback in next major release.\n    this._dayOfMonthOrdinalParseLenient = new RegExp(\n        (this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) +\n            '|' + (/\\d{1,2}/).source);\n}\n\nfunction mergeConfigs(parentConfig, childConfig) {\n    var res = extend({}, parentConfig), prop;\n    for (prop in childConfig) {\n        if (hasOwnProp(childConfig, prop)) {\n            if (isObject(parentConfig[prop]) && isObject(childConfig[prop])) {\n                res[prop] = {};\n                extend(res[prop], parentConfig[prop]);\n                extend(res[prop], childConfig[prop]);\n            } else if (childConfig[prop] != null) {\n                res[prop] = childConfig[prop];\n            } else {\n                delete res[prop];\n            }\n        }\n    }\n    for (prop in parentConfig) {\n        if (hasOwnProp(parentConfig, prop) &&\n                !hasOwnProp(childConfig, prop) &&\n                isObject(parentConfig[prop])) {\n            // make sure changes to properties don't modify parent config\n            res[prop] = extend({}, res[prop]);\n        }\n    }\n    return res;\n}\n\nfunction Locale(config) {\n    if (config != null) {\n        this.set(config);\n    }\n}\n\nvar keys;\n\nif (Object.keys) {\n    keys = Object.keys;\n} else {\n    keys = function (obj) {\n        var i, res = [];\n        for (i in obj) {\n            if (hasOwnProp(obj, i)) {\n                res.push(i);\n            }\n        }\n        return res;\n    };\n}\n\nvar keys$1 = keys;\n\nvar defaultCalendar = {\n    sameDay : '[Today at] LT',\n    nextDay : '[Tomorrow at] LT',\n    nextWeek : 'dddd [at] LT',\n    lastDay : '[Yesterday at] LT',\n    lastWeek : '[Last] dddd [at] LT',\n    sameElse : 'L'\n};\n\nfunction calendar (key, mom, now) {\n    var output = this._calendar[key] || this._calendar['sameElse'];\n    return isFunction(output) ? output.call(mom, now) : output;\n}\n\nvar defaultLongDateFormat = {\n    LTS  : 'h:mm:ss A',\n    LT   : 'h:mm A',\n    L    : 'MM/DD/YYYY',\n    LL   : 'MMMM D, YYYY',\n    LLL  : 'MMMM D, YYYY h:mm A',\n    LLLL : 'dddd, MMMM D, YYYY h:mm A'\n};\n\nfunction longDateFormat (key) {\n    var format = this._longDateFormat[key],\n        formatUpper = this._longDateFormat[key.toUpperCase()];\n\n    if (format || !formatUpper) {\n        return format;\n    }\n\n    this._longDateFormat[key] = formatUpper.replace(/MMMM|MM|DD|dddd/g, function (val) {\n        return val.slice(1);\n    });\n\n    return this._longDateFormat[key];\n}\n\nvar defaultInvalidDate = 'Invalid date';\n\nfunction invalidDate () {\n    return this._invalidDate;\n}\n\nvar defaultOrdinal = '%d';\nvar defaultDayOfMonthOrdinalParse = /\\d{1,2}/;\n\nfunction ordinal (number) {\n    return this._ordinal.replace('%d', number);\n}\n\nvar defaultRelativeTime = {\n    future : 'in %s',\n    past   : '%s ago',\n    s  : 'a few seconds',\n    ss : '%d seconds',\n    m  : 'a minute',\n    mm : '%d minutes',\n    h  : 'an hour',\n    hh : '%d hours',\n    d  : 'a day',\n    dd : '%d days',\n    M  : 'a month',\n    MM : '%d months',\n    y  : 'a year',\n    yy : '%d years'\n};\n\nfunction relativeTime (number, withoutSuffix, string, isFuture) {\n    var output = this._relativeTime[string];\n    return (isFunction(output)) ?\n        output(number, withoutSuffix, string, isFuture) :\n        output.replace(/%d/i, number);\n}\n\nfunction pastFuture (diff, output) {\n    var format = this._relativeTime[diff > 0 ? 'future' : 'past'];\n    return isFunction(format) ? format(output) : format.replace(/%s/i, output);\n}\n\nvar aliases = {};\n\nfunction addUnitAlias (unit, shorthand) {\n    var lowerCase = unit.toLowerCase();\n    aliases[lowerCase] = aliases[lowerCase + 's'] = aliases[shorthand] = unit;\n}\n\nfunction normalizeUnits(units) {\n    return typeof units === 'string' ? aliases[units] || aliases[units.toLowerCase()] : undefined;\n}\n\nfunction normalizeObjectUnits(inputObject) {\n    var normalizedInput = {},\n        normalizedProp,\n        prop;\n\n    for (prop in inputObject) {\n        if (hasOwnProp(inputObject, prop)) {\n            normalizedProp = normalizeUnits(prop);\n            if (normalizedProp) {\n                normalizedInput[normalizedProp] = inputObject[prop];\n            }\n        }\n    }\n\n    return normalizedInput;\n}\n\nvar priorities = {};\n\nfunction addUnitPriority(unit, priority) {\n    priorities[unit] = priority;\n}\n\nfunction getPrioritizedUnits(unitsObj) {\n    var units = [];\n    for (var u in unitsObj) {\n        units.push({unit: u, priority: priorities[u]});\n    }\n    units.sort(function (a, b) {\n        return a.priority - b.priority;\n    });\n    return units;\n}\n\nfunction makeGetSet (unit, keepTime) {\n    return function (value) {\n        if (value != null) {\n            set$1(this, unit, value);\n            hooks.updateOffset(this, keepTime);\n            return this;\n        } else {\n            return get(this, unit);\n        }\n    };\n}\n\nfunction get (mom, unit) {\n    return mom.isValid() ?\n        mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]() : NaN;\n}\n\nfunction set$1 (mom, unit, value) {\n    if (mom.isValid()) {\n        mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);\n    }\n}\n\n// MOMENTS\n\nfunction stringGet (units) {\n    units = normalizeUnits(units);\n    if (isFunction(this[units])) {\n        return this[units]();\n    }\n    return this;\n}\n\n\nfunction stringSet (units, value) {\n    if (typeof units === 'object') {\n        units = normalizeObjectUnits(units);\n        var prioritized = getPrioritizedUnits(units);\n        for (var i = 0; i < prioritized.length; i++) {\n            this[prioritized[i].unit](units[prioritized[i].unit]);\n        }\n    } else {\n        units = normalizeUnits(units);\n        if (isFunction(this[units])) {\n            return this[units](value);\n        }\n    }\n    return this;\n}\n\nfunction zeroFill(number, targetLength, forceSign) {\n    var absNumber = '' + Math.abs(number),\n        zerosToFill = targetLength - absNumber.length,\n        sign = number >= 0;\n    return (sign ? (forceSign ? '+' : '') : '-') +\n        Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) + absNumber;\n}\n\nvar formattingTokens = /(\\[[^\\[]*\\])|(\\\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;\n\nvar localFormattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g;\n\nvar formatFunctions = {};\n\nvar formatTokenFunctions = {};\n\n// token:    'M'\n// padded:   ['MM', 2]\n// ordinal:  'Mo'\n// callback: function () { this.month() + 1 }\nfunction addFormatToken (token, padded, ordinal, callback) {\n    var func = callback;\n    if (typeof callback === 'string') {\n        func = function () {\n            return this[callback]();\n        };\n    }\n    if (token) {\n        formatTokenFunctions[token] = func;\n    }\n    if (padded) {\n        formatTokenFunctions[padded[0]] = function () {\n            return zeroFill(func.apply(this, arguments), padded[1], padded[2]);\n        };\n    }\n    if (ordinal) {\n        formatTokenFunctions[ordinal] = function () {\n            return this.localeData().ordinal(func.apply(this, arguments), token);\n        };\n    }\n}\n\nfunction removeFormattingTokens(input) {\n    if (input.match(/\\[[\\s\\S]/)) {\n        return input.replace(/^\\[|\\]$/g, '');\n    }\n    return input.replace(/\\\\/g, '');\n}\n\nfunction makeFormatFunction(format) {\n    var array = format.match(formattingTokens), i, length;\n\n    for (i = 0, length = array.length; i < length; i++) {\n        if (formatTokenFunctions[array[i]]) {\n            array[i] = formatTokenFunctions[array[i]];\n        } else {\n            array[i] = removeFormattingTokens(array[i]);\n        }\n    }\n\n    return function (mom) {\n        var output = '', i;\n        for (i = 0; i < length; i++) {\n            output += isFunction(array[i]) ? array[i].call(mom, format) : array[i];\n        }\n        return output;\n    };\n}\n\n// format date using native date object\nfunction formatMoment(m, format) {\n    if (!m.isValid()) {\n        return m.localeData().invalidDate();\n    }\n\n    format = expandFormat(format, m.localeData());\n    formatFunctions[format] = formatFunctions[format] || makeFormatFunction(format);\n\n    return formatFunctions[format](m);\n}\n\nfunction expandFormat(format, locale) {\n    var i = 5;\n\n    function replaceLongDateFormatTokens(input) {\n        return locale.longDateFormat(input) || input;\n    }\n\n    localFormattingTokens.lastIndex = 0;\n    while (i >= 0 && localFormattingTokens.test(format)) {\n        format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);\n        localFormattingTokens.lastIndex = 0;\n        i -= 1;\n    }\n\n    return format;\n}\n\nvar match1         = /\\d/;            //       0 - 9\nvar match2         = /\\d\\d/;          //      00 - 99\nvar match3         = /\\d{3}/;         //     000 - 999\nvar match4         = /\\d{4}/;         //    0000 - 9999\nvar match6         = /[+-]?\\d{6}/;    // -999999 - 999999\nvar match1to2      = /\\d\\d?/;         //       0 - 99\nvar match3to4      = /\\d\\d\\d\\d?/;     //     999 - 9999\nvar match5to6      = /\\d\\d\\d\\d\\d\\d?/; //   99999 - 999999\nvar match1to3      = /\\d{1,3}/;       //       0 - 999\nvar match1to4      = /\\d{1,4}/;       //       0 - 9999\nvar match1to6      = /[+-]?\\d{1,6}/;  // -999999 - 999999\n\nvar matchUnsigned  = /\\d+/;           //       0 - inf\nvar matchSigned    = /[+-]?\\d+/;      //    -inf - inf\n\nvar matchOffset    = /Z|[+-]\\d\\d:?\\d\\d/gi; // +00:00 -00:00 +0000 -0000 or Z\nvar matchShortOffset = /Z|[+-]\\d\\d(?::?\\d\\d)?/gi; // +00 -00 +00:00 -00:00 +0000 -0000 or Z\n\nvar matchTimestamp = /[+-]?\\d+(\\.\\d{1,3})?/; // 123456789 123456789.123\n\n// any word (or two) characters or numbers including two/three word month in arabic.\n// includes scottish gaelic two word and hyphenated months\nvar matchWord = /[0-9]*['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+|[\\u0600-\\u06FF\\/]+(\\s*?[\\u0600-\\u06FF]+){1,2}/i;\n\n\nvar regexes = {};\n\nfunction addRegexToken (token, regex, strictRegex) {\n    regexes[token] = isFunction(regex) ? regex : function (isStrict, localeData) {\n        return (isStrict && strictRegex) ? strictRegex : regex;\n    };\n}\n\nfunction getParseRegexForToken (token, config) {\n    if (!hasOwnProp(regexes, token)) {\n        return new RegExp(unescapeFormat(token));\n    }\n\n    return regexes[token](config._strict, config._locale);\n}\n\n// Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript\nfunction unescapeFormat(s) {\n    return regexEscape(s.replace('\\\\', '').replace(/\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g, function (matched, p1, p2, p3, p4) {\n        return p1 || p2 || p3 || p4;\n    }));\n}\n\nfunction regexEscape(s) {\n    return s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n}\n\nvar tokens = {};\n\nfunction addParseToken (token, callback) {\n    var i, func = callback;\n    if (typeof token === 'string') {\n        token = [token];\n    }\n    if (isNumber(callback)) {\n        func = function (input, array) {\n            array[callback] = toInt(input);\n        };\n    }\n    for (i = 0; i < token.length; i++) {\n        tokens[token[i]] = func;\n    }\n}\n\nfunction addWeekParseToken (token, callback) {\n    addParseToken(token, function (input, array, config, token) {\n        config._w = config._w || {};\n        callback(input, config._w, config, token);\n    });\n}\n\nfunction addTimeToArrayFromToken(token, input, config) {\n    if (input != null && hasOwnProp(tokens, token)) {\n        tokens[token](input, config._a, config, token);\n    }\n}\n\nvar YEAR = 0;\nvar MONTH = 1;\nvar DATE = 2;\nvar HOUR = 3;\nvar MINUTE = 4;\nvar SECOND = 5;\nvar MILLISECOND = 6;\nvar WEEK = 7;\nvar WEEKDAY = 8;\n\nvar indexOf;\n\nif (Array.prototype.indexOf) {\n    indexOf = Array.prototype.indexOf;\n} else {\n    indexOf = function (o) {\n        // I know\n        var i;\n        for (i = 0; i < this.length; ++i) {\n            if (this[i] === o) {\n                return i;\n            }\n        }\n        return -1;\n    };\n}\n\nvar indexOf$1 = indexOf;\n\nfunction daysInMonth(year, month) {\n    return new Date(Date.UTC(year, month + 1, 0)).getUTCDate();\n}\n\n// FORMATTING\n\naddFormatToken('M', ['MM', 2], 'Mo', function () {\n    return this.month() + 1;\n});\n\naddFormatToken('MMM', 0, 0, function (format) {\n    return this.localeData().monthsShort(this, format);\n});\n\naddFormatToken('MMMM', 0, 0, function (format) {\n    return this.localeData().months(this, format);\n});\n\n// ALIASES\n\naddUnitAlias('month', 'M');\n\n// PRIORITY\n\naddUnitPriority('month', 8);\n\n// PARSING\n\naddRegexToken('M',    match1to2);\naddRegexToken('MM',   match1to2, match2);\naddRegexToken('MMM',  function (isStrict, locale) {\n    return locale.monthsShortRegex(isStrict);\n});\naddRegexToken('MMMM', function (isStrict, locale) {\n    return locale.monthsRegex(isStrict);\n});\n\naddParseToken(['M', 'MM'], function (input, array) {\n    array[MONTH] = toInt(input) - 1;\n});\n\naddParseToken(['MMM', 'MMMM'], function (input, array, config, token) {\n    var month = config._locale.monthsParse(input, token, config._strict);\n    // if we didn't find a month name, mark the date as invalid.\n    if (month != null) {\n        array[MONTH] = month;\n    } else {\n        getParsingFlags(config).invalidMonth = input;\n    }\n});\n\n// LOCALES\n\nvar MONTHS_IN_FORMAT = /D[oD]?(\\[[^\\[\\]]*\\]|\\s)+MMMM?/;\nvar defaultLocaleMonths = 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_');\nfunction localeMonths (m, format) {\n    if (!m) {\n        return isArray(this._months) ? this._months :\n            this._months['standalone'];\n    }\n    return isArray(this._months) ? this._months[m.month()] :\n        this._months[(this._months.isFormat || MONTHS_IN_FORMAT).test(format) ? 'format' : 'standalone'][m.month()];\n}\n\nvar defaultLocaleMonthsShort = 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');\nfunction localeMonthsShort (m, format) {\n    if (!m) {\n        return isArray(this._monthsShort) ? this._monthsShort :\n            this._monthsShort['standalone'];\n    }\n    return isArray(this._monthsShort) ? this._monthsShort[m.month()] :\n        this._monthsShort[MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'][m.month()];\n}\n\nfunction handleStrictParse(monthName, format, strict) {\n    var i, ii, mom, llc = monthName.toLocaleLowerCase();\n    if (!this._monthsParse) {\n        // this is not used\n        this._monthsParse = [];\n        this._longMonthsParse = [];\n        this._shortMonthsParse = [];\n        for (i = 0; i < 12; ++i) {\n            mom = createUTC([2000, i]);\n            this._shortMonthsParse[i] = this.monthsShort(mom, '').toLocaleLowerCase();\n            this._longMonthsParse[i] = this.months(mom, '').toLocaleLowerCase();\n        }\n    }\n\n    if (strict) {\n        if (format === 'MMM') {\n            ii = indexOf$1.call(this._shortMonthsParse, llc);\n            return ii !== -1 ? ii : null;\n        } else {\n            ii = indexOf$1.call(this._longMonthsParse, llc);\n            return ii !== -1 ? ii : null;\n        }\n    } else {\n        if (format === 'MMM') {\n            ii = indexOf$1.call(this._shortMonthsParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf$1.call(this._longMonthsParse, llc);\n            return ii !== -1 ? ii : null;\n        } else {\n            ii = indexOf$1.call(this._longMonthsParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf$1.call(this._shortMonthsParse, llc);\n            return ii !== -1 ? ii : null;\n        }\n    }\n}\n\nfunction localeMonthsParse (monthName, format, strict) {\n    var i, mom, regex;\n\n    if (this._monthsParseExact) {\n        return handleStrictParse.call(this, monthName, format, strict);\n    }\n\n    if (!this._monthsParse) {\n        this._monthsParse = [];\n        this._longMonthsParse = [];\n        this._shortMonthsParse = [];\n    }\n\n    // TODO: add sorting\n    // Sorting makes sure if one month (or abbr) is a prefix of another\n    // see sorting in computeMonthsParse\n    for (i = 0; i < 12; i++) {\n        // make the regex if we don't have it already\n        mom = createUTC([2000, i]);\n        if (strict && !this._longMonthsParse[i]) {\n            this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');\n            this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');\n        }\n        if (!strict && !this._monthsParse[i]) {\n            regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');\n            this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');\n        }\n        // test the regex\n        if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {\n            return i;\n        } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {\n            return i;\n        } else if (!strict && this._monthsParse[i].test(monthName)) {\n            return i;\n        }\n    }\n}\n\n// MOMENTS\n\nfunction setMonth (mom, value) {\n    var dayOfMonth;\n\n    if (!mom.isValid()) {\n        // No op\n        return mom;\n    }\n\n    if (typeof value === 'string') {\n        if (/^\\d+$/.test(value)) {\n            value = toInt(value);\n        } else {\n            value = mom.localeData().monthsParse(value);\n            // TODO: Another silent failure?\n            if (!isNumber(value)) {\n                return mom;\n            }\n        }\n    }\n\n    dayOfMonth = Math.min(mom.date(), daysInMonth(mom.year(), value));\n    mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);\n    return mom;\n}\n\nfunction getSetMonth (value) {\n    if (value != null) {\n        setMonth(this, value);\n        hooks.updateOffset(this, true);\n        return this;\n    } else {\n        return get(this, 'Month');\n    }\n}\n\nfunction getDaysInMonth () {\n    return daysInMonth(this.year(), this.month());\n}\n\nvar defaultMonthsShortRegex = matchWord;\nfunction monthsShortRegex (isStrict) {\n    if (this._monthsParseExact) {\n        if (!hasOwnProp(this, '_monthsRegex')) {\n            computeMonthsParse.call(this);\n        }\n        if (isStrict) {\n            return this._monthsShortStrictRegex;\n        } else {\n            return this._monthsShortRegex;\n        }\n    } else {\n        if (!hasOwnProp(this, '_monthsShortRegex')) {\n            this._monthsShortRegex = defaultMonthsShortRegex;\n        }\n        return this._monthsShortStrictRegex && isStrict ?\n            this._monthsShortStrictRegex : this._monthsShortRegex;\n    }\n}\n\nvar defaultMonthsRegex = matchWord;\nfunction monthsRegex (isStrict) {\n    if (this._monthsParseExact) {\n        if (!hasOwnProp(this, '_monthsRegex')) {\n            computeMonthsParse.call(this);\n        }\n        if (isStrict) {\n            return this._monthsStrictRegex;\n        } else {\n            return this._monthsRegex;\n        }\n    } else {\n        if (!hasOwnProp(this, '_monthsRegex')) {\n            this._monthsRegex = defaultMonthsRegex;\n        }\n        return this._monthsStrictRegex && isStrict ?\n            this._monthsStrictRegex : this._monthsRegex;\n    }\n}\n\nfunction computeMonthsParse () {\n    function cmpLenRev(a, b) {\n        return b.length - a.length;\n    }\n\n    var shortPieces = [], longPieces = [], mixedPieces = [],\n        i, mom;\n    for (i = 0; i < 12; i++) {\n        // make the regex if we don't have it already\n        mom = createUTC([2000, i]);\n        shortPieces.push(this.monthsShort(mom, ''));\n        longPieces.push(this.months(mom, ''));\n        mixedPieces.push(this.months(mom, ''));\n        mixedPieces.push(this.monthsShort(mom, ''));\n    }\n    // Sorting makes sure if one month (or abbr) is a prefix of another it\n    // will match the longer piece.\n    shortPieces.sort(cmpLenRev);\n    longPieces.sort(cmpLenRev);\n    mixedPieces.sort(cmpLenRev);\n    for (i = 0; i < 12; i++) {\n        shortPieces[i] = regexEscape(shortPieces[i]);\n        longPieces[i] = regexEscape(longPieces[i]);\n    }\n    for (i = 0; i < 24; i++) {\n        mixedPieces[i] = regexEscape(mixedPieces[i]);\n    }\n\n    this._monthsRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n    this._monthsShortRegex = this._monthsRegex;\n    this._monthsStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');\n    this._monthsShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');\n}\n\n// FORMATTING\n\naddFormatToken('Y', 0, 0, function () {\n    var y = this.year();\n    return y <= 9999 ? '' + y : '+' + y;\n});\n\naddFormatToken(0, ['YY', 2], 0, function () {\n    return this.year() % 100;\n});\n\naddFormatToken(0, ['YYYY',   4],       0, 'year');\naddFormatToken(0, ['YYYYY',  5],       0, 'year');\naddFormatToken(0, ['YYYYYY', 6, true], 0, 'year');\n\n// ALIASES\n\naddUnitAlias('year', 'y');\n\n// PRIORITIES\n\naddUnitPriority('year', 1);\n\n// PARSING\n\naddRegexToken('Y',      matchSigned);\naddRegexToken('YY',     match1to2, match2);\naddRegexToken('YYYY',   match1to4, match4);\naddRegexToken('YYYYY',  match1to6, match6);\naddRegexToken('YYYYYY', match1to6, match6);\n\naddParseToken(['YYYYY', 'YYYYYY'], YEAR);\naddParseToken('YYYY', function (input, array) {\n    array[YEAR] = input.length === 2 ? hooks.parseTwoDigitYear(input) : toInt(input);\n});\naddParseToken('YY', function (input, array) {\n    array[YEAR] = hooks.parseTwoDigitYear(input);\n});\naddParseToken('Y', function (input, array) {\n    array[YEAR] = parseInt(input, 10);\n});\n\n// HELPERS\n\nfunction daysInYear(year) {\n    return isLeapYear(year) ? 366 : 365;\n}\n\nfunction isLeapYear(year) {\n    return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\n}\n\n// HOOKS\n\nhooks.parseTwoDigitYear = function (input) {\n    return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);\n};\n\n// MOMENTS\n\nvar getSetYear = makeGetSet('FullYear', true);\n\nfunction getIsLeapYear () {\n    return isLeapYear(this.year());\n}\n\nfunction createDate (y, m, d, h, M, s, ms) {\n    // can't just apply() to create a date:\n    // https://stackoverflow.com/q/181348\n    var date = new Date(y, m, d, h, M, s, ms);\n\n    // the date constructor remaps years 0-99 to 1900-1999\n    if (y < 100 && y >= 0 && isFinite(date.getFullYear())) {\n        date.setFullYear(y);\n    }\n    return date;\n}\n\nfunction createUTCDate (y) {\n    var date = new Date(Date.UTC.apply(null, arguments));\n\n    // the Date.UTC function remaps years 0-99 to 1900-1999\n    if (y < 100 && y >= 0 && isFinite(date.getUTCFullYear())) {\n        date.setUTCFullYear(y);\n    }\n    return date;\n}\n\n// start-of-first-week - start-of-year\nfunction firstWeekOffset(year, dow, doy) {\n    var // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n        fwd = 7 + dow - doy,\n        // first-week day local weekday -- which local weekday is fwd\n        fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;\n\n    return -fwdlw + fwd - 1;\n}\n\n// https://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\nfunction dayOfYearFromWeeks(year, week, weekday, dow, doy) {\n    var localWeekday = (7 + weekday - dow) % 7,\n        weekOffset = firstWeekOffset(year, dow, doy),\n        dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,\n        resYear, resDayOfYear;\n\n    if (dayOfYear <= 0) {\n        resYear = year - 1;\n        resDayOfYear = daysInYear(resYear) + dayOfYear;\n    } else if (dayOfYear > daysInYear(year)) {\n        resYear = year + 1;\n        resDayOfYear = dayOfYear - daysInYear(year);\n    } else {\n        resYear = year;\n        resDayOfYear = dayOfYear;\n    }\n\n    return {\n        year: resYear,\n        dayOfYear: resDayOfYear\n    };\n}\n\nfunction weekOfYear(mom, dow, doy) {\n    var weekOffset = firstWeekOffset(mom.year(), dow, doy),\n        week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,\n        resWeek, resYear;\n\n    if (week < 1) {\n        resYear = mom.year() - 1;\n        resWeek = week + weeksInYear(resYear, dow, doy);\n    } else if (week > weeksInYear(mom.year(), dow, doy)) {\n        resWeek = week - weeksInYear(mom.year(), dow, doy);\n        resYear = mom.year() + 1;\n    } else {\n        resYear = mom.year();\n        resWeek = week;\n    }\n\n    return {\n        week: resWeek,\n        year: resYear\n    };\n}\n\nfunction weeksInYear(year, dow, doy) {\n    var weekOffset = firstWeekOffset(year, dow, doy),\n        weekOffsetNext = firstWeekOffset(year + 1, dow, doy);\n    return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;\n}\n\n// FORMATTING\n\naddFormatToken('w', ['ww', 2], 'wo', 'week');\naddFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');\n\n// ALIASES\n\naddUnitAlias('week', 'w');\naddUnitAlias('isoWeek', 'W');\n\n// PRIORITIES\n\naddUnitPriority('week', 5);\naddUnitPriority('isoWeek', 5);\n\n// PARSING\n\naddRegexToken('w',  match1to2);\naddRegexToken('ww', match1to2, match2);\naddRegexToken('W',  match1to2);\naddRegexToken('WW', match1to2, match2);\n\naddWeekParseToken(['w', 'ww', 'W', 'WW'], function (input, week, config, token) {\n    week[token.substr(0, 1)] = toInt(input);\n});\n\n// HELPERS\n\n// LOCALES\n\nfunction localeWeek (mom) {\n    return weekOfYear(mom, this._week.dow, this._week.doy).week;\n}\n\nvar defaultLocaleWeek = {\n    dow : 0, // Sunday is the first day of the week.\n    doy : 6  // The week that contains Jan 1st is the first week of the year.\n};\n\nfunction localeFirstDayOfWeek () {\n    return this._week.dow;\n}\n\nfunction localeFirstDayOfYear () {\n    return this._week.doy;\n}\n\n// MOMENTS\n\nfunction getSetWeek (input) {\n    var week = this.localeData().week(this);\n    return input == null ? week : this.add((input - week) * 7, 'd');\n}\n\nfunction getSetISOWeek (input) {\n    var week = weekOfYear(this, 1, 4).week;\n    return input == null ? week : this.add((input - week) * 7, 'd');\n}\n\n// FORMATTING\n\naddFormatToken('d', 0, 'do', 'day');\n\naddFormatToken('dd', 0, 0, function (format) {\n    return this.localeData().weekdaysMin(this, format);\n});\n\naddFormatToken('ddd', 0, 0, function (format) {\n    return this.localeData().weekdaysShort(this, format);\n});\n\naddFormatToken('dddd', 0, 0, function (format) {\n    return this.localeData().weekdays(this, format);\n});\n\naddFormatToken('e', 0, 0, 'weekday');\naddFormatToken('E', 0, 0, 'isoWeekday');\n\n// ALIASES\n\naddUnitAlias('day', 'd');\naddUnitAlias('weekday', 'e');\naddUnitAlias('isoWeekday', 'E');\n\n// PRIORITY\naddUnitPriority('day', 11);\naddUnitPriority('weekday', 11);\naddUnitPriority('isoWeekday', 11);\n\n// PARSING\n\naddRegexToken('d',    match1to2);\naddRegexToken('e',    match1to2);\naddRegexToken('E',    match1to2);\naddRegexToken('dd',   function (isStrict, locale) {\n    return locale.weekdaysMinRegex(isStrict);\n});\naddRegexToken('ddd',   function (isStrict, locale) {\n    return locale.weekdaysShortRegex(isStrict);\n});\naddRegexToken('dddd',   function (isStrict, locale) {\n    return locale.weekdaysRegex(isStrict);\n});\n\naddWeekParseToken(['dd', 'ddd', 'dddd'], function (input, week, config, token) {\n    var weekday = config._locale.weekdaysParse(input, token, config._strict);\n    // if we didn't get a weekday name, mark the date as invalid\n    if (weekday != null) {\n        week.d = weekday;\n    } else {\n        getParsingFlags(config).invalidWeekday = input;\n    }\n});\n\naddWeekParseToken(['d', 'e', 'E'], function (input, week, config, token) {\n    week[token] = toInt(input);\n});\n\n// HELPERS\n\nfunction parseWeekday(input, locale) {\n    if (typeof input !== 'string') {\n        return input;\n    }\n\n    if (!isNaN(input)) {\n        return parseInt(input, 10);\n    }\n\n    input = locale.weekdaysParse(input);\n    if (typeof input === 'number') {\n        return input;\n    }\n\n    return null;\n}\n\nfunction parseIsoWeekday(input, locale) {\n    if (typeof input === 'string') {\n        return locale.weekdaysParse(input) % 7 || 7;\n    }\n    return isNaN(input) ? null : input;\n}\n\n// LOCALES\n\nvar defaultLocaleWeekdays = 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');\nfunction localeWeekdays (m, format) {\n    if (!m) {\n        return isArray(this._weekdays) ? this._weekdays :\n            this._weekdays['standalone'];\n    }\n    return isArray(this._weekdays) ? this._weekdays[m.day()] :\n        this._weekdays[this._weekdays.isFormat.test(format) ? 'format' : 'standalone'][m.day()];\n}\n\nvar defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');\nfunction localeWeekdaysShort (m) {\n    return (m) ? this._weekdaysShort[m.day()] : this._weekdaysShort;\n}\n\nvar defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_');\nfunction localeWeekdaysMin (m) {\n    return (m) ? this._weekdaysMin[m.day()] : this._weekdaysMin;\n}\n\nfunction handleStrictParse$1(weekdayName, format, strict) {\n    var i, ii, mom, llc = weekdayName.toLocaleLowerCase();\n    if (!this._weekdaysParse) {\n        this._weekdaysParse = [];\n        this._shortWeekdaysParse = [];\n        this._minWeekdaysParse = [];\n\n        for (i = 0; i < 7; ++i) {\n            mom = createUTC([2000, 1]).day(i);\n            this._minWeekdaysParse[i] = this.weekdaysMin(mom, '').toLocaleLowerCase();\n            this._shortWeekdaysParse[i] = this.weekdaysShort(mom, '').toLocaleLowerCase();\n            this._weekdaysParse[i] = this.weekdays(mom, '').toLocaleLowerCase();\n        }\n    }\n\n    if (strict) {\n        if (format === 'dddd') {\n            ii = indexOf$1.call(this._weekdaysParse, llc);\n            return ii !== -1 ? ii : null;\n        } else if (format === 'ddd') {\n            ii = indexOf$1.call(this._shortWeekdaysParse, llc);\n            return ii !== -1 ? ii : null;\n        } else {\n            ii = indexOf$1.call(this._minWeekdaysParse, llc);\n            return ii !== -1 ? ii : null;\n        }\n    } else {\n        if (format === 'dddd') {\n            ii = indexOf$1.call(this._weekdaysParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf$1.call(this._shortWeekdaysParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf$1.call(this._minWeekdaysParse, llc);\n            return ii !== -1 ? ii : null;\n        } else if (format === 'ddd') {\n            ii = indexOf$1.call(this._shortWeekdaysParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf$1.call(this._weekdaysParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf$1.call(this._minWeekdaysParse, llc);\n            return ii !== -1 ? ii : null;\n        } else {\n            ii = indexOf$1.call(this._minWeekdaysParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf$1.call(this._weekdaysParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf$1.call(this._shortWeekdaysParse, llc);\n            return ii !== -1 ? ii : null;\n        }\n    }\n}\n\nfunction localeWeekdaysParse (weekdayName, format, strict) {\n    var i, mom, regex;\n\n    if (this._weekdaysParseExact) {\n        return handleStrictParse$1.call(this, weekdayName, format, strict);\n    }\n\n    if (!this._weekdaysParse) {\n        this._weekdaysParse = [];\n        this._minWeekdaysParse = [];\n        this._shortWeekdaysParse = [];\n        this._fullWeekdaysParse = [];\n    }\n\n    for (i = 0; i < 7; i++) {\n        // make the regex if we don't have it already\n\n        mom = createUTC([2000, 1]).day(i);\n        if (strict && !this._fullWeekdaysParse[i]) {\n            this._fullWeekdaysParse[i] = new RegExp('^' + this.weekdays(mom, '').replace('.', '\\.?') + '$', 'i');\n            this._shortWeekdaysParse[i] = new RegExp('^' + this.weekdaysShort(mom, '').replace('.', '\\.?') + '$', 'i');\n            this._minWeekdaysParse[i] = new RegExp('^' + this.weekdaysMin(mom, '').replace('.', '\\.?') + '$', 'i');\n        }\n        if (!this._weekdaysParse[i]) {\n            regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');\n            this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');\n        }\n        // test the regex\n        if (strict && format === 'dddd' && this._fullWeekdaysParse[i].test(weekdayName)) {\n            return i;\n        } else if (strict && format === 'ddd' && this._shortWeekdaysParse[i].test(weekdayName)) {\n            return i;\n        } else if (strict && format === 'dd' && this._minWeekdaysParse[i].test(weekdayName)) {\n            return i;\n        } else if (!strict && this._weekdaysParse[i].test(weekdayName)) {\n            return i;\n        }\n    }\n}\n\n// MOMENTS\n\nfunction getSetDayOfWeek (input) {\n    if (!this.isValid()) {\n        return input != null ? this : NaN;\n    }\n    var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();\n    if (input != null) {\n        input = parseWeekday(input, this.localeData());\n        return this.add(input - day, 'd');\n    } else {\n        return day;\n    }\n}\n\nfunction getSetLocaleDayOfWeek (input) {\n    if (!this.isValid()) {\n        return input != null ? this : NaN;\n    }\n    var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;\n    return input == null ? weekday : this.add(input - weekday, 'd');\n}\n\nfunction getSetISODayOfWeek (input) {\n    if (!this.isValid()) {\n        return input != null ? this : NaN;\n    }\n\n    // behaves the same as moment#day except\n    // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)\n    // as a setter, sunday should belong to the previous week.\n\n    if (input != null) {\n        var weekday = parseIsoWeekday(input, this.localeData());\n        return this.day(this.day() % 7 ? weekday : weekday - 7);\n    } else {\n        return this.day() || 7;\n    }\n}\n\nvar defaultWeekdaysRegex = matchWord;\nfunction weekdaysRegex (isStrict) {\n    if (this._weekdaysParseExact) {\n        if (!hasOwnProp(this, '_weekdaysRegex')) {\n            computeWeekdaysParse.call(this);\n        }\n        if (isStrict) {\n            return this._weekdaysStrictRegex;\n        } else {\n            return this._weekdaysRegex;\n        }\n    } else {\n        if (!hasOwnProp(this, '_weekdaysRegex')) {\n            this._weekdaysRegex = defaultWeekdaysRegex;\n        }\n        return this._weekdaysStrictRegex && isStrict ?\n            this._weekdaysStrictRegex : this._weekdaysRegex;\n    }\n}\n\nvar defaultWeekdaysShortRegex = matchWord;\nfunction weekdaysShortRegex (isStrict) {\n    if (this._weekdaysParseExact) {\n        if (!hasOwnProp(this, '_weekdaysRegex')) {\n            computeWeekdaysParse.call(this);\n        }\n        if (isStrict) {\n            return this._weekdaysShortStrictRegex;\n        } else {\n            return this._weekdaysShortRegex;\n        }\n    } else {\n        if (!hasOwnProp(this, '_weekdaysShortRegex')) {\n            this._weekdaysShortRegex = defaultWeekdaysShortRegex;\n        }\n        return this._weekdaysShortStrictRegex && isStrict ?\n            this._weekdaysShortStrictRegex : this._weekdaysShortRegex;\n    }\n}\n\nvar defaultWeekdaysMinRegex = matchWord;\nfunction weekdaysMinRegex (isStrict) {\n    if (this._weekdaysParseExact) {\n        if (!hasOwnProp(this, '_weekdaysRegex')) {\n            computeWeekdaysParse.call(this);\n        }\n        if (isStrict) {\n            return this._weekdaysMinStrictRegex;\n        } else {\n            return this._weekdaysMinRegex;\n        }\n    } else {\n        if (!hasOwnProp(this, '_weekdaysMinRegex')) {\n            this._weekdaysMinRegex = defaultWeekdaysMinRegex;\n        }\n        return this._weekdaysMinStrictRegex && isStrict ?\n            this._weekdaysMinStrictRegex : this._weekdaysMinRegex;\n    }\n}\n\n\nfunction computeWeekdaysParse () {\n    function cmpLenRev(a, b) {\n        return b.length - a.length;\n    }\n\n    var minPieces = [], shortPieces = [], longPieces = [], mixedPieces = [],\n        i, mom, minp, shortp, longp;\n    for (i = 0; i < 7; i++) {\n        // make the regex if we don't have it already\n        mom = createUTC([2000, 1]).day(i);\n        minp = this.weekdaysMin(mom, '');\n        shortp = this.weekdaysShort(mom, '');\n        longp = this.weekdays(mom, '');\n        minPieces.push(minp);\n        shortPieces.push(shortp);\n        longPieces.push(longp);\n        mixedPieces.push(minp);\n        mixedPieces.push(shortp);\n        mixedPieces.push(longp);\n    }\n    // Sorting makes sure if one weekday (or abbr) is a prefix of another it\n    // will match the longer piece.\n    minPieces.sort(cmpLenRev);\n    shortPieces.sort(cmpLenRev);\n    longPieces.sort(cmpLenRev);\n    mixedPieces.sort(cmpLenRev);\n    for (i = 0; i < 7; i++) {\n        shortPieces[i] = regexEscape(shortPieces[i]);\n        longPieces[i] = regexEscape(longPieces[i]);\n        mixedPieces[i] = regexEscape(mixedPieces[i]);\n    }\n\n    this._weekdaysRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n    this._weekdaysShortRegex = this._weekdaysRegex;\n    this._weekdaysMinRegex = this._weekdaysRegex;\n\n    this._weekdaysStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');\n    this._weekdaysShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');\n    this._weekdaysMinStrictRegex = new RegExp('^(' + minPieces.join('|') + ')', 'i');\n}\n\n// FORMATTING\n\nfunction hFormat() {\n    return this.hours() % 12 || 12;\n}\n\nfunction kFormat() {\n    return this.hours() || 24;\n}\n\naddFormatToken('H', ['HH', 2], 0, 'hour');\naddFormatToken('h', ['hh', 2], 0, hFormat);\naddFormatToken('k', ['kk', 2], 0, kFormat);\n\naddFormatToken('hmm', 0, 0, function () {\n    return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2);\n});\n\naddFormatToken('hmmss', 0, 0, function () {\n    return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2) +\n        zeroFill(this.seconds(), 2);\n});\n\naddFormatToken('Hmm', 0, 0, function () {\n    return '' + this.hours() + zeroFill(this.minutes(), 2);\n});\n\naddFormatToken('Hmmss', 0, 0, function () {\n    return '' + this.hours() + zeroFill(this.minutes(), 2) +\n        zeroFill(this.seconds(), 2);\n});\n\nfunction meridiem (token, lowercase) {\n    addFormatToken(token, 0, 0, function () {\n        return this.localeData().meridiem(this.hours(), this.minutes(), lowercase);\n    });\n}\n\nmeridiem('a', true);\nmeridiem('A', false);\n\n// ALIASES\n\naddUnitAlias('hour', 'h');\n\n// PRIORITY\naddUnitPriority('hour', 13);\n\n// PARSING\n\nfunction matchMeridiem (isStrict, locale) {\n    return locale._meridiemParse;\n}\n\naddRegexToken('a',  matchMeridiem);\naddRegexToken('A',  matchMeridiem);\naddRegexToken('H',  match1to2);\naddRegexToken('h',  match1to2);\naddRegexToken('k',  match1to2);\naddRegexToken('HH', match1to2, match2);\naddRegexToken('hh', match1to2, match2);\naddRegexToken('kk', match1to2, match2);\n\naddRegexToken('hmm', match3to4);\naddRegexToken('hmmss', match5to6);\naddRegexToken('Hmm', match3to4);\naddRegexToken('Hmmss', match5to6);\n\naddParseToken(['H', 'HH'], HOUR);\naddParseToken(['k', 'kk'], function (input, array, config) {\n    var kInput = toInt(input);\n    array[HOUR] = kInput === 24 ? 0 : kInput;\n});\naddParseToken(['a', 'A'], function (input, array, config) {\n    config._isPm = config._locale.isPM(input);\n    config._meridiem = input;\n});\naddParseToken(['h', 'hh'], function (input, array, config) {\n    array[HOUR] = toInt(input);\n    getParsingFlags(config).bigHour = true;\n});\naddParseToken('hmm', function (input, array, config) {\n    var pos = input.length - 2;\n    array[HOUR] = toInt(input.substr(0, pos));\n    array[MINUTE] = toInt(input.substr(pos));\n    getParsingFlags(config).bigHour = true;\n});\naddParseToken('hmmss', function (input, array, config) {\n    var pos1 = input.length - 4;\n    var pos2 = input.length - 2;\n    array[HOUR] = toInt(input.substr(0, pos1));\n    array[MINUTE] = toInt(input.substr(pos1, 2));\n    array[SECOND] = toInt(input.substr(pos2));\n    getParsingFlags(config).bigHour = true;\n});\naddParseToken('Hmm', function (input, array, config) {\n    var pos = input.length - 2;\n    array[HOUR] = toInt(input.substr(0, pos));\n    array[MINUTE] = toInt(input.substr(pos));\n});\naddParseToken('Hmmss', function (input, array, config) {\n    var pos1 = input.length - 4;\n    var pos2 = input.length - 2;\n    array[HOUR] = toInt(input.substr(0, pos1));\n    array[MINUTE] = toInt(input.substr(pos1, 2));\n    array[SECOND] = toInt(input.substr(pos2));\n});\n\n// LOCALES\n\nfunction localeIsPM (input) {\n    // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays\n    // Using charAt should be more compatible.\n    return ((input + '').toLowerCase().charAt(0) === 'p');\n}\n\nvar defaultLocaleMeridiemParse = /[ap]\\.?m?\\.?/i;\nfunction localeMeridiem (hours, minutes, isLower) {\n    if (hours > 11) {\n        return isLower ? 'pm' : 'PM';\n    } else {\n        return isLower ? 'am' : 'AM';\n    }\n}\n\n\n// MOMENTS\n\n// Setting the hour should keep the time, because the user explicitly\n// specified which hour he wants. So trying to maintain the same hour (in\n// a new timezone) makes sense. Adding/subtracting hours does not follow\n// this rule.\nvar getSetHour = makeGetSet('Hours', true);\n\n// months\n// week\n// weekdays\n// meridiem\nvar baseConfig = {\n    calendar: defaultCalendar,\n    longDateFormat: defaultLongDateFormat,\n    invalidDate: defaultInvalidDate,\n    ordinal: defaultOrdinal,\n    dayOfMonthOrdinalParse: defaultDayOfMonthOrdinalParse,\n    relativeTime: defaultRelativeTime,\n\n    months: defaultLocaleMonths,\n    monthsShort: defaultLocaleMonthsShort,\n\n    week: defaultLocaleWeek,\n\n    weekdays: defaultLocaleWeekdays,\n    weekdaysMin: defaultLocaleWeekdaysMin,\n    weekdaysShort: defaultLocaleWeekdaysShort,\n\n    meridiemParse: defaultLocaleMeridiemParse\n};\n\n// internal storage for locale config files\nvar locales = {};\nvar localeFamilies = {};\nvar globalLocale;\n\nfunction normalizeLocale(key) {\n    return key ? key.toLowerCase().replace('_', '-') : key;\n}\n\n// pick the locale from the array\n// try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each\n// substring from most specific to least, but move to the next array item if it's a more specific variant than the current root\nfunction chooseLocale(names) {\n    var i = 0, j, next, locale, split;\n\n    while (i < names.length) {\n        split = normalizeLocale(names[i]).split('-');\n        j = split.length;\n        next = normalizeLocale(names[i + 1]);\n        next = next ? next.split('-') : null;\n        while (j > 0) {\n            locale = loadLocale(split.slice(0, j).join('-'));\n            if (locale) {\n                return locale;\n            }\n            if (next && next.length >= j && compareArrays(split, next, true) >= j - 1) {\n                //the next array item is better than a shallower substring of this one\n                break;\n            }\n            j--;\n        }\n        i++;\n    }\n    return null;\n}\n\nfunction loadLocale(name) {\n    var oldLocale = null;\n    // TODO: Find a better way to register and load all the locales in Node\n    if (!locales[name] && (typeof module !== 'undefined') &&\n            module && module.exports) {\n        try {\n            oldLocale = globalLocale._abbr;\n            require('./locale/' + name);\n            // because defineLocale currently also sets the global locale, we\n            // want to undo that for lazy loaded locales\n            getSetGlobalLocale(oldLocale);\n        } catch (e) { }\n    }\n    return locales[name];\n}\n\n// This function will load locale and then set the global locale.  If\n// no arguments are passed in, it will simply return the current global\n// locale key.\nfunction getSetGlobalLocale (key, values) {\n    var data;\n    if (key) {\n        if (isUndefined(values)) {\n            data = getLocale(key);\n        }\n        else {\n            data = defineLocale(key, values);\n        }\n\n        if (data) {\n            // moment.duration._locale = moment._locale = data;\n            globalLocale = data;\n        }\n    }\n\n    return globalLocale._abbr;\n}\n\nfunction defineLocale (name, config) {\n    if (config !== null) {\n        var parentConfig = baseConfig;\n        config.abbr = name;\n        if (locales[name] != null) {\n            deprecateSimple('defineLocaleOverride',\n                    'use moment.updateLocale(localeName, config) to change ' +\n                    'an existing locale. moment.defineLocale(localeName, ' +\n                    'config) should only be used for creating a new locale ' +\n                    'See http://momentjs.com/guides/#/warnings/define-locale/ for more info.');\n            parentConfig = locales[name]._config;\n        } else if (config.parentLocale != null) {\n            if (locales[config.parentLocale] != null) {\n                parentConfig = locales[config.parentLocale]._config;\n            } else {\n                if (!localeFamilies[config.parentLocale]) {\n                    localeFamilies[config.parentLocale] = [];\n                }\n                localeFamilies[config.parentLocale].push({\n                    name: name,\n                    config: config\n                });\n                return null;\n            }\n        }\n        locales[name] = new Locale(mergeConfigs(parentConfig, config));\n\n        if (localeFamilies[name]) {\n            localeFamilies[name].forEach(function (x) {\n                defineLocale(x.name, x.config);\n            });\n        }\n\n        // backwards compat for now: also set the locale\n        // make sure we set the locale AFTER all child locales have been\n        // created, so we won't end up with the child locale set.\n        getSetGlobalLocale(name);\n\n\n        return locales[name];\n    } else {\n        // useful for testing\n        delete locales[name];\n        return null;\n    }\n}\n\nfunction updateLocale(name, config) {\n    if (config != null) {\n        var locale, parentConfig = baseConfig;\n        // MERGE\n        if (locales[name] != null) {\n            parentConfig = locales[name]._config;\n        }\n        config = mergeConfigs(parentConfig, config);\n        locale = new Locale(config);\n        locale.parentLocale = locales[name];\n        locales[name] = locale;\n\n        // backwards compat for now: also set the locale\n        getSetGlobalLocale(name);\n    } else {\n        // pass null for config to unupdate, useful for tests\n        if (locales[name] != null) {\n            if (locales[name].parentLocale != null) {\n                locales[name] = locales[name].parentLocale;\n            } else if (locales[name] != null) {\n                delete locales[name];\n            }\n        }\n    }\n    return locales[name];\n}\n\n// returns locale data\nfunction getLocale (key) {\n    var locale;\n\n    if (key && key._locale && key._locale._abbr) {\n        key = key._locale._abbr;\n    }\n\n    if (!key) {\n        return globalLocale;\n    }\n\n    if (!isArray(key)) {\n        //short-circuit everything else\n        locale = loadLocale(key);\n        if (locale) {\n            return locale;\n        }\n        key = [key];\n    }\n\n    return chooseLocale(key);\n}\n\nfunction listLocales() {\n    return keys$1(locales);\n}\n\nfunction checkOverflow (m) {\n    var overflow;\n    var a = m._a;\n\n    if (a && getParsingFlags(m).overflow === -2) {\n        overflow =\n            a[MONTH]       < 0 || a[MONTH]       > 11  ? MONTH :\n            a[DATE]        < 1 || a[DATE]        > daysInMonth(a[YEAR], a[MONTH]) ? DATE :\n            a[HOUR]        < 0 || a[HOUR]        > 24 || (a[HOUR] === 24 && (a[MINUTE] !== 0 || a[SECOND] !== 0 || a[MILLISECOND] !== 0)) ? HOUR :\n            a[MINUTE]      < 0 || a[MINUTE]      > 59  ? MINUTE :\n            a[SECOND]      < 0 || a[SECOND]      > 59  ? SECOND :\n            a[MILLISECOND] < 0 || a[MILLISECOND] > 999 ? MILLISECOND :\n            -1;\n\n        if (getParsingFlags(m)._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {\n            overflow = DATE;\n        }\n        if (getParsingFlags(m)._overflowWeeks && overflow === -1) {\n            overflow = WEEK;\n        }\n        if (getParsingFlags(m)._overflowWeekday && overflow === -1) {\n            overflow = WEEKDAY;\n        }\n\n        getParsingFlags(m).overflow = overflow;\n    }\n\n    return m;\n}\n\n// iso 8601 regex\n// 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)\nvar extendedIsoRegex = /^\\s*((?:[+-]\\d{6}|\\d{4})-(?:\\d\\d-\\d\\d|W\\d\\d-\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?::\\d\\d(?::\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/;\nvar basicIsoRegex = /^\\s*((?:[+-]\\d{6}|\\d{4})(?:\\d\\d\\d\\d|W\\d\\d\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?:\\d\\d(?:\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/;\n\nvar tzRegex = /Z|[+-]\\d\\d(?::?\\d\\d)?/;\n\nvar isoDates = [\n    ['YYYYYY-MM-DD', /[+-]\\d{6}-\\d\\d-\\d\\d/],\n    ['YYYY-MM-DD', /\\d{4}-\\d\\d-\\d\\d/],\n    ['GGGG-[W]WW-E', /\\d{4}-W\\d\\d-\\d/],\n    ['GGGG-[W]WW', /\\d{4}-W\\d\\d/, false],\n    ['YYYY-DDD', /\\d{4}-\\d{3}/],\n    ['YYYY-MM', /\\d{4}-\\d\\d/, false],\n    ['YYYYYYMMDD', /[+-]\\d{10}/],\n    ['YYYYMMDD', /\\d{8}/],\n    // YYYYMM is NOT allowed by the standard\n    ['GGGG[W]WWE', /\\d{4}W\\d{3}/],\n    ['GGGG[W]WW', /\\d{4}W\\d{2}/, false],\n    ['YYYYDDD', /\\d{7}/]\n];\n\n// iso time formats and regexes\nvar isoTimes = [\n    ['HH:mm:ss.SSSS', /\\d\\d:\\d\\d:\\d\\d\\.\\d+/],\n    ['HH:mm:ss,SSSS', /\\d\\d:\\d\\d:\\d\\d,\\d+/],\n    ['HH:mm:ss', /\\d\\d:\\d\\d:\\d\\d/],\n    ['HH:mm', /\\d\\d:\\d\\d/],\n    ['HHmmss.SSSS', /\\d\\d\\d\\d\\d\\d\\.\\d+/],\n    ['HHmmss,SSSS', /\\d\\d\\d\\d\\d\\d,\\d+/],\n    ['HHmmss', /\\d\\d\\d\\d\\d\\d/],\n    ['HHmm', /\\d\\d\\d\\d/],\n    ['HH', /\\d\\d/]\n];\n\nvar aspNetJsonRegex = /^\\/?Date\\((\\-?\\d+)/i;\n\n// date from iso format\nfunction configFromISO(config) {\n    var i, l,\n        string = config._i,\n        match = extendedIsoRegex.exec(string) || basicIsoRegex.exec(string),\n        allowTime, dateFormat, timeFormat, tzFormat;\n\n    if (match) {\n        getParsingFlags(config).iso = true;\n\n        for (i = 0, l = isoDates.length; i < l; i++) {\n            if (isoDates[i][1].exec(match[1])) {\n                dateFormat = isoDates[i][0];\n                allowTime = isoDates[i][2] !== false;\n                break;\n            }\n        }\n        if (dateFormat == null) {\n            config._isValid = false;\n            return;\n        }\n        if (match[3]) {\n            for (i = 0, l = isoTimes.length; i < l; i++) {\n                if (isoTimes[i][1].exec(match[3])) {\n                    // match[2] should be 'T' or space\n                    timeFormat = (match[2] || ' ') + isoTimes[i][0];\n                    break;\n                }\n            }\n            if (timeFormat == null) {\n                config._isValid = false;\n                return;\n            }\n        }\n        if (!allowTime && timeFormat != null) {\n            config._isValid = false;\n            return;\n        }\n        if (match[4]) {\n            if (tzRegex.exec(match[4])) {\n                tzFormat = 'Z';\n            } else {\n                config._isValid = false;\n                return;\n            }\n        }\n        config._f = dateFormat + (timeFormat || '') + (tzFormat || '');\n        configFromStringAndFormat(config);\n    } else {\n        config._isValid = false;\n    }\n}\n\n// RFC 2822 regex: For details see https://tools.ietf.org/html/rfc2822#section-3.3\nvar basicRfcRegex = /^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\\s)?(\\d?\\d\\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\\s(?:\\d\\d)?\\d\\d\\s)(\\d\\d:\\d\\d)(\\:\\d\\d)?(\\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\\d{4}))$/;\n\n// date and time from ref 2822 format\nfunction configFromRFC2822(config) {\n    var string, match, dayFormat,\n        dateFormat, timeFormat, tzFormat;\n    var timezones = {\n        ' GMT': ' +0000',\n        ' EDT': ' -0400',\n        ' EST': ' -0500',\n        ' CDT': ' -0500',\n        ' CST': ' -0600',\n        ' MDT': ' -0600',\n        ' MST': ' -0700',\n        ' PDT': ' -0700',\n        ' PST': ' -0800'\n    };\n    var military = 'YXWVUTSRQPONZABCDEFGHIKLM';\n    var timezone, timezoneIndex;\n\n    string = config._i\n        .replace(/\\([^\\)]*\\)|[\\n\\t]/g, ' ') // Remove comments and folding whitespace\n        .replace(/(\\s\\s+)/g, ' ') // Replace multiple-spaces with a single space\n        .replace(/^\\s|\\s$/g, ''); // Remove leading and trailing spaces\n    match = basicRfcRegex.exec(string);\n\n    if (match) {\n        dayFormat = match[1] ? 'ddd' + ((match[1].length === 5) ? ', ' : ' ') : '';\n        dateFormat = 'D MMM ' + ((match[2].length > 10) ? 'YYYY ' : 'YY ');\n        timeFormat = 'HH:mm' + (match[4] ? ':ss' : '');\n\n        // TODO: Replace the vanilla JS Date object with an indepentent day-of-week check.\n        if (match[1]) { // day of week given\n            var momentDate = new Date(match[2]);\n            var momentDay = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'][momentDate.getDay()];\n\n            if (match[1].substr(0,3) !== momentDay) {\n                getParsingFlags(config).weekdayMismatch = true;\n                config._isValid = false;\n                return;\n            }\n        }\n\n        switch (match[5].length) {\n            case 2: // military\n                if (timezoneIndex === 0) {\n                    timezone = ' +0000';\n                } else {\n                    timezoneIndex = military.indexOf(match[5][1].toUpperCase()) - 12;\n                    timezone = ((timezoneIndex < 0) ? ' -' : ' +') +\n                        (('' + timezoneIndex).replace(/^-?/, '0')).match(/..$/)[0] + '00';\n                }\n                break;\n            case 4: // Zone\n                timezone = timezones[match[5]];\n                break;\n            default: // UT or +/-9999\n                timezone = timezones[' GMT'];\n        }\n        match[5] = timezone;\n        config._i = match.splice(1).join('');\n        tzFormat = ' ZZ';\n        config._f = dayFormat + dateFormat + timeFormat + tzFormat;\n        configFromStringAndFormat(config);\n        getParsingFlags(config).rfc2822 = true;\n    } else {\n        config._isValid = false;\n    }\n}\n\n// date from iso format or fallback\nfunction configFromString(config) {\n    var matched = aspNetJsonRegex.exec(config._i);\n\n    if (matched !== null) {\n        config._d = new Date(+matched[1]);\n        return;\n    }\n\n    configFromISO(config);\n    if (config._isValid === false) {\n        delete config._isValid;\n    } else {\n        return;\n    }\n\n    configFromRFC2822(config);\n    if (config._isValid === false) {\n        delete config._isValid;\n    } else {\n        return;\n    }\n\n    // Final attempt, use Input Fallback\n    hooks.createFromInputFallback(config);\n}\n\nhooks.createFromInputFallback = deprecate(\n    'value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), ' +\n    'which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are ' +\n    'discouraged and will be removed in an upcoming major release. Please refer to ' +\n    'http://momentjs.com/guides/#/warnings/js-date/ for more info.',\n    function (config) {\n        config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));\n    }\n);\n\n// Pick the first defined of two or three arguments.\nfunction defaults(a, b, c) {\n    if (a != null) {\n        return a;\n    }\n    if (b != null) {\n        return b;\n    }\n    return c;\n}\n\nfunction currentDateArray(config) {\n    // hooks is actually the exported moment object\n    var nowValue = new Date(hooks.now());\n    if (config._useUTC) {\n        return [nowValue.getUTCFullYear(), nowValue.getUTCMonth(), nowValue.getUTCDate()];\n    }\n    return [nowValue.getFullYear(), nowValue.getMonth(), nowValue.getDate()];\n}\n\n// convert an array to a date.\n// the array should mirror the parameters below\n// note: all values past the year are optional and will default to the lowest possible value.\n// [year, month, day , hour, minute, second, millisecond]\nfunction configFromArray (config) {\n    var i, date, input = [], currentDate, yearToUse;\n\n    if (config._d) {\n        return;\n    }\n\n    currentDate = currentDateArray(config);\n\n    //compute day of the year from weeks and weekdays\n    if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {\n        dayOfYearFromWeekInfo(config);\n    }\n\n    //if the day of the year is set, figure out what it is\n    if (config._dayOfYear != null) {\n        yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);\n\n        if (config._dayOfYear > daysInYear(yearToUse) || config._dayOfYear === 0) {\n            getParsingFlags(config)._overflowDayOfYear = true;\n        }\n\n        date = createUTCDate(yearToUse, 0, config._dayOfYear);\n        config._a[MONTH] = date.getUTCMonth();\n        config._a[DATE] = date.getUTCDate();\n    }\n\n    // Default to current date.\n    // * if no year, month, day of month are given, default to today\n    // * if day of month is given, default month and year\n    // * if month is given, default only year\n    // * if year is given, don't default anything\n    for (i = 0; i < 3 && config._a[i] == null; ++i) {\n        config._a[i] = input[i] = currentDate[i];\n    }\n\n    // Zero out whatever was not defaulted, including time\n    for (; i < 7; i++) {\n        config._a[i] = input[i] = (config._a[i] == null) ? (i === 2 ? 1 : 0) : config._a[i];\n    }\n\n    // Check for 24:00:00.000\n    if (config._a[HOUR] === 24 &&\n            config._a[MINUTE] === 0 &&\n            config._a[SECOND] === 0 &&\n            config._a[MILLISECOND] === 0) {\n        config._nextDay = true;\n        config._a[HOUR] = 0;\n    }\n\n    config._d = (config._useUTC ? createUTCDate : createDate).apply(null, input);\n    // Apply timezone offset from input. The actual utcOffset can be changed\n    // with parseZone.\n    if (config._tzm != null) {\n        config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n    }\n\n    if (config._nextDay) {\n        config._a[HOUR] = 24;\n    }\n}\n\nfunction dayOfYearFromWeekInfo(config) {\n    var w, weekYear, week, weekday, dow, doy, temp, weekdayOverflow;\n\n    w = config._w;\n    if (w.GG != null || w.W != null || w.E != null) {\n        dow = 1;\n        doy = 4;\n\n        // TODO: We need to take the current isoWeekYear, but that depends on\n        // how we interpret now (local, utc, fixed offset). So create\n        // a now version of current config (take local/utc/offset flags, and\n        // create now).\n        weekYear = defaults(w.GG, config._a[YEAR], weekOfYear(createLocal(), 1, 4).year);\n        week = defaults(w.W, 1);\n        weekday = defaults(w.E, 1);\n        if (weekday < 1 || weekday > 7) {\n            weekdayOverflow = true;\n        }\n    } else {\n        dow = config._locale._week.dow;\n        doy = config._locale._week.doy;\n\n        var curWeek = weekOfYear(createLocal(), dow, doy);\n\n        weekYear = defaults(w.gg, config._a[YEAR], curWeek.year);\n\n        // Default to current week.\n        week = defaults(w.w, curWeek.week);\n\n        if (w.d != null) {\n            // weekday -- low day numbers are considered next week\n            weekday = w.d;\n            if (weekday < 0 || weekday > 6) {\n                weekdayOverflow = true;\n            }\n        } else if (w.e != null) {\n            // local weekday -- counting starts from begining of week\n            weekday = w.e + dow;\n            if (w.e < 0 || w.e > 6) {\n                weekdayOverflow = true;\n            }\n        } else {\n            // default to begining of week\n            weekday = dow;\n        }\n    }\n    if (week < 1 || week > weeksInYear(weekYear, dow, doy)) {\n        getParsingFlags(config)._overflowWeeks = true;\n    } else if (weekdayOverflow != null) {\n        getParsingFlags(config)._overflowWeekday = true;\n    } else {\n        temp = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy);\n        config._a[YEAR] = temp.year;\n        config._dayOfYear = temp.dayOfYear;\n    }\n}\n\n// constant that refers to the ISO standard\nhooks.ISO_8601 = function () {};\n\n// constant that refers to the RFC 2822 form\nhooks.RFC_2822 = function () {};\n\n// date from string and format string\nfunction configFromStringAndFormat(config) {\n    // TODO: Move this to another part of the creation flow to prevent circular deps\n    if (config._f === hooks.ISO_8601) {\n        configFromISO(config);\n        return;\n    }\n    if (config._f === hooks.RFC_2822) {\n        configFromRFC2822(config);\n        return;\n    }\n    config._a = [];\n    getParsingFlags(config).empty = true;\n\n    // This array is used to make a Date, either with `new Date` or `Date.UTC`\n    var string = '' + config._i,\n        i, parsedInput, tokens, token, skipped,\n        stringLength = string.length,\n        totalParsedInputLength = 0;\n\n    tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];\n\n    for (i = 0; i < tokens.length; i++) {\n        token = tokens[i];\n        parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];\n        // console.log('token', token, 'parsedInput', parsedInput,\n        //         'regex', getParseRegexForToken(token, config));\n        if (parsedInput) {\n            skipped = string.substr(0, string.indexOf(parsedInput));\n            if (skipped.length > 0) {\n                getParsingFlags(config).unusedInput.push(skipped);\n            }\n            string = string.slice(string.indexOf(parsedInput) + parsedInput.length);\n            totalParsedInputLength += parsedInput.length;\n        }\n        // don't parse if it's not a known token\n        if (formatTokenFunctions[token]) {\n            if (parsedInput) {\n                getParsingFlags(config).empty = false;\n            }\n            else {\n                getParsingFlags(config).unusedTokens.push(token);\n            }\n            addTimeToArrayFromToken(token, parsedInput, config);\n        }\n        else if (config._strict && !parsedInput) {\n            getParsingFlags(config).unusedTokens.push(token);\n        }\n    }\n\n    // add remaining unparsed input length to the string\n    getParsingFlags(config).charsLeftOver = stringLength - totalParsedInputLength;\n    if (string.length > 0) {\n        getParsingFlags(config).unusedInput.push(string);\n    }\n\n    // clear _12h flag if hour is <= 12\n    if (config._a[HOUR] <= 12 &&\n        getParsingFlags(config).bigHour === true &&\n        config._a[HOUR] > 0) {\n        getParsingFlags(config).bigHour = undefined;\n    }\n\n    getParsingFlags(config).parsedDateParts = config._a.slice(0);\n    getParsingFlags(config).meridiem = config._meridiem;\n    // handle meridiem\n    config._a[HOUR] = meridiemFixWrap(config._locale, config._a[HOUR], config._meridiem);\n\n    configFromArray(config);\n    checkOverflow(config);\n}\n\n\nfunction meridiemFixWrap (locale, hour, meridiem) {\n    var isPm;\n\n    if (meridiem == null) {\n        // nothing to do\n        return hour;\n    }\n    if (locale.meridiemHour != null) {\n        return locale.meridiemHour(hour, meridiem);\n    } else if (locale.isPM != null) {\n        // Fallback\n        isPm = locale.isPM(meridiem);\n        if (isPm && hour < 12) {\n            hour += 12;\n        }\n        if (!isPm && hour === 12) {\n            hour = 0;\n        }\n        return hour;\n    } else {\n        // this is not supposed to happen\n        return hour;\n    }\n}\n\n// date from string and array of format strings\nfunction configFromStringAndArray(config) {\n    var tempConfig,\n        bestMoment,\n\n        scoreToBeat,\n        i,\n        currentScore;\n\n    if (config._f.length === 0) {\n        getParsingFlags(config).invalidFormat = true;\n        config._d = new Date(NaN);\n        return;\n    }\n\n    for (i = 0; i < config._f.length; i++) {\n        currentScore = 0;\n        tempConfig = copyConfig({}, config);\n        if (config._useUTC != null) {\n            tempConfig._useUTC = config._useUTC;\n        }\n        tempConfig._f = config._f[i];\n        configFromStringAndFormat(tempConfig);\n\n        if (!isValid(tempConfig)) {\n            continue;\n        }\n\n        // if there is any input that was not parsed add a penalty for that format\n        currentScore += getParsingFlags(tempConfig).charsLeftOver;\n\n        //or tokens\n        currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;\n\n        getParsingFlags(tempConfig).score = currentScore;\n\n        if (scoreToBeat == null || currentScore < scoreToBeat) {\n            scoreToBeat = currentScore;\n            bestMoment = tempConfig;\n        }\n    }\n\n    extend(config, bestMoment || tempConfig);\n}\n\nfunction configFromObject(config) {\n    if (config._d) {\n        return;\n    }\n\n    var i = normalizeObjectUnits(config._i);\n    config._a = map([i.year, i.month, i.day || i.date, i.hour, i.minute, i.second, i.millisecond], function (obj) {\n        return obj && parseInt(obj, 10);\n    });\n\n    configFromArray(config);\n}\n\nfunction createFromConfig (config) {\n    var res = new Moment(checkOverflow(prepareConfig(config)));\n    if (res._nextDay) {\n        // Adding is smart enough around DST\n        res.add(1, 'd');\n        res._nextDay = undefined;\n    }\n\n    return res;\n}\n\nfunction prepareConfig (config) {\n    var input = config._i,\n        format = config._f;\n\n    config._locale = config._locale || getLocale(config._l);\n\n    if (input === null || (format === undefined && input === '')) {\n        return createInvalid({nullInput: true});\n    }\n\n    if (typeof input === 'string') {\n        config._i = input = config._locale.preparse(input);\n    }\n\n    if (isMoment(input)) {\n        return new Moment(checkOverflow(input));\n    } else if (isDate(input)) {\n        config._d = input;\n    } else if (isArray(format)) {\n        configFromStringAndArray(config);\n    } else if (format) {\n        configFromStringAndFormat(config);\n    }  else {\n        configFromInput(config);\n    }\n\n    if (!isValid(config)) {\n        config._d = null;\n    }\n\n    return config;\n}\n\nfunction configFromInput(config) {\n    var input = config._i;\n    if (isUndefined(input)) {\n        config._d = new Date(hooks.now());\n    } else if (isDate(input)) {\n        config._d = new Date(input.valueOf());\n    } else if (typeof input === 'string') {\n        configFromString(config);\n    } else if (isArray(input)) {\n        config._a = map(input.slice(0), function (obj) {\n            return parseInt(obj, 10);\n        });\n        configFromArray(config);\n    } else if (isObject(input)) {\n        configFromObject(config);\n    } else if (isNumber(input)) {\n        // from milliseconds\n        config._d = new Date(input);\n    } else {\n        hooks.createFromInputFallback(config);\n    }\n}\n\nfunction createLocalOrUTC (input, format, locale, strict, isUTC) {\n    var c = {};\n\n    if (locale === true || locale === false) {\n        strict = locale;\n        locale = undefined;\n    }\n\n    if ((isObject(input) && isObjectEmpty(input)) ||\n            (isArray(input) && input.length === 0)) {\n        input = undefined;\n    }\n    // object construction must be done this way.\n    // https://github.com/moment/moment/issues/1423\n    c._isAMomentObject = true;\n    c._useUTC = c._isUTC = isUTC;\n    c._l = locale;\n    c._i = input;\n    c._f = format;\n    c._strict = strict;\n\n    return createFromConfig(c);\n}\n\nfunction createLocal (input, format, locale, strict) {\n    return createLocalOrUTC(input, format, locale, strict, false);\n}\n\nvar prototypeMin = deprecate(\n    'moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/',\n    function () {\n        var other = createLocal.apply(null, arguments);\n        if (this.isValid() && other.isValid()) {\n            return other < this ? this : other;\n        } else {\n            return createInvalid();\n        }\n    }\n);\n\nvar prototypeMax = deprecate(\n    'moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/',\n    function () {\n        var other = createLocal.apply(null, arguments);\n        if (this.isValid() && other.isValid()) {\n            return other > this ? this : other;\n        } else {\n            return createInvalid();\n        }\n    }\n);\n\n// Pick a moment m from moments so that m[fn](other) is true for all\n// other. This relies on the function fn to be transitive.\n//\n// moments should either be an array of moment objects or an array, whose\n// first element is an array of moment objects.\nfunction pickBy(fn, moments) {\n    var res, i;\n    if (moments.length === 1 && isArray(moments[0])) {\n        moments = moments[0];\n    }\n    if (!moments.length) {\n        return createLocal();\n    }\n    res = moments[0];\n    for (i = 1; i < moments.length; ++i) {\n        if (!moments[i].isValid() || moments[i][fn](res)) {\n            res = moments[i];\n        }\n    }\n    return res;\n}\n\n// TODO: Use [].sort instead?\nfunction min () {\n    var args = [].slice.call(arguments, 0);\n\n    return pickBy('isBefore', args);\n}\n\nfunction max () {\n    var args = [].slice.call(arguments, 0);\n\n    return pickBy('isAfter', args);\n}\n\nvar now = function () {\n    return Date.now ? Date.now() : +(new Date());\n};\n\nvar ordering = ['year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', 'millisecond'];\n\nfunction isDurationValid(m) {\n    for (var key in m) {\n        if (!(ordering.indexOf(key) !== -1 && (m[key] == null || !isNaN(m[key])))) {\n            return false;\n        }\n    }\n\n    var unitHasDecimal = false;\n    for (var i = 0; i < ordering.length; ++i) {\n        if (m[ordering[i]]) {\n            if (unitHasDecimal) {\n                return false; // only allow non-integers for smallest unit\n            }\n            if (parseFloat(m[ordering[i]]) !== toInt(m[ordering[i]])) {\n                unitHasDecimal = true;\n            }\n        }\n    }\n\n    return true;\n}\n\nfunction isValid$1() {\n    return this._isValid;\n}\n\nfunction createInvalid$1() {\n    return createDuration(NaN);\n}\n\nfunction Duration (duration) {\n    var normalizedInput = normalizeObjectUnits(duration),\n        years = normalizedInput.year || 0,\n        quarters = normalizedInput.quarter || 0,\n        months = normalizedInput.month || 0,\n        weeks = normalizedInput.week || 0,\n        days = normalizedInput.day || 0,\n        hours = normalizedInput.hour || 0,\n        minutes = normalizedInput.minute || 0,\n        seconds = normalizedInput.second || 0,\n        milliseconds = normalizedInput.millisecond || 0;\n\n    this._isValid = isDurationValid(normalizedInput);\n\n    // representation for dateAddRemove\n    this._milliseconds = +milliseconds +\n        seconds * 1e3 + // 1000\n        minutes * 6e4 + // 1000 * 60\n        hours * 1000 * 60 * 60; //using 1000 * 60 * 60 instead of 36e5 to avoid floating point rounding errors https://github.com/moment/moment/issues/2978\n    // Because of dateAddRemove treats 24 hours as different from a\n    // day when working around DST, we need to store them separately\n    this._days = +days +\n        weeks * 7;\n    // It is impossible translate months into days without knowing\n    // which months you are are talking about, so we have to store\n    // it separately.\n    this._months = +months +\n        quarters * 3 +\n        years * 12;\n\n    this._data = {};\n\n    this._locale = getLocale();\n\n    this._bubble();\n}\n\nfunction isDuration (obj) {\n    return obj instanceof Duration;\n}\n\nfunction absRound (number) {\n    if (number < 0) {\n        return Math.round(-1 * number) * -1;\n    } else {\n        return Math.round(number);\n    }\n}\n\n// FORMATTING\n\nfunction offset (token, separator) {\n    addFormatToken(token, 0, 0, function () {\n        var offset = this.utcOffset();\n        var sign = '+';\n        if (offset < 0) {\n            offset = -offset;\n            sign = '-';\n        }\n        return sign + zeroFill(~~(offset / 60), 2) + separator + zeroFill(~~(offset) % 60, 2);\n    });\n}\n\noffset('Z', ':');\noffset('ZZ', '');\n\n// PARSING\n\naddRegexToken('Z',  matchShortOffset);\naddRegexToken('ZZ', matchShortOffset);\naddParseToken(['Z', 'ZZ'], function (input, array, config) {\n    config._useUTC = true;\n    config._tzm = offsetFromString(matchShortOffset, input);\n});\n\n// HELPERS\n\n// timezone chunker\n// '+10:00' > ['10',  '00']\n// '-1530'  > ['-15', '30']\nvar chunkOffset = /([\\+\\-]|\\d\\d)/gi;\n\nfunction offsetFromString(matcher, string) {\n    var matches = (string || '').match(matcher);\n\n    if (matches === null) {\n        return null;\n    }\n\n    var chunk   = matches[matches.length - 1] || [];\n    var parts   = (chunk + '').match(chunkOffset) || ['-', 0, 0];\n    var minutes = +(parts[1] * 60) + toInt(parts[2]);\n\n    return minutes === 0 ?\n      0 :\n      parts[0] === '+' ? minutes : -minutes;\n}\n\n// Return a moment from input, that is local/utc/zone equivalent to model.\nfunction cloneWithOffset(input, model) {\n    var res, diff;\n    if (model._isUTC) {\n        res = model.clone();\n        diff = (isMoment(input) || isDate(input) ? input.valueOf() : createLocal(input).valueOf()) - res.valueOf();\n        // Use low-level api, because this fn is low-level api.\n        res._d.setTime(res._d.valueOf() + diff);\n        hooks.updateOffset(res, false);\n        return res;\n    } else {\n        return createLocal(input).local();\n    }\n}\n\nfunction getDateOffset (m) {\n    // On Firefox.24 Date#getTimezoneOffset returns a floating point.\n    // https://github.com/moment/moment/pull/1871\n    return -Math.round(m._d.getTimezoneOffset() / 15) * 15;\n}\n\n// HOOKS\n\n// This function will be called whenever a moment is mutated.\n// It is intended to keep the offset in sync with the timezone.\nhooks.updateOffset = function () {};\n\n// MOMENTS\n\n// keepLocalTime = true means only change the timezone, without\n// affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->\n// 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset\n// +0200, so we adjust the time as needed, to be valid.\n//\n// Keeping the time actually adds/subtracts (one hour)\n// from the actual represented time. That is why we call updateOffset\n// a second time. In case it wants us to change the offset again\n// _changeInProgress == true case, then we have to adjust, because\n// there is no such time in the given timezone.\nfunction getSetOffset (input, keepLocalTime, keepMinutes) {\n    var offset = this._offset || 0,\n        localAdjust;\n    if (!this.isValid()) {\n        return input != null ? this : NaN;\n    }\n    if (input != null) {\n        if (typeof input === 'string') {\n            input = offsetFromString(matchShortOffset, input);\n            if (input === null) {\n                return this;\n            }\n        } else if (Math.abs(input) < 16 && !keepMinutes) {\n            input = input * 60;\n        }\n        if (!this._isUTC && keepLocalTime) {\n            localAdjust = getDateOffset(this);\n        }\n        this._offset = input;\n        this._isUTC = true;\n        if (localAdjust != null) {\n            this.add(localAdjust, 'm');\n        }\n        if (offset !== input) {\n            if (!keepLocalTime || this._changeInProgress) {\n                addSubtract(this, createDuration(input - offset, 'm'), 1, false);\n            } else if (!this._changeInProgress) {\n                this._changeInProgress = true;\n                hooks.updateOffset(this, true);\n                this._changeInProgress = null;\n            }\n        }\n        return this;\n    } else {\n        return this._isUTC ? offset : getDateOffset(this);\n    }\n}\n\nfunction getSetZone (input, keepLocalTime) {\n    if (input != null) {\n        if (typeof input !== 'string') {\n            input = -input;\n        }\n\n        this.utcOffset(input, keepLocalTime);\n\n        return this;\n    } else {\n        return -this.utcOffset();\n    }\n}\n\nfunction setOffsetToUTC (keepLocalTime) {\n    return this.utcOffset(0, keepLocalTime);\n}\n\nfunction setOffsetToLocal (keepLocalTime) {\n    if (this._isUTC) {\n        this.utcOffset(0, keepLocalTime);\n        this._isUTC = false;\n\n        if (keepLocalTime) {\n            this.subtract(getDateOffset(this), 'm');\n        }\n    }\n    return this;\n}\n\nfunction setOffsetToParsedOffset () {\n    if (this._tzm != null) {\n        this.utcOffset(this._tzm, false, true);\n    } else if (typeof this._i === 'string') {\n        var tZone = offsetFromString(matchOffset, this._i);\n        if (tZone != null) {\n            this.utcOffset(tZone);\n        }\n        else {\n            this.utcOffset(0, true);\n        }\n    }\n    return this;\n}\n\nfunction hasAlignedHourOffset (input) {\n    if (!this.isValid()) {\n        return false;\n    }\n    input = input ? createLocal(input).utcOffset() : 0;\n\n    return (this.utcOffset() - input) % 60 === 0;\n}\n\nfunction isDaylightSavingTime () {\n    return (\n        this.utcOffset() > this.clone().month(0).utcOffset() ||\n        this.utcOffset() > this.clone().month(5).utcOffset()\n    );\n}\n\nfunction isDaylightSavingTimeShifted () {\n    if (!isUndefined(this._isDSTShifted)) {\n        return this._isDSTShifted;\n    }\n\n    var c = {};\n\n    copyConfig(c, this);\n    c = prepareConfig(c);\n\n    if (c._a) {\n        var other = c._isUTC ? createUTC(c._a) : createLocal(c._a);\n        this._isDSTShifted = this.isValid() &&\n            compareArrays(c._a, other.toArray()) > 0;\n    } else {\n        this._isDSTShifted = false;\n    }\n\n    return this._isDSTShifted;\n}\n\nfunction isLocal () {\n    return this.isValid() ? !this._isUTC : false;\n}\n\nfunction isUtcOffset () {\n    return this.isValid() ? this._isUTC : false;\n}\n\nfunction isUtc () {\n    return this.isValid() ? this._isUTC && this._offset === 0 : false;\n}\n\n// ASP.NET json date format regex\nvar aspNetRegex = /^(\\-)?(?:(\\d*)[. ])?(\\d+)\\:(\\d+)(?:\\:(\\d+)(\\.\\d*)?)?$/;\n\n// from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html\n// somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere\n// and further modified to allow for strings containing both week and day\nvar isoRegex = /^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;\n\nfunction createDuration (input, key) {\n    var duration = input,\n        // matching against regexp is expensive, do it on demand\n        match = null,\n        sign,\n        ret,\n        diffRes;\n\n    if (isDuration(input)) {\n        duration = {\n            ms : input._milliseconds,\n            d  : input._days,\n            M  : input._months\n        };\n    } else if (isNumber(input)) {\n        duration = {};\n        if (key) {\n            duration[key] = input;\n        } else {\n            duration.milliseconds = input;\n        }\n    } else if (!!(match = aspNetRegex.exec(input))) {\n        sign = (match[1] === '-') ? -1 : 1;\n        duration = {\n            y  : 0,\n            d  : toInt(match[DATE])                         * sign,\n            h  : toInt(match[HOUR])                         * sign,\n            m  : toInt(match[MINUTE])                       * sign,\n            s  : toInt(match[SECOND])                       * sign,\n            ms : toInt(absRound(match[MILLISECOND] * 1000)) * sign // the millisecond decimal point is included in the match\n        };\n    } else if (!!(match = isoRegex.exec(input))) {\n        sign = (match[1] === '-') ? -1 : 1;\n        duration = {\n            y : parseIso(match[2], sign),\n            M : parseIso(match[3], sign),\n            w : parseIso(match[4], sign),\n            d : parseIso(match[5], sign),\n            h : parseIso(match[6], sign),\n            m : parseIso(match[7], sign),\n            s : parseIso(match[8], sign)\n        };\n    } else if (duration == null) {// checks for null or undefined\n        duration = {};\n    } else if (typeof duration === 'object' && ('from' in duration || 'to' in duration)) {\n        diffRes = momentsDifference(createLocal(duration.from), createLocal(duration.to));\n\n        duration = {};\n        duration.ms = diffRes.milliseconds;\n        duration.M = diffRes.months;\n    }\n\n    ret = new Duration(duration);\n\n    if (isDuration(input) && hasOwnProp(input, '_locale')) {\n        ret._locale = input._locale;\n    }\n\n    return ret;\n}\n\ncreateDuration.fn = Duration.prototype;\ncreateDuration.invalid = createInvalid$1;\n\nfunction parseIso (inp, sign) {\n    // We'd normally use ~~inp for this, but unfortunately it also\n    // converts floats to ints.\n    // inp may be undefined, so careful calling replace on it.\n    var res = inp && parseFloat(inp.replace(',', '.'));\n    // apply sign while we're at it\n    return (isNaN(res) ? 0 : res) * sign;\n}\n\nfunction positiveMomentsDifference(base, other) {\n    var res = {milliseconds: 0, months: 0};\n\n    res.months = other.month() - base.month() +\n        (other.year() - base.year()) * 12;\n    if (base.clone().add(res.months, 'M').isAfter(other)) {\n        --res.months;\n    }\n\n    res.milliseconds = +other - +(base.clone().add(res.months, 'M'));\n\n    return res;\n}\n\nfunction momentsDifference(base, other) {\n    var res;\n    if (!(base.isValid() && other.isValid())) {\n        return {milliseconds: 0, months: 0};\n    }\n\n    other = cloneWithOffset(other, base);\n    if (base.isBefore(other)) {\n        res = positiveMomentsDifference(base, other);\n    } else {\n        res = positiveMomentsDifference(other, base);\n        res.milliseconds = -res.milliseconds;\n        res.months = -res.months;\n    }\n\n    return res;\n}\n\n// TODO: remove 'name' arg after deprecation is removed\nfunction createAdder(direction, name) {\n    return function (val, period) {\n        var dur, tmp;\n        //invert the arguments, but complain about it\n        if (period !== null && !isNaN(+period)) {\n            deprecateSimple(name, 'moment().' + name  + '(period, number) is deprecated. Please use moment().' + name + '(number, period). ' +\n            'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.');\n            tmp = val; val = period; period = tmp;\n        }\n\n        val = typeof val === 'string' ? +val : val;\n        dur = createDuration(val, period);\n        addSubtract(this, dur, direction);\n        return this;\n    };\n}\n\nfunction addSubtract (mom, duration, isAdding, updateOffset) {\n    var milliseconds = duration._milliseconds,\n        days = absRound(duration._days),\n        months = absRound(duration._months);\n\n    if (!mom.isValid()) {\n        // No op\n        return;\n    }\n\n    updateOffset = updateOffset == null ? true : updateOffset;\n\n    if (milliseconds) {\n        mom._d.setTime(mom._d.valueOf() + milliseconds * isAdding);\n    }\n    if (days) {\n        set$1(mom, 'Date', get(mom, 'Date') + days * isAdding);\n    }\n    if (months) {\n        setMonth(mom, get(mom, 'Month') + months * isAdding);\n    }\n    if (updateOffset) {\n        hooks.updateOffset(mom, days || months);\n    }\n}\n\nvar add      = createAdder(1, 'add');\nvar subtract = createAdder(-1, 'subtract');\n\nfunction getCalendarFormat(myMoment, now) {\n    var diff = myMoment.diff(now, 'days', true);\n    return diff < -6 ? 'sameElse' :\n            diff < -1 ? 'lastWeek' :\n            diff < 0 ? 'lastDay' :\n            diff < 1 ? 'sameDay' :\n            diff < 2 ? 'nextDay' :\n            diff < 7 ? 'nextWeek' : 'sameElse';\n}\n\nfunction calendar$1 (time, formats) {\n    // We want to compare the start of today, vs this.\n    // Getting start-of-today depends on whether we're local/utc/offset or not.\n    var now = time || createLocal(),\n        sod = cloneWithOffset(now, this).startOf('day'),\n        format = hooks.calendarFormat(this, sod) || 'sameElse';\n\n    var output = formats && (isFunction(formats[format]) ? formats[format].call(this, now) : formats[format]);\n\n    return this.format(output || this.localeData().calendar(format, this, createLocal(now)));\n}\n\nfunction clone () {\n    return new Moment(this);\n}\n\nfunction isAfter (input, units) {\n    var localInput = isMoment(input) ? input : createLocal(input);\n    if (!(this.isValid() && localInput.isValid())) {\n        return false;\n    }\n    units = normalizeUnits(!isUndefined(units) ? units : 'millisecond');\n    if (units === 'millisecond') {\n        return this.valueOf() > localInput.valueOf();\n    } else {\n        return localInput.valueOf() < this.clone().startOf(units).valueOf();\n    }\n}\n\nfunction isBefore (input, units) {\n    var localInput = isMoment(input) ? input : createLocal(input);\n    if (!(this.isValid() && localInput.isValid())) {\n        return false;\n    }\n    units = normalizeUnits(!isUndefined(units) ? units : 'millisecond');\n    if (units === 'millisecond') {\n        return this.valueOf() < localInput.valueOf();\n    } else {\n        return this.clone().endOf(units).valueOf() < localInput.valueOf();\n    }\n}\n\nfunction isBetween (from, to, units, inclusivity) {\n    inclusivity = inclusivity || '()';\n    return (inclusivity[0] === '(' ? this.isAfter(from, units) : !this.isBefore(from, units)) &&\n        (inclusivity[1] === ')' ? this.isBefore(to, units) : !this.isAfter(to, units));\n}\n\nfunction isSame (input, units) {\n    var localInput = isMoment(input) ? input : createLocal(input),\n        inputMs;\n    if (!(this.isValid() && localInput.isValid())) {\n        return false;\n    }\n    units = normalizeUnits(units || 'millisecond');\n    if (units === 'millisecond') {\n        return this.valueOf() === localInput.valueOf();\n    } else {\n        inputMs = localInput.valueOf();\n        return this.clone().startOf(units).valueOf() <= inputMs && inputMs <= this.clone().endOf(units).valueOf();\n    }\n}\n\nfunction isSameOrAfter (input, units) {\n    return this.isSame(input, units) || this.isAfter(input,units);\n}\n\nfunction isSameOrBefore (input, units) {\n    return this.isSame(input, units) || this.isBefore(input,units);\n}\n\nfunction diff (input, units, asFloat) {\n    var that,\n        zoneDelta,\n        delta, output;\n\n    if (!this.isValid()) {\n        return NaN;\n    }\n\n    that = cloneWithOffset(input, this);\n\n    if (!that.isValid()) {\n        return NaN;\n    }\n\n    zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4;\n\n    units = normalizeUnits(units);\n\n    if (units === 'year' || units === 'month' || units === 'quarter') {\n        output = monthDiff(this, that);\n        if (units === 'quarter') {\n            output = output / 3;\n        } else if (units === 'year') {\n            output = output / 12;\n        }\n    } else {\n        delta = this - that;\n        output = units === 'second' ? delta / 1e3 : // 1000\n            units === 'minute' ? delta / 6e4 : // 1000 * 60\n            units === 'hour' ? delta / 36e5 : // 1000 * 60 * 60\n            units === 'day' ? (delta - zoneDelta) / 864e5 : // 1000 * 60 * 60 * 24, negate dst\n            units === 'week' ? (delta - zoneDelta) / 6048e5 : // 1000 * 60 * 60 * 24 * 7, negate dst\n            delta;\n    }\n    return asFloat ? output : absFloor(output);\n}\n\nfunction monthDiff (a, b) {\n    // difference in months\n    var wholeMonthDiff = ((b.year() - a.year()) * 12) + (b.month() - a.month()),\n        // b is in (anchor - 1 month, anchor + 1 month)\n        anchor = a.clone().add(wholeMonthDiff, 'months'),\n        anchor2, adjust;\n\n    if (b - anchor < 0) {\n        anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');\n        // linear across the month\n        adjust = (b - anchor) / (anchor - anchor2);\n    } else {\n        anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');\n        // linear across the month\n        adjust = (b - anchor) / (anchor2 - anchor);\n    }\n\n    //check for negative zero, return zero if negative zero\n    return -(wholeMonthDiff + adjust) || 0;\n}\n\nhooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';\nhooks.defaultFormatUtc = 'YYYY-MM-DDTHH:mm:ss[Z]';\n\nfunction toString () {\n    return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');\n}\n\nfunction toISOString() {\n    if (!this.isValid()) {\n        return null;\n    }\n    var m = this.clone().utc();\n    if (m.year() < 0 || m.year() > 9999) {\n        return formatMoment(m, 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');\n    }\n    if (isFunction(Date.prototype.toISOString)) {\n        // native implementation is ~50x faster, use it when we can\n        return this.toDate().toISOString();\n    }\n    return formatMoment(m, 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');\n}\n\n/**\n * Return a human readable representation of a moment that can\n * also be evaluated to get a new moment which is the same\n *\n * @link https://nodejs.org/dist/latest/docs/api/util.html#util_custom_inspect_function_on_objects\n */\nfunction inspect () {\n    if (!this.isValid()) {\n        return 'moment.invalid(/* ' + this._i + ' */)';\n    }\n    var func = 'moment';\n    var zone = '';\n    if (!this.isLocal()) {\n        func = this.utcOffset() === 0 ? 'moment.utc' : 'moment.parseZone';\n        zone = 'Z';\n    }\n    var prefix = '[' + func + '(\"]';\n    var year = (0 <= this.year() && this.year() <= 9999) ? 'YYYY' : 'YYYYYY';\n    var datetime = '-MM-DD[T]HH:mm:ss.SSS';\n    var suffix = zone + '[\")]';\n\n    return this.format(prefix + year + datetime + suffix);\n}\n\nfunction format (inputString) {\n    if (!inputString) {\n        inputString = this.isUtc() ? hooks.defaultFormatUtc : hooks.defaultFormat;\n    }\n    var output = formatMoment(this, inputString);\n    return this.localeData().postformat(output);\n}\n\nfunction from (time, withoutSuffix) {\n    if (this.isValid() &&\n            ((isMoment(time) && time.isValid()) ||\n             createLocal(time).isValid())) {\n        return createDuration({to: this, from: time}).locale(this.locale()).humanize(!withoutSuffix);\n    } else {\n        return this.localeData().invalidDate();\n    }\n}\n\nfunction fromNow (withoutSuffix) {\n    return this.from(createLocal(), withoutSuffix);\n}\n\nfunction to (time, withoutSuffix) {\n    if (this.isValid() &&\n            ((isMoment(time) && time.isValid()) ||\n             createLocal(time).isValid())) {\n        return createDuration({from: this, to: time}).locale(this.locale()).humanize(!withoutSuffix);\n    } else {\n        return this.localeData().invalidDate();\n    }\n}\n\nfunction toNow (withoutSuffix) {\n    return this.to(createLocal(), withoutSuffix);\n}\n\n// If passed a locale key, it will set the locale for this\n// instance.  Otherwise, it will return the locale configuration\n// variables for this instance.\nfunction locale (key) {\n    var newLocaleData;\n\n    if (key === undefined) {\n        return this._locale._abbr;\n    } else {\n        newLocaleData = getLocale(key);\n        if (newLocaleData != null) {\n            this._locale = newLocaleData;\n        }\n        return this;\n    }\n}\n\nvar lang = deprecate(\n    'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',\n    function (key) {\n        if (key === undefined) {\n            return this.localeData();\n        } else {\n            return this.locale(key);\n        }\n    }\n);\n\nfunction localeData () {\n    return this._locale;\n}\n\nfunction startOf (units) {\n    units = normalizeUnits(units);\n    // the following switch intentionally omits break keywords\n    // to utilize falling through the cases.\n    switch (units) {\n        case 'year':\n            this.month(0);\n            /* falls through */\n        case 'quarter':\n        case 'month':\n            this.date(1);\n            /* falls through */\n        case 'week':\n        case 'isoWeek':\n        case 'day':\n        case 'date':\n            this.hours(0);\n            /* falls through */\n        case 'hour':\n            this.minutes(0);\n            /* falls through */\n        case 'minute':\n            this.seconds(0);\n            /* falls through */\n        case 'second':\n            this.milliseconds(0);\n    }\n\n    // weeks are a special case\n    if (units === 'week') {\n        this.weekday(0);\n    }\n    if (units === 'isoWeek') {\n        this.isoWeekday(1);\n    }\n\n    // quarters are also special\n    if (units === 'quarter') {\n        this.month(Math.floor(this.month() / 3) * 3);\n    }\n\n    return this;\n}\n\nfunction endOf (units) {\n    units = normalizeUnits(units);\n    if (units === undefined || units === 'millisecond') {\n        return this;\n    }\n\n    // 'date' is an alias for 'day', so it should be considered as such.\n    if (units === 'date') {\n        units = 'day';\n    }\n\n    return this.startOf(units).add(1, (units === 'isoWeek' ? 'week' : units)).subtract(1, 'ms');\n}\n\nfunction valueOf () {\n    return this._d.valueOf() - ((this._offset || 0) * 60000);\n}\n\nfunction unix () {\n    return Math.floor(this.valueOf() / 1000);\n}\n\nfunction toDate () {\n    return new Date(this.valueOf());\n}\n\nfunction toArray () {\n    var m = this;\n    return [m.year(), m.month(), m.date(), m.hour(), m.minute(), m.second(), m.millisecond()];\n}\n\nfunction toObject () {\n    var m = this;\n    return {\n        years: m.year(),\n        months: m.month(),\n        date: m.date(),\n        hours: m.hours(),\n        minutes: m.minutes(),\n        seconds: m.seconds(),\n        milliseconds: m.milliseconds()\n    };\n}\n\nfunction toJSON () {\n    // new Date(NaN).toJSON() === null\n    return this.isValid() ? this.toISOString() : null;\n}\n\nfunction isValid$2 () {\n    return isValid(this);\n}\n\nfunction parsingFlags () {\n    return extend({}, getParsingFlags(this));\n}\n\nfunction invalidAt () {\n    return getParsingFlags(this).overflow;\n}\n\nfunction creationData() {\n    return {\n        input: this._i,\n        format: this._f,\n        locale: this._locale,\n        isUTC: this._isUTC,\n        strict: this._strict\n    };\n}\n\n// FORMATTING\n\naddFormatToken(0, ['gg', 2], 0, function () {\n    return this.weekYear() % 100;\n});\n\naddFormatToken(0, ['GG', 2], 0, function () {\n    return this.isoWeekYear() % 100;\n});\n\nfunction addWeekYearFormatToken (token, getter) {\n    addFormatToken(0, [token, token.length], 0, getter);\n}\n\naddWeekYearFormatToken('gggg',     'weekYear');\naddWeekYearFormatToken('ggggg',    'weekYear');\naddWeekYearFormatToken('GGGG',  'isoWeekYear');\naddWeekYearFormatToken('GGGGG', 'isoWeekYear');\n\n// ALIASES\n\naddUnitAlias('weekYear', 'gg');\naddUnitAlias('isoWeekYear', 'GG');\n\n// PRIORITY\n\naddUnitPriority('weekYear', 1);\naddUnitPriority('isoWeekYear', 1);\n\n\n// PARSING\n\naddRegexToken('G',      matchSigned);\naddRegexToken('g',      matchSigned);\naddRegexToken('GG',     match1to2, match2);\naddRegexToken('gg',     match1to2, match2);\naddRegexToken('GGGG',   match1to4, match4);\naddRegexToken('gggg',   match1to4, match4);\naddRegexToken('GGGGG',  match1to6, match6);\naddRegexToken('ggggg',  match1to6, match6);\n\naddWeekParseToken(['gggg', 'ggggg', 'GGGG', 'GGGGG'], function (input, week, config, token) {\n    week[token.substr(0, 2)] = toInt(input);\n});\n\naddWeekParseToken(['gg', 'GG'], function (input, week, config, token) {\n    week[token] = hooks.parseTwoDigitYear(input);\n});\n\n// MOMENTS\n\nfunction getSetWeekYear (input) {\n    return getSetWeekYearHelper.call(this,\n            input,\n            this.week(),\n            this.weekday(),\n            this.localeData()._week.dow,\n            this.localeData()._week.doy);\n}\n\nfunction getSetISOWeekYear (input) {\n    return getSetWeekYearHelper.call(this,\n            input, this.isoWeek(), this.isoWeekday(), 1, 4);\n}\n\nfunction getISOWeeksInYear () {\n    return weeksInYear(this.year(), 1, 4);\n}\n\nfunction getWeeksInYear () {\n    var weekInfo = this.localeData()._week;\n    return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);\n}\n\nfunction getSetWeekYearHelper(input, week, weekday, dow, doy) {\n    var weeksTarget;\n    if (input == null) {\n        return weekOfYear(this, dow, doy).year;\n    } else {\n        weeksTarget = weeksInYear(input, dow, doy);\n        if (week > weeksTarget) {\n            week = weeksTarget;\n        }\n        return setWeekAll.call(this, input, week, weekday, dow, doy);\n    }\n}\n\nfunction setWeekAll(weekYear, week, weekday, dow, doy) {\n    var dayOfYearData = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy),\n        date = createUTCDate(dayOfYearData.year, 0, dayOfYearData.dayOfYear);\n\n    this.year(date.getUTCFullYear());\n    this.month(date.getUTCMonth());\n    this.date(date.getUTCDate());\n    return this;\n}\n\n// FORMATTING\n\naddFormatToken('Q', 0, 'Qo', 'quarter');\n\n// ALIASES\n\naddUnitAlias('quarter', 'Q');\n\n// PRIORITY\n\naddUnitPriority('quarter', 7);\n\n// PARSING\n\naddRegexToken('Q', match1);\naddParseToken('Q', function (input, array) {\n    array[MONTH] = (toInt(input) - 1) * 3;\n});\n\n// MOMENTS\n\nfunction getSetQuarter (input) {\n    return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);\n}\n\n// FORMATTING\n\naddFormatToken('D', ['DD', 2], 'Do', 'date');\n\n// ALIASES\n\naddUnitAlias('date', 'D');\n\n// PRIOROITY\naddUnitPriority('date', 9);\n\n// PARSING\n\naddRegexToken('D',  match1to2);\naddRegexToken('DD', match1to2, match2);\naddRegexToken('Do', function (isStrict, locale) {\n    // TODO: Remove \"ordinalParse\" fallback in next major release.\n    return isStrict ?\n      (locale._dayOfMonthOrdinalParse || locale._ordinalParse) :\n      locale._dayOfMonthOrdinalParseLenient;\n});\n\naddParseToken(['D', 'DD'], DATE);\naddParseToken('Do', function (input, array) {\n    array[DATE] = toInt(input.match(match1to2)[0], 10);\n});\n\n// MOMENTS\n\nvar getSetDayOfMonth = makeGetSet('Date', true);\n\n// FORMATTING\n\naddFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');\n\n// ALIASES\n\naddUnitAlias('dayOfYear', 'DDD');\n\n// PRIORITY\naddUnitPriority('dayOfYear', 4);\n\n// PARSING\n\naddRegexToken('DDD',  match1to3);\naddRegexToken('DDDD', match3);\naddParseToken(['DDD', 'DDDD'], function (input, array, config) {\n    config._dayOfYear = toInt(input);\n});\n\n// HELPERS\n\n// MOMENTS\n\nfunction getSetDayOfYear (input) {\n    var dayOfYear = Math.round((this.clone().startOf('day') - this.clone().startOf('year')) / 864e5) + 1;\n    return input == null ? dayOfYear : this.add((input - dayOfYear), 'd');\n}\n\n// FORMATTING\n\naddFormatToken('m', ['mm', 2], 0, 'minute');\n\n// ALIASES\n\naddUnitAlias('minute', 'm');\n\n// PRIORITY\n\naddUnitPriority('minute', 14);\n\n// PARSING\n\naddRegexToken('m',  match1to2);\naddRegexToken('mm', match1to2, match2);\naddParseToken(['m', 'mm'], MINUTE);\n\n// MOMENTS\n\nvar getSetMinute = makeGetSet('Minutes', false);\n\n// FORMATTING\n\naddFormatToken('s', ['ss', 2], 0, 'second');\n\n// ALIASES\n\naddUnitAlias('second', 's');\n\n// PRIORITY\n\naddUnitPriority('second', 15);\n\n// PARSING\n\naddRegexToken('s',  match1to2);\naddRegexToken('ss', match1to2, match2);\naddParseToken(['s', 'ss'], SECOND);\n\n// MOMENTS\n\nvar getSetSecond = makeGetSet('Seconds', false);\n\n// FORMATTING\n\naddFormatToken('S', 0, 0, function () {\n    return ~~(this.millisecond() / 100);\n});\n\naddFormatToken(0, ['SS', 2], 0, function () {\n    return ~~(this.millisecond() / 10);\n});\n\naddFormatToken(0, ['SSS', 3], 0, 'millisecond');\naddFormatToken(0, ['SSSS', 4], 0, function () {\n    return this.millisecond() * 10;\n});\naddFormatToken(0, ['SSSSS', 5], 0, function () {\n    return this.millisecond() * 100;\n});\naddFormatToken(0, ['SSSSSS', 6], 0, function () {\n    return this.millisecond() * 1000;\n});\naddFormatToken(0, ['SSSSSSS', 7], 0, function () {\n    return this.millisecond() * 10000;\n});\naddFormatToken(0, ['SSSSSSSS', 8], 0, function () {\n    return this.millisecond() * 100000;\n});\naddFormatToken(0, ['SSSSSSSSS', 9], 0, function () {\n    return this.millisecond() * 1000000;\n});\n\n\n// ALIASES\n\naddUnitAlias('millisecond', 'ms');\n\n// PRIORITY\n\naddUnitPriority('millisecond', 16);\n\n// PARSING\n\naddRegexToken('S',    match1to3, match1);\naddRegexToken('SS',   match1to3, match2);\naddRegexToken('SSS',  match1to3, match3);\n\nvar token;\nfor (token = 'SSSS'; token.length <= 9; token += 'S') {\n    addRegexToken(token, matchUnsigned);\n}\n\nfunction parseMs(input, array) {\n    array[MILLISECOND] = toInt(('0.' + input) * 1000);\n}\n\nfor (token = 'S'; token.length <= 9; token += 'S') {\n    addParseToken(token, parseMs);\n}\n// MOMENTS\n\nvar getSetMillisecond = makeGetSet('Milliseconds', false);\n\n// FORMATTING\n\naddFormatToken('z',  0, 0, 'zoneAbbr');\naddFormatToken('zz', 0, 0, 'zoneName');\n\n// MOMENTS\n\nfunction getZoneAbbr () {\n    return this._isUTC ? 'UTC' : '';\n}\n\nfunction getZoneName () {\n    return this._isUTC ? 'Coordinated Universal Time' : '';\n}\n\nvar proto = Moment.prototype;\n\nproto.add               = add;\nproto.calendar          = calendar$1;\nproto.clone             = clone;\nproto.diff              = diff;\nproto.endOf             = endOf;\nproto.format            = format;\nproto.from              = from;\nproto.fromNow           = fromNow;\nproto.to                = to;\nproto.toNow             = toNow;\nproto.get               = stringGet;\nproto.invalidAt         = invalidAt;\nproto.isAfter           = isAfter;\nproto.isBefore          = isBefore;\nproto.isBetween         = isBetween;\nproto.isSame            = isSame;\nproto.isSameOrAfter     = isSameOrAfter;\nproto.isSameOrBefore    = isSameOrBefore;\nproto.isValid           = isValid$2;\nproto.lang              = lang;\nproto.locale            = locale;\nproto.localeData        = localeData;\nproto.max               = prototypeMax;\nproto.min               = prototypeMin;\nproto.parsingFlags      = parsingFlags;\nproto.set               = stringSet;\nproto.startOf           = startOf;\nproto.subtract          = subtract;\nproto.toArray           = toArray;\nproto.toObject          = toObject;\nproto.toDate            = toDate;\nproto.toISOString       = toISOString;\nproto.inspect           = inspect;\nproto.toJSON            = toJSON;\nproto.toString          = toString;\nproto.unix              = unix;\nproto.valueOf           = valueOf;\nproto.creationData      = creationData;\n\n// Year\nproto.year       = getSetYear;\nproto.isLeapYear = getIsLeapYear;\n\n// Week Year\nproto.weekYear    = getSetWeekYear;\nproto.isoWeekYear = getSetISOWeekYear;\n\n// Quarter\nproto.quarter = proto.quarters = getSetQuarter;\n\n// Month\nproto.month       = getSetMonth;\nproto.daysInMonth = getDaysInMonth;\n\n// Week\nproto.week           = proto.weeks        = getSetWeek;\nproto.isoWeek        = proto.isoWeeks     = getSetISOWeek;\nproto.weeksInYear    = getWeeksInYear;\nproto.isoWeeksInYear = getISOWeeksInYear;\n\n// Day\nproto.date       = getSetDayOfMonth;\nproto.day        = proto.days             = getSetDayOfWeek;\nproto.weekday    = getSetLocaleDayOfWeek;\nproto.isoWeekday = getSetISODayOfWeek;\nproto.dayOfYear  = getSetDayOfYear;\n\n// Hour\nproto.hour = proto.hours = getSetHour;\n\n// Minute\nproto.minute = proto.minutes = getSetMinute;\n\n// Second\nproto.second = proto.seconds = getSetSecond;\n\n// Millisecond\nproto.millisecond = proto.milliseconds = getSetMillisecond;\n\n// Offset\nproto.utcOffset            = getSetOffset;\nproto.utc                  = setOffsetToUTC;\nproto.local                = setOffsetToLocal;\nproto.parseZone            = setOffsetToParsedOffset;\nproto.hasAlignedHourOffset = hasAlignedHourOffset;\nproto.isDST                = isDaylightSavingTime;\nproto.isLocal              = isLocal;\nproto.isUtcOffset          = isUtcOffset;\nproto.isUtc                = isUtc;\nproto.isUTC                = isUtc;\n\n// Timezone\nproto.zoneAbbr = getZoneAbbr;\nproto.zoneName = getZoneName;\n\n// Deprecations\nproto.dates  = deprecate('dates accessor is deprecated. Use date instead.', getSetDayOfMonth);\nproto.months = deprecate('months accessor is deprecated. Use month instead', getSetMonth);\nproto.years  = deprecate('years accessor is deprecated. Use year instead', getSetYear);\nproto.zone   = deprecate('moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/', getSetZone);\nproto.isDSTShifted = deprecate('isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information', isDaylightSavingTimeShifted);\n\nfunction createUnix (input) {\n    return createLocal(input * 1000);\n}\n\nfunction createInZone () {\n    return createLocal.apply(null, arguments).parseZone();\n}\n\nfunction preParsePostFormat (string) {\n    return string;\n}\n\nvar proto$1 = Locale.prototype;\n\nproto$1.calendar        = calendar;\nproto$1.longDateFormat  = longDateFormat;\nproto$1.invalidDate     = invalidDate;\nproto$1.ordinal         = ordinal;\nproto$1.preparse        = preParsePostFormat;\nproto$1.postformat      = preParsePostFormat;\nproto$1.relativeTime    = relativeTime;\nproto$1.pastFuture      = pastFuture;\nproto$1.set             = set;\n\n// Month\nproto$1.months            =        localeMonths;\nproto$1.monthsShort       =        localeMonthsShort;\nproto$1.monthsParse       =        localeMonthsParse;\nproto$1.monthsRegex       = monthsRegex;\nproto$1.monthsShortRegex  = monthsShortRegex;\n\n// Week\nproto$1.week = localeWeek;\nproto$1.firstDayOfYear = localeFirstDayOfYear;\nproto$1.firstDayOfWeek = localeFirstDayOfWeek;\n\n// Day of Week\nproto$1.weekdays       =        localeWeekdays;\nproto$1.weekdaysMin    =        localeWeekdaysMin;\nproto$1.weekdaysShort  =        localeWeekdaysShort;\nproto$1.weekdaysParse  =        localeWeekdaysParse;\n\nproto$1.weekdaysRegex       =        weekdaysRegex;\nproto$1.weekdaysShortRegex  =        weekdaysShortRegex;\nproto$1.weekdaysMinRegex    =        weekdaysMinRegex;\n\n// Hours\nproto$1.isPM = localeIsPM;\nproto$1.meridiem = localeMeridiem;\n\nfunction get$1 (format, index, field, setter) {\n    var locale = getLocale();\n    var utc = createUTC().set(setter, index);\n    return locale[field](utc, format);\n}\n\nfunction listMonthsImpl (format, index, field) {\n    if (isNumber(format)) {\n        index = format;\n        format = undefined;\n    }\n\n    format = format || '';\n\n    if (index != null) {\n        return get$1(format, index, field, 'month');\n    }\n\n    var i;\n    var out = [];\n    for (i = 0; i < 12; i++) {\n        out[i] = get$1(format, i, field, 'month');\n    }\n    return out;\n}\n\n// ()\n// (5)\n// (fmt, 5)\n// (fmt)\n// (true)\n// (true, 5)\n// (true, fmt, 5)\n// (true, fmt)\nfunction listWeekdaysImpl (localeSorted, format, index, field) {\n    if (typeof localeSorted === 'boolean') {\n        if (isNumber(format)) {\n            index = format;\n            format = undefined;\n        }\n\n        format = format || '';\n    } else {\n        format = localeSorted;\n        index = format;\n        localeSorted = false;\n\n        if (isNumber(format)) {\n            index = format;\n            format = undefined;\n        }\n\n        format = format || '';\n    }\n\n    var locale = getLocale(),\n        shift = localeSorted ? locale._week.dow : 0;\n\n    if (index != null) {\n        return get$1(format, (index + shift) % 7, field, 'day');\n    }\n\n    var i;\n    var out = [];\n    for (i = 0; i < 7; i++) {\n        out[i] = get$1(format, (i + shift) % 7, field, 'day');\n    }\n    return out;\n}\n\nfunction listMonths (format, index) {\n    return listMonthsImpl(format, index, 'months');\n}\n\nfunction listMonthsShort (format, index) {\n    return listMonthsImpl(format, index, 'monthsShort');\n}\n\nfunction listWeekdays (localeSorted, format, index) {\n    return listWeekdaysImpl(localeSorted, format, index, 'weekdays');\n}\n\nfunction listWeekdaysShort (localeSorted, format, index) {\n    return listWeekdaysImpl(localeSorted, format, index, 'weekdaysShort');\n}\n\nfunction listWeekdaysMin (localeSorted, format, index) {\n    return listWeekdaysImpl(localeSorted, format, index, 'weekdaysMin');\n}\n\ngetSetGlobalLocale('en', {\n    dayOfMonthOrdinalParse: /\\d{1,2}(th|st|nd|rd)/,\n    ordinal : function (number) {\n        var b = number % 10,\n            output = (toInt(number % 100 / 10) === 1) ? 'th' :\n            (b === 1) ? 'st' :\n            (b === 2) ? 'nd' :\n            (b === 3) ? 'rd' : 'th';\n        return number + output;\n    }\n});\n\n// Side effect imports\nhooks.lang = deprecate('moment.lang is deprecated. Use moment.locale instead.', getSetGlobalLocale);\nhooks.langData = deprecate('moment.langData is deprecated. Use moment.localeData instead.', getLocale);\n\nvar mathAbs = Math.abs;\n\nfunction abs () {\n    var data           = this._data;\n\n    this._milliseconds = mathAbs(this._milliseconds);\n    this._days         = mathAbs(this._days);\n    this._months       = mathAbs(this._months);\n\n    data.milliseconds  = mathAbs(data.milliseconds);\n    data.seconds       = mathAbs(data.seconds);\n    data.minutes       = mathAbs(data.minutes);\n    data.hours         = mathAbs(data.hours);\n    data.months        = mathAbs(data.months);\n    data.years         = mathAbs(data.years);\n\n    return this;\n}\n\nfunction addSubtract$1 (duration, input, value, direction) {\n    var other = createDuration(input, value);\n\n    duration._milliseconds += direction * other._milliseconds;\n    duration._days         += direction * other._days;\n    duration._months       += direction * other._months;\n\n    return duration._bubble();\n}\n\n// supports only 2.0-style add(1, 's') or add(duration)\nfunction add$1 (input, value) {\n    return addSubtract$1(this, input, value, 1);\n}\n\n// supports only 2.0-style subtract(1, 's') or subtract(duration)\nfunction subtract$1 (input, value) {\n    return addSubtract$1(this, input, value, -1);\n}\n\nfunction absCeil (number) {\n    if (number < 0) {\n        return Math.floor(number);\n    } else {\n        return Math.ceil(number);\n    }\n}\n\nfunction bubble () {\n    var milliseconds = this._milliseconds;\n    var days         = this._days;\n    var months       = this._months;\n    var data         = this._data;\n    var seconds, minutes, hours, years, monthsFromDays;\n\n    // if we have a mix of positive and negative values, bubble down first\n    // check: https://github.com/moment/moment/issues/2166\n    if (!((milliseconds >= 0 && days >= 0 && months >= 0) ||\n            (milliseconds <= 0 && days <= 0 && months <= 0))) {\n        milliseconds += absCeil(monthsToDays(months) + days) * 864e5;\n        days = 0;\n        months = 0;\n    }\n\n    // The following code bubbles up values, see the tests for\n    // examples of what that means.\n    data.milliseconds = milliseconds % 1000;\n\n    seconds           = absFloor(milliseconds / 1000);\n    data.seconds      = seconds % 60;\n\n    minutes           = absFloor(seconds / 60);\n    data.minutes      = minutes % 60;\n\n    hours             = absFloor(minutes / 60);\n    data.hours        = hours % 24;\n\n    days += absFloor(hours / 24);\n\n    // convert days to months\n    monthsFromDays = absFloor(daysToMonths(days));\n    months += monthsFromDays;\n    days -= absCeil(monthsToDays(monthsFromDays));\n\n    // 12 months -> 1 year\n    years = absFloor(months / 12);\n    months %= 12;\n\n    data.days   = days;\n    data.months = months;\n    data.years  = years;\n\n    return this;\n}\n\nfunction daysToMonths (days) {\n    // 400 years have 146097 days (taking into account leap year rules)\n    // 400 years have 12 months === 4800\n    return days * 4800 / 146097;\n}\n\nfunction monthsToDays (months) {\n    // the reverse of daysToMonths\n    return months * 146097 / 4800;\n}\n\nfunction as (units) {\n    if (!this.isValid()) {\n        return NaN;\n    }\n    var days;\n    var months;\n    var milliseconds = this._milliseconds;\n\n    units = normalizeUnits(units);\n\n    if (units === 'month' || units === 'year') {\n        days   = this._days   + milliseconds / 864e5;\n        months = this._months + daysToMonths(days);\n        return units === 'month' ? months : months / 12;\n    } else {\n        // handle milliseconds separately because of floating point math errors (issue #1867)\n        days = this._days + Math.round(monthsToDays(this._months));\n        switch (units) {\n            case 'week'   : return days / 7     + milliseconds / 6048e5;\n            case 'day'    : return days         + milliseconds / 864e5;\n            case 'hour'   : return days * 24    + milliseconds / 36e5;\n            case 'minute' : return days * 1440  + milliseconds / 6e4;\n            case 'second' : return days * 86400 + milliseconds / 1000;\n            // Math.floor prevents floating point math errors here\n            case 'millisecond': return Math.floor(days * 864e5) + milliseconds;\n            default: throw new Error('Unknown unit ' + units);\n        }\n    }\n}\n\n// TODO: Use this.as('ms')?\nfunction valueOf$1 () {\n    if (!this.isValid()) {\n        return NaN;\n    }\n    return (\n        this._milliseconds +\n        this._days * 864e5 +\n        (this._months % 12) * 2592e6 +\n        toInt(this._months / 12) * 31536e6\n    );\n}\n\nfunction makeAs (alias) {\n    return function () {\n        return this.as(alias);\n    };\n}\n\nvar asMilliseconds = makeAs('ms');\nvar asSeconds      = makeAs('s');\nvar asMinutes      = makeAs('m');\nvar asHours        = makeAs('h');\nvar asDays         = makeAs('d');\nvar asWeeks        = makeAs('w');\nvar asMonths       = makeAs('M');\nvar asYears        = makeAs('y');\n\nfunction get$2 (units) {\n    units = normalizeUnits(units);\n    return this.isValid() ? this[units + 's']() : NaN;\n}\n\nfunction makeGetter(name) {\n    return function () {\n        return this.isValid() ? this._data[name] : NaN;\n    };\n}\n\nvar milliseconds = makeGetter('milliseconds');\nvar seconds      = makeGetter('seconds');\nvar minutes      = makeGetter('minutes');\nvar hours        = makeGetter('hours');\nvar days         = makeGetter('days');\nvar months       = makeGetter('months');\nvar years        = makeGetter('years');\n\nfunction weeks () {\n    return absFloor(this.days() / 7);\n}\n\nvar round = Math.round;\nvar thresholds = {\n    ss: 44,         // a few seconds to seconds\n    s : 45,         // seconds to minute\n    m : 45,         // minutes to hour\n    h : 22,         // hours to day\n    d : 26,         // days to month\n    M : 11          // months to year\n};\n\n// helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize\nfunction substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {\n    return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);\n}\n\nfunction relativeTime$1 (posNegDuration, withoutSuffix, locale) {\n    var duration = createDuration(posNegDuration).abs();\n    var seconds  = round(duration.as('s'));\n    var minutes  = round(duration.as('m'));\n    var hours    = round(duration.as('h'));\n    var days     = round(duration.as('d'));\n    var months   = round(duration.as('M'));\n    var years    = round(duration.as('y'));\n\n    var a = seconds <= thresholds.ss && ['s', seconds]  ||\n            seconds < thresholds.s   && ['ss', seconds] ||\n            minutes <= 1             && ['m']           ||\n            minutes < thresholds.m   && ['mm', minutes] ||\n            hours   <= 1             && ['h']           ||\n            hours   < thresholds.h   && ['hh', hours]   ||\n            days    <= 1             && ['d']           ||\n            days    < thresholds.d   && ['dd', days]    ||\n            months  <= 1             && ['M']           ||\n            months  < thresholds.M   && ['MM', months]  ||\n            years   <= 1             && ['y']           || ['yy', years];\n\n    a[2] = withoutSuffix;\n    a[3] = +posNegDuration > 0;\n    a[4] = locale;\n    return substituteTimeAgo.apply(null, a);\n}\n\n// This function allows you to set the rounding function for relative time strings\nfunction getSetRelativeTimeRounding (roundingFunction) {\n    if (roundingFunction === undefined) {\n        return round;\n    }\n    if (typeof(roundingFunction) === 'function') {\n        round = roundingFunction;\n        return true;\n    }\n    return false;\n}\n\n// This function allows you to set a threshold for relative time strings\nfunction getSetRelativeTimeThreshold (threshold, limit) {\n    if (thresholds[threshold] === undefined) {\n        return false;\n    }\n    if (limit === undefined) {\n        return thresholds[threshold];\n    }\n    thresholds[threshold] = limit;\n    if (threshold === 's') {\n        thresholds.ss = limit - 1;\n    }\n    return true;\n}\n\nfunction humanize (withSuffix) {\n    if (!this.isValid()) {\n        return this.localeData().invalidDate();\n    }\n\n    var locale = this.localeData();\n    var output = relativeTime$1(this, !withSuffix, locale);\n\n    if (withSuffix) {\n        output = locale.pastFuture(+this, output);\n    }\n\n    return locale.postformat(output);\n}\n\nvar abs$1 = Math.abs;\n\nfunction toISOString$1() {\n    // for ISO strings we do not use the normal bubbling rules:\n    //  * milliseconds bubble up until they become hours\n    //  * days do not bubble at all\n    //  * months bubble up until they become years\n    // This is because there is no context-free conversion between hours and days\n    // (think of clock changes)\n    // and also not between days and months (28-31 days per month)\n    if (!this.isValid()) {\n        return this.localeData().invalidDate();\n    }\n\n    var seconds = abs$1(this._milliseconds) / 1000;\n    var days         = abs$1(this._days);\n    var months       = abs$1(this._months);\n    var minutes, hours, years;\n\n    // 3600 seconds -> 60 minutes -> 1 hour\n    minutes           = absFloor(seconds / 60);\n    hours             = absFloor(minutes / 60);\n    seconds %= 60;\n    minutes %= 60;\n\n    // 12 months -> 1 year\n    years  = absFloor(months / 12);\n    months %= 12;\n\n\n    // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js\n    var Y = years;\n    var M = months;\n    var D = days;\n    var h = hours;\n    var m = minutes;\n    var s = seconds;\n    var total = this.asSeconds();\n\n    if (!total) {\n        // this is the same as C#'s (Noda) and python (isodate)...\n        // but not other JS (goog.date)\n        return 'P0D';\n    }\n\n    return (total < 0 ? '-' : '') +\n        'P' +\n        (Y ? Y + 'Y' : '') +\n        (M ? M + 'M' : '') +\n        (D ? D + 'D' : '') +\n        ((h || m || s) ? 'T' : '') +\n        (h ? h + 'H' : '') +\n        (m ? m + 'M' : '') +\n        (s ? s + 'S' : '');\n}\n\nvar proto$2 = Duration.prototype;\n\nproto$2.isValid        = isValid$1;\nproto$2.abs            = abs;\nproto$2.add            = add$1;\nproto$2.subtract       = subtract$1;\nproto$2.as             = as;\nproto$2.asMilliseconds = asMilliseconds;\nproto$2.asSeconds      = asSeconds;\nproto$2.asMinutes      = asMinutes;\nproto$2.asHours        = asHours;\nproto$2.asDays         = asDays;\nproto$2.asWeeks        = asWeeks;\nproto$2.asMonths       = asMonths;\nproto$2.asYears        = asYears;\nproto$2.valueOf        = valueOf$1;\nproto$2._bubble        = bubble;\nproto$2.get            = get$2;\nproto$2.milliseconds   = milliseconds;\nproto$2.seconds        = seconds;\nproto$2.minutes        = minutes;\nproto$2.hours          = hours;\nproto$2.days           = days;\nproto$2.weeks          = weeks;\nproto$2.months         = months;\nproto$2.years          = years;\nproto$2.humanize       = humanize;\nproto$2.toISOString    = toISOString$1;\nproto$2.toString       = toISOString$1;\nproto$2.toJSON         = toISOString$1;\nproto$2.locale         = locale;\nproto$2.localeData     = localeData;\n\n// Deprecations\nproto$2.toIsoString = deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)', toISOString$1);\nproto$2.lang = lang;\n\n// Side effect imports\n\n// FORMATTING\n\naddFormatToken('X', 0, 0, 'unix');\naddFormatToken('x', 0, 0, 'valueOf');\n\n// PARSING\n\naddRegexToken('x', matchSigned);\naddRegexToken('X', matchTimestamp);\naddParseToken('X', function (input, array, config) {\n    config._d = new Date(parseFloat(input, 10) * 1000);\n});\naddParseToken('x', function (input, array, config) {\n    config._d = new Date(toInt(input));\n});\n\n// Side effect imports\n\n\nhooks.version = '2.18.1';\n\nsetHookCallback(createLocal);\n\nhooks.fn                    = proto;\nhooks.min                   = min;\nhooks.max                   = max;\nhooks.now                   = now;\nhooks.utc                   = createUTC;\nhooks.unix                  = createUnix;\nhooks.months                = listMonths;\nhooks.isDate                = isDate;\nhooks.locale                = getSetGlobalLocale;\nhooks.invalid               = createInvalid;\nhooks.duration              = createDuration;\nhooks.isMoment              = isMoment;\nhooks.weekdays              = listWeekdays;\nhooks.parseZone             = createInZone;\nhooks.localeData            = getLocale;\nhooks.isDuration            = isDuration;\nhooks.monthsShort           = listMonthsShort;\nhooks.weekdaysMin           = listWeekdaysMin;\nhooks.defineLocale          = defineLocale;\nhooks.updateLocale          = updateLocale;\nhooks.locales               = listLocales;\nhooks.weekdaysShort         = listWeekdaysShort;\nhooks.normalizeUnits        = normalizeUnits;\nhooks.relativeTimeRounding = getSetRelativeTimeRounding;\nhooks.relativeTimeThreshold = getSetRelativeTimeThreshold;\nhooks.calendarFormat        = getCalendarFormat;\nhooks.prototype             = proto;\n\nreturn hooks;\n\n})));\n\n},{}],7:[function(require,module,exports){\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n},{}],8:[function(require,module,exports){\n/*!\n * Pikaday\n *\n * Copyright © 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday\n */\n\n(function (root, factory)\n{\n    'use strict';\n\n    var moment;\n    if (typeof exports === 'object') {\n        // CommonJS module\n        // Load moment.js as an optional dependency\n        try { moment = require('moment'); } catch (e) {}\n        module.exports = factory(moment);\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(function (req)\n        {\n            // Load moment.js as an optional dependency\n            var id = 'moment';\n            try { moment = req(id); } catch (e) {}\n            return factory(moment);\n        });\n    } else {\n        root.Pikaday = factory(root.moment);\n    }\n}(this, function (moment)\n{\n    'use strict';\n\n    /**\n     * feature detection and helper functions\n     */\n    var hasMoment = typeof moment === 'function',\n\n    hasEventListeners = !!window.addEventListener,\n\n    document = window.document,\n\n    sto = window.setTimeout,\n\n    addEvent = function(el, e, callback, capture)\n    {\n        if (hasEventListeners) {\n            el.addEventListener(e, callback, !!capture);\n        } else {\n            el.attachEvent('on' + e, callback);\n        }\n    },\n\n    removeEvent = function(el, e, callback, capture)\n    {\n        if (hasEventListeners) {\n            el.removeEventListener(e, callback, !!capture);\n        } else {\n            el.detachEvent('on' + e, callback);\n        }\n    },\n\n    trim = function(str)\n    {\n        return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g,'');\n    },\n\n    hasClass = function(el, cn)\n    {\n        return (' ' + el.className + ' ').indexOf(' ' + cn + ' ') !== -1;\n    },\n\n    addClass = function(el, cn)\n    {\n        if (!hasClass(el, cn)) {\n            el.className = (el.className === '') ? cn : el.className + ' ' + cn;\n        }\n    },\n\n    removeClass = function(el, cn)\n    {\n        el.className = trim((' ' + el.className + ' ').replace(' ' + cn + ' ', ' '));\n    },\n\n    isArray = function(obj)\n    {\n        return (/Array/).test(Object.prototype.toString.call(obj));\n    },\n\n    isDate = function(obj)\n    {\n        return (/Date/).test(Object.prototype.toString.call(obj)) && !isNaN(obj.getTime());\n    },\n\n    isWeekend = function(date)\n    {\n        var day = date.getDay();\n        return day === 0 || day === 6;\n    },\n\n    isLeapYear = function(year)\n    {\n        // solution by Matti Virkkunen: http://stackoverflow.com/a/4881951\n        return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n    },\n\n    getDaysInMonth = function(year, month)\n    {\n        return [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\n    },\n\n    setToStartOfDay = function(date)\n    {\n        if (isDate(date)) date.setHours(0,0,0,0);\n    },\n\n    compareDates = function(a,b)\n    {\n        // weak date comparison (use setToStartOfDay(date) to ensure correct result)\n        return a.getTime() === b.getTime();\n    },\n\n    extend = function(to, from, overwrite)\n    {\n        var prop, hasProp;\n        for (prop in from) {\n            hasProp = to[prop] !== undefined;\n            if (hasProp && typeof from[prop] === 'object' && from[prop] !== null && from[prop].nodeName === undefined) {\n                if (isDate(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = new Date(from[prop].getTime());\n                    }\n                }\n                else if (isArray(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = from[prop].slice(0);\n                    }\n                } else {\n                    to[prop] = extend({}, from[prop], overwrite);\n                }\n            } else if (overwrite || !hasProp) {\n                to[prop] = from[prop];\n            }\n        }\n        return to;\n    },\n\n    fireEvent = function(el, eventName, data)\n    {\n        var ev;\n\n        if (document.createEvent) {\n            ev = document.createEvent('HTMLEvents');\n            ev.initEvent(eventName, true, false);\n            ev = extend(ev, data);\n            el.dispatchEvent(ev);\n        } else if (document.createEventObject) {\n            ev = document.createEventObject();\n            ev = extend(ev, data);\n            el.fireEvent('on' + eventName, ev);\n        }\n    },\n\n    adjustCalendar = function(calendar) {\n        if (calendar.month < 0) {\n            calendar.year -= Math.ceil(Math.abs(calendar.month)/12);\n            calendar.month += 12;\n        }\n        if (calendar.month > 11) {\n            calendar.year += Math.floor(Math.abs(calendar.month)/12);\n            calendar.month -= 12;\n        }\n        return calendar;\n    },\n\n    /**\n     * defaults and localisation\n     */\n    defaults = {\n\n        // bind the picker to a form field\n        field: null,\n\n        // automatically show/hide the picker on `field` focus (default `true` if `field` is set)\n        bound: undefined,\n\n        // position of the datepicker, relative to the field (default to bottom & left)\n        // ('bottom' & 'left' keywords are not used, 'top' & 'right' are modifier on the bottom/left position)\n        position: 'bottom left',\n\n        // automatically fit in the viewport even if it means repositioning from the position option\n        reposition: true,\n\n        // the default output format for `.toString()` and `field` value\n        format: 'YYYY-MM-DD',\n\n        // the toString function which gets passed a current date object and format\n        // and returns a string\n        toString: null,\n\n        // used to create date object from current input string\n        parse: null,\n\n        // the initial date to view when first opened\n        defaultDate: null,\n\n        // make the `defaultDate` the initial selected value\n        setDefaultDate: false,\n\n        // first day of week (0: Sunday, 1: Monday etc)\n        firstDay: 0,\n\n        // the default flag for moment's strict date parsing\n        formatStrict: false,\n\n        // the minimum/earliest date that can be selected\n        minDate: null,\n        // the maximum/latest date that can be selected\n        maxDate: null,\n\n        // number of years either side, or array of upper/lower range\n        yearRange: 10,\n\n        // show week numbers at head of row\n        showWeekNumber: false,\n\n        // Week picker mode\n        pickWholeWeek: false,\n\n        // used internally (don't config outside)\n        minYear: 0,\n        maxYear: 9999,\n        minMonth: undefined,\n        maxMonth: undefined,\n\n        startRange: null,\n        endRange: null,\n\n        isRTL: false,\n\n        // Additional text to append to the year in the calendar title\n        yearSuffix: '',\n\n        // Render the month after year in the calendar title\n        showMonthAfterYear: false,\n\n        // Render days of the calendar grid that fall in the next or previous month\n        showDaysInNextAndPreviousMonths: false,\n\n        // Allows user to select days that fall in the next or previous month\n        enableSelectionDaysInNextAndPreviousMonths: false,\n\n        // how many months are visible\n        numberOfMonths: 1,\n\n        // when numberOfMonths is used, this will help you to choose where the main calendar will be (default `left`, can be set to `right`)\n        // only used for the first display or when a selected date is not visible\n        mainCalendar: 'left',\n\n        // Specify a DOM element to render the calendar in\n        container: undefined,\n\n        // Blur field when date is selected\n        blurFieldOnSelect : true,\n\n        // internationalization\n        i18n: {\n            previousMonth : 'Previous Month',\n            nextMonth     : 'Next Month',\n            months        : ['January','February','March','April','May','June','July','August','September','October','November','December'],\n            weekdays      : ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],\n            weekdaysShort : ['Sun','Mon','Tue','Wed','Thu','Fri','Sat']\n        },\n\n        // Theme Classname\n        theme: null,\n\n        // events array\n        events: [],\n\n        // callback function\n        onSelect: null,\n        onOpen: null,\n        onClose: null,\n        onDraw: null\n    },\n\n\n    /**\n     * templating functions to abstract HTML rendering\n     */\n    renderDayName = function(opts, day, abbr)\n    {\n        day += opts.firstDay;\n        while (day >= 7) {\n            day -= 7;\n        }\n        return abbr ? opts.i18n.weekdaysShort[day] : opts.i18n.weekdays[day];\n    },\n\n    renderDay = function(opts)\n    {\n        var arr = [];\n        var ariaSelected = 'false';\n        if (opts.isEmpty) {\n            if (opts.showDaysInNextAndPreviousMonths) {\n                arr.push('is-outside-current-month');\n\n                if(!opts.enableSelectionDaysInNextAndPreviousMonths) {\n                    arr.push('is-selection-disabled');\n                }\n\n            } else {\n                return '<td class=\"is-empty\"></td>';\n            }\n        }\n        if (opts.isDisabled) {\n            arr.push('is-disabled');\n        }\n        if (opts.isToday) {\n            arr.push('is-today');\n        }\n        if (opts.isSelected) {\n            arr.push('is-selected');\n            ariaSelected = 'true';\n        }\n        if (opts.hasEvent) {\n            arr.push('has-event');\n        }\n        if (opts.isInRange) {\n            arr.push('is-inrange');\n        }\n        if (opts.isStartRange) {\n            arr.push('is-startrange');\n        }\n        if (opts.isEndRange) {\n            arr.push('is-endrange');\n        }\n        return '<td data-day=\"' + opts.day + '\" class=\"' + arr.join(' ') + '\" aria-selected=\"' + ariaSelected + '\">' +\n                 '<button class=\"pika-button pika-day\" type=\"button\" ' +\n                    'data-pika-year=\"' + opts.year + '\" data-pika-month=\"' + opts.month + '\" data-pika-day=\"' + opts.day + '\">' +\n                        opts.day +\n                 '</button>' +\n               '</td>';\n    },\n\n    renderWeek = function (d, m, y) {\n        // Lifted from http://javascript.about.com/library/blweekyear.htm, lightly modified.\n        var onejan = new Date(y, 0, 1),\n            weekNum = Math.ceil((((new Date(y, m, d) - onejan) / 86400000) + onejan.getDay()+1)/7);\n        return '<td class=\"pika-week\">' + weekNum + '</td>';\n    },\n\n    renderRow = function(days, isRTL, pickWholeWeek, isRowSelected)\n    {\n        return '<tr class=\"pika-row' + (pickWholeWeek ? ' pick-whole-week' : '') + (isRowSelected ? ' is-selected' : '') + '\">' + (isRTL ? days.reverse() : days).join('') + '</tr>';\n    },\n\n    renderBody = function(rows)\n    {\n        return '<tbody>' + rows.join('') + '</tbody>';\n    },\n\n    renderHead = function(opts)\n    {\n        var i, arr = [];\n        if (opts.showWeekNumber) {\n            arr.push('<th></th>');\n        }\n        for (i = 0; i < 7; i++) {\n            arr.push('<th scope=\"col\"><abbr title=\"' + renderDayName(opts, i) + '\">' + renderDayName(opts, i, true) + '</abbr></th>');\n        }\n        return '<thead><tr>' + (opts.isRTL ? arr.reverse() : arr).join('') + '</tr></thead>';\n    },\n\n    renderTitle = function(instance, c, year, month, refYear, randId)\n    {\n        var i, j, arr,\n            opts = instance._o,\n            isMinYear = year === opts.minYear,\n            isMaxYear = year === opts.maxYear,\n            html = '<div id=\"' + randId + '\" class=\"pika-title\" role=\"heading\" aria-live=\"assertive\">',\n            monthHtml,\n            yearHtml,\n            prev = true,\n            next = true;\n\n        for (arr = [], i = 0; i < 12; i++) {\n            arr.push('<option value=\"' + (year === refYear ? i - c : 12 + i - c) + '\"' +\n                (i === month ? ' selected=\"selected\"': '') +\n                ((isMinYear && i < opts.minMonth) || (isMaxYear && i > opts.maxMonth) ? 'disabled=\"disabled\"' : '') + '>' +\n                opts.i18n.months[i] + '</option>');\n        }\n\n        monthHtml = '<div class=\"pika-label\">' + opts.i18n.months[month] + '<select class=\"pika-select pika-select-month\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (isArray(opts.yearRange)) {\n            i = opts.yearRange[0];\n            j = opts.yearRange[1] + 1;\n        } else {\n            i = year - opts.yearRange;\n            j = 1 + year + opts.yearRange;\n        }\n\n        for (arr = []; i < j && i <= opts.maxYear; i++) {\n            if (i >= opts.minYear) {\n                arr.push('<option value=\"' + i + '\"' + (i === year ? ' selected=\"selected\"': '') + '>' + (i) + '</option>');\n            }\n        }\n        yearHtml = '<div class=\"pika-label\">' + year + opts.yearSuffix + '<select class=\"pika-select pika-select-year\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (opts.showMonthAfterYear) {\n            html += yearHtml + monthHtml;\n        } else {\n            html += monthHtml + yearHtml;\n        }\n\n        if (isMinYear && (month === 0 || opts.minMonth >= month)) {\n            prev = false;\n        }\n\n        if (isMaxYear && (month === 11 || opts.maxMonth <= month)) {\n            next = false;\n        }\n\n        if (c === 0) {\n            html += '<button class=\"pika-prev' + (prev ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.previousMonth + '</button>';\n        }\n        if (c === (instance._o.numberOfMonths - 1) ) {\n            html += '<button class=\"pika-next' + (next ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.nextMonth + '</button>';\n        }\n\n        return html += '</div>';\n    },\n\n    renderTable = function(opts, data, randId)\n    {\n        return '<table cellpadding=\"0\" cellspacing=\"0\" class=\"pika-table\" role=\"grid\" aria-labelledby=\"' + randId + '\">' + renderHead(opts) + renderBody(data) + '</table>';\n    },\n\n\n    /**\n     * Pikaday constructor\n     */\n    Pikaday = function(options)\n    {\n        var self = this,\n            opts = self.config(options);\n\n        self._onMouseDown = function(e)\n        {\n            if (!self._v) {\n                return;\n            }\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n\n            if (!hasClass(target, 'is-disabled')) {\n                if (hasClass(target, 'pika-button') && !hasClass(target, 'is-empty') && !hasClass(target.parentNode, 'is-disabled')) {\n                    self.setDate(new Date(target.getAttribute('data-pika-year'), target.getAttribute('data-pika-month'), target.getAttribute('data-pika-day')));\n                    if (opts.bound) {\n                        sto(function() {\n                            self.hide();\n                            if (opts.blurFieldOnSelect && opts.field) {\n                                opts.field.blur();\n                            }\n                        }, 100);\n                    }\n                }\n                else if (hasClass(target, 'pika-prev')) {\n                    self.prevMonth();\n                }\n                else if (hasClass(target, 'pika-next')) {\n                    self.nextMonth();\n                }\n            }\n            if (!hasClass(target, 'pika-select')) {\n                // if this is touch event prevent mouse events emulation\n                if (e.preventDefault) {\n                    e.preventDefault();\n                } else {\n                    e.returnValue = false;\n                    return false;\n                }\n            } else {\n                self._c = true;\n            }\n        };\n\n        self._onChange = function(e)\n        {\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n            if (hasClass(target, 'pika-select-month')) {\n                self.gotoMonth(target.value);\n            }\n            else if (hasClass(target, 'pika-select-year')) {\n                self.gotoYear(target.value);\n            }\n        };\n\n        self._onKeyChange = function(e)\n        {\n            e = e || window.event;\n\n            if (self.isVisible()) {\n\n                switch(e.keyCode){\n                    case 13:\n                    case 27:\n                        if (opts.field) {\n                            opts.field.blur();\n                        }\n                        break;\n                    case 37:\n                        e.preventDefault();\n                        self.adjustDate('subtract', 1);\n                        break;\n                    case 38:\n                        self.adjustDate('subtract', 7);\n                        break;\n                    case 39:\n                        self.adjustDate('add', 1);\n                        break;\n                    case 40:\n                        self.adjustDate('add', 7);\n                        break;\n                }\n            }\n        };\n\n        self._onInputChange = function(e)\n        {\n            var date;\n\n            if (e.firedBy === self) {\n                return;\n            }\n            if (opts.parse) {\n                date = opts.parse(opts.field.value, opts.format);\n            } else if (hasMoment) {\n                date = moment(opts.field.value, opts.format, opts.formatStrict);\n                date = (date && date.isValid()) ? date.toDate() : null;\n            }\n            else {\n                date = new Date(Date.parse(opts.field.value));\n            }\n            if (isDate(date)) {\n              self.setDate(date);\n            }\n            if (!self._v) {\n                self.show();\n            }\n        };\n\n        self._onInputFocus = function()\n        {\n            self.show();\n        };\n\n        self._onInputClick = function()\n        {\n            self.show();\n        };\n\n        self._onInputBlur = function()\n        {\n            // IE allows pika div to gain focus; catch blur the input field\n            var pEl = document.activeElement;\n            do {\n                if (hasClass(pEl, 'pika-single')) {\n                    return;\n                }\n            }\n            while ((pEl = pEl.parentNode));\n\n            if (!self._c) {\n                self._b = sto(function() {\n                    self.hide();\n                }, 50);\n            }\n            self._c = false;\n        };\n\n        self._onClick = function(e)\n        {\n            e = e || window.event;\n            var target = e.target || e.srcElement,\n                pEl = target;\n            if (!target) {\n                return;\n            }\n            if (!hasEventListeners && hasClass(target, 'pika-select')) {\n                if (!target.onchange) {\n                    target.setAttribute('onchange', 'return;');\n                    addEvent(target, 'change', self._onChange);\n                }\n            }\n            do {\n                if (hasClass(pEl, 'pika-single') || pEl === opts.trigger) {\n                    return;\n                }\n            }\n            while ((pEl = pEl.parentNode));\n            if (self._v && target !== opts.trigger && pEl !== opts.trigger) {\n                self.hide();\n            }\n        };\n\n        self.el = document.createElement('div');\n        self.el.className = 'pika-single' + (opts.isRTL ? ' is-rtl' : '') + (opts.theme ? ' ' + opts.theme : '');\n\n        addEvent(self.el, 'mousedown', self._onMouseDown, true);\n        addEvent(self.el, 'touchend', self._onMouseDown, true);\n        addEvent(self.el, 'change', self._onChange);\n        addEvent(document, 'keydown', self._onKeyChange);\n\n        if (opts.field) {\n            if (opts.container) {\n                opts.container.appendChild(self.el);\n            } else if (opts.bound) {\n                document.body.appendChild(self.el);\n            } else {\n                opts.field.parentNode.insertBefore(self.el, opts.field.nextSibling);\n            }\n            addEvent(opts.field, 'change', self._onInputChange);\n\n            if (!opts.defaultDate) {\n                if (hasMoment && opts.field.value) {\n                    opts.defaultDate = moment(opts.field.value, opts.format).toDate();\n                } else {\n                    opts.defaultDate = new Date(Date.parse(opts.field.value));\n                }\n                opts.setDefaultDate = true;\n            }\n        }\n\n        var defDate = opts.defaultDate;\n\n        if (isDate(defDate)) {\n            if (opts.setDefaultDate) {\n                self.setDate(defDate, true);\n            } else {\n                self.gotoDate(defDate);\n            }\n        } else {\n            self.gotoDate(new Date());\n        }\n\n        if (opts.bound) {\n            this.hide();\n            self.el.className += ' is-bound';\n            addEvent(opts.trigger, 'click', self._onInputClick);\n            addEvent(opts.trigger, 'focus', self._onInputFocus);\n            addEvent(opts.trigger, 'blur', self._onInputBlur);\n        } else {\n            this.show();\n        }\n    };\n\n\n    /**\n     * public Pikaday API\n     */\n    Pikaday.prototype = {\n\n\n        /**\n         * configure functionality\n         */\n        config: function(options)\n        {\n            if (!this._o) {\n                this._o = extend({}, defaults, true);\n            }\n\n            var opts = extend(this._o, options, true);\n\n            opts.isRTL = !!opts.isRTL;\n\n            opts.field = (opts.field && opts.field.nodeName) ? opts.field : null;\n\n            opts.theme = (typeof opts.theme) === 'string' && opts.theme ? opts.theme : null;\n\n            opts.bound = !!(opts.bound !== undefined ? opts.field && opts.bound : opts.field);\n\n            opts.trigger = (opts.trigger && opts.trigger.nodeName) ? opts.trigger : opts.field;\n\n            opts.disableWeekends = !!opts.disableWeekends;\n\n            opts.disableDayFn = (typeof opts.disableDayFn) === 'function' ? opts.disableDayFn : null;\n\n            var nom = parseInt(opts.numberOfMonths, 10) || 1;\n            opts.numberOfMonths = nom > 4 ? 4 : nom;\n\n            if (!isDate(opts.minDate)) {\n                opts.minDate = false;\n            }\n            if (!isDate(opts.maxDate)) {\n                opts.maxDate = false;\n            }\n            if ((opts.minDate && opts.maxDate) && opts.maxDate < opts.minDate) {\n                opts.maxDate = opts.minDate = false;\n            }\n            if (opts.minDate) {\n                this.setMinDate(opts.minDate);\n            }\n            if (opts.maxDate) {\n                this.setMaxDate(opts.maxDate);\n            }\n\n            if (isArray(opts.yearRange)) {\n                var fallback = new Date().getFullYear() - 10;\n                opts.yearRange[0] = parseInt(opts.yearRange[0], 10) || fallback;\n                opts.yearRange[1] = parseInt(opts.yearRange[1], 10) || fallback;\n            } else {\n                opts.yearRange = Math.abs(parseInt(opts.yearRange, 10)) || defaults.yearRange;\n                if (opts.yearRange > 100) {\n                    opts.yearRange = 100;\n                }\n            }\n\n            return opts;\n        },\n\n        /**\n         * return a formatted string of the current selection (using Moment.js if available)\n         */\n        toString: function(format)\n        {\n            format = format || this._o.format;\n            if (!isDate(this._d)) {\n                return '';\n            }\n            if (this._o.toString) {\n              return this._o.toString(this._d, format);\n            }\n            if (hasMoment) {\n              return moment(this._d).format(format);\n            }\n            return this._d.toDateString();\n        },\n\n        /**\n         * return a Moment.js object of the current selection (if available)\n         */\n        getMoment: function()\n        {\n            return hasMoment ? moment(this._d) : null;\n        },\n\n        /**\n         * set the current selection from a Moment.js object (if available)\n         */\n        setMoment: function(date, preventOnSelect)\n        {\n            if (hasMoment && moment.isMoment(date)) {\n                this.setDate(date.toDate(), preventOnSelect);\n            }\n        },\n\n        /**\n         * return a Date object of the current selection\n         */\n        getDate: function()\n        {\n            return isDate(this._d) ? new Date(this._d.getTime()) : null;\n        },\n\n        /**\n         * set the current selection\n         */\n        setDate: function(date, preventOnSelect)\n        {\n            if (!date) {\n                this._d = null;\n\n                if (this._o.field) {\n                    this._o.field.value = '';\n                    fireEvent(this._o.field, 'change', { firedBy: this });\n                }\n\n                return this.draw();\n            }\n            if (typeof date === 'string') {\n                date = new Date(Date.parse(date));\n            }\n            if (!isDate(date)) {\n                return;\n            }\n\n            var min = this._o.minDate,\n                max = this._o.maxDate;\n\n            if (isDate(min) && date < min) {\n                date = min;\n            } else if (isDate(max) && date > max) {\n                date = max;\n            }\n\n            this._d = new Date(date.getTime());\n            setToStartOfDay(this._d);\n            this.gotoDate(this._d);\n\n            if (this._o.field) {\n                this._o.field.value = this.toString();\n                fireEvent(this._o.field, 'change', { firedBy: this });\n            }\n            if (!preventOnSelect && typeof this._o.onSelect === 'function') {\n                this._o.onSelect.call(this, this.getDate());\n            }\n        },\n\n        /**\n         * change view to a specific date\n         */\n        gotoDate: function(date)\n        {\n            var newCalendar = true;\n\n            if (!isDate(date)) {\n                return;\n            }\n\n            if (this.calendars) {\n                var firstVisibleDate = new Date(this.calendars[0].year, this.calendars[0].month, 1),\n                    lastVisibleDate = new Date(this.calendars[this.calendars.length-1].year, this.calendars[this.calendars.length-1].month, 1),\n                    visibleDate = date.getTime();\n                // get the end of the month\n                lastVisibleDate.setMonth(lastVisibleDate.getMonth()+1);\n                lastVisibleDate.setDate(lastVisibleDate.getDate()-1);\n                newCalendar = (visibleDate < firstVisibleDate.getTime() || lastVisibleDate.getTime() < visibleDate);\n            }\n\n            if (newCalendar) {\n                this.calendars = [{\n                    month: date.getMonth(),\n                    year: date.getFullYear()\n                }];\n                if (this._o.mainCalendar === 'right') {\n                    this.calendars[0].month += 1 - this._o.numberOfMonths;\n                }\n            }\n\n            this.adjustCalendars();\n        },\n\n        adjustDate: function(sign, days) {\n\n            var day = this.getDate() || new Date();\n            var difference = parseInt(days)*24*60*60*1000;\n\n            var newDay;\n\n            if (sign === 'add') {\n                newDay = new Date(day.valueOf() + difference);\n            } else if (sign === 'subtract') {\n                newDay = new Date(day.valueOf() - difference);\n            }\n\n            this.setDate(newDay);\n        },\n\n        adjustCalendars: function() {\n            this.calendars[0] = adjustCalendar(this.calendars[0]);\n            for (var c = 1; c < this._o.numberOfMonths; c++) {\n                this.calendars[c] = adjustCalendar({\n                    month: this.calendars[0].month + c,\n                    year: this.calendars[0].year\n                });\n            }\n            this.draw();\n        },\n\n        gotoToday: function()\n        {\n            this.gotoDate(new Date());\n        },\n\n        /**\n         * change view to a specific month (zero-index, e.g. 0: January)\n         */\n        gotoMonth: function(month)\n        {\n            if (!isNaN(month)) {\n                this.calendars[0].month = parseInt(month, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        nextMonth: function()\n        {\n            this.calendars[0].month++;\n            this.adjustCalendars();\n        },\n\n        prevMonth: function()\n        {\n            this.calendars[0].month--;\n            this.adjustCalendars();\n        },\n\n        /**\n         * change view to a specific full year (e.g. \"2012\")\n         */\n        gotoYear: function(year)\n        {\n            if (!isNaN(year)) {\n                this.calendars[0].year = parseInt(year, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        /**\n         * change the minDate\n         */\n        setMinDate: function(value)\n        {\n            if(value instanceof Date) {\n                setToStartOfDay(value);\n                this._o.minDate = value;\n                this._o.minYear  = value.getFullYear();\n                this._o.minMonth = value.getMonth();\n            } else {\n                this._o.minDate = defaults.minDate;\n                this._o.minYear  = defaults.minYear;\n                this._o.minMonth = defaults.minMonth;\n                this._o.startRange = defaults.startRange;\n            }\n\n            this.draw();\n        },\n\n        /**\n         * change the maxDate\n         */\n        setMaxDate: function(value)\n        {\n            if(value instanceof Date) {\n                setToStartOfDay(value);\n                this._o.maxDate = value;\n                this._o.maxYear = value.getFullYear();\n                this._o.maxMonth = value.getMonth();\n            } else {\n                this._o.maxDate = defaults.maxDate;\n                this._o.maxYear = defaults.maxYear;\n                this._o.maxMonth = defaults.maxMonth;\n                this._o.endRange = defaults.endRange;\n            }\n\n            this.draw();\n        },\n\n        setStartRange: function(value)\n        {\n            this._o.startRange = value;\n        },\n\n        setEndRange: function(value)\n        {\n            this._o.endRange = value;\n        },\n\n        /**\n         * refresh the HTML\n         */\n        draw: function(force)\n        {\n            if (!this._v && !force) {\n                return;\n            }\n            var opts = this._o,\n                minYear = opts.minYear,\n                maxYear = opts.maxYear,\n                minMonth = opts.minMonth,\n                maxMonth = opts.maxMonth,\n                html = '',\n                randId;\n\n            if (this._y <= minYear) {\n                this._y = minYear;\n                if (!isNaN(minMonth) && this._m < minMonth) {\n                    this._m = minMonth;\n                }\n            }\n            if (this._y >= maxYear) {\n                this._y = maxYear;\n                if (!isNaN(maxMonth) && this._m > maxMonth) {\n                    this._m = maxMonth;\n                }\n            }\n\n            randId = 'pika-title-' + Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 2);\n\n            for (var c = 0; c < opts.numberOfMonths; c++) {\n                html += '<div class=\"pika-lendar\">' + renderTitle(this, c, this.calendars[c].year, this.calendars[c].month, this.calendars[0].year, randId) + this.render(this.calendars[c].year, this.calendars[c].month, randId) + '</div>';\n            }\n\n            this.el.innerHTML = html;\n\n            if (opts.bound) {\n                if(opts.field.type !== 'hidden') {\n                    sto(function() {\n                        opts.trigger.focus();\n                    }, 1);\n                }\n            }\n\n            if (typeof this._o.onDraw === 'function') {\n                this._o.onDraw(this);\n            }\n\n            if (opts.bound) {\n                // let the screen reader user know to use arrow keys\n                opts.field.setAttribute('aria-label', 'Use the arrow keys to pick a date');\n            }\n        },\n\n        adjustPosition: function()\n        {\n            var field, pEl, width, height, viewportWidth, viewportHeight, scrollTop, left, top, clientRect;\n\n            if (this._o.container) return;\n\n            this.el.style.position = 'absolute';\n\n            field = this._o.trigger;\n            pEl = field;\n            width = this.el.offsetWidth;\n            height = this.el.offsetHeight;\n            viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n            viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n            scrollTop = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\n\n            if (typeof field.getBoundingClientRect === 'function') {\n                clientRect = field.getBoundingClientRect();\n                left = clientRect.left + window.pageXOffset;\n                top = clientRect.bottom + window.pageYOffset;\n            } else {\n                left = pEl.offsetLeft;\n                top  = pEl.offsetTop + pEl.offsetHeight;\n                while((pEl = pEl.offsetParent)) {\n                    left += pEl.offsetLeft;\n                    top  += pEl.offsetTop;\n                }\n            }\n\n            // default position is bottom & left\n            if ((this._o.reposition && left + width > viewportWidth) ||\n                (\n                    this._o.position.indexOf('right') > -1 &&\n                    left - width + field.offsetWidth > 0\n                )\n            ) {\n                left = left - width + field.offsetWidth;\n            }\n            if ((this._o.reposition && top + height > viewportHeight + scrollTop) ||\n                (\n                    this._o.position.indexOf('top') > -1 &&\n                    top - height - field.offsetHeight > 0\n                )\n            ) {\n                top = top - height - field.offsetHeight;\n            }\n\n            this.el.style.left = left + 'px';\n            this.el.style.top = top + 'px';\n        },\n\n        /**\n         * render HTML for a particular month\n         */\n        render: function(year, month, randId)\n        {\n            var opts   = this._o,\n                now    = new Date(),\n                days   = getDaysInMonth(year, month),\n                before = new Date(year, month, 1).getDay(),\n                data   = [],\n                row    = [];\n            setToStartOfDay(now);\n            if (opts.firstDay > 0) {\n                before -= opts.firstDay;\n                if (before < 0) {\n                    before += 7;\n                }\n            }\n            var previousMonth = month === 0 ? 11 : month - 1,\n                nextMonth = month === 11 ? 0 : month + 1,\n                yearOfPreviousMonth = month === 0 ? year - 1 : year,\n                yearOfNextMonth = month === 11 ? year + 1 : year,\n                daysInPreviousMonth = getDaysInMonth(yearOfPreviousMonth, previousMonth);\n            var cells = days + before,\n                after = cells;\n            while(after > 7) {\n                after -= 7;\n            }\n            cells += 7 - after;\n            var isWeekSelected = false;\n            for (var i = 0, r = 0; i < cells; i++)\n            {\n                var day = new Date(year, month, 1 + (i - before)),\n                    isSelected = isDate(this._d) ? compareDates(day, this._d) : false,\n                    isToday = compareDates(day, now),\n                    hasEvent = opts.events.indexOf(day.toDateString()) !== -1 ? true : false,\n                    isEmpty = i < before || i >= (days + before),\n                    dayNumber = 1 + (i - before),\n                    monthNumber = month,\n                    yearNumber = year,\n                    isStartRange = opts.startRange && compareDates(opts.startRange, day),\n                    isEndRange = opts.endRange && compareDates(opts.endRange, day),\n                    isInRange = opts.startRange && opts.endRange && opts.startRange < day && day < opts.endRange,\n                    isDisabled = (opts.minDate && day < opts.minDate) ||\n                                 (opts.maxDate && day > opts.maxDate) ||\n                                 (opts.disableWeekends && isWeekend(day)) ||\n                                 (opts.disableDayFn && opts.disableDayFn(day));\n\n                if (isEmpty) {\n                    if (i < before) {\n                        dayNumber = daysInPreviousMonth + dayNumber;\n                        monthNumber = previousMonth;\n                        yearNumber = yearOfPreviousMonth;\n                    } else {\n                        dayNumber = dayNumber - days;\n                        monthNumber = nextMonth;\n                        yearNumber = yearOfNextMonth;\n                    }\n                }\n\n                var dayConfig = {\n                        day: dayNumber,\n                        month: monthNumber,\n                        year: yearNumber,\n                        hasEvent: hasEvent,\n                        isSelected: isSelected,\n                        isToday: isToday,\n                        isDisabled: isDisabled,\n                        isEmpty: isEmpty,\n                        isStartRange: isStartRange,\n                        isEndRange: isEndRange,\n                        isInRange: isInRange,\n                        showDaysInNextAndPreviousMonths: opts.showDaysInNextAndPreviousMonths,\n                        enableSelectionDaysInNextAndPreviousMonths: opts.enableSelectionDaysInNextAndPreviousMonths\n                    };\n\n                if (opts.pickWholeWeek && isSelected) {\n                    isWeekSelected = true;\n                }\n\n                row.push(renderDay(dayConfig));\n\n                if (++r === 7) {\n                    if (opts.showWeekNumber) {\n                        row.unshift(renderWeek(i - before, month, year));\n                    }\n                    data.push(renderRow(row, opts.isRTL, opts.pickWholeWeek, isWeekSelected));\n                    row = [];\n                    r = 0;\n                    isWeekSelected = false;\n                }\n            }\n            return renderTable(opts, data, randId);\n        },\n\n        isVisible: function()\n        {\n            return this._v;\n        },\n\n        show: function()\n        {\n            if (!this.isVisible()) {\n                this._v = true;\n                this.draw();\n                removeClass(this.el, 'is-hidden');\n                if (this._o.bound) {\n                    addEvent(document, 'click', this._onClick);\n                    this.adjustPosition();\n                }\n                if (typeof this._o.onOpen === 'function') {\n                    this._o.onOpen.call(this);\n                }\n            }\n        },\n\n        hide: function()\n        {\n            var v = this._v;\n            if (v !== false) {\n                if (this._o.bound) {\n                    removeEvent(document, 'click', this._onClick);\n                }\n                this.el.style.position = 'static'; // reset\n                this.el.style.left = 'auto';\n                this.el.style.top = 'auto';\n                addClass(this.el, 'is-hidden');\n                this._v = false;\n                if (v !== undefined && typeof this._o.onClose === 'function') {\n                    this._o.onClose.call(this);\n                }\n            }\n        },\n\n        /**\n         * GAME OVER\n         */\n        destroy: function()\n        {\n            this.hide();\n            removeEvent(this.el, 'mousedown', this._onMouseDown, true);\n            removeEvent(this.el, 'touchend', this._onMouseDown, true);\n            removeEvent(this.el, 'change', this._onChange);\n            removeEvent(document, 'keydown', this._onKeyChange);\n            if (this._o.field) {\n                removeEvent(this._o.field, 'change', this._onInputChange);\n                if (this._o.bound) {\n                    removeEvent(this._o.trigger, 'click', this._onInputClick);\n                    removeEvent(this._o.trigger, 'focus', this._onInputFocus);\n                    removeEvent(this._o.trigger, 'blur', this._onInputBlur);\n                }\n            }\n            if (this.el.parentNode) {\n                this.el.parentNode.removeChild(this.el);\n            }\n        }\n\n    };\n\n    return Pikaday;\n\n}));\n\n},{\"moment\":6}],9:[function(require,module,exports){\n'use strict';\nvar strictUriEncode = require('strict-uri-encode');\nvar objectAssign = require('object-assign');\nvar decodeComponent = require('decode-uri-component');\n\nfunction encoderForArrayFormat(opts) {\n\tswitch (opts.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn function (key, value, index) {\n\t\t\t\treturn value === null ? [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[',\n\t\t\t\t\tindex,\n\t\t\t\t\t']'\n\t\t\t\t].join('') : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[',\n\t\t\t\t\tencode(index, opts),\n\t\t\t\t\t']=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn function (key, value) {\n\t\t\t\treturn value === null ? encode(key, opts) : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[]=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn function (key, value) {\n\t\t\t\treturn value === null ? encode(key, opts) : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(opts) {\n\tvar result;\n\n\tswitch (opts.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t} else if (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction encode(value, opts) {\n\tif (opts.encode) {\n\t\treturn opts.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t} else if (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input)).sort(function (a, b) {\n\t\t\treturn Number(a) - Number(b);\n\t\t}).map(function (key) {\n\t\t\treturn input[key];\n\t\t});\n\t}\n\n\treturn input;\n}\n\nexports.extract = function (str) {\n\treturn str.split('?')[1] || '';\n};\n\nexports.parse = function (str, opts) {\n\topts = objectAssign({arrayFormat: 'none'}, opts);\n\n\tvar formatter = parserForArrayFormat(opts);\n\n\t// Create an object with no prototype\n\t// https://github.com/sindresorhus/query-string/issues/47\n\tvar ret = Object.create(null);\n\n\tif (typeof str !== 'string') {\n\t\treturn ret;\n\t}\n\n\tstr = str.trim().replace(/^(\\?|#|&)/, '');\n\n\tif (!str) {\n\t\treturn ret;\n\t}\n\n\tstr.split('&').forEach(function (param) {\n\t\tvar parts = param.replace(/\\+/g, ' ').split('=');\n\t\t// Firefox (pre 40) decodes `%3D` to `=`\n\t\t// https://github.com/sindresorhus/query-string/pull/37\n\t\tvar key = parts.shift();\n\t\tvar val = parts.length > 0 ? parts.join('=') : undefined;\n\n\t\t// missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tval = val === undefined ? null : decodeComponent(val);\n\n\t\tformatter(decodeComponent(key), val, ret);\n\t});\n\n\treturn Object.keys(ret).sort().reduce(function (result, key) {\n\t\tvar val = ret[key];\n\t\tif (Boolean(val) && typeof val === 'object' && !Array.isArray(val)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(val);\n\t\t} else {\n\t\t\tresult[key] = val;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n};\n\nexports.stringify = function (obj, opts) {\n\tvar defaults = {\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none'\n\t};\n\n\topts = objectAssign(defaults, opts);\n\n\tvar formatter = encoderForArrayFormat(opts);\n\n\treturn obj ? Object.keys(obj).sort().map(function (key) {\n\t\tvar val = obj[key];\n\n\t\tif (val === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (val === null) {\n\t\t\treturn encode(key, opts);\n\t\t}\n\n\t\tif (Array.isArray(val)) {\n\t\t\tvar result = [];\n\n\t\t\tval.slice().forEach(function (val2) {\n\t\t\t\tif (val2 === undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tresult.push(formatter(key, val2, result.length));\n\t\t\t});\n\n\t\t\treturn result.join('&');\n\t\t}\n\n\t\treturn encode(key, opts) + '=' + encode(val, opts);\n\t}).filter(function (x) {\n\t\treturn x.length > 0;\n\t}).join('&') : '';\n};\n\n},{\"decode-uri-component\":2,\"object-assign\":7,\"strict-uri-encode\":11}],10:[function(require,module,exports){\n/**!\n * Sortable\n * @author\tRubaXa   <trash@rubaxa.org>\n * @license MIT\n */\n\n(function sortableModule(factory) {\n\t\"use strict\";\n\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(factory);\n\t}\n\telse if (typeof module != \"undefined\" && typeof module.exports != \"undefined\") {\n\t\tmodule.exports = factory();\n\t}\n\telse {\n\t\t/* jshint sub:true */\n\t\twindow[\"Sortable\"] = factory();\n\t}\n})(function sortableFactory() {\n\t\"use strict\";\n\n\tif (typeof window == \"undefined\" || !window.document) {\n\t\treturn function sortableError() {\n\t\t\tthrow new Error(\"Sortable.js requires a window with a document\");\n\t\t};\n\t}\n\n\tvar dragEl,\n\t\tparentEl,\n\t\tghostEl,\n\t\tcloneEl,\n\t\trootEl,\n\t\tnextEl,\n\t\tlastDownEl,\n\n\t\tscrollEl,\n\t\tscrollParentEl,\n\t\tscrollCustomFn,\n\n\t\tlastEl,\n\t\tlastCSS,\n\t\tlastParentCSS,\n\n\t\toldIndex,\n\t\tnewIndex,\n\n\t\tactiveGroup,\n\t\tputSortable,\n\n\t\tautoScroll = {},\n\n\t\ttapEvt,\n\t\ttouchEvt,\n\n\t\tmoved,\n\n\t\t/** @const */\n\t\tR_SPACE = /\\s+/g,\n\t\tR_FLOAT = /left|right|inline/,\n\n\t\texpando = 'Sortable' + (new Date).getTime(),\n\n\t\twin = window,\n\t\tdocument = win.document,\n\t\tparseInt = win.parseInt,\n\n\t\t$ = win.jQuery || win.Zepto,\n\t\tPolymer = win.Polymer,\n\n\t\tcaptureMode = false,\n\n\t\tsupportDraggable = !!('draggable' in document.createElement('div')),\n\t\tsupportCssPointerEvents = (function (el) {\n\t\t\t// false when IE11\n\t\t\tif (!!navigator.userAgent.match(/Trident.*rv[ :]?11\\./)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tel = document.createElement('x');\n\t\t\tel.style.cssText = 'pointer-events:auto';\n\t\t\treturn el.style.pointerEvents === 'auto';\n\t\t})(),\n\n\t\t_silent = false,\n\n\t\tabs = Math.abs,\n\t\tmin = Math.min,\n\n\t\tsavedInputChecked = [],\n\t\ttouchDragOverListeners = [],\n\n\t\t_autoScroll = _throttle(function (/**Event*/evt, /**Object*/options, /**HTMLElement*/rootEl) {\n\t\t\t// Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n\t\t\tif (rootEl && options.scroll) {\n\t\t\t\tvar _this = rootEl[expando],\n\t\t\t\t\tel,\n\t\t\t\t\trect,\n\t\t\t\t\tsens = options.scrollSensitivity,\n\t\t\t\t\tspeed = options.scrollSpeed,\n\n\t\t\t\t\tx = evt.clientX,\n\t\t\t\t\ty = evt.clientY,\n\n\t\t\t\t\twinWidth = window.innerWidth,\n\t\t\t\t\twinHeight = window.innerHeight,\n\n\t\t\t\t\tvx,\n\t\t\t\t\tvy,\n\n\t\t\t\t\tscrollOffsetX,\n\t\t\t\t\tscrollOffsetY\n\t\t\t\t;\n\n\t\t\t\t// Delect scrollEl\n\t\t\t\tif (scrollParentEl !== rootEl) {\n\t\t\t\t\tscrollEl = options.scroll;\n\t\t\t\t\tscrollParentEl = rootEl;\n\t\t\t\t\tscrollCustomFn = options.scrollFn;\n\n\t\t\t\t\tif (scrollEl === true) {\n\t\t\t\t\t\tscrollEl = rootEl;\n\n\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\tif ((scrollEl.offsetWidth < scrollEl.scrollWidth) ||\n\t\t\t\t\t\t\t\t(scrollEl.offsetHeight < scrollEl.scrollHeight)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t\t\t} while (scrollEl = scrollEl.parentNode);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (scrollEl) {\n\t\t\t\t\tel = scrollEl;\n\t\t\t\t\trect = scrollEl.getBoundingClientRect();\n\t\t\t\t\tvx = (abs(rect.right - x) <= sens) - (abs(rect.left - x) <= sens);\n\t\t\t\t\tvy = (abs(rect.bottom - y) <= sens) - (abs(rect.top - y) <= sens);\n\t\t\t\t}\n\n\n\t\t\t\tif (!(vx || vy)) {\n\t\t\t\t\tvx = (winWidth - x <= sens) - (x <= sens);\n\t\t\t\t\tvy = (winHeight - y <= sens) - (y <= sens);\n\n\t\t\t\t\t/* jshint expr:true */\n\t\t\t\t\t(vx || vy) && (el = win);\n\t\t\t\t}\n\n\n\t\t\t\tif (autoScroll.vx !== vx || autoScroll.vy !== vy || autoScroll.el !== el) {\n\t\t\t\t\tautoScroll.el = el;\n\t\t\t\t\tautoScroll.vx = vx;\n\t\t\t\t\tautoScroll.vy = vy;\n\n\t\t\t\t\tclearInterval(autoScroll.pid);\n\n\t\t\t\t\tif (el) {\n\t\t\t\t\t\tautoScroll.pid = setInterval(function () {\n\t\t\t\t\t\t\tscrollOffsetY = vy ? vy * speed : 0;\n\t\t\t\t\t\t\tscrollOffsetX = vx ? vx * speed : 0;\n\n\t\t\t\t\t\t\tif ('function' === typeof(scrollCustomFn)) {\n\t\t\t\t\t\t\t\treturn scrollCustomFn.call(_this, scrollOffsetX, scrollOffsetY, evt);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (el === win) {\n\t\t\t\t\t\t\t\twin.scrollTo(win.pageXOffset + scrollOffsetX, win.pageYOffset + scrollOffsetY);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tel.scrollTop += scrollOffsetY;\n\t\t\t\t\t\t\t\tel.scrollLeft += scrollOffsetX;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 24);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, 30),\n\n\t\t_prepareGroup = function (options) {\n\t\t\tfunction toFn(value, pull) {\n\t\t\t\tif (value === void 0 || value === true) {\n\t\t\t\t\tvalue = group.name;\n\t\t\t\t}\n\n\t\t\t\tif (typeof value === 'function') {\n\t\t\t\t\treturn value;\n\t\t\t\t} else {\n\t\t\t\t\treturn function (to, from) {\n\t\t\t\t\t\tvar fromGroup = from.options.group.name;\n\n\t\t\t\t\t\treturn pull\n\t\t\t\t\t\t\t? value\n\t\t\t\t\t\t\t: value && (value.join\n\t\t\t\t\t\t\t\t? value.indexOf(fromGroup) > -1\n\t\t\t\t\t\t\t\t: (fromGroup == value)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar group = {};\n\t\t\tvar originalGroup = options.group;\n\n\t\t\tif (!originalGroup || typeof originalGroup != 'object') {\n\t\t\t\toriginalGroup = {name: originalGroup};\n\t\t\t}\n\n\t\t\tgroup.name = originalGroup.name;\n\t\t\tgroup.checkPull = toFn(originalGroup.pull, true);\n\t\t\tgroup.checkPut = toFn(originalGroup.put);\n\t\t\tgroup.revertClone = originalGroup.revertClone;\n\n\t\t\toptions.group = group;\n\t\t}\n\t;\n\n\n\t/**\n\t * @class  Sortable\n\t * @param  {HTMLElement}  el\n\t * @param  {Object}       [options]\n\t */\n\tfunction Sortable(el, options) {\n\t\tif (!(el && el.nodeType && el.nodeType === 1)) {\n\t\t\tthrow 'Sortable: `el` must be HTMLElement, and not ' + {}.toString.call(el);\n\t\t}\n\n\t\tthis.el = el; // root element\n\t\tthis.options = options = _extend({}, options);\n\n\n\t\t// Export instance\n\t\tel[expando] = this;\n\n\t\t// Default options\n\t\tvar defaults = {\n\t\t\tgroup: Math.random(),\n\t\t\tsort: true,\n\t\t\tdisabled: false,\n\t\t\tstore: null,\n\t\t\thandle: null,\n\t\t\tscroll: true,\n\t\t\tscrollSensitivity: 30,\n\t\t\tscrollSpeed: 10,\n\t\t\tdraggable: /[uo]l/i.test(el.nodeName) ? 'li' : '>*',\n\t\t\tghostClass: 'sortable-ghost',\n\t\t\tchosenClass: 'sortable-chosen',\n\t\t\tdragClass: 'sortable-drag',\n\t\t\tignore: 'a, img',\n\t\t\tfilter: null,\n\t\t\tpreventOnFilter: true,\n\t\t\tanimation: 0,\n\t\t\tsetData: function (dataTransfer, dragEl) {\n\t\t\t\tdataTransfer.setData('Text', dragEl.textContent);\n\t\t\t},\n\t\t\tdropBubble: false,\n\t\t\tdragoverBubble: false,\n\t\t\tdataIdAttr: 'data-id',\n\t\t\tdelay: 0,\n\t\t\tforceFallback: false,\n\t\t\tfallbackClass: 'sortable-fallback',\n\t\t\tfallbackOnBody: false,\n\t\t\tfallbackTolerance: 0,\n\t\t\tfallbackOffset: {x: 0, y: 0}\n\t\t};\n\n\n\t\t// Set default options\n\t\tfor (var name in defaults) {\n\t\t\t!(name in options) && (options[name] = defaults[name]);\n\t\t}\n\n\t\t_prepareGroup(options);\n\n\t\t// Bind all private methods\n\t\tfor (var fn in this) {\n\t\t\tif (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n\t\t\t\tthis[fn] = this[fn].bind(this);\n\t\t\t}\n\t\t}\n\n\t\t// Setup drag mode\n\t\tthis.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n\t\t// Bind events\n\t\t_on(el, 'mousedown', this._onTapStart);\n\t\t_on(el, 'touchstart', this._onTapStart);\n\t\t_on(el, 'pointerdown', this._onTapStart);\n\n\t\tif (this.nativeDraggable) {\n\t\t\t_on(el, 'dragover', this);\n\t\t\t_on(el, 'dragenter', this);\n\t\t}\n\n\t\ttouchDragOverListeners.push(this._onDragOver);\n\n\t\t// Restore sorting\n\t\toptions.store && this.sort(options.store.get(this));\n\t}\n\n\n\tSortable.prototype = /** @lends Sortable.prototype */ {\n\t\tconstructor: Sortable,\n\n\t\t_onTapStart: function (/** Event|TouchEvent */evt) {\n\t\t\tvar _this = this,\n\t\t\t\tel = this.el,\n\t\t\t\toptions = this.options,\n\t\t\t\tpreventOnFilter = options.preventOnFilter,\n\t\t\t\ttype = evt.type,\n\t\t\t\ttouch = evt.touches && evt.touches[0],\n\t\t\t\ttarget = (touch || evt).target,\n\t\t\t\toriginalTarget = evt.target.shadowRoot && (evt.path && evt.path[0]) || target,\n\t\t\t\tfilter = options.filter,\n\t\t\t\tstartIndex;\n\n\t\t\t_saveInputCheckedState(el);\n\n\n\t\t\t// Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n\t\t\tif (dragEl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n\t\t\t\treturn; // only left button or enabled\n\t\t\t}\n\n\n\t\t\ttarget = _closest(target, options.draggable, el);\n\n\t\t\tif (!target) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (lastDownEl === target) {\n\t\t\t\t// Ignoring duplicate `down`\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Get the index of the dragged element within its parent\n\t\t\tstartIndex = _index(target, options.draggable);\n\n\t\t\t// Check filter\n\t\t\tif (typeof filter === 'function') {\n\t\t\t\tif (filter.call(this, evt, target, this)) {\n\t\t\t\t\t_dispatchEvent(_this, originalTarget, 'filter', target, el, startIndex);\n\t\t\t\t\tpreventOnFilter && evt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (filter) {\n\t\t\t\tfilter = filter.split(',').some(function (criteria) {\n\t\t\t\t\tcriteria = _closest(originalTarget, criteria.trim(), el);\n\n\t\t\t\t\tif (criteria) {\n\t\t\t\t\t\t_dispatchEvent(_this, criteria, 'filter', target, el, startIndex);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (filter) {\n\t\t\t\t\tpreventOnFilter && evt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (options.handle && !_closest(originalTarget, options.handle, el)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Prepare `dragstart`\n\t\t\tthis._prepareDragStart(evt, touch, target, startIndex);\n\t\t},\n\n\t\t_prepareDragStart: function (/** Event */evt, /** Touch */touch, /** HTMLElement */target, /** Number */startIndex) {\n\t\t\tvar _this = this,\n\t\t\t\tel = _this.el,\n\t\t\t\toptions = _this.options,\n\t\t\t\townerDocument = el.ownerDocument,\n\t\t\t\tdragStartFn;\n\n\t\t\tif (target && !dragEl && (target.parentNode === el)) {\n\t\t\t\ttapEvt = evt;\n\n\t\t\t\trootEl = el;\n\t\t\t\tdragEl = target;\n\t\t\t\tparentEl = dragEl.parentNode;\n\t\t\t\tnextEl = dragEl.nextSibling;\n\t\t\t\tlastDownEl = target;\n\t\t\t\tactiveGroup = options.group;\n\t\t\t\toldIndex = startIndex;\n\n\t\t\t\tthis._lastX = (touch || evt).clientX;\n\t\t\t\tthis._lastY = (touch || evt).clientY;\n\n\t\t\t\tdragEl.style['will-change'] = 'transform';\n\n\t\t\t\tdragStartFn = function () {\n\t\t\t\t\t// Delayed drag has been triggered\n\t\t\t\t\t// we can re-enable the events: touchmove/mousemove\n\t\t\t\t\t_this._disableDelayedDrag();\n\n\t\t\t\t\t// Make the element draggable\n\t\t\t\t\tdragEl.draggable = _this.nativeDraggable;\n\n\t\t\t\t\t// Chosen item\n\t\t\t\t\t_toggleClass(dragEl, options.chosenClass, true);\n\n\t\t\t\t\t// Bind the events: dragstart/dragend\n\t\t\t\t\t_this._triggerDragStart(evt, touch);\n\n\t\t\t\t\t// Drag start event\n\t\t\t\t\t_dispatchEvent(_this, rootEl, 'choose', dragEl, rootEl, oldIndex);\n\t\t\t\t};\n\n\t\t\t\t// Disable \"draggable\"\n\t\t\t\toptions.ignore.split(',').forEach(function (criteria) {\n\t\t\t\t\t_find(dragEl, criteria.trim(), _disableDraggable);\n\t\t\t\t});\n\n\t\t\t\t_on(ownerDocument, 'mouseup', _this._onDrop);\n\t\t\t\t_on(ownerDocument, 'touchend', _this._onDrop);\n\t\t\t\t_on(ownerDocument, 'touchcancel', _this._onDrop);\n\t\t\t\t_on(ownerDocument, 'pointercancel', _this._onDrop);\n\t\t\t\t_on(ownerDocument, 'selectstart', _this);\n\n\t\t\t\tif (options.delay) {\n\t\t\t\t\t// If the user moves the pointer or let go the click or touch\n\t\t\t\t\t// before the delay has been reached:\n\t\t\t\t\t// disable the delayed drag\n\t\t\t\t\t_on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'mousemove', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchmove', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'pointermove', _this._disableDelayedDrag);\n\n\t\t\t\t\t_this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n\t\t\t\t} else {\n\t\t\t\t\tdragStartFn();\n\t\t\t\t}\n\n\n\t\t\t}\n\t\t},\n\n\t\t_disableDelayedDrag: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\tclearTimeout(this._dragStartTimer);\n\t\t\t_off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchend', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'mousemove', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchmove', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'pointermove', this._disableDelayedDrag);\n\t\t},\n\n\t\t_triggerDragStart: function (/** Event */evt, /** Touch */touch) {\n\t\t\ttouch = touch || (evt.pointerType == 'touch' ? evt : null);\n\n\t\t\tif (touch) {\n\t\t\t\t// Touch device support\n\t\t\t\ttapEvt = {\n\t\t\t\t\ttarget: dragEl,\n\t\t\t\t\tclientX: touch.clientX,\n\t\t\t\t\tclientY: touch.clientY\n\t\t\t\t};\n\n\t\t\t\tthis._onDragStart(tapEvt, 'touch');\n\t\t\t}\n\t\t\telse if (!this.nativeDraggable) {\n\t\t\t\tthis._onDragStart(tapEvt, true);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_on(dragEl, 'dragend', this);\n\t\t\t\t_on(rootEl, 'dragstart', this._onDragStart);\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tif (document.selection) {\n\t\t\t\t\t// Timeout neccessary for IE9\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tdocument.selection.empty();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t}\n\t\t},\n\n\t\t_dragStarted: function () {\n\t\t\tif (rootEl && dragEl) {\n\t\t\t\tvar options = this.options;\n\n\t\t\t\t// Apply effect\n\t\t\t\t_toggleClass(dragEl, options.ghostClass, true);\n\t\t\t\t_toggleClass(dragEl, options.dragClass, false);\n\n\t\t\t\tSortable.active = this;\n\n\t\t\t\t// Drag start event\n\t\t\t\t_dispatchEvent(this, rootEl, 'start', dragEl, rootEl, oldIndex);\n\t\t\t} else {\n\t\t\t\tthis._nulling();\n\t\t\t}\n\t\t},\n\n\t\t_emulateDragOver: function () {\n\t\t\tif (touchEvt) {\n\t\t\t\tif (this._lastX === touchEvt.clientX && this._lastY === touchEvt.clientY) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis._lastX = touchEvt.clientX;\n\t\t\t\tthis._lastY = touchEvt.clientY;\n\n\t\t\t\tif (!supportCssPointerEvents) {\n\t\t\t\t\t_css(ghostEl, 'display', 'none');\n\t\t\t\t}\n\n\t\t\t\tvar target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY),\n\t\t\t\t\tparent = target,\n\t\t\t\t\ti = touchDragOverListeners.length;\n\n\t\t\t\tif (parent) {\n\t\t\t\t\tdo {\n\t\t\t\t\t\tif (parent[expando]) {\n\t\t\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\t\t\ttouchDragOverListeners[i]({\n\t\t\t\t\t\t\t\t\tclientX: touchEvt.clientX,\n\t\t\t\t\t\t\t\t\tclientY: touchEvt.clientY,\n\t\t\t\t\t\t\t\t\ttarget: target,\n\t\t\t\t\t\t\t\t\trootEl: parent\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget = parent; // store last element\n\t\t\t\t\t}\n\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t\twhile (parent = parent.parentNode);\n\t\t\t\t}\n\n\t\t\t\tif (!supportCssPointerEvents) {\n\t\t\t\t\t_css(ghostEl, 'display', '');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t_onTouchMove: function (/**TouchEvent*/evt) {\n\t\t\tif (tapEvt) {\n\t\t\t\tvar\toptions = this.options,\n\t\t\t\t\tfallbackTolerance = options.fallbackTolerance,\n\t\t\t\t\tfallbackOffset = options.fallbackOffset,\n\t\t\t\t\ttouch = evt.touches ? evt.touches[0] : evt,\n\t\t\t\t\tdx = (touch.clientX - tapEvt.clientX) + fallbackOffset.x,\n\t\t\t\t\tdy = (touch.clientY - tapEvt.clientY) + fallbackOffset.y,\n\t\t\t\t\ttranslate3d = evt.touches ? 'translate3d(' + dx + 'px,' + dy + 'px,0)' : 'translate(' + dx + 'px,' + dy + 'px)';\n\n\t\t\t\t// only set the status to dragging, when we are actually dragging\n\t\t\t\tif (!Sortable.active) {\n\t\t\t\t\tif (fallbackTolerance &&\n\t\t\t\t\t\tmin(abs(touch.clientX - this._lastX), abs(touch.clientY - this._lastY)) < fallbackTolerance\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._dragStarted();\n\t\t\t\t}\n\n\t\t\t\t// as well as creating the ghost element on the document body\n\t\t\t\tthis._appendGhost();\n\n\t\t\t\tmoved = true;\n\t\t\t\ttouchEvt = touch;\n\n\t\t\t\t_css(ghostEl, 'webkitTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'mozTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'msTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'transform', translate3d);\n\n\t\t\t\tevt.preventDefault();\n\t\t\t}\n\t\t},\n\n\t\t_appendGhost: function () {\n\t\t\tif (!ghostEl) {\n\t\t\t\tvar rect = dragEl.getBoundingClientRect(),\n\t\t\t\t\tcss = _css(dragEl),\n\t\t\t\t\toptions = this.options,\n\t\t\t\t\tghostRect;\n\n\t\t\t\tghostEl = dragEl.cloneNode(true);\n\n\t\t\t\t_toggleClass(ghostEl, options.ghostClass, false);\n\t\t\t\t_toggleClass(ghostEl, options.fallbackClass, true);\n\t\t\t\t_toggleClass(ghostEl, options.dragClass, true);\n\n\t\t\t\t_css(ghostEl, 'top', rect.top - parseInt(css.marginTop, 10));\n\t\t\t\t_css(ghostEl, 'left', rect.left - parseInt(css.marginLeft, 10));\n\t\t\t\t_css(ghostEl, 'width', rect.width);\n\t\t\t\t_css(ghostEl, 'height', rect.height);\n\t\t\t\t_css(ghostEl, 'opacity', '0.8');\n\t\t\t\t_css(ghostEl, 'position', 'fixed');\n\t\t\t\t_css(ghostEl, 'zIndex', '100000');\n\t\t\t\t_css(ghostEl, 'pointerEvents', 'none');\n\n\t\t\t\toptions.fallbackOnBody && document.body.appendChild(ghostEl) || rootEl.appendChild(ghostEl);\n\n\t\t\t\t// Fixing dimensions.\n\t\t\t\tghostRect = ghostEl.getBoundingClientRect();\n\t\t\t\t_css(ghostEl, 'width', rect.width * 2 - ghostRect.width);\n\t\t\t\t_css(ghostEl, 'height', rect.height * 2 - ghostRect.height);\n\t\t\t}\n\t\t},\n\n\t\t_onDragStart: function (/**Event*/evt, /**boolean*/useFallback) {\n\t\t\tvar dataTransfer = evt.dataTransfer,\n\t\t\t\toptions = this.options;\n\n\t\t\tthis._offUpEvents();\n\n\t\t\tif (activeGroup.checkPull(this, this, dragEl, evt)) {\n\t\t\t\tcloneEl = _clone(dragEl);\n\n\t\t\t\tcloneEl.draggable = false;\n\t\t\t\tcloneEl.style['will-change'] = '';\n\n\t\t\t\t_css(cloneEl, 'display', 'none');\n\t\t\t\t_toggleClass(cloneEl, this.options.chosenClass, false);\n\n\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t\t_dispatchEvent(this, rootEl, 'clone', dragEl);\n\t\t\t}\n\n\t\t\t_toggleClass(dragEl, options.dragClass, true);\n\n\t\t\tif (useFallback) {\n\t\t\t\tif (useFallback === 'touch') {\n\t\t\t\t\t// Bind touch events\n\t\t\t\t\t_on(document, 'touchmove', this._onTouchMove);\n\t\t\t\t\t_on(document, 'touchend', this._onDrop);\n\t\t\t\t\t_on(document, 'touchcancel', this._onDrop);\n\t\t\t\t\t_on(document, 'pointermove', this._onTouchMove);\n\t\t\t\t\t_on(document, 'pointerup', this._onDrop);\n\t\t\t\t} else {\n\t\t\t\t\t// Old brwoser\n\t\t\t\t\t_on(document, 'mousemove', this._onTouchMove);\n\t\t\t\t\t_on(document, 'mouseup', this._onDrop);\n\t\t\t\t}\n\n\t\t\t\tthis._loopId = setInterval(this._emulateDragOver, 50);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (dataTransfer) {\n\t\t\t\t\tdataTransfer.effectAllowed = 'move';\n\t\t\t\t\toptions.setData && options.setData.call(this, dataTransfer, dragEl);\n\t\t\t\t}\n\n\t\t\t\t_on(document, 'drop', this);\n\t\t\t\tsetTimeout(this._dragStarted, 0);\n\t\t\t}\n\t\t},\n\n\t\t_onDragOver: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\ttarget,\n\t\t\t\tdragRect,\n\t\t\t\ttargetRect,\n\t\t\t\trevert,\n\t\t\t\toptions = this.options,\n\t\t\t\tgroup = options.group,\n\t\t\t\tactiveSortable = Sortable.active,\n\t\t\t\tisOwner = (activeGroup === group),\n\t\t\t\tisMovingBetweenSortable = false,\n\t\t\t\tcanSort = options.sort;\n\n\t\t\tif (evt.preventDefault !== void 0) {\n\t\t\t\tevt.preventDefault();\n\t\t\t\t!options.dragoverBubble && evt.stopPropagation();\n\t\t\t}\n\n\t\t\tif (dragEl.animated) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmoved = true;\n\n\t\t\tif (activeSortable && !options.disabled &&\n\t\t\t\t(isOwner\n\t\t\t\t\t? canSort || (revert = !rootEl.contains(dragEl)) // Reverting item into the original list\n\t\t\t\t\t: (\n\t\t\t\t\t\tputSortable === this ||\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\t(activeSortable.lastPullMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) &&\n\t\t\t\t\t\t\tgroup.checkPut(this, activeSortable, dragEl, evt)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t) &&\n\t\t\t\t(evt.rootEl === void 0 || evt.rootEl === this.el) // touch fallback\n\t\t\t) {\n\t\t\t\t// Smart auto-scrolling\n\t\t\t\t_autoScroll(evt, options, this.el);\n\n\t\t\t\tif (_silent) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttarget = _closest(evt.target, options.draggable, el);\n\t\t\t\tdragRect = dragEl.getBoundingClientRect();\n\n\t\t\t\tif (putSortable !== this) {\n\t\t\t\t\tputSortable = this;\n\t\t\t\t\tisMovingBetweenSortable = true;\n\t\t\t\t}\n\n\t\t\t\tif (revert) {\n\t\t\t\t\t_cloneHide(activeSortable, true);\n\t\t\t\t\tparentEl = rootEl; // actualization\n\n\t\t\t\t\tif (cloneEl || nextEl) {\n\t\t\t\t\t\trootEl.insertBefore(dragEl, cloneEl || nextEl);\n\t\t\t\t\t}\n\t\t\t\t\telse if (!canSort) {\n\t\t\t\t\t\trootEl.appendChild(dragEl);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\n\t\t\t\tif ((el.children.length === 0) || (el.children[0] === ghostEl) ||\n\t\t\t\t\t(el === evt.target) && (_ghostIsLast(el, evt))\n\t\t\t\t) {\n\t\t\t\t\t//assign target only if condition is true\n\t\t\t\t\tif (el.children.length !== 0 && el.children[0] !== ghostEl && el === evt.target) {\n\t\t\t\t\t\ttarget = el.lastElementChild;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (target) {\n\t\t\t\t\t\tif (target.animated) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttargetRect = target.getBoundingClientRect();\n\t\t\t\t\t}\n\n\t\t\t\t\t_cloneHide(activeSortable, isOwner);\n\n\t\t\t\t\tif (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt) !== false) {\n\t\t\t\t\t\tif (!dragEl.contains(el)) {\n\t\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\t\tparentEl = el; // actualization\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._animate(dragRect, dragEl);\n\t\t\t\t\t\ttarget && this._animate(targetRect, target);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (target && !target.animated && target !== dragEl && (target.parentNode[expando] !== void 0)) {\n\t\t\t\t\tif (lastEl !== target) {\n\t\t\t\t\t\tlastEl = target;\n\t\t\t\t\t\tlastCSS = _css(target);\n\t\t\t\t\t\tlastParentCSS = _css(target.parentNode);\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetRect = target.getBoundingClientRect();\n\n\t\t\t\t\tvar width = targetRect.right - targetRect.left,\n\t\t\t\t\t\theight = targetRect.bottom - targetRect.top,\n\t\t\t\t\t\tfloating = R_FLOAT.test(lastCSS.cssFloat + lastCSS.display)\n\t\t\t\t\t\t\t|| (lastParentCSS.display == 'flex' && lastParentCSS['flex-direction'].indexOf('row') === 0),\n\t\t\t\t\t\tisWide = (target.offsetWidth > dragEl.offsetWidth),\n\t\t\t\t\t\tisLong = (target.offsetHeight > dragEl.offsetHeight),\n\t\t\t\t\t\thalfway = (floating ? (evt.clientX - targetRect.left) / width : (evt.clientY - targetRect.top) / height) > 0.5,\n\t\t\t\t\t\tnextSibling = target.nextElementSibling,\n\t\t\t\t\t\tafter = false\n\t\t\t\t\t;\n\n\t\t\t\t\tif (floating) {\n\t\t\t\t\t\tvar elTop = dragEl.offsetTop,\n\t\t\t\t\t\t\ttgTop = target.offsetTop;\n\n\t\t\t\t\t\tif (elTop === tgTop) {\n\t\t\t\t\t\t\tafter = (target.previousElementSibling === dragEl) && !isWide || halfway && isWide;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (target.previousElementSibling === dragEl || dragEl.previousElementSibling === target) {\n\t\t\t\t\t\t\tafter = (evt.clientY - targetRect.top) / height > 0.5;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tafter = tgTop > elTop;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (!isMovingBetweenSortable) {\n\t\t\t\t\t\tafter = (nextSibling !== dragEl) && !isLong || halfway && isLong;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n\n\t\t\t\t\tif (moveVector !== false) {\n\t\t\t\t\t\tif (moveVector === 1 || moveVector === -1) {\n\t\t\t\t\t\t\tafter = (moveVector === 1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_silent = true;\n\t\t\t\t\t\tsetTimeout(_unsilent, 30);\n\n\t\t\t\t\t\t_cloneHide(activeSortable, isOwner);\n\n\t\t\t\t\t\tif (!dragEl.contains(el)) {\n\t\t\t\t\t\t\tif (after && !nextSibling) {\n\t\t\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttarget.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tparentEl = dragEl.parentNode; // actualization\n\n\t\t\t\t\t\tthis._animate(dragRect, dragEl);\n\t\t\t\t\t\tthis._animate(targetRect, target);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_animate: function (prevRect, target) {\n\t\t\tvar ms = this.options.animation;\n\n\t\t\tif (ms) {\n\t\t\t\tvar currentRect = target.getBoundingClientRect();\n\n\t\t\t\tif (prevRect.nodeType === 1) {\n\t\t\t\t\tprevRect = prevRect.getBoundingClientRect();\n\t\t\t\t}\n\n\t\t\t\t_css(target, 'transition', 'none');\n\t\t\t\t_css(target, 'transform', 'translate3d('\n\t\t\t\t\t+ (prevRect.left - currentRect.left) + 'px,'\n\t\t\t\t\t+ (prevRect.top - currentRect.top) + 'px,0)'\n\t\t\t\t);\n\n\t\t\t\ttarget.offsetWidth; // repaint\n\n\t\t\t\t_css(target, 'transition', 'all ' + ms + 'ms');\n\t\t\t\t_css(target, 'transform', 'translate3d(0,0,0)');\n\n\t\t\t\tclearTimeout(target.animated);\n\t\t\t\ttarget.animated = setTimeout(function () {\n\t\t\t\t\t_css(target, 'transition', '');\n\t\t\t\t\t_css(target, 'transform', '');\n\t\t\t\t\ttarget.animated = false;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t},\n\n\t\t_offUpEvents: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\t_off(document, 'touchmove', this._onTouchMove);\n\t\t\t_off(document, 'pointermove', this._onTouchMove);\n\t\t\t_off(ownerDocument, 'mouseup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchend', this._onDrop);\n\t\t\t_off(ownerDocument, 'pointerup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchcancel', this._onDrop);\n\t\t\t_off(ownerDocument, 'pointercancel', this._onDrop);\n\t\t\t_off(ownerDocument, 'selectstart', this);\n\t\t},\n\n\t\t_onDrop: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\toptions = this.options;\n\n\t\t\tclearInterval(this._loopId);\n\t\t\tclearInterval(autoScroll.pid);\n\t\t\tclearTimeout(this._dragStartTimer);\n\n\t\t\t// Unbind events\n\t\t\t_off(document, 'mousemove', this._onTouchMove);\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(document, 'drop', this);\n\t\t\t\t_off(el, 'dragstart', this._onDragStart);\n\t\t\t}\n\n\t\t\tthis._offUpEvents();\n\n\t\t\tif (evt) {\n\t\t\t\tif (moved) {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t!options.dropBubble && evt.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n\n\t\t\t\tif (rootEl === parentEl || Sortable.active.lastPullMode !== 'clone') {\n\t\t\t\t\t// Remove clone\n\t\t\t\t\tcloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n\t\t\t\t}\n\n\t\t\t\tif (dragEl) {\n\t\t\t\t\tif (this.nativeDraggable) {\n\t\t\t\t\t\t_off(dragEl, 'dragend', this);\n\t\t\t\t\t}\n\n\t\t\t\t\t_disableDraggable(dragEl);\n\t\t\t\t\tdragEl.style['will-change'] = '';\n\n\t\t\t\t\t// Remove class's\n\t\t\t\t\t_toggleClass(dragEl, this.options.ghostClass, false);\n\t\t\t\t\t_toggleClass(dragEl, this.options.chosenClass, false);\n\n\t\t\t\t\t// Drag stop event\n\t\t\t\t\t_dispatchEvent(this, rootEl, 'unchoose', dragEl, rootEl, oldIndex);\n\n\t\t\t\t\tif (rootEl !== parentEl) {\n\t\t\t\t\t\tnewIndex = _index(dragEl, options.draggable);\n\n\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t// Add event\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'add', dragEl, rootEl, oldIndex, newIndex);\n\n\t\t\t\t\t\t\t// Remove event\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'remove', dragEl, rootEl, oldIndex, newIndex);\n\n\t\t\t\t\t\t\t// drag from one list and drop into another\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (dragEl.nextSibling !== nextEl) {\n\t\t\t\t\t\t\t// Get the index of the dragged element within its parent\n\t\t\t\t\t\t\tnewIndex = _index(dragEl, options.draggable);\n\n\t\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t\t// drag & drop within the same list\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'update', dragEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Sortable.active) {\n\t\t\t\t\t\t/* jshint eqnull:true */\n\t\t\t\t\t\tif (newIndex == null || newIndex === -1) {\n\t\t\t\t\t\t\tnewIndex = oldIndex;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'end', dragEl, rootEl, oldIndex, newIndex);\n\n\t\t\t\t\t\t// Save sorting\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._nulling();\n\t\t},\n\n\t\t_nulling: function() {\n\t\t\trootEl =\n\t\t\tdragEl =\n\t\t\tparentEl =\n\t\t\tghostEl =\n\t\t\tnextEl =\n\t\t\tcloneEl =\n\t\t\tlastDownEl =\n\n\t\t\tscrollEl =\n\t\t\tscrollParentEl =\n\n\t\t\ttapEvt =\n\t\t\ttouchEvt =\n\n\t\t\tmoved =\n\t\t\tnewIndex =\n\n\t\t\tlastEl =\n\t\t\tlastCSS =\n\n\t\t\tputSortable =\n\t\t\tactiveGroup =\n\t\t\tSortable.active = null;\n\n\t\t\tsavedInputChecked.forEach(function (el) {\n\t\t\t\tel.checked = true;\n\t\t\t});\n\t\t\tsavedInputChecked.length = 0;\n\t\t},\n\n\t\thandleEvent: function (/**Event*/evt) {\n\t\t\tswitch (evt.type) {\n\t\t\t\tcase 'drop':\n\t\t\t\tcase 'dragend':\n\t\t\t\t\tthis._onDrop(evt);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'dragover':\n\t\t\t\tcase 'dragenter':\n\t\t\t\t\tif (dragEl) {\n\t\t\t\t\t\tthis._onDragOver(evt);\n\t\t\t\t\t\t_globalDragOver(evt);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'selectstart':\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Serializes the item into an array of string.\n\t\t * @returns {String[]}\n\t\t */\n\t\ttoArray: function () {\n\t\t\tvar order = [],\n\t\t\t\tel,\n\t\t\t\tchildren = this.el.children,\n\t\t\t\ti = 0,\n\t\t\t\tn = children.length,\n\t\t\t\toptions = this.options;\n\n\t\t\tfor (; i < n; i++) {\n\t\t\t\tel = children[i];\n\t\t\t\tif (_closest(el, options.draggable, this.el)) {\n\t\t\t\t\torder.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn order;\n\t\t},\n\n\n\t\t/**\n\t\t * Sorts the elements according to the array.\n\t\t * @param  {String[]}  order  order of the items\n\t\t */\n\t\tsort: function (order) {\n\t\t\tvar items = {}, rootEl = this.el;\n\n\t\t\tthis.toArray().forEach(function (id, i) {\n\t\t\t\tvar el = rootEl.children[i];\n\n\t\t\t\tif (_closest(el, this.options.draggable, rootEl)) {\n\t\t\t\t\titems[id] = el;\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\torder.forEach(function (id) {\n\t\t\t\tif (items[id]) {\n\t\t\t\t\trootEl.removeChild(items[id]);\n\t\t\t\t\trootEl.appendChild(items[id]);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * Save the current sorting\n\t\t */\n\t\tsave: function () {\n\t\t\tvar store = this.options.store;\n\t\t\tstore && store.set(this);\n\t\t},\n\n\n\t\t/**\n\t\t * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\n\t\t * @param   {HTMLElement}  el\n\t\t * @param   {String}       [selector]  default: `options.draggable`\n\t\t * @returns {HTMLElement|null}\n\t\t */\n\t\tclosest: function (el, selector) {\n\t\t\treturn _closest(el, selector || this.options.draggable, this.el);\n\t\t},\n\n\n\t\t/**\n\t\t * Set/get option\n\t\t * @param   {string} name\n\t\t * @param   {*}      [value]\n\t\t * @returns {*}\n\t\t */\n\t\toption: function (name, value) {\n\t\t\tvar options = this.options;\n\n\t\t\tif (value === void 0) {\n\t\t\t\treturn options[name];\n\t\t\t} else {\n\t\t\t\toptions[name] = value;\n\n\t\t\t\tif (name === 'group') {\n\t\t\t\t\t_prepareGroup(options);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Destroy\n\t\t */\n\t\tdestroy: function () {\n\t\t\tvar el = this.el;\n\n\t\t\tel[expando] = null;\n\n\t\t\t_off(el, 'mousedown', this._onTapStart);\n\t\t\t_off(el, 'touchstart', this._onTapStart);\n\t\t\t_off(el, 'pointerdown', this._onTapStart);\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(el, 'dragover', this);\n\t\t\t\t_off(el, 'dragenter', this);\n\t\t\t}\n\n\t\t\t// Remove draggable attributes\n\t\t\tArray.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n\t\t\t\tel.removeAttribute('draggable');\n\t\t\t});\n\n\t\t\ttouchDragOverListeners.splice(touchDragOverListeners.indexOf(this._onDragOver), 1);\n\n\t\t\tthis._onDrop();\n\n\t\t\tthis.el = el = null;\n\t\t}\n\t};\n\n\n\tfunction _cloneHide(sortable, state) {\n\t\tif (sortable.lastPullMode !== 'clone') {\n\t\t\tstate = true;\n\t\t}\n\n\t\tif (cloneEl && (cloneEl.state !== state)) {\n\t\t\t_css(cloneEl, 'display', state ? 'none' : '');\n\n\t\t\tif (!state) {\n\t\t\t\tif (cloneEl.state) {\n\t\t\t\t\tif (sortable.options.group.revertClone) {\n\t\t\t\t\t\trootEl.insertBefore(cloneEl, nextEl);\n\t\t\t\t\t\tsortable._animate(dragEl, cloneEl);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcloneEl.state = state;\n\t\t}\n\t}\n\n\n\tfunction _closest(/**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx) {\n\t\tif (el) {\n\t\t\tctx = ctx || document;\n\n\t\t\tdo {\n\t\t\t\tif ((selector === '>*' && el.parentNode === ctx) || _matches(el, selector)) {\n\t\t\t\t\treturn el;\n\t\t\t\t}\n\t\t\t\t/* jshint boss:true */\n\t\t\t} while (el = _getParentOrHost(el));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\n\tfunction _getParentOrHost(el) {\n\t\tvar parent = el.host;\n\n\t\treturn (parent && parent.nodeType) ? parent : el.parentNode;\n\t}\n\n\n\tfunction _globalDragOver(/**Event*/evt) {\n\t\tif (evt.dataTransfer) {\n\t\t\tevt.dataTransfer.dropEffect = 'move';\n\t\t}\n\t\tevt.preventDefault();\n\t}\n\n\n\tfunction _on(el, event, fn) {\n\t\tel.addEventListener(event, fn, captureMode);\n\t}\n\n\n\tfunction _off(el, event, fn) {\n\t\tel.removeEventListener(event, fn, captureMode);\n\t}\n\n\n\tfunction _toggleClass(el, name, state) {\n\t\tif (el) {\n\t\t\tif (el.classList) {\n\t\t\t\tel.classList[state ? 'add' : 'remove'](name);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n\t\t\t\tel.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction _css(el, prop, val) {\n\t\tvar style = el && el.style;\n\n\t\tif (style) {\n\t\t\tif (val === void 0) {\n\t\t\t\tif (document.defaultView && document.defaultView.getComputedStyle) {\n\t\t\t\t\tval = document.defaultView.getComputedStyle(el, '');\n\t\t\t\t}\n\t\t\t\telse if (el.currentStyle) {\n\t\t\t\t\tval = el.currentStyle;\n\t\t\t\t}\n\n\t\t\t\treturn prop === void 0 ? val : val[prop];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!(prop in style)) {\n\t\t\t\t\tprop = '-webkit-' + prop;\n\t\t\t\t}\n\n\t\t\t\tstyle[prop] = val + (typeof val === 'string' ? '' : 'px');\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction _find(ctx, tagName, iterator) {\n\t\tif (ctx) {\n\t\t\tvar list = ctx.getElementsByTagName(tagName), i = 0, n = list.length;\n\n\t\t\tif (iterator) {\n\t\t\t\tfor (; i < n; i++) {\n\t\t\t\t\titerator(list[i], i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn list;\n\t\t}\n\n\t\treturn [];\n\t}\n\n\n\n\tfunction _dispatchEvent(sortable, rootEl, name, targetEl, fromEl, startIndex, newIndex) {\n\t\tsortable = (sortable || rootEl[expando]);\n\n\t\tvar evt = document.createEvent('Event'),\n\t\t\toptions = sortable.options,\n\t\t\tonName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n\n\t\tevt.initEvent(name, true, true);\n\n\t\tevt.to = rootEl;\n\t\tevt.from = fromEl || rootEl;\n\t\tevt.item = targetEl || rootEl;\n\t\tevt.clone = cloneEl;\n\n\t\tevt.oldIndex = startIndex;\n\t\tevt.newIndex = newIndex;\n\n\t\trootEl.dispatchEvent(evt);\n\n\t\tif (options[onName]) {\n\t\t\toptions[onName].call(sortable, evt);\n\t\t}\n\t}\n\n\n\tfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvt, willInsertAfter) {\n\t\tvar evt,\n\t\t\tsortable = fromEl[expando],\n\t\t\tonMoveFn = sortable.options.onMove,\n\t\t\tretVal;\n\n\t\tevt = document.createEvent('Event');\n\t\tevt.initEvent('move', true, true);\n\n\t\tevt.to = toEl;\n\t\tevt.from = fromEl;\n\t\tevt.dragged = dragEl;\n\t\tevt.draggedRect = dragRect;\n\t\tevt.related = targetEl || toEl;\n\t\tevt.relatedRect = targetRect || toEl.getBoundingClientRect();\n\t\tevt.willInsertAfter = willInsertAfter;\n\n\t\tfromEl.dispatchEvent(evt);\n\n\t\tif (onMoveFn) {\n\t\t\tretVal = onMoveFn.call(sortable, evt, originalEvt);\n\t\t}\n\n\t\treturn retVal;\n\t}\n\n\n\tfunction _disableDraggable(el) {\n\t\tel.draggable = false;\n\t}\n\n\n\tfunction _unsilent() {\n\t\t_silent = false;\n\t}\n\n\n\t/** @returns {HTMLElement|false} */\n\tfunction _ghostIsLast(el, evt) {\n\t\tvar lastEl = el.lastElementChild,\n\t\t\trect = lastEl.getBoundingClientRect();\n\n\t\t// 5 — min delta\n\t\t// abs — нельзя добавлять, а то глюки при наведении сверху\n\t\treturn (evt.clientY - (rect.top + rect.height) > 5) ||\n\t\t\t(evt.clientX - (rect.left + rect.width) > 5);\n\t}\n\n\n\t/**\n\t * Generate id\n\t * @param   {HTMLElement} el\n\t * @returns {String}\n\t * @private\n\t */\n\tfunction _generateId(el) {\n\t\tvar str = el.tagName + el.className + el.src + el.href + el.textContent,\n\t\t\ti = str.length,\n\t\t\tsum = 0;\n\n\t\twhile (i--) {\n\t\t\tsum += str.charCodeAt(i);\n\t\t}\n\n\t\treturn sum.toString(36);\n\t}\n\n\t/**\n\t * Returns the index of an element within its parent for a selected set of\n\t * elements\n\t * @param  {HTMLElement} el\n\t * @param  {selector} selector\n\t * @return {number}\n\t */\n\tfunction _index(el, selector) {\n\t\tvar index = 0;\n\n\t\tif (!el || !el.parentNode) {\n\t\t\treturn -1;\n\t\t}\n\n\t\twhile (el && (el = el.previousElementSibling)) {\n\t\t\tif ((el.nodeName.toUpperCase() !== 'TEMPLATE') && (selector === '>*' || _matches(el, selector))) {\n\t\t\t\tindex++;\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t}\n\n\tfunction _matches(/**HTMLElement*/el, /**String*/selector) {\n\t\tif (el) {\n\t\t\tselector = selector.split('.');\n\n\t\t\tvar tag = selector.shift().toUpperCase(),\n\t\t\t\tre = new RegExp('\\\\s(' + selector.join('|') + ')(?=\\\\s)', 'g');\n\n\t\t\treturn (\n\t\t\t\t(tag === '' || el.nodeName.toUpperCase() == tag) &&\n\t\t\t\t(!selector.length || ((' ' + el.className + ' ').match(re) || []).length == selector.length)\n\t\t\t);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfunction _throttle(callback, ms) {\n\t\tvar args, _this;\n\n\t\treturn function () {\n\t\t\tif (args === void 0) {\n\t\t\t\targs = arguments;\n\t\t\t\t_this = this;\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tif (args.length === 1) {\n\t\t\t\t\t\tcallback.call(_this, args[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback.apply(_this, args);\n\t\t\t\t\t}\n\n\t\t\t\t\targs = void 0;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction _extend(dst, src) {\n\t\tif (dst && src) {\n\t\t\tfor (var key in src) {\n\t\t\t\tif (src.hasOwnProperty(key)) {\n\t\t\t\t\tdst[key] = src[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn dst;\n\t}\n\n\tfunction _clone(el) {\n\t\treturn $\n\t\t\t? $(el).clone(true)[0]\n\t\t\t: (Polymer && Polymer.dom\n\t\t\t\t? Polymer.dom(el).cloneNode(true)\n\t\t\t\t: el.cloneNode(true)\n\t\t\t);\n\t}\n\n\tfunction _saveInputCheckedState(root) {\n\t\tvar inputs = root.getElementsByTagName('input');\n\t\tvar idx = inputs.length;\n\n\t\twhile (idx--) {\n\t\t\tvar el = inputs[idx];\n\t\t\tel.checked && savedInputChecked.push(el);\n\t\t}\n\t}\n\n\t// Fixed #973: \n\t_on(document, 'touchmove', function (evt) {\n\t\tif (Sortable.active) {\n\t\t\tevt.preventDefault();\n\t\t}\n\t});\n\n\ttry {\n\t\twindow.addEventListener('test', null, Object.defineProperty({}, 'passive', {\n\t\t\tget: function () {\n\t\t\t\tcaptureMode = {\n\t\t\t\t\tcapture: false,\n\t\t\t\t\tpassive: false\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\t} catch (err) {}\n\n\t// Export utils\n\tSortable.utils = {\n\t\ton: _on,\n\t\toff: _off,\n\t\tcss: _css,\n\t\tfind: _find,\n\t\tis: function (el, selector) {\n\t\t\treturn !!_closest(el, selector, el);\n\t\t},\n\t\textend: _extend,\n\t\tthrottle: _throttle,\n\t\tclosest: _closest,\n\t\ttoggleClass: _toggleClass,\n\t\tclone: _clone,\n\t\tindex: _index\n\t};\n\n\n\t/**\n\t * Create sortable instance\n\t * @param {HTMLElement}  el\n\t * @param {Object}      [options]\n\t */\n\tSortable.create = function (el, options) {\n\t\treturn new Sortable(el, options);\n\t};\n\n\n\t// Export\n\tSortable.version = '1.6.1';\n\treturn Sortable;\n});\n\n},{}],11:[function(require,module,exports){\n'use strict';\nmodule.exports = function (str) {\n\treturn encodeURIComponent(str).replace(/[!'()*]/g, function (c) {\n\t\treturn '%' + c.charCodeAt(0).toString(16).toUpperCase();\n\t});\n};\n\n},{}],12:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nfunction getCode() {\n  return '<div class=\"cell\"><p class=\"desc\">Popis</p></div>\\n      <div class=\"cell\"><textarea class=\"in name text\"></textarea></div>';\n}\n\nfunction assemble() {\n  var block = wrap('bigtext', getCode());\n  init(block);\n  return block;\n}\n\nmodule.exports = { assemble: assemble };\n\n},{\"./util\":27}],13:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nvar _require2 = require('./../fields/fields'),\n    read = _require2.read,\n    write = _require2.write;\n\nfunction update(el) {\n  var rows = [].slice.call(el.querySelectorAll('.row'));\n  var total = rows.reduce(function (acc, row) {\n    var units = read(row.querySelector('.units'));\n    return acc + units;\n  }, 0);\n  write(el.querySelector('.total'), total);\n  hideEmpty(el.querySelectorAll('.countlist-item'));\n}\n\nfunction hideEmpty(items) {\n  var lastEmpty = false;\n  [].slice.call(items).forEach(function (item) {\n    var values = item.querySelectorAll('input');\n    var empty = values[0].value === '' && values[1].value === '';\n    if (lastEmpty && empty) {\n      item.style.display = 'none';\n    } else {\n      item.style.display = 'flex';\n    }\n    lastEmpty = empty;\n  });\n}\n\nvar header = '<div class=\"cell\"><div class=\"countlist-header grid-x\">\\n    <div class=\"cell medium-10\"><p class=\"desc\">Polo\\u017Eka</p></div>\\n    <div class=\"cell medium-2\"><p class=\"desc\">Po\\u010Det</p></div>\\n  </div></div>';\nvar row = '<div class=\"row grid-x countlist-item\">\\n    <div class=\"cell medium-10\"><input type=\"text\" class=\"in text\"></div>\\n    <div class=\"cell medium-2\"><input type=\"text\" class=\"in number units\"></div>\\n  </div>';\nvar totals = '<div class=\"totals grid-x\">\\n    <div class=\"cell medium-10\"><p class=\"desc\">Celkem</p></div>\\n    <div class=\"cell medium-2\"><input type=\"text\" class=\"out name number total\"></div>\\n  </div>';\n\nfunction assemble() {\n  var block = wrap('countlist', header + ' <div class=\"cell\">' + row.repeat(10) + ' ' + totals + '</div>');\n  init(block, update);\n  return block;\n}\n\nmodule.exports = { assemble: assemble, update: update };\n\n},{\"./../fields/fields\":34,\"./util\":27}],14:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nfunction getCode() {\n  return '<div class=\"cell medium-3\">\\n        <input type=\"text\" class=\"in name date\">\\n      </div>\\n      <div class=\"cell medium-9\">\\n        <p class=\"desc\">Popis</p>\\n      </div>';\n}\n\nfunction assemble() {\n  var block = wrap('dateinput', getCode());\n  init(block);\n  return block;\n}\n\nmodule.exports = { assemble: assemble };\n\n},{\"./util\":27}],15:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nfunction getCode() {\n  var todo = '<div class=\"grid-x todo\">\\n    <div class=\"cell small-1\"></div>\\n    <div class=\"cell small-11\">\\n      <div class=\"input-group\">\\n        <label class=\"input-group-label\"><input type=\"checkbox\" class=\"in checkbox\"></label>\\n        <input type=\"text\" class=\"input-group-field in text\">\\n      </div>\\n    </div>\\n  </div>';\n\n  return '<div class=\"cell medium-3\">\\n        <input type=\"text\" class=\"out formula date\">\\n      </div>\\n      <div class=\"cell medium-9\">\\n        <p class=\"desc\">Popis</p>\\n      </div>\\n      <div class=\"cell\">\\n        ' + todo.repeat(10) + '\\n      </div>';\n}\n\nfunction update(el) {\n  hideEmpty(el.querySelectorAll('.todo'));\n}\n\nfunction hideEmpty(items) {\n  var lastEmpty = false;\n  [].slice.call(items).forEach(function (item) {\n    var empty = item.querySelector('[type=\"text\"]').value === '';\n    if (lastEmpty && empty) {\n      item.style.display = 'none';\n    } else {\n      item.style.display = 'flex';\n    }\n    lastEmpty = empty;\n  });\n}\n\nfunction assemble() {\n  var block = wrap('dateoutput', getCode());\n  init(block, update);\n  return block;\n}\n\nmodule.exports = { assemble: assemble };\n\n},{\"./util\":27}],16:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nfunction getCode() {\n  return '<div class=\"cell medium-6\">\\n      <p class=\"desc\">Popis</p>\\n      <textarea class=\"in name text\"></textarea>\\n    </div>\\n    <div class=\"cell medium-6\">\\n      <p class=\"desc\">Popis</p>\\n      <textarea class=\"in name text\"></textarea>\\n    </div>';\n}\n\nfunction assemble() {\n  var block = wrap('doubletext', getCode());\n  init(block);\n  return block;\n}\n\nmodule.exports = { assemble: assemble };\n\n},{\"./util\":27}],17:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nfunction getCode() {\n  return '<div class=\"cell\"><p style=\"height: 1rem\">&nbsp;</p></div>';\n}\n\nfunction assemble() {\n  var block = wrap('final', getCode());\n  init(block);\n  return block;\n}\n\nmodule.exports = { assemble: assemble };\n\n},{\"./util\":27}],18:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nfunction getCode() {\n  return '\\n    <div class=\"cell medium-6 card-info\">\\n      <h4 class=\"desc card-name\">Nadpis karty</h4>\\n      <p class=\"desc\">Kr\\xE1tce popi\\u0161te, k \\u010Demu se tato karta hod\\xED.</p>\\n    </div>\\n    <div class=\"cell medium-6 card-info\">\\n      <h4>Autor/ka karty</h4>\\n      <p class=\"desc\">Jm\\xE9no P\\u0159\\xEDjmen\\xED, jmeno.prijmeni@email.cz</p>\\n      <h4>Licence (pravidla pro sd\\xEDlen\\xED)</h4>\\n      <p class=\"desc\">Zde kr\\xE1tce popi\\u0161te, zda kartu sd\\xEDl\\xEDte voln\\u011B\\n      nebo zda \\u017E\\xE1d\\xE1te o dodr\\u017Een\\xED n\\u011Bjak\\xFDch pravidel (nap\\u0159. ponech\\xE1n\\xED\\n      kontaktu na p\\u016Fvodn\\xEDho autora atp. M\\u016F\\u017Eete\\n      ur\\u010Dit i konkr\\xE9tn\\xED licenci (nap\\u0159\\xEDklad Creative Commons).</p>\\n    </div>\\n    <div class=\"cell\">\\n      <p><label class=\"desc\">N\\xE1zev aktivity</label>\\n        <input name=\"_activity-name\" type=\"text\" class=\"in text\">\\n      </label></p>\\n    </div>\\n    <div class=\"cell medium-6\">\\n      <p><label>\\n        C\\xEDl aktivity v jedn\\xE9 v\\u011Bt\\u011B<br>\\n        <textarea class=\"in text\"></textarea>\\n      </label></p>\\n    </div>\\n    <div class=\"cell medium-6\">\\n      <p><label>\\n        Pozn\\xE1mky<br>\\n        <textarea class=\"in text\"></textarea>\\n      </label></p>\\n    </div>';\n}\n\nfunction assemble() {\n  var block = wrap('header', getCode());\n  init(block);\n  return block;\n}\n\nmodule.exports = { assemble: assemble };\n\n},{\"./util\":27}],19:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nvar _require2 = require('./../fields/fields'),\n    read = _require2.read;\n\nfunction update(el) {\n  if (read(el.querySelector('.bool'))) {\n    el.classList.add('true');\n  } else {\n    el.classList.remove('true');\n  }\n}\n\nvar code = '\\n<div class=\"cell is-true\">\\n  <p class=\"icon\"><i class=\"fa fa-check\" aria-hidden=\"true\"></i></p>\\n  <p class=\"desc\">Text, pokud je podm\\xEDnka spln\\u011Bna</p>\\n</div>\\n<div class=\"cell is-false\">\\n  <p class=\"icon\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i></p>\\n  <p class=\"desc\">Text, pokud podm\\xEDnka nen\\xED spln\\u011Bna</p>\\n</div>\\n<div class=\"cell hide-in-fill-mode\"><input type=\"text\" class=\"out name formula bool\"></div>';\n\nfunction assemble() {\n  var block = wrap('indicator', '' + code);\n  init(block, update);\n  return block;\n}\n\nmodule.exports = { assemble: assemble, update: update };\n\n},{\"./../fields/fields\":34,\"./util\":27}],20:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nfunction getCode() {\n  return '<div class=\"cell\"><p class=\"desc\">Text poznámky</p></div>';\n}\n\nfunction assemble() {\n  var block = wrap('note', getCode());\n  init(block);\n  return block;\n}\n\nmodule.exports = { assemble: assemble };\n\n},{\"./util\":27}],21:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nfunction getCode() {\n  return '<div class=\"cell medium-3\">\\n    <input type=\"text\" class=\"in name number\">\\n  </div>\\n  <div class=\"cell medium-9\">\\n    <p class=\"desc\">Popis \\u010D\\xEDseln\\xE9 hodnoty</p>\\n  </div>\\n  ';\n}\n\nfunction assemble() {\n  var block = wrap('number', getCode());\n  init(block);\n  return block;\n}\n\nmodule.exports = { assemble: assemble };\n\n},{\"./util\":27}],22:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nvar _require2 = require('./../fields/fields'),\n    read = _require2.read,\n    write = _require2.write;\n\nfunction update(el) {\n  var rows = [].slice.call(el.querySelectorAll('.row'));\n  var total = rows.reduce(function (acc, row) {\n    var price = read(row.querySelector('.price'));\n    var units = read(row.querySelector('.units'));\n    write(row.querySelector('.subtotal'), price * units);\n    return acc + price * units;\n  }, 0);\n  write(el.querySelector('.total'), total);\n  hideEmpty(el.querySelectorAll('.pricelist-item'));\n}\n\nfunction hideEmpty(items) {\n  var lastEmpty = false;\n  [].slice.call(items).forEach(function (item) {\n    var values = item.querySelectorAll('input');\n    var empty = values[0].value === '' && values[1].value === '' && values[2].value === '';\n    if (lastEmpty && empty) {\n      item.style.display = 'none';\n    } else {\n      item.style.display = 'flex';\n    }\n    lastEmpty = empty;\n  });\n}\nvar header = '<div class=\"cell\"><div class=\"pricelist-header grid-x\">\\n    <div class=\"cell medium-6\"><p class=\"desc\">Polo\\u017Eka</p></div>\\n    <div class=\"cell medium-2\"><p class=\"desc\">Cena</p></div>\\n    <div class=\"cell medium-2\"><p class=\"desc\">Po\\u010Det</p></div>\\n    <div class=\"cell medium-2\"><p class=\"desc\">Celkem</p></div>\\n  </div></div>';\nvar row = '<div class=\"row grid-x pricelist-item\">\\n    <div class=\"cell medium-6\"><input type=\"text\" class=\"in text\"></div>\\n    <div class=\"cell medium-2\"><input type=\"text\" class=\"in number price\"></div>\\n    <div class=\"cell medium-2\"><input type=\"text\" class=\"in number units\"></div>\\n    <div class=\"cell medium-2\"><input type=\"text\" class=\"out number subtotal\"></div>\\n  </div>';\nvar totals = '<div class=\"totals grid-x\">\\n    <div class=\"cell medium-6\"><p class=\"desc\">Celkem</p></div>\\n    <div class=\"cell medium-6\"><input type=\"text\" class=\"out name number total\"></div>\\n  </div>';\n\nfunction assemble() {\n  var block = wrap('pricelist', header + ' <div class=\"cell\">' + row.repeat(10) + ' ' + totals + '</div>');\n  init(block, update);\n  return block;\n}\n\nmodule.exports = { assemble: assemble, update: update };\n\n},{\"./../fields/fields\":34,\"./util\":27}],23:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap;\n\nfunction assemble() {\n  return wrap('separator', '<div class=\"cell\"><hr></div>');\n}\n\nmodule.exports = { assemble: assemble };\n\n},{\"./util\":27}],24:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nfunction getCode() {\n  return '\\n    <div class=\"cell\">\\n      <h4 class=\"desc card-name\">Mezititulek</h4>\\n    </div>';\n}\n\nfunction assemble() {\n  var block = wrap('subhead', getCode());\n  init(block);\n  return block;\n}\n\nmodule.exports = { assemble: assemble };\n\n},{\"./util\":27}],25:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nfunction getCode() {\n  return '<div class=\"cell medium-6\">\\n    <p class=\"desc\">Popis</p>\\n  </div>\\n  <div class=\"cell medium-6\">\\n    <input type=\"text\" class=\"out name formula number\">\\n  </div>';\n}\n\nfunction assemble() {\n  var block = wrap('sum', getCode());\n  init(block);\n  return block;\n}\n\nmodule.exports = { assemble: assemble };\n\n},{\"./util\":27}],26:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./../util.js'),\n    allArray = _require.allArray;\n\nvar fields = require('./../fields/fields');\nvar autosize = require('autosize');\n\nvar bigtext = require('./_bigtext');\nvar countlist = require('./_countlist');\nvar dateinput = require('./_dateinput');\nvar dateoutput = require('./_dateoutput');\nvar doubletext = require('./_doubletext');\nvar final = require('./_final');\nvar header = require('./_header');\nvar indicator = require('./_indicator');\nvar pricelist = require('./_pricelist');\nvar note = require('./_note');\nvar number = require('./_number');\nvar separator = require('./_separator');\nvar subhead = require('./_subhead');\nvar sum = require('./_sum');\n\nvar all = {\n  bigtext: bigtext,\n  countlist: countlist,\n  dateinput: dateinput,\n  dateoutput: dateoutput,\n  doubletext: doubletext,\n  final: final,\n  header: header,\n  indicator: indicator,\n  pricelist: pricelist,\n  note: note,\n  number: number,\n  separator: separator,\n  subhead: subhead,\n  sum: sum\n};\n\nvar nav = {\n  text: ['bigtext', 'doubletext', '---', 'number', 'sum', '---', 'dateinput', 'dateoutput'],\n  list: ['countlist', 'pricelist'],\n  context: ['subhead', 'note', 'indicator', 'separator']\n};\n\nfunction create(type, data) {\n  var block = all[type].assemble();\n  if (data) fill(block, data);\n  if (all[type].update) all[type].update(block);\n  autosize(block.querySelectorAll('textarea'));\n  return block;\n}\n\nfunction poll(wrapper) {\n  return {\n    type: wrapper.dataset.type,\n    data: {\n      inputs: pollFieldType(wrapper, '.in'),\n      descriptions: pollFieldType(wrapper, '.desc'),\n      names: pollNames(wrapper),\n      formulas: pollFormulas(wrapper)\n    }\n  };\n}\n\nfunction pollFieldType(wrapper, fieldName) {\n  return allArray(wrapper, fieldName).map(function (el) {\n    return fields.read(el);\n  });\n}\n\nfunction pollNames(wrapper) {\n  return allArray(wrapper, '.name-setter').map(function (el) {\n    return el.value;\n  });\n}\n\nfunction pollFormulas(wrapper) {\n  return allArray(wrapper, '.formula-setter').map(function (el) {\n    return el.value;\n  });\n}\n\nfunction fill(wrapper, data) {\n  fillFieldType(wrapper, '.in', data.inputs);\n  fillFieldType(wrapper, '.desc', data.descriptions);\n  fillNames(wrapper, data.names);\n  fillFormulas(wrapper, data.formulas);\n}\n\nfunction fillFieldType(wrapper, fieldName, data) {\n  if (data) {\n    allArray(wrapper, fieldName).forEach(function (el, index) {\n      if (data[index]) fields.write(el, data[index]);\n    });\n  }\n}\n\nfunction fillNames(wrapper, data) {\n  if (data) {\n    allArray(wrapper, '.name-setter').forEach(function (el, index) {\n      if (data[index]) {\n        el.value = data[index];\n        el.dispatchEvent(new Event('input'));\n      }\n    });\n  }\n}\n\nfunction fillFormulas(wrapper, data) {\n  if (data) {\n    allArray(wrapper, '.formula-setter').forEach(function (el, index) {\n      if (data[index]) {\n        el.value = data[index];\n        el.dispatchEvent(new Event('input'));\n      }\n    });\n  }\n}\n\nmodule.exports = {\n  create: create,\n  poll: poll,\n  fill: fill,\n  all: all,\n  nav: nav\n};\n\n},{\"./../fields/fields\":34,\"./../util.js\":42,\"./_bigtext\":12,\"./_countlist\":13,\"./_dateinput\":14,\"./_dateoutput\":15,\"./_doubletext\":16,\"./_final\":17,\"./_header\":18,\"./_indicator\":19,\"./_note\":20,\"./_number\":21,\"./_pricelist\":22,\"./_separator\":23,\"./_subhead\":24,\"./_sum\":25,\"autosize\":1}],27:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./../util.js'),\n    allArray = _require.allArray,\n    updateCardGently = _require.updateCardGently;\n\nvar fields = require('./../fields/fields');\nvar t = require('./../translator').translate;\n\nfunction wrap(type, html) {\n  var wrapper = document.createElement('DIV');\n  wrapper.classList.add('grid-x');\n  wrapper.classList.add('grid-margin-x');\n  wrapper.classList.add('block');\n  wrapper.dataset.type = type;\n  wrapper.classList.add('block-' + type);\n  wrapper.innerHTML = html;\n  var tools = document.createElement('DIV');\n  tools.classList.add('cell');\n  tools.classList.add('block-tools');\n  tools.innerHTML = '\\n    <div class=\"external-tools\">\\n      <a class=\"add-block tool\"><i class=\"fa fa-plus\" aria-hidden=\"true\"></i></a>\\n      <!-- <a class=\"swap-blocks tool\"><i class=\"fa fa-arrow-up\" aria-hidden=\"true\"></i><i class=\"fa fa-arrow-down\" aria-hidden=\"true\"></i></a> -->\\n    </div>\\n    <p class=\"internal-tools\">\\n      <span class=\"blockHandle\">\\n        <i class=\"fa fa-bars\" aria-hidden=\"true\"></i>\\n        ' + t('blocks', type) + '\\n      </span>\\n      <a class=\"remove-block tool\">\\n        <i class=\"fa fa-times\" aria-hidden=\"true\"></i>\\n      </a>\\n    </p>';\n  wrapper.insertAdjacentElement('afterbegin', tools);\n  return wrapper;\n}\n\nfunction init(wrapper, update) {\n  Object.keys(fields.all).forEach(function (key) {\n    allArray(wrapper, '.' + key).forEach(function (el) {\n      return fields.all[key].init(el);\n    });\n  });\n  wrapper.addEventListener('externalUpdate', function () {\n    if (update) update(wrapper);\n  });\n  allArray(wrapper, '.in').forEach(function (el) {\n    return el.addEventListener('input', function () {\n      if (update) update(wrapper);\n      updateCardGently();\n    });\n  });\n}\n\nmodule.exports = { wrap: wrap, init: init };\n\n},{\"./../fields/fields\":34,\"./../translator\":40,\"./../util.js\":42}],28:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    activate = _require.activate;\n\nfunction init(el) {\n  activate(el, 'bool');\n}\n\nfunction read(el) {\n  return el.value === 'true';\n}\n\nfunction write(el, val) {\n  el.value = val;\n}\n\nmodule.exports = { init: init, read: read, write: write };\n\n},{\"./util\":35}],29:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    activate = _require.activate;\n\nfunction init(el) {\n  activate(el, 'checkbox');\n}\n\nfunction read(el) {\n  return el.checked;\n}\n\nfunction write(el, val) {\n  el.checked = val;\n}\n\nmodule.exports = { init: init, read: read, write: write };\n\n},{\"./util\":35}],30:[function(require,module,exports){\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar moment = require('moment');\nvar Pikaday = require('pikaday');\n\nvar _require = require('./util'),\n    activate = _require.activate;\n\nvar t = require('./../translator').translate;\n\nfunction init(el) {\n  activate(el, 'date');\n  decorate(el);\n}\n\nfunction decorate(el) {\n  if (el.classList.contains('in')) {\n    new Pikaday({\n      field: el,\n      format: t('dateFormat'),\n      firstDay: 1,\n      onSelect: function onSelect() {\n        return el.dispatchEvent(new Event('input'));\n      },\n      i18n: t('pikadayNames')\n    });\n  }\n}\n\nfunction read(el) {\n  return moment(el.value, t('dateFormat'));\n}\n\nfunction write(el, val) {\n  if (typeof val === 'string') {\n    el.value = moment(val).format(t('dateFormat'));\n  } else if ((typeof val === 'undefined' ? 'undefined' : _typeof(val)) === 'object' && val.format === moment.prototype.format) {\n    el.value = val.format(t('dateFormat'));\n  }\n}\n\nmodule.exports = { init: init, read: read, write: write };\n\n},{\"./../translator\":40,\"./util\":35,\"moment\":6,\"pikaday\":8}],31:[function(require,module,exports){\n'use strict';\n\nfunction init(el) {\n  el.dataset.fieldName = 'desc';\n}\n\nfunction read(el) {\n  return el.innerHTML;\n}\n\nfunction write(el, val) {\n  el.innerHTML = val;\n}\n\nmodule.exports = { init: init, read: read, write: write };\n\n},{}],32:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    activate = _require.activate;\n\nfunction init(el) {\n  el.dataset.isFloat = el.classList.contains('float') ? 'true' : 'false';\n  activate(el, 'number');\n}\n\nfunction read(el) {\n  return parseNumber(el, el.value);\n}\n\nfunction write(el, val) {\n  el.value = parseNumber(el, val);\n}\n\nfunction parseNumber(el, val) {\n  var numeric = el.dataset.isFloat === 'true' ? parseFloat(val, 10) : parseInt(val, 10);\n  return Number.isNaN(numeric) ? 0 : numeric;\n}\n\nmodule.exports = { init: init, read: read, write: write };\n\n},{\"./util\":35}],33:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    activate = _require.activate;\n\nfunction init(el) {\n  activate(el, 'text');\n}\n\nfunction read(el) {\n  return el.value;\n}\n\nfunction write(el, val) {\n  el.value = val;\n}\n\nmodule.exports = { init: init, read: read, write: write };\n\n},{\"./util\":35}],34:[function(require,module,exports){\n'use strict';\n\nvar bool = require('./_bool');\nvar date = require('./_date');\nvar desc = require('./_desc');\nvar number = require('./_number');\nvar text = require('./_text');\nvar checkbox = require('./_checkbox');\n\nvar all = {\n  bool: bool,\n  date: date,\n  desc: desc,\n  number: number,\n  text: text,\n  checkbox: checkbox\n};\n\nfunction read(activeField) {\n  return all[activeField.dataset.fieldName].read(activeField);\n}\n\nfunction write(activeField, val) {\n  all[activeField.dataset.fieldName].write(activeField, val);\n}\n\nmodule.exports = { read: read, write: write, all: all };\n\n},{\"./_bool\":28,\"./_checkbox\":29,\"./_date\":30,\"./_desc\":31,\"./_number\":32,\"./_text\":33}],35:[function(require,module,exports){\n'use strict';\n\nfunction activate(el, fieldName) {\n  var wrapper = cel('DIV', ['key-wrapper', 'input-group']);\n\n  // wrapper.appendChild(type);\n  if (el.classList.contains('name')) {\n    var label = cel('SPAN', ['input-group-label'], '<i class=\"fa fa-tag\" aria-hidden=\"true\"></i>');\n    wrapper.appendChild(label);\n    var name = cel('INPUT', ['name-setter', 'input-group-field']);\n    name.addEventListener('input', function () {\n      return nameInput(el, name.value);\n    });\n    name.setAttribute('placeholder', 'název');\n    wrapper.appendChild(name);\n  }\n  if (el.classList.contains('out')) {\n    el.setAttribute('readonly', 'readonly');\n  }\n  if (el.classList.contains('formula')) {\n    var _label = cel('SPAN', ['input-group-label'], '&fnof;');\n    wrapper.appendChild(_label);\n    var formula = cel('INPUT', ['formula-setter', 'input-group-field']);\n    formula.addEventListener('input', function () {\n      return appendFormula(el, formula.value);\n    });\n    formula.setAttribute('placeholder', 'vzorec');\n    wrapper.appendChild(formula);\n    el.setAttribute('readonly', 'readonly');\n  }\n  el.dataset.fieldName = fieldName;\n  el.insertAdjacentElement('afterend', wrapper);\n}\n\nfunction cel(name, classNames, html) {\n  var el = document.createElement(name);\n  if (classNames) el.setAttribute('class', classNames.join(' '));\n  if (html) el.innerHTML = html;\n  return el;\n}\n\nfunction nameInput(el, name) {\n  el.setAttribute('name', name);\n}\n\nfunction appendFormula(el, formula) {\n  el.dataset.formula = formula;\n}\n\nmodule.exports = { activate: activate };\n\n},{}],36:[function(require,module,exports){\n'use strict';\n\nvar ui = require('./ui');\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  run();\n});\n\nfunction run() {\n  ui.init();\n}\n\n},{\"./ui\":41}],37:[function(require,module,exports){\n\"use strict\";\n\nvar currentId = void 0;\n\nfunction save(data, templateName, cardName) {\n  var now = new Date().getTime();\n  if (!currentId) currentId = \"card\" + now;\n\n  localStorage.setItem(currentId, JSON.stringify({\n    id: currentId,\n    templateName: templateName,\n    cardName: cardName,\n    mtime: now,\n    card: data\n  }));\n}\n\nfunction load(id) {\n  return JSON.parse(localStorage.getItem(id));\n}\n\nfunction open(id) {\n  currentId = id;\n  return load(id);\n}\n\nfunction close() {\n  currentId = null;\n}\n\nfunction remove(id) {\n  localStorage.removeItem(id);\n}\n\nfunction list() {\n  return Object.keys(localStorage).filter(function (key) {\n    return key.match(/^card\\d+$/);\n  }).map(function (key) {\n    return load(key);\n  }).sort(function (a, b) {\n    return b.mtime - a.mtime;\n  });\n}\n\nmodule.exports = {\n  save: save,\n  load: load,\n  open: open,\n  close: close,\n  remove: remove,\n  list: list\n};\n\n},{}],38:[function(require,module,exports){\n'use strict';\n\nvar fileSaver = require('file-saver');\nvar lzs = require('lz-string');\n\nfunction wrapExport(title, data) {\n  var json = JSON.stringify(data);\n  var encodedJson = lzs.compressToEncodedURIComponent(json);\n  var url = 'https://jan-martinek.github.io/plancards/';\n  return '<!DOCTYPE html>\\n  <html>\\n  <head>\\n    <meta charset=\"utf-8\">\\n    <title>Ulo\\u017Een\\xE1 karta \"' + title + '\"</title>\\n\\n    <style>\\n      body, html {\\n        background: white;\\n      }\\n      h1, h2, p {\\n        font-family: sans-serif;\\n        font-weight: normal;\\n      }\\n      h1, h2 { margin: 2rem 0 0.5rem; }\\n      p { margin: 0 0 1rem; }\\n      .wrapper {\\n        margin: 100px auto;\\n        max-width: 450px;\\n      }\\n      .box {\\n        padding: 2rem;\\n        border: 1px solid #aaa;\\n        background: #fafafa;\\n      }\\n    </style>\\n  </head>\\n  <body>\\n    <div class=\"wrapper\">\\n      <h1>' + title + '</h1>\\n      <p>Ulo\\u017Een\\xE1 karta z aplikace \\u201EPl\\xE1novac\\xED karty\\u201C.</p>\\n      <div class=\"box\">\\n        <p>\\n          Obsah karty m\\u016F\\u017Eete otev\\u0159\\xEDt a upravovat\\n          <a href=\"' + url + '?entry=savedCard\">na webu Pl\\xE1novac\\xEDch karet</a>.\\n        </p>\\n\\n        <div id=\"quickLink\">\\n          <h2>Rychl\\xFD odkaz</h2>\\n\\n          <p>S trochou \\u0161t\\u011Bst\\xED sta\\u010D\\xED\\n          <a href=\"' + url + '?cardjson=' + encodedJson + '\">kliknout\\n          na odkaz</a>. Nen\\xED nicm\\xE9n\\u011B funk\\u010Dn\\xED v\\u017Edy \\u2014 z\\xE1le\\u017E\\xED\\n          to na prohl\\xED\\u017Ee\\u010Di a mno\\u017Estv\\xED obsahu v kart\\u011B.</p>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <script>\\n      // long links do not work at all in IE\\n      // other browsers generally accept > 80k chars\\n      var ua = window.navigator.userAgent;\\n      if (ua.indexOf(\\'MSIE \\') > 0 || ua.indexOf(\\'Trident/\\') > 0) {\\n        document.getElementById(\\'quickLink\\').style.display = \\'none\\';\\n      }\\n    </script>\\n\\n\\n    <!-- !!!' + json + '!!! -->\\n  </body>\\n  </html>';\n}\n\nfunction unwrapExport(html) {\n  var matches = /<!-- !!!([\\S\\s]+)!!! -->/.exec(html);\n  if (matches) return JSON.parse(matches[1]);\n  return false;\n}\n\nfunction exportCard(title, data) {\n  var titleFallback = 'karta';\n  var contents = wrapExport(title || titleFallback, data);\n  var blob = new Blob([contents], { type: 'text/plain;charset=utf-8' });\n  var today = new Date().toISOString().split('T')[0];\n  fileSaver.saveAs(blob, (title || titleFallback) + '-' + today + '.html');\n}\n\nfunction exportTemplate(title, data) {\n  exportCard(title || 'šablona', data);\n}\n\nfunction importCardFromFile(file, callback) {\n  var reader = new FileReader();\n  reader.readAsText(file);\n  reader.onload = function (e) {\n    return callback(unwrapExport(e.target.result));\n  };\n}\n\nfunction importCardFromUrl(url, callback) {\n  var request = new XMLHttpRequest();\n  request.open('GET', url, true);\n  request.send();\n  request.onreadystatechange = function () {\n    if (request.readyState === 4 && request.status === 200) {\n      callback(unwrapExport(request.responseText));\n    }\n  };\n}\n\nfunction importCardFromEncodedString(string, callback) {\n  callback(JSON.parse(lzs.decompressFromEncodedURIComponent(string)));\n}\n\nmodule.exports = {\n  importCardFromFile: importCardFromFile,\n  importCardFromUrl: importCardFromUrl,\n  importCardFromEncodedString: importCardFromEncodedString,\n  exportCard: exportCard,\n  exportTemplate: exportTemplate\n};\n\n},{\"file-saver\":4,\"lz-string\":5}],39:[function(require,module,exports){\n'use strict';\n\nvar dictionary = {\n  dateFormat: 'D. M. YYYY',\n  pikadayNames: {\n    previousMonth: 'Předchozí měsíc',\n    nextMonth: 'Následující měsíc',\n    months: ['leden', 'únor', 'březen', 'duben', 'květen', 'červen', 'červenec', 'srpen', 'září', 'říjen', 'listopad', 'prosinec'],\n    weekdays: ['Neděle', 'Pondělí', 'Úterý', 'Středa', 'Čtvrtek', 'Pátek', 'Sobota'],\n    weekdaysShort: ['Ne', 'Po', 'Út', 'St', 'Čt', 'Pá', 'So']\n  },\n  blocks: {\n    bigtext: 'Velké textové pole',\n    countlist: 'Položkový seznam (ks)',\n    dateinput: 'Termín',\n    dateoutput: 'Milník s úkoly',\n    doubletext: 'Dvě textová pole',\n    final: 'Závěrečný panel',\n    header: 'Hlavička',\n    indicator: 'Indikátor (ano/ne)',\n    pricelist: 'Položkový seznam (cena/ks)',\n    note: 'Poznámka',\n    number: 'Číselná položka',\n    separator: 'Oddělovač',\n    subhead: 'Mezititulek',\n    sum: 'Výpočet'\n  },\n  blockNav: {\n    text: 'Políčka',\n    list: 'Seznamy',\n    context: 'Popisky'\n  }\n};\n\nmodule.exports = { dictionary: dictionary };\n\n},{}],40:[function(require,module,exports){\n'use strict';\n\nvar cs = require('./translations/cs').dictionary;\n\nvar dictionaries = {\n  cs: cs\n};\n\nvar dictionary = void 0;\n\nfunction selectDictionary(lang) {\n  dictionary = dictionaries[lang];\n}\n\nfunction translate(keys) {\n  var keylist = arguments.length > 1 ? [].slice.call(arguments) : keys.split('.');\n  return keylist.reduce(function (prev, curr) {\n    return prev ? prev[curr] : undefined;\n  }, dictionary);\n}\n\nmodule.exports = { selectDictionary: selectDictionary, translate: translate };\n\n},{\"./translations/cs\":39}],41:[function(require,module,exports){\n'use strict';\n\nvar queryString = require('query-string');\nvar moment = require('moment');\nvar sortable = require('sortablejs');\n\nvar blocks = require('./blocks/blocks');\nvar store = require('./store');\n\nvar _require = require('./util'),\n    allArray = _require.allArray,\n    findAncestor = _require.findAncestor,\n    updateCard = _require.updateCard;\n\nvar opened = require('./opened');\nvar translator = require('./translator');\n\ntranslator.selectDictionary('cs');\nvar t = translator.translate;\nvar blockSort = void 0;\n\n// dashboard / card\nfunction closeCard() {\n  opened.save(pollData(), getTemplateName(), getCardName());\n  opened.close();\n\n  document.getElementById('card').innerHTML = '';\n  showDashboard();\n}\n\nfunction showDashboard() {\n  refreshOpened();\n\n  setDisplay('card', 'none');\n  setDisplay('toolbar', 'none');\n  setDisplay('dashboard', 'flex');\n}\n\nfunction showCard() {\n  setDisplay('card', 'block');\n  setDisplay('toolbar', 'flex');\n  setDisplay('dashboard', 'none');\n}\n\nfunction setDisplay(id, val) {\n  document.getElementById(id).style.display = val;\n}\n\n// edit / fill mode\nfunction initMode() {\n  toggleMode('fill');\n  document.querySelector('.mode-toggle').addEventListener('click', toggleMode);\n}\n\nvar modeInitializations = {\n  edit: function edit() {\n    document.body.classList.remove('fill-mode');\n    document.body.classList.add('edit-mode');\n    allArray(document.body, '.desc').forEach(function (el) {\n      el.setAttribute('contenteditable', 'true');\n    });\n  },\n  fill: function fill() {\n    document.body.classList.remove('edit-mode');\n    document.body.classList.add('fill-mode');\n    allArray(document.body, '.desc').forEach(function (el) {\n      el.removeAttribute('contenteditable');\n    });\n    updateCard();\n  }\n};\n\nfunction toggleMode(mode) {\n  var detectedMode = typeof mode === 'string' ? mode : document.body.classList.contains('fill-mode') ? 'edit' : 'fill';\n\n  modeInitializations[detectedMode]();\n}\n\n// block tools\nvar blockActions = {\n  'swap-blocks': function swapBlocks(button) {\n    var block = findAncestor(button, 'block');\n    var previous = block.previousSibling;\n    if (previous) block.parentNode.insertBefore(block, previous);\n  },\n  'remove-block': function removeBlock(button) {\n    var block = findAncestor(button, 'block');\n    block.remove();\n  },\n  'add-block': function addBlock(button) {\n    if (button.classList.contains('opened')) {\n      findAncestor(button, 'block-tools').querySelector('.add-block-tool').remove();\n      button.classList.remove('opened');\n    } else {\n      var tools = findAncestor(button, 'block-tools');\n      tools.insertAdjacentElement('beforeend', createAddBlockTool());\n      button.classList.add('opened');\n    }\n  },\n  'add-block-type': function addBlockType(button) {\n    var block = findAncestor(button, 'block');\n    var newBlock = blocks.create(button.dataset.type);\n    block.insertAdjacentElement('beforebegin', newBlock);\n    toggleMode('edit'); // inits edit mode on block\n    findAncestor(button, 'block-tools').querySelector('.add-block').classList.remove('opened');\n    findAncestor(button, 'add-block-tool').remove();\n  }\n};\n\nfunction createAddBlockTool() {\n  var addBlockTool = document.createElement('DIV');\n  addBlockTool.classList.add('add-block-tool');\n  addBlockTool.innerHTML = '<div class=\"arrow-up\"></div><div class=\"content grid-x grid-margin-x\"></div>';\n  var content = addBlockTool.querySelector('.content');\n\n  Object.keys(blocks.nav).forEach(function (navGroup) {\n    var fragment = document.createDocumentFragment();\n    var section = document.createElement('section');\n    section.classList.add('cell');\n    section.classList.add('medium-4');\n    section.innerHTML = '<p>' + t('blockNav', navGroup) + '</p>';\n    fragment.appendChild(section);\n\n    blocks.nav[navGroup].forEach(function (key) {\n      if (key === '---') {\n        section.appendChild(document.createElement('HR'));\n      } else {\n        var blockLink = document.createElement('A');\n        blockLink.classList.add('tool');\n        blockLink.classList.add('add-block-type');\n        blockLink.dataset.type = key;\n        blockLink.innerHTML = t('blocks', key);\n        section.appendChild(blockLink);\n      }\n    });\n\n    content.appendChild(fragment);\n  });\n\n  return addBlockTool;\n}\n\nfunction initBlockTools() {\n  document.getElementById('card').addEventListener('click', function (e) {\n    var button = e.target.classList.contains('tool') ? e.target : e.target.parentNode.classList.contains('tool') ? e.target.parentNode : null;\n    if (button) {\n      Object.keys(blockActions).forEach(function (key) {\n        if (button.classList.contains(key)) blockActions[key](button);\n      });\n    }\n  });\n}\n\n// prep DOM and add listeners to ui\nfunction init() {\n  initMode();\n  initExportCard();\n  initBlockTools();\n  initCloseCard();\n  initOpened();\n  preventSubmit();\n  showDashboard();\n\n  initImportCard();\n}\n\nfunction initExportCard() {\n  document.getElementById('save').addEventListener('click', function (e) {\n    store.exportCard(getCardName(), pollData());\n    e.preventDefault();\n  });\n  document.getElementById('saveTemplate').addEventListener('click', function (e) {\n    store.exportCard(getTemplateName(), pollData(true));\n    e.preventDefault();\n  });\n}\n\nfunction getCardName() {\n  var nameEl = document.querySelector('[name=\"_activity-name\"]');\n  return nameEl && nameEl.value ? nameEl.value : 'karta';\n}\n\nfunction getTemplateName() {\n  var nameEl = document.querySelector('.card-name');\n  return nameEl && nameEl.innerHTML ? nameEl.innerHTML : 'šablona';\n}\n\nfunction pollData(empty) {\n  var cardExport = [];\n  allArray(document.getElementById('card'), '.block').forEach(function (block) {\n    var info = blocks.poll(block);\n    if (empty) info.data.inputs = [];\n    cardExport.push(info);\n  });\n  return cardExport;\n}\n\nfunction initImportCard() {\n  document.getElementById('loadFromFile').addEventListener('change', function (e) {\n    store.importCardFromFile(e.target.files[0], loadCard);\n    e.preventDefault();\n  });\n\n  var query = queryString.parse(window.location.search);\n  if (query.entry && query.entry === 'savedCard') {\n    highlightFileImport();\n    removeUrlParams();\n  } else if (query.cardurl) {\n    store.importCardFromUrl(query.cardurl, loadCard);\n    removeUrlParams();\n  } else if (query.cardjson) {\n    store.importCardFromEncodedString(query.cardjson, loadCard);\n    removeUrlParams();\n  }\n}\n\nfunction highlightFileImport() {\n  var input = document.getElementById('loadFromFile');\n  var label = findAncestor(input, 'callout');\n  label.insertBefore(document.createTextNode('Uložený soubor vyberte zde: '), input);\n  label.classList.add('labelHighlight');\n}\n\nfunction removeUrlParams() {\n  window.history.replaceState(null, null, '' + window.location.pathname);\n}\n\nfunction loadCard(data) {\n  var card = document.getElementById('card');\n  var fragment = document.createDocumentFragment();\n  data.forEach(function (block) {\n    fragment.appendChild(blocks.create(block.type, block.data));\n  });\n  card.appendChild(fragment);\n  showCard();\n  updateCard();\n\n  if (blockSort) blockSort.destroy();\n  blockSort = sortable.create(card, {\n    animation: 150,\n    handle: '.blockHandle',\n    draggable: '.block',\n    filter: '.block-header, .block-final',\n    preventOnFilter: false,\n    ghostClass: 'sortable-ghost',\n    chosenClass: 'sortable-chosen',\n    dragClass: 'sortable-drag'\n  });\n}\n\nfunction initCloseCard() {\n  document.getElementById('close').addEventListener('click', function (e) {\n    closeCard();\n    e.preventDefault();\n  });\n}\n\nfunction preventSubmit() {\n  document.getElementById('card').addEventListener('submit', function (e) {\n    e.preventDefault();\n  });\n}\n\nfunction initOpened() {\n  var listEl = document.getElementById('opened-list');\n\n  listEl.addEventListener('click', function (e) {\n    e.preventDefault();\n\n    if (e.target.classList.contains('card-link')) {\n      loadCard(opened.open(e.target.dataset.id).card);\n    } else if (e.target.classList.contains('card-remove')) {\n      opened.remove(e.target.dataset.id);\n      refreshOpened();\n    }\n  });\n}\n\nfunction refreshOpened() {\n  var list = opened.list();\n  var listEl = document.getElementById('opened-list');\n  listEl.innerHTML = '';\n\n  if (list.length > 0) {\n    var fragment = document.createDocumentFragment();\n    list.forEach(function (card) {\n      var date = moment(card.mtime).format(t('dateFormat'));\n      var item = document.createElement('LI');\n      item.innerHTML = '<p>\\n        <a class=\"card-link\" data-id=\"' + card.id + '\">' + card.cardName + '</a>\\n        <i class=\"fa fa-times card-remove\" data-id=\"' + card.id + '\" aria-hidden=\"true\"></i>\\n        <br>\\n        <span class=\"label\">' + card.templateName + '</span>\\n        <span class=\"label\">' + date + '</span>\\n      </p>';\n      fragment.appendChild(item);\n    });\n    listEl.appendChild(fragment);\n    setDisplay('opened-none', 'none');\n  } else {\n    setDisplay('opened-none', 'block');\n  }\n}\n\nmodule.exports = { init: init };\n\n},{\"./blocks/blocks\":26,\"./opened\":37,\"./store\":38,\"./translator\":40,\"./util\":42,\"moment\":6,\"query-string\":9,\"sortablejs\":10}],42:[function(require,module,exports){\n'use strict';\n\nvar fields = require('./fields/fields');\nvar parser = require('expr-eval').Parser;\nvar autosize = require('autosize');\n\nvar timer = void 0;\n\nfunction makeArray(nodelist) {\n  return [].slice.call(nodelist);\n}\n\nfunction allArray(el, query) {\n  return makeArray(el.querySelectorAll(query));\n}\n\nfunction findAncestor(el, className) {\n  var parent = el.parentElement;\n\n  if (parent.classList.contains(className)) return parent;\n  return findAncestor(parent, className);\n}\n\nvar customFunctions = {\n  daysAfter: function daysAfter(date, days) {\n    return date.clone().add(days, 'days');\n  },\n  daysBefore: function daysBefore(date, days) {\n    return date.clone().subtract(days, 'days');\n  }\n};\n\nfunction updateCard() {\n  var card = document.getElementById('card');\n  var variables = Object.assign({}, collectVariables(card), customFunctions);\n  updateFormulaResults(card, variables);\n  autosize.update(document.querySelector('textarea'));\n}\n\nfunction updateCardGently() {\n  clearTimeout(timer);\n  timer = setTimeout(updateCard, 180);\n}\n\nfunction updateFormulaResults(card, variables) {\n  allArray(card, '.formula').forEach(function (el) {\n    if (el.dataset.formula) {\n      fields.write(el, parser.evaluate(el.dataset.formula, variables));\n      var block = findAncestor(el, 'block');\n      block.dispatchEvent(new Event('externalUpdate'));\n    }\n  });\n}\n\nfunction collectVariables(card) {\n  return allArray(card, '[name]').reduce(function (acc, el) {\n    acc[el.getAttribute('name')] = fields.read(el);\n    return acc;\n  }, {});\n}\n\nmodule.exports = {\n  allArray: allArray, findAncestor: findAncestor, updateCard: updateCard, updateCardGently: updateCardGently\n};\n\n},{\"./fields/fields\":34,\"autosize\":1,\"expr-eval\":3}]},{},[36])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYXV0b3NpemUvZGlzdC9hdXRvc2l6ZS5qcyIsIm5vZGVfbW9kdWxlcy9kZWNvZGUtdXJpLWNvbXBvbmVudC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9leHByLWV2YWwvZGlzdC9idW5kbGUuanMiLCJub2RlX21vZHVsZXMvZmlsZS1zYXZlci9GaWxlU2F2ZXIuanMiLCJub2RlX21vZHVsZXMvbHotc3RyaW5nL2xpYnMvbHotc3RyaW5nLmpzIiwibm9kZV9tb2R1bGVzL21vbWVudC9tb21lbnQuanMiLCJub2RlX21vZHVsZXMvb2JqZWN0LWFzc2lnbi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9waWthZGF5L3Bpa2FkYXkuanMiLCJub2RlX21vZHVsZXMvcXVlcnktc3RyaW5nL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3NvcnRhYmxlanMvU29ydGFibGUuanMiLCJub2RlX21vZHVsZXMvc3RyaWN0LXVyaS1lbmNvZGUvaW5kZXguanMiLCJzcmMvanMvYmxvY2tzL19iaWd0ZXh0LmpzIiwic3JjL2pzL2Jsb2Nrcy9fY291bnRsaXN0LmpzIiwic3JjL2pzL2Jsb2Nrcy9fZGF0ZWlucHV0LmpzIiwic3JjL2pzL2Jsb2Nrcy9fZGF0ZW91dHB1dC5qcyIsInNyYy9qcy9ibG9ja3MvX2RvdWJsZXRleHQuanMiLCJzcmMvanMvYmxvY2tzL19maW5hbC5qcyIsInNyYy9qcy9ibG9ja3MvX2hlYWRlci5qcyIsInNyYy9qcy9ibG9ja3MvX2luZGljYXRvci5qcyIsInNyYy9qcy9ibG9ja3MvX25vdGUuanMiLCJzcmMvanMvYmxvY2tzL19udW1iZXIuanMiLCJzcmMvanMvYmxvY2tzL19wcmljZWxpc3QuanMiLCJzcmMvanMvYmxvY2tzL19zZXBhcmF0b3IuanMiLCJzcmMvanMvYmxvY2tzL19zdWJoZWFkLmpzIiwic3JjL2pzL2Jsb2Nrcy9fc3VtLmpzIiwic3JjL2pzL2Jsb2Nrcy9ibG9ja3MuanMiLCJzcmMvanMvYmxvY2tzL3V0aWwuanMiLCJzcmMvanMvZmllbGRzL19ib29sLmpzIiwic3JjL2pzL2ZpZWxkcy9fY2hlY2tib3guanMiLCJzcmMvanMvZmllbGRzL19kYXRlLmpzIiwic3JjL2pzL2ZpZWxkcy9fZGVzYy5qcyIsInNyYy9qcy9maWVsZHMvX251bWJlci5qcyIsInNyYy9qcy9maWVsZHMvX3RleHQuanMiLCJzcmMvanMvZmllbGRzL2ZpZWxkcy5qcyIsInNyYy9qcy9maWVsZHMvdXRpbC5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL29wZW5lZC5qcyIsInNyYy9qcy9zdG9yZS5qcyIsInNyYy9qcy90cmFuc2xhdGlvbnMvY3MuanMiLCJzcmMvanMvdHJhbnNsYXRvci5qcyIsInNyYy9qcy91aS5qcyIsInNyYy9qcy91dGlsLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDblNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzE1Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy8ySUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3B0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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LGFBQVQsQ0FBdUIsVUFBdkIsQ0FBaEI7QUFDRDs7QUFFRCxTQUFTLGdCQUFULEdBQTRCO0FBQzFCLGVBQWEsS0FBYjtBQUNBLFVBQVEsV0FBVyxVQUFYLEVBQXVCLEdBQXZCLENBQVI7QUFDRDs7QUFFRCxTQUFTLG9CQUFULENBQThCLElBQTlCLEVBQW9DLFNBQXBDLEVBQStDO0FBQzdDLFdBQVMsSUFBVCxFQUFlLFVBQWYsRUFBMkIsT0FBM0IsQ0FBbUMsVUFBQyxFQUFELEVBQVE7QUFDekMsUUFBSSxHQUFHLE9BQUgsQ0FBVyxPQUFmLEVBQXdCO0FBQ3RCLGFBQU8sS0FBUCxDQUFhLEVBQWIsRUFBaUIsT0FBTyxRQUFQLENBQWdCLEdBQUcsT0FBSCxDQUFXLE9BQTNCLEVBQW9DLFNBQXBDLENBQWpCO0FBQ0EsVUFBTSxRQUFRLGFBQWEsRUFBYixFQUFpQixPQUFqQixDQUFkO0FBQ0EsWUFBTSxhQUFOLENBQW9CLElBQUksS0FBSixDQUFVLGdCQUFWLENBQXBCO0FBQ0Q7QUFDRixHQU5EO0FBT0Q7O0FBRUQsU0FBUyxnQkFBVCxDQUEwQixJQUExQixFQUFnQztBQUM5QixTQUFPLFNBQVMsSUFBVCxFQUFlLFFBQWYsRUFBeUIsTUFBekIsQ0FBZ0MsVUFBQyxHQUFELEVBQU0sRUFBTixFQUFhO0FBQ2xELFFBQUksR0FBRyxZQUFILENBQWdCLE1BQWhCLENBQUosSUFBK0IsT0FBTyxJQUFQLENBQVksRUFBWixDQUEvQjtBQUNBLFdBQU8sR0FBUDtBQUNELEdBSE0sRUFHSixFQUhJLENBQVA7QUFJRDs7QUFHRCxPQUFPLE9BQVAsR0FBaUI7QUFDZixvQkFEZSxFQUNMLDBCQURLLEVBQ1Msc0JBRFQsRUFDcUI7QUFEckIsQ0FBakIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyohXG5cdEF1dG9zaXplIDQuMC4wXG5cdGxpY2Vuc2U6IE1JVFxuXHRodHRwOi8vd3d3LmphY2tsbW9vcmUuY29tL2F1dG9zaXplXG4qL1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuXHRcdGRlZmluZShbJ2V4cG9ydHMnLCAnbW9kdWxlJ10sIGZhY3RvcnkpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuXHRcdGZhY3RvcnkoZXhwb3J0cywgbW9kdWxlKTtcblx0fSBlbHNlIHtcblx0XHR2YXIgbW9kID0ge1xuXHRcdFx0ZXhwb3J0czoge31cblx0XHR9O1xuXHRcdGZhY3RvcnkobW9kLmV4cG9ydHMsIG1vZCk7XG5cdFx0Z2xvYmFsLmF1dG9zaXplID0gbW9kLmV4cG9ydHM7XG5cdH1cbn0pKHRoaXMsIGZ1bmN0aW9uIChleHBvcnRzLCBtb2R1bGUpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBtYXAgPSB0eXBlb2YgTWFwID09PSBcImZ1bmN0aW9uXCIgPyBuZXcgTWFwKCkgOiAoZnVuY3Rpb24gKCkge1xuXHRcdHZhciBrZXlzID0gW107XG5cdFx0dmFyIHZhbHVlcyA9IFtdO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGhhczogZnVuY3Rpb24gaGFzKGtleSkge1xuXHRcdFx0XHRyZXR1cm4ga2V5cy5pbmRleE9mKGtleSkgPiAtMTtcblx0XHRcdH0sXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uIGdldChrZXkpIHtcblx0XHRcdFx0cmV0dXJuIHZhbHVlc1trZXlzLmluZGV4T2Yoa2V5KV07XG5cdFx0XHR9LFxuXHRcdFx0c2V0OiBmdW5jdGlvbiBzZXQoa2V5LCB2YWx1ZSkge1xuXHRcdFx0XHRpZiAoa2V5cy5pbmRleE9mKGtleSkgPT09IC0xKSB7XG5cdFx0XHRcdFx0a2V5cy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0dmFsdWVzLnB1c2godmFsdWUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0J2RlbGV0ZSc6IGZ1bmN0aW9uIF9kZWxldGUoa2V5KSB7XG5cdFx0XHRcdHZhciBpbmRleCA9IGtleXMuaW5kZXhPZihrZXkpO1xuXHRcdFx0XHRpZiAoaW5kZXggPiAtMSkge1xuXHRcdFx0XHRcdGtleXMuc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdFx0XHR2YWx1ZXMuc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH0pKCk7XG5cblx0dmFyIGNyZWF0ZUV2ZW50ID0gZnVuY3Rpb24gY3JlYXRlRXZlbnQobmFtZSkge1xuXHRcdHJldHVybiBuZXcgRXZlbnQobmFtZSwgeyBidWJibGVzOiB0cnVlIH0pO1xuXHR9O1xuXHR0cnkge1xuXHRcdG5ldyBFdmVudCgndGVzdCcpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0Ly8gSUUgZG9lcyBub3Qgc3VwcG9ydCBgbmV3IEV2ZW50KClgXG5cdFx0Y3JlYXRlRXZlbnQgPSBmdW5jdGlvbiAobmFtZSkge1xuXHRcdFx0dmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuXHRcdFx0ZXZ0LmluaXRFdmVudChuYW1lLCB0cnVlLCBmYWxzZSk7XG5cdFx0XHRyZXR1cm4gZXZ0O1xuXHRcdH07XG5cdH1cblxuXHRmdW5jdGlvbiBhc3NpZ24odGEpIHtcblx0XHRpZiAoIXRhIHx8ICF0YS5ub2RlTmFtZSB8fCB0YS5ub2RlTmFtZSAhPT0gJ1RFWFRBUkVBJyB8fCBtYXAuaGFzKHRhKSkgcmV0dXJuO1xuXG5cdFx0dmFyIGhlaWdodE9mZnNldCA9IG51bGw7XG5cdFx0dmFyIGNsaWVudFdpZHRoID0gdGEuY2xpZW50V2lkdGg7XG5cdFx0dmFyIGNhY2hlZEhlaWdodCA9IG51bGw7XG5cblx0XHRmdW5jdGlvbiBpbml0KCkge1xuXHRcdFx0dmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGEsIG51bGwpO1xuXG5cdFx0XHRpZiAoc3R5bGUucmVzaXplID09PSAndmVydGljYWwnKSB7XG5cdFx0XHRcdHRhLnN0eWxlLnJlc2l6ZSA9ICdub25lJztcblx0XHRcdH0gZWxzZSBpZiAoc3R5bGUucmVzaXplID09PSAnYm90aCcpIHtcblx0XHRcdFx0dGEuc3R5bGUucmVzaXplID0gJ2hvcml6b250YWwnO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoc3R5bGUuYm94U2l6aW5nID09PSAnY29udGVudC1ib3gnKSB7XG5cdFx0XHRcdGhlaWdodE9mZnNldCA9IC0ocGFyc2VGbG9hdChzdHlsZS5wYWRkaW5nVG9wKSArIHBhcnNlRmxvYXQoc3R5bGUucGFkZGluZ0JvdHRvbSkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aGVpZ2h0T2Zmc2V0ID0gcGFyc2VGbG9hdChzdHlsZS5ib3JkZXJUb3BXaWR0aCkgKyBwYXJzZUZsb2F0KHN0eWxlLmJvcmRlckJvdHRvbVdpZHRoKTtcblx0XHRcdH1cblx0XHRcdC8vIEZpeCB3aGVuIGEgdGV4dGFyZWEgaXMgbm90IG9uIGRvY3VtZW50IGJvZHkgYW5kIGhlaWdodE9mZnNldCBpcyBOb3QgYSBOdW1iZXJcblx0XHRcdGlmIChpc05hTihoZWlnaHRPZmZzZXQpKSB7XG5cdFx0XHRcdGhlaWdodE9mZnNldCA9IDA7XG5cdFx0XHR9XG5cblx0XHRcdHVwZGF0ZSgpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGNoYW5nZU92ZXJmbG93KHZhbHVlKSB7XG5cdFx0XHR7XG5cdFx0XHRcdC8vIENocm9tZS9TYWZhcmktc3BlY2lmaWMgZml4OlxuXHRcdFx0XHQvLyBXaGVuIHRoZSB0ZXh0YXJlYSB5LW92ZXJmbG93IGlzIGhpZGRlbiwgQ2hyb21lL1NhZmFyaSBkbyBub3QgcmVmbG93IHRoZSB0ZXh0IHRvIGFjY291bnQgZm9yIHRoZSBzcGFjZVxuXHRcdFx0XHQvLyBtYWRlIGF2YWlsYWJsZSBieSByZW1vdmluZyB0aGUgc2Nyb2xsYmFyLiBUaGUgZm9sbG93aW5nIGZvcmNlcyB0aGUgbmVjZXNzYXJ5IHRleHQgcmVmbG93LlxuXHRcdFx0XHR2YXIgd2lkdGggPSB0YS5zdHlsZS53aWR0aDtcblx0XHRcdFx0dGEuc3R5bGUud2lkdGggPSAnMHB4Jztcblx0XHRcdFx0Ly8gRm9yY2UgcmVmbG93OlxuXHRcdFx0XHQvKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG5cdFx0XHRcdHRhLm9mZnNldFdpZHRoO1xuXHRcdFx0XHQvKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xuXHRcdFx0XHR0YS5zdHlsZS53aWR0aCA9IHdpZHRoO1xuXHRcdFx0fVxuXG5cdFx0XHR0YS5zdHlsZS5vdmVyZmxvd1kgPSB2YWx1ZTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZXRQYXJlbnRPdmVyZmxvd3MoZWwpIHtcblx0XHRcdHZhciBhcnIgPSBbXTtcblxuXHRcdFx0d2hpbGUgKGVsICYmIGVsLnBhcmVudE5vZGUgJiYgZWwucGFyZW50Tm9kZSBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcblx0XHRcdFx0aWYgKGVsLnBhcmVudE5vZGUuc2Nyb2xsVG9wKSB7XG5cdFx0XHRcdFx0YXJyLnB1c2goe1xuXHRcdFx0XHRcdFx0bm9kZTogZWwucGFyZW50Tm9kZSxcblx0XHRcdFx0XHRcdHNjcm9sbFRvcDogZWwucGFyZW50Tm9kZS5zY3JvbGxUb3Bcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbCA9IGVsLnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBhcnI7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcmVzaXplKCkge1xuXHRcdFx0dmFyIG9yaWdpbmFsSGVpZ2h0ID0gdGEuc3R5bGUuaGVpZ2h0O1xuXHRcdFx0dmFyIG92ZXJmbG93cyA9IGdldFBhcmVudE92ZXJmbG93cyh0YSk7XG5cdFx0XHR2YXIgZG9jVG9wID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7IC8vIE5lZWRlZCBmb3IgTW9iaWxlIElFICh0aWNrZXQgIzI0MClcblxuXHRcdFx0dGEuc3R5bGUuaGVpZ2h0ID0gJyc7XG5cblx0XHRcdHZhciBlbmRIZWlnaHQgPSB0YS5zY3JvbGxIZWlnaHQgKyBoZWlnaHRPZmZzZXQ7XG5cblx0XHRcdGlmICh0YS5zY3JvbGxIZWlnaHQgPT09IDApIHtcblx0XHRcdFx0Ly8gSWYgdGhlIHNjcm9sbEhlaWdodCBpcyAwLCB0aGVuIHRoZSBlbGVtZW50IHByb2JhYmx5IGhhcyBkaXNwbGF5Om5vbmUgb3IgaXMgZGV0YWNoZWQgZnJvbSB0aGUgRE9NLlxuXHRcdFx0XHR0YS5zdHlsZS5oZWlnaHQgPSBvcmlnaW5hbEhlaWdodDtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR0YS5zdHlsZS5oZWlnaHQgPSBlbmRIZWlnaHQgKyAncHgnO1xuXG5cdFx0XHQvLyB1c2VkIHRvIGNoZWNrIGlmIGFuIHVwZGF0ZSBpcyBhY3R1YWxseSBuZWNlc3Nhcnkgb24gd2luZG93LnJlc2l6ZVxuXHRcdFx0Y2xpZW50V2lkdGggPSB0YS5jbGllbnRXaWR0aDtcblxuXHRcdFx0Ly8gcHJldmVudHMgc2Nyb2xsLXBvc2l0aW9uIGp1bXBpbmdcblx0XHRcdG92ZXJmbG93cy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuXHRcdFx0XHRlbC5ub2RlLnNjcm9sbFRvcCA9IGVsLnNjcm9sbFRvcDtcblx0XHRcdH0pO1xuXG5cdFx0XHRpZiAoZG9jVG9wKSB7XG5cdFx0XHRcdGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPSBkb2NUb3A7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gdXBkYXRlKCkge1xuXHRcdFx0cmVzaXplKCk7XG5cblx0XHRcdHZhciBzdHlsZUhlaWdodCA9IE1hdGgucm91bmQocGFyc2VGbG9hdCh0YS5zdHlsZS5oZWlnaHQpKTtcblx0XHRcdHZhciBjb21wdXRlZCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhLCBudWxsKTtcblxuXHRcdFx0Ly8gVXNpbmcgb2Zmc2V0SGVpZ2h0IGFzIGEgcmVwbGFjZW1lbnQgZm9yIGNvbXB1dGVkLmhlaWdodCBpbiBJRSwgYmVjYXVzZSBJRSBkb2VzIG5vdCBhY2NvdW50IHVzZSBvZiBib3JkZXItYm94XG5cdFx0XHR2YXIgYWN0dWFsSGVpZ2h0ID0gY29tcHV0ZWQuYm94U2l6aW5nID09PSAnY29udGVudC1ib3gnID8gTWF0aC5yb3VuZChwYXJzZUZsb2F0KGNvbXB1dGVkLmhlaWdodCkpIDogdGEub2Zmc2V0SGVpZ2h0O1xuXG5cdFx0XHQvLyBUaGUgYWN0dWFsIGhlaWdodCBub3QgbWF0Y2hpbmcgdGhlIHN0eWxlIGhlaWdodCAoc2V0IHZpYSB0aGUgcmVzaXplIG1ldGhvZCkgaW5kaWNhdGVzIHRoYXRcblx0XHRcdC8vIHRoZSBtYXgtaGVpZ2h0IGhhcyBiZWVuIGV4Y2VlZGVkLCBpbiB3aGljaCBjYXNlIHRoZSBvdmVyZmxvdyBzaG91bGQgYmUgYWxsb3dlZC5cblx0XHRcdGlmIChhY3R1YWxIZWlnaHQgIT09IHN0eWxlSGVpZ2h0KSB7XG5cdFx0XHRcdGlmIChjb21wdXRlZC5vdmVyZmxvd1kgPT09ICdoaWRkZW4nKSB7XG5cdFx0XHRcdFx0Y2hhbmdlT3ZlcmZsb3coJ3Njcm9sbCcpO1xuXHRcdFx0XHRcdHJlc2l6ZSgpO1xuXHRcdFx0XHRcdGFjdHVhbEhlaWdodCA9IGNvbXB1dGVkLmJveFNpemluZyA9PT0gJ2NvbnRlbnQtYm94JyA/IE1hdGgucm91bmQocGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YSwgbnVsbCkuaGVpZ2h0KSkgOiB0YS5vZmZzZXRIZWlnaHQ7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIE5vcm1hbGx5IGtlZXAgb3ZlcmZsb3cgc2V0IHRvIGhpZGRlbiwgdG8gYXZvaWQgZmxhc2ggb2Ygc2Nyb2xsYmFyIGFzIHRoZSB0ZXh0YXJlYSBleHBhbmRzLlxuXHRcdFx0XHRpZiAoY29tcHV0ZWQub3ZlcmZsb3dZICE9PSAnaGlkZGVuJykge1xuXHRcdFx0XHRcdGNoYW5nZU92ZXJmbG93KCdoaWRkZW4nKTtcblx0XHRcdFx0XHRyZXNpemUoKTtcblx0XHRcdFx0XHRhY3R1YWxIZWlnaHQgPSBjb21wdXRlZC5ib3hTaXppbmcgPT09ICdjb250ZW50LWJveCcgPyBNYXRoLnJvdW5kKHBhcnNlRmxvYXQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGEsIG51bGwpLmhlaWdodCkpIDogdGEub2Zmc2V0SGVpZ2h0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmIChjYWNoZWRIZWlnaHQgIT09IGFjdHVhbEhlaWdodCkge1xuXHRcdFx0XHRjYWNoZWRIZWlnaHQgPSBhY3R1YWxIZWlnaHQ7XG5cdFx0XHRcdHZhciBldnQgPSBjcmVhdGVFdmVudCgnYXV0b3NpemU6cmVzaXplZCcpO1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHRhLmRpc3BhdGNoRXZlbnQoZXZ0KTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0Ly8gRmlyZWZveCB3aWxsIHRocm93IGFuIGVycm9yIG9uIGRpc3BhdGNoRXZlbnQgZm9yIGEgZGV0YWNoZWQgZWxlbWVudFxuXHRcdFx0XHRcdC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTg4OTM3NlxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dmFyIHBhZ2VSZXNpemUgPSBmdW5jdGlvbiBwYWdlUmVzaXplKCkge1xuXHRcdFx0aWYgKHRhLmNsaWVudFdpZHRoICE9PSBjbGllbnRXaWR0aCkge1xuXHRcdFx0XHR1cGRhdGUoKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0dmFyIGRlc3Ryb3kgPSAoZnVuY3Rpb24gKHN0eWxlKSB7XG5cdFx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcGFnZVJlc2l6ZSwgZmFsc2UpO1xuXHRcdFx0dGEucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB1cGRhdGUsIGZhbHNlKTtcblx0XHRcdHRhLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdXBkYXRlLCBmYWxzZSk7XG5cdFx0XHR0YS5yZW1vdmVFdmVudExpc3RlbmVyKCdhdXRvc2l6ZTpkZXN0cm95JywgZGVzdHJveSwgZmFsc2UpO1xuXHRcdFx0dGEucmVtb3ZlRXZlbnRMaXN0ZW5lcignYXV0b3NpemU6dXBkYXRlJywgdXBkYXRlLCBmYWxzZSk7XG5cblx0XHRcdE9iamVjdC5rZXlzKHN0eWxlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRcdFx0dGEuc3R5bGVba2V5XSA9IHN0eWxlW2tleV07XG5cdFx0XHR9KTtcblxuXHRcdFx0bWFwWydkZWxldGUnXSh0YSk7XG5cdFx0fSkuYmluZCh0YSwge1xuXHRcdFx0aGVpZ2h0OiB0YS5zdHlsZS5oZWlnaHQsXG5cdFx0XHRyZXNpemU6IHRhLnN0eWxlLnJlc2l6ZSxcblx0XHRcdG92ZXJmbG93WTogdGEuc3R5bGUub3ZlcmZsb3dZLFxuXHRcdFx0b3ZlcmZsb3dYOiB0YS5zdHlsZS5vdmVyZmxvd1gsXG5cdFx0XHR3b3JkV3JhcDogdGEuc3R5bGUud29yZFdyYXBcblx0XHR9KTtcblxuXHRcdHRhLmFkZEV2ZW50TGlzdGVuZXIoJ2F1dG9zaXplOmRlc3Ryb3knLCBkZXN0cm95LCBmYWxzZSk7XG5cblx0XHQvLyBJRTkgZG9lcyBub3QgZmlyZSBvbnByb3BlcnR5Y2hhbmdlIG9yIG9uaW5wdXQgZm9yIGRlbGV0aW9ucyxcblx0XHQvLyBzbyBiaW5kaW5nIHRvIG9ua2V5dXAgdG8gY2F0Y2ggbW9zdCBvZiB0aG9zZSBldmVudHMuXG5cdFx0Ly8gVGhlcmUgaXMgbm8gd2F5IHRoYXQgSSBrbm93IG9mIHRvIGRldGVjdCBzb21ldGhpbmcgbGlrZSAnY3V0JyBpbiBJRTkuXG5cdFx0aWYgKCdvbnByb3BlcnR5Y2hhbmdlJyBpbiB0YSAmJiAnb25pbnB1dCcgaW4gdGEpIHtcblx0XHRcdHRhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdXBkYXRlLCBmYWxzZSk7XG5cdFx0fVxuXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHBhZ2VSZXNpemUsIGZhbHNlKTtcblx0XHR0YS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHVwZGF0ZSwgZmFsc2UpO1xuXHRcdHRhLmFkZEV2ZW50TGlzdGVuZXIoJ2F1dG9zaXplOnVwZGF0ZScsIHVwZGF0ZSwgZmFsc2UpO1xuXHRcdHRhLnN0eWxlLm92ZXJmbG93WCA9ICdoaWRkZW4nO1xuXHRcdHRhLnN0eWxlLndvcmRXcmFwID0gJ2JyZWFrLXdvcmQnO1xuXG5cdFx0bWFwLnNldCh0YSwge1xuXHRcdFx0ZGVzdHJveTogZGVzdHJveSxcblx0XHRcdHVwZGF0ZTogdXBkYXRlXG5cdFx0fSk7XG5cblx0XHRpbml0KCk7XG5cdH1cblxuXHRmdW5jdGlvbiBkZXN0cm95KHRhKSB7XG5cdFx0dmFyIG1ldGhvZHMgPSBtYXAuZ2V0KHRhKTtcblx0XHRpZiAobWV0aG9kcykge1xuXHRcdFx0bWV0aG9kcy5kZXN0cm95KCk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlKHRhKSB7XG5cdFx0dmFyIG1ldGhvZHMgPSBtYXAuZ2V0KHRhKTtcblx0XHRpZiAobWV0aG9kcykge1xuXHRcdFx0bWV0aG9kcy51cGRhdGUoKTtcblx0XHR9XG5cdH1cblxuXHR2YXIgYXV0b3NpemUgPSBudWxsO1xuXG5cdC8vIERvIG5vdGhpbmcgaW4gTm9kZS5qcyBlbnZpcm9ubWVudCBhbmQgSUU4IChvciBsb3dlcilcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSAhPT0gJ2Z1bmN0aW9uJykge1xuXHRcdGF1dG9zaXplID0gZnVuY3Rpb24gKGVsKSB7XG5cdFx0XHRyZXR1cm4gZWw7XG5cdFx0fTtcblx0XHRhdXRvc2l6ZS5kZXN0cm95ID0gZnVuY3Rpb24gKGVsKSB7XG5cdFx0XHRyZXR1cm4gZWw7XG5cdFx0fTtcblx0XHRhdXRvc2l6ZS51cGRhdGUgPSBmdW5jdGlvbiAoZWwpIHtcblx0XHRcdHJldHVybiBlbDtcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdGF1dG9zaXplID0gZnVuY3Rpb24gKGVsLCBvcHRpb25zKSB7XG5cdFx0XHRpZiAoZWwpIHtcblx0XHRcdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlbC5sZW5ndGggPyBlbCA6IFtlbF0sIGZ1bmN0aW9uICh4KSB7XG5cdFx0XHRcdFx0cmV0dXJuIGFzc2lnbih4LCBvcHRpb25zKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZWw7XG5cdFx0fTtcblx0XHRhdXRvc2l6ZS5kZXN0cm95ID0gZnVuY3Rpb24gKGVsKSB7XG5cdFx0XHRpZiAoZWwpIHtcblx0XHRcdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlbC5sZW5ndGggPyBlbCA6IFtlbF0sIGRlc3Ryb3kpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGVsO1xuXHRcdH07XG5cdFx0YXV0b3NpemUudXBkYXRlID0gZnVuY3Rpb24gKGVsKSB7XG5cdFx0XHRpZiAoZWwpIHtcblx0XHRcdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlbC5sZW5ndGggPyBlbCA6IFtlbF0sIHVwZGF0ZSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZWw7XG5cdFx0fTtcblx0fVxuXG5cdG1vZHVsZS5leHBvcnRzID0gYXV0b3NpemU7XG59KTsiLCIndXNlIHN0cmljdCc7XG52YXIgdG9rZW4gPSAnJVthLWYwLTldezJ9JztcbnZhciBzaW5nbGVNYXRjaGVyID0gbmV3IFJlZ0V4cCh0b2tlbiwgJ2dpJyk7XG52YXIgbXVsdGlNYXRjaGVyID0gbmV3IFJlZ0V4cCgnKCcgKyB0b2tlbiArICcpKycsICdnaScpO1xuXG5mdW5jdGlvbiBkZWNvZGVDb21wb25lbnRzKGNvbXBvbmVudHMsIHNwbGl0KSB7XG5cdHRyeSB7XG5cdFx0Ly8gVHJ5IHRvIGRlY29kZSB0aGUgZW50aXJlIHN0cmluZyBmaXJzdFxuXHRcdHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoY29tcG9uZW50cy5qb2luKCcnKSk7XG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdC8vIERvIG5vdGhpbmdcblx0fVxuXG5cdGlmIChjb21wb25lbnRzLmxlbmd0aCA9PT0gMSkge1xuXHRcdHJldHVybiBjb21wb25lbnRzO1xuXHR9XG5cblx0c3BsaXQgPSBzcGxpdCB8fCAxO1xuXG5cdC8vIFNwbGl0IHRoZSBhcnJheSBpbiAyIHBhcnRzXG5cdHZhciBsZWZ0ID0gY29tcG9uZW50cy5zbGljZSgwLCBzcGxpdCk7XG5cdHZhciByaWdodCA9IGNvbXBvbmVudHMuc2xpY2Uoc3BsaXQpO1xuXG5cdHJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmNhbGwoW10sIGRlY29kZUNvbXBvbmVudHMobGVmdCksIGRlY29kZUNvbXBvbmVudHMocmlnaHQpKTtcbn1cblxuZnVuY3Rpb24gZGVjb2RlKGlucHV0KSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChpbnB1dCk7XG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdHZhciB0b2tlbnMgPSBpbnB1dC5tYXRjaChzaW5nbGVNYXRjaGVyKTtcblxuXHRcdGZvciAodmFyIGkgPSAxOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpbnB1dCA9IGRlY29kZUNvbXBvbmVudHModG9rZW5zLCBpKS5qb2luKCcnKTtcblxuXHRcdFx0dG9rZW5zID0gaW5wdXQubWF0Y2goc2luZ2xlTWF0Y2hlcik7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGlucHV0O1xuXHR9XG59XG5cbmZ1bmN0aW9uIGN1c3RvbURlY29kZVVSSUNvbXBvbmVudChpbnB1dCkge1xuXHQvLyBLZWVwIHRyYWNrIG9mIGFsbCB0aGUgcmVwbGFjZW1lbnRzIGFuZCBwcmVmaWxsIHRoZSBtYXAgd2l0aCB0aGUgYEJPTWBcblx0dmFyIHJlcGxhY2VNYXAgPSB7XG5cdFx0JyVGRSVGRic6ICdcXHVGRkZEXFx1RkZGRCcsXG5cdFx0JyVGRiVGRSc6ICdcXHVGRkZEXFx1RkZGRCdcblx0fTtcblxuXHR2YXIgbWF0Y2ggPSBtdWx0aU1hdGNoZXIuZXhlYyhpbnB1dCk7XG5cdHdoaWxlIChtYXRjaCkge1xuXHRcdHRyeSB7XG5cdFx0XHQvLyBEZWNvZGUgYXMgYmlnIGNodW5rcyBhcyBwb3NzaWJsZVxuXHRcdFx0cmVwbGFjZU1hcFttYXRjaFswXV0gPSBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbMF0pO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0dmFyIHJlc3VsdCA9IGRlY29kZShtYXRjaFswXSk7XG5cblx0XHRcdGlmIChyZXN1bHQgIT09IG1hdGNoWzBdKSB7XG5cdFx0XHRcdHJlcGxhY2VNYXBbbWF0Y2hbMF1dID0gcmVzdWx0O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdG1hdGNoID0gbXVsdGlNYXRjaGVyLmV4ZWMoaW5wdXQpO1xuXHR9XG5cblx0Ly8gQWRkIGAlQzJgIGF0IHRoZSBlbmQgb2YgdGhlIG1hcCB0byBtYWtlIHN1cmUgaXQgZG9lcyBub3QgcmVwbGFjZSB0aGUgY29tYmluYXRvciBiZWZvcmUgZXZlcnl0aGluZyBlbHNlXG5cdHJlcGxhY2VNYXBbJyVDMiddID0gJ1xcdUZGRkQnO1xuXG5cdHZhciBlbnRyaWVzID0gT2JqZWN0LmtleXMocmVwbGFjZU1hcCk7XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Ly8gUmVwbGFjZSBhbGwgZGVjb2RlZCBjb21wb25lbnRzXG5cdFx0dmFyIGtleSA9IGVudHJpZXNbaV07XG5cdFx0aW5wdXQgPSBpbnB1dC5yZXBsYWNlKG5ldyBSZWdFeHAoa2V5LCAnZycpLCByZXBsYWNlTWFwW2tleV0pO1xuXHR9XG5cblx0cmV0dXJuIGlucHV0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlbmNvZGVkVVJJKSB7XG5cdGlmICh0eXBlb2YgZW5jb2RlZFVSSSAhPT0gJ3N0cmluZycpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBgZW5jb2RlZFVSSWAgdG8gYmUgb2YgdHlwZSBgc3RyaW5nYCwgZ290IGAnICsgdHlwZW9mIGVuY29kZWRVUkkgKyAnYCcpO1xuXHR9XG5cblx0dHJ5IHtcblx0XHRlbmNvZGVkVVJJID0gZW5jb2RlZFVSSS5yZXBsYWNlKC9cXCsvZywgJyAnKTtcblxuXHRcdC8vIFRyeSB0aGUgYnVpbHQgaW4gZGVjb2RlciBmaXJzdFxuXHRcdHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoZW5jb2RlZFVSSSk7XG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdC8vIEZhbGxiYWNrIHRvIGEgbW9yZSBhZHZhbmNlZCBkZWNvZGVyXG5cdFx0cmV0dXJuIGN1c3RvbURlY29kZVVSSUNvbXBvbmVudChlbmNvZGVkVVJJKTtcblx0fVxufTtcbiIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0KGdsb2JhbC5leHByRXZhbCA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxudmFyIElOVU1CRVIgPSAnSU5VTUJFUic7XG52YXIgSU9QMSA9ICdJT1AxJztcbnZhciBJT1AyID0gJ0lPUDInO1xudmFyIElPUDMgPSAnSU9QMyc7XG52YXIgSVZBUiA9ICdJVkFSJztcbnZhciBJRlVOQ0FMTCA9ICdJRlVOQ0FMTCc7XG52YXIgSUVYUFIgPSAnSUVYUFInO1xudmFyIElNRU1CRVIgPSAnSU1FTUJFUic7XG5cbmZ1bmN0aW9uIEluc3RydWN0aW9uKHR5cGUsIHZhbHVlKSB7XG4gIHRoaXMudHlwZSA9IHR5cGU7XG4gIHRoaXMudmFsdWUgPSAodmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSAhPT0gbnVsbCkgPyB2YWx1ZSA6IDA7XG59XG5cbkluc3RydWN0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgc3dpdGNoICh0aGlzLnR5cGUpIHtcbiAgICBjYXNlIElOVU1CRVI6XG4gICAgY2FzZSBJT1AxOlxuICAgIGNhc2UgSU9QMjpcbiAgICBjYXNlIElPUDM6XG4gICAgY2FzZSBJVkFSOlxuICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgY2FzZSBJRlVOQ0FMTDpcbiAgICAgIHJldHVybiAnQ0FMTCAnICsgdGhpcy52YWx1ZTtcbiAgICBjYXNlIElNRU1CRVI6XG4gICAgICByZXR1cm4gJy4nICsgdGhpcy52YWx1ZTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuICdJbnZhbGlkIEluc3RydWN0aW9uJztcbiAgfVxufTtcblxuZnVuY3Rpb24gdW5hcnlJbnN0cnVjdGlvbih2YWx1ZSkge1xuICByZXR1cm4gbmV3IEluc3RydWN0aW9uKElPUDEsIHZhbHVlKTtcbn1cblxuZnVuY3Rpb24gYmluYXJ5SW5zdHJ1Y3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIG5ldyBJbnN0cnVjdGlvbihJT1AyLCB2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIHRlcm5hcnlJbnN0cnVjdGlvbih2YWx1ZSkge1xuICByZXR1cm4gbmV3IEluc3RydWN0aW9uKElPUDMsIHZhbHVlKTtcbn1cblxuZnVuY3Rpb24gc2ltcGxpZnkodG9rZW5zLCB1bmFyeU9wcywgYmluYXJ5T3BzLCB0ZXJuYXJ5T3BzLCB2YWx1ZXMpIHtcbiAgdmFyIG5zdGFjayA9IFtdO1xuICB2YXIgbmV3ZXhwcmVzc2lvbiA9IFtdO1xuICB2YXIgbjEsIG4yLCBuMztcbiAgdmFyIGY7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSB0b2tlbnNbaV07XG4gICAgdmFyIHR5cGUgPSBpdGVtLnR5cGU7XG4gICAgaWYgKHR5cGUgPT09IElOVU1CRVIpIHtcbiAgICAgIG5zdGFjay5wdXNoKGl0ZW0pO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSVZBUiAmJiB2YWx1ZXMuaGFzT3duUHJvcGVydHkoaXRlbS52YWx1ZSkpIHtcbiAgICAgIGl0ZW0gPSBuZXcgSW5zdHJ1Y3Rpb24oSU5VTUJFUiwgdmFsdWVzW2l0ZW0udmFsdWVdKTtcbiAgICAgIG5zdGFjay5wdXNoKGl0ZW0pO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSU9QMiAmJiBuc3RhY2subGVuZ3RoID4gMSkge1xuICAgICAgbjIgPSBuc3RhY2sucG9wKCk7XG4gICAgICBuMSA9IG5zdGFjay5wb3AoKTtcbiAgICAgIGYgPSBiaW5hcnlPcHNbaXRlbS52YWx1ZV07XG4gICAgICBpdGVtID0gbmV3IEluc3RydWN0aW9uKElOVU1CRVIsIGYobjEudmFsdWUsIG4yLnZhbHVlKSk7XG4gICAgICBuc3RhY2sucHVzaChpdGVtKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IElPUDMgJiYgbnN0YWNrLmxlbmd0aCA+IDIpIHtcbiAgICAgIG4zID0gbnN0YWNrLnBvcCgpO1xuICAgICAgbjIgPSBuc3RhY2sucG9wKCk7XG4gICAgICBuMSA9IG5zdGFjay5wb3AoKTtcbiAgICAgIGlmIChpdGVtLnZhbHVlID09PSAnPycpIHtcbiAgICAgICAgbnN0YWNrLnB1c2gobjEudmFsdWUgPyBuMi52YWx1ZSA6IG4zLnZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGYgPSB0ZXJuYXJ5T3BzW2l0ZW0udmFsdWVdO1xuICAgICAgICBpdGVtID0gbmV3IEluc3RydWN0aW9uKElOVU1CRVIsIGYobjEudmFsdWUsIG4yLnZhbHVlLCBuMy52YWx1ZSkpO1xuICAgICAgICBuc3RhY2sucHVzaChpdGVtKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IElPUDEgJiYgbnN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgIG4xID0gbnN0YWNrLnBvcCgpO1xuICAgICAgZiA9IHVuYXJ5T3BzW2l0ZW0udmFsdWVdO1xuICAgICAgaXRlbSA9IG5ldyBJbnN0cnVjdGlvbihJTlVNQkVSLCBmKG4xLnZhbHVlKSk7XG4gICAgICBuc3RhY2sucHVzaChpdGVtKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IElFWFBSKSB7XG4gICAgICB3aGlsZSAobnN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbmV3ZXhwcmVzc2lvbi5wdXNoKG5zdGFjay5zaGlmdCgpKTtcbiAgICAgIH1cbiAgICAgIG5ld2V4cHJlc3Npb24ucHVzaChuZXcgSW5zdHJ1Y3Rpb24oSUVYUFIsIHNpbXBsaWZ5KGl0ZW0udmFsdWUsIHVuYXJ5T3BzLCBiaW5hcnlPcHMsIHRlcm5hcnlPcHMsIHZhbHVlcykpKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IElNRU1CRVIgJiYgbnN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgIG4xID0gbnN0YWNrLnBvcCgpO1xuICAgICAgbnN0YWNrLnB1c2gobmV3IEluc3RydWN0aW9uKElOVU1CRVIsIG4xLnZhbHVlW2l0ZW0udmFsdWVdKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdoaWxlIChuc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICBuZXdleHByZXNzaW9uLnB1c2gobnN0YWNrLnNoaWZ0KCkpO1xuICAgICAgfVxuICAgICAgbmV3ZXhwcmVzc2lvbi5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfVxuICB3aGlsZSAobnN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICBuZXdleHByZXNzaW9uLnB1c2gobnN0YWNrLnNoaWZ0KCkpO1xuICB9XG4gIHJldHVybiBuZXdleHByZXNzaW9uO1xufVxuXG5mdW5jdGlvbiBzdWJzdGl0dXRlKHRva2VucywgdmFyaWFibGUsIGV4cHIpIHtcbiAgdmFyIG5ld2V4cHJlc3Npb24gPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IHRva2Vuc1tpXTtcbiAgICB2YXIgdHlwZSA9IGl0ZW0udHlwZTtcbiAgICBpZiAodHlwZSA9PT0gSVZBUiAmJiBpdGVtLnZhbHVlID09PSB2YXJpYWJsZSkge1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBleHByLnRva2Vucy5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgZXhwcml0ZW0gPSBleHByLnRva2Vuc1tqXTtcbiAgICAgICAgdmFyIHJlcGxpdGVtO1xuICAgICAgICBpZiAoZXhwcml0ZW0udHlwZSA9PT0gSU9QMSkge1xuICAgICAgICAgIHJlcGxpdGVtID0gdW5hcnlJbnN0cnVjdGlvbihleHByaXRlbS52YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXhwcml0ZW0udHlwZSA9PT0gSU9QMikge1xuICAgICAgICAgIHJlcGxpdGVtID0gYmluYXJ5SW5zdHJ1Y3Rpb24oZXhwcml0ZW0udmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGV4cHJpdGVtLnR5cGUgPT09IElPUDMpIHtcbiAgICAgICAgICByZXBsaXRlbSA9IHRlcm5hcnlJbnN0cnVjdGlvbihleHByaXRlbS52YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVwbGl0ZW0gPSBuZXcgSW5zdHJ1Y3Rpb24oZXhwcml0ZW0udHlwZSwgZXhwcml0ZW0udmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIG5ld2V4cHJlc3Npb24ucHVzaChyZXBsaXRlbSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBJRVhQUikge1xuICAgICAgbmV3ZXhwcmVzc2lvbi5wdXNoKG5ldyBJbnN0cnVjdGlvbihJRVhQUiwgc3Vic3RpdHV0ZShpdGVtLnZhbHVlLCB2YXJpYWJsZSwgZXhwcikpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3ZXhwcmVzc2lvbi5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmV3ZXhwcmVzc2lvbjtcbn1cblxuZnVuY3Rpb24gZXZhbHVhdGUodG9rZW5zLCBleHByLCB2YWx1ZXMpIHtcbiAgdmFyIG5zdGFjayA9IFtdO1xuICB2YXIgbjEsIG4yLCBuMztcbiAgdmFyIGY7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSB0b2tlbnNbaV07XG4gICAgdmFyIHR5cGUgPSBpdGVtLnR5cGU7XG4gICAgaWYgKHR5cGUgPT09IElOVU1CRVIpIHtcbiAgICAgIG5zdGFjay5wdXNoKGl0ZW0udmFsdWUpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSU9QMikge1xuICAgICAgbjIgPSBuc3RhY2sucG9wKCk7XG4gICAgICBuMSA9IG5zdGFjay5wb3AoKTtcbiAgICAgIGYgPSBleHByLmJpbmFyeU9wc1tpdGVtLnZhbHVlXTtcbiAgICAgIG5zdGFjay5wdXNoKGYobjEsIG4yKSk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBJT1AzKSB7XG4gICAgICBuMyA9IG5zdGFjay5wb3AoKTtcbiAgICAgIG4yID0gbnN0YWNrLnBvcCgpO1xuICAgICAgbjEgPSBuc3RhY2sucG9wKCk7XG4gICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gJz8nKSB7XG4gICAgICAgIG5zdGFjay5wdXNoKGV2YWx1YXRlKG4xID8gbjIgOiBuMywgZXhwciwgdmFsdWVzKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmID0gZXhwci50ZXJuYXJ5T3BzW2l0ZW0udmFsdWVdO1xuICAgICAgICBuc3RhY2sucHVzaChmKG4xLCBuMiwgbjMpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IElWQVIpIHtcbiAgICAgIGlmIChpdGVtLnZhbHVlIGluIGV4cHIuZnVuY3Rpb25zKSB7XG4gICAgICAgIG5zdGFjay5wdXNoKGV4cHIuZnVuY3Rpb25zW2l0ZW0udmFsdWVdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB2ID0gdmFsdWVzW2l0ZW0udmFsdWVdO1xuICAgICAgICBpZiAodiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgbnN0YWNrLnB1c2godik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bmRlZmluZWQgdmFyaWFibGU6ICcgKyBpdGVtLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSU9QMSkge1xuICAgICAgbjEgPSBuc3RhY2sucG9wKCk7XG4gICAgICBmID0gZXhwci51bmFyeU9wc1tpdGVtLnZhbHVlXTtcbiAgICAgIG5zdGFjay5wdXNoKGYobjEpKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IElGVU5DQUxMKSB7XG4gICAgICB2YXIgYXJnQ291bnQgPSBpdGVtLnZhbHVlO1xuICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgIHdoaWxlIChhcmdDb3VudC0tID4gMCkge1xuICAgICAgICBhcmdzLnVuc2hpZnQobnN0YWNrLnBvcCgpKTtcbiAgICAgIH1cbiAgICAgIGYgPSBuc3RhY2sucG9wKCk7XG4gICAgICBpZiAoZi5hcHBseSAmJiBmLmNhbGwpIHtcbiAgICAgICAgbnN0YWNrLnB1c2goZi5hcHBseSh1bmRlZmluZWQsIGFyZ3MpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihmICsgJyBpcyBub3QgYSBmdW5jdGlvbicpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSUVYUFIpIHtcbiAgICAgIG5zdGFjay5wdXNoKGl0ZW0udmFsdWUpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSU1FTUJFUikge1xuICAgICAgbjEgPSBuc3RhY2sucG9wKCk7XG4gICAgICBuc3RhY2sucHVzaChuMVtpdGVtLnZhbHVlXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBFeHByZXNzaW9uJyk7XG4gICAgfVxuICB9XG4gIGlmIChuc3RhY2subGVuZ3RoID4gMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBFeHByZXNzaW9uIChwYXJpdHkpJyk7XG4gIH1cbiAgcmV0dXJuIG5zdGFja1swXTtcbn1cblxuZnVuY3Rpb24gZXhwcmVzc2lvblRvU3RyaW5nKHRva2VucywgdG9KUykge1xuICB2YXIgbnN0YWNrID0gW107XG4gIHZhciBuMSwgbjIsIG4zO1xuICB2YXIgZjtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IHRva2Vuc1tpXTtcbiAgICB2YXIgdHlwZSA9IGl0ZW0udHlwZTtcbiAgICBpZiAodHlwZSA9PT0gSU5VTUJFUikge1xuICAgICAgaWYgKHR5cGVvZiBpdGVtLnZhbHVlID09PSAnbnVtYmVyJyAmJiBpdGVtLnZhbHVlIDwgMCkge1xuICAgICAgICBuc3RhY2sucHVzaCgnKCcgKyBpdGVtLnZhbHVlICsgJyknKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5zdGFjay5wdXNoKGVzY2FwZVZhbHVlKGl0ZW0udmFsdWUpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IElPUDIpIHtcbiAgICAgIG4yID0gbnN0YWNrLnBvcCgpO1xuICAgICAgbjEgPSBuc3RhY2sucG9wKCk7XG4gICAgICBmID0gaXRlbS52YWx1ZTtcbiAgICAgIGlmICh0b0pTKSB7XG4gICAgICAgIGlmIChmID09PSAnXicpIHtcbiAgICAgICAgICBuc3RhY2sucHVzaCgnTWF0aC5wb3coJyArIG4xICsgJywgJyArIG4yICsgJyknKTtcbiAgICAgICAgfSBlbHNlIGlmIChmID09PSAnYW5kJykge1xuICAgICAgICAgIG5zdGFjay5wdXNoKCcoISEnICsgbjEgKyAnICYmICEhJyArIG4yICsgJyknKTtcbiAgICAgICAgfSBlbHNlIGlmIChmID09PSAnb3InKSB7XG4gICAgICAgICAgbnN0YWNrLnB1c2goJyghIScgKyBuMSArICcgfHwgISEnICsgbjIgKyAnKScpO1xuICAgICAgICB9IGVsc2UgaWYgKGYgPT09ICd8fCcpIHtcbiAgICAgICAgICBuc3RhY2sucHVzaCgnKFN0cmluZygnICsgbjEgKyAnKSArIFN0cmluZygnICsgbjIgKyAnKSknKTtcbiAgICAgICAgfSBlbHNlIGlmIChmID09PSAnPT0nKSB7XG4gICAgICAgICAgbnN0YWNrLnB1c2goJygnICsgbjEgKyAnID09PSAnICsgbjIgKyAnKScpO1xuICAgICAgICB9IGVsc2UgaWYgKGYgPT09ICchPScpIHtcbiAgICAgICAgICBuc3RhY2sucHVzaCgnKCcgKyBuMSArICcgIT09ICcgKyBuMiArICcpJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbnN0YWNrLnB1c2goJygnICsgbjEgKyAnICcgKyBmICsgJyAnICsgbjIgKyAnKScpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuc3RhY2sucHVzaCgnKCcgKyBuMSArICcgJyArIGYgKyAnICcgKyBuMiArICcpJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBJT1AzKSB7XG4gICAgICBuMyA9IG5zdGFjay5wb3AoKTtcbiAgICAgIG4yID0gbnN0YWNrLnBvcCgpO1xuICAgICAgbjEgPSBuc3RhY2sucG9wKCk7XG4gICAgICBmID0gaXRlbS52YWx1ZTtcbiAgICAgIGlmIChmID09PSAnPycpIHtcbiAgICAgICAgbnN0YWNrLnB1c2goJygnICsgbjEgKyAnID8gJyArIG4yICsgJyA6ICcgKyBuMyArICcpJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgRXhwcmVzc2lvbicpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSVZBUikge1xuICAgICAgbnN0YWNrLnB1c2goaXRlbS52YWx1ZSk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBJT1AxKSB7XG4gICAgICBuMSA9IG5zdGFjay5wb3AoKTtcbiAgICAgIGYgPSBpdGVtLnZhbHVlO1xuICAgICAgaWYgKGYgPT09ICctJyB8fCBmID09PSAnKycpIHtcbiAgICAgICAgbnN0YWNrLnB1c2goJygnICsgZiArIG4xICsgJyknKTtcbiAgICAgIH0gZWxzZSBpZiAodG9KUykge1xuICAgICAgICBpZiAoZiA9PT0gJ25vdCcpIHtcbiAgICAgICAgICBuc3RhY2sucHVzaCgnKCcgKyAnIScgKyBuMSArICcpJyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZiA9PT0gJyEnKSB7XG4gICAgICAgICAgbnN0YWNrLnB1c2goJ2ZhYygnICsgbjEgKyAnKScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5zdGFjay5wdXNoKGYgKyAnKCcgKyBuMSArICcpJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZiA9PT0gJyEnKSB7XG4gICAgICAgIG5zdGFjay5wdXNoKCcoJyArIG4xICsgJyEpJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuc3RhY2sucHVzaCgnKCcgKyBmICsgJyAnICsgbjEgKyAnKScpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSUZVTkNBTEwpIHtcbiAgICAgIHZhciBhcmdDb3VudCA9IGl0ZW0udmFsdWU7XG4gICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgd2hpbGUgKGFyZ0NvdW50LS0gPiAwKSB7XG4gICAgICAgIGFyZ3MudW5zaGlmdChuc3RhY2sucG9wKCkpO1xuICAgICAgfVxuICAgICAgZiA9IG5zdGFjay5wb3AoKTtcbiAgICAgIG5zdGFjay5wdXNoKGYgKyAnKCcgKyBhcmdzLmpvaW4oJywgJykgKyAnKScpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSU1FTUJFUikge1xuICAgICAgbjEgPSBuc3RhY2sucG9wKCk7XG4gICAgICBuc3RhY2sucHVzaChuMSArICcuJyArIGl0ZW0udmFsdWUpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSUVYUFIpIHtcbiAgICAgIG5zdGFjay5wdXNoKCcoJyArIGV4cHJlc3Npb25Ub1N0cmluZyhpdGVtLnZhbHVlLCB0b0pTKSArICcpJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBFeHByZXNzaW9uJyk7XG4gICAgfVxuICB9XG4gIGlmIChuc3RhY2subGVuZ3RoID4gMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBFeHByZXNzaW9uIChwYXJpdHkpJyk7XG4gIH1cbiAgcmV0dXJuIG5zdGFja1swXTtcbn1cblxuZnVuY3Rpb24gZXNjYXBlVmFsdWUodikge1xuICBpZiAodHlwZW9mIHYgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHYpLnJlcGxhY2UoL1xcdTIwMjgvZywgJ1xcXFx1MjAyOCcpLnJlcGxhY2UoL1xcdTIwMjkvZywgJ1xcXFx1MjAyOScpO1xuICB9XG4gIHJldHVybiB2O1xufVxuXG5mdW5jdGlvbiBjb250YWlucyhhcnJheSwgb2JqKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoYXJyYXlbaV0gPT09IG9iaikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZ2V0U3ltYm9scyh0b2tlbnMsIHN5bWJvbHMsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciB3aXRoTWVtYmVycyA9ICEhb3B0aW9ucy53aXRoTWVtYmVycztcbiAgdmFyIHByZXZWYXIgPSBudWxsO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSB0b2tlbnNbaV07XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gSVZBUiAmJiAhY29udGFpbnMoc3ltYm9scywgaXRlbS52YWx1ZSkpIHtcbiAgICAgIGlmICghd2l0aE1lbWJlcnMpIHtcbiAgICAgICAgc3ltYm9scy5wdXNoKGl0ZW0udmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChwcmV2VmFyICE9PSBudWxsKSB7XG4gICAgICAgIGlmICghY29udGFpbnMoc3ltYm9scywgcHJldlZhcikpIHtcbiAgICAgICAgICBzeW1ib2xzLnB1c2gocHJldlZhcik7XG4gICAgICAgIH1cbiAgICAgICAgcHJldlZhciA9IGl0ZW0udmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcmV2VmFyID0gaXRlbS52YWx1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gSU1FTUJFUiAmJiB3aXRoTWVtYmVycyAmJiBwcmV2VmFyICE9PSBudWxsKSB7XG4gICAgICBwcmV2VmFyICs9ICcuJyArIGl0ZW0udmFsdWU7XG4gICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09IElFWFBSKSB7XG4gICAgICBnZXRTeW1ib2xzKGl0ZW0udmFsdWUsIHN5bWJvbHMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSBpZiAocHJldlZhciAhPT0gbnVsbCkge1xuICAgICAgaWYgKCFjb250YWlucyhzeW1ib2xzLCBwcmV2VmFyKSkge1xuICAgICAgICBzeW1ib2xzLnB1c2gocHJldlZhcik7XG4gICAgICB9XG4gICAgICBwcmV2VmFyID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBpZiAocHJldlZhciAhPT0gbnVsbCAmJiAhY29udGFpbnMoc3ltYm9scywgcHJldlZhcikpIHtcbiAgICBzeW1ib2xzLnB1c2gocHJldlZhcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gRXhwcmVzc2lvbih0b2tlbnMsIHBhcnNlcikge1xuICB0aGlzLnRva2VucyA9IHRva2VucztcbiAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XG4gIHRoaXMudW5hcnlPcHMgPSBwYXJzZXIudW5hcnlPcHM7XG4gIHRoaXMuYmluYXJ5T3BzID0gcGFyc2VyLmJpbmFyeU9wcztcbiAgdGhpcy50ZXJuYXJ5T3BzID0gcGFyc2VyLnRlcm5hcnlPcHM7XG4gIHRoaXMuZnVuY3Rpb25zID0gcGFyc2VyLmZ1bmN0aW9ucztcbn1cblxuRXhwcmVzc2lvbi5wcm90b3R5cGUuc2ltcGxpZnkgPSBmdW5jdGlvbiAodmFsdWVzKSB7XG4gIHZhbHVlcyA9IHZhbHVlcyB8fCB7fTtcbiAgcmV0dXJuIG5ldyBFeHByZXNzaW9uKHNpbXBsaWZ5KHRoaXMudG9rZW5zLCB0aGlzLnVuYXJ5T3BzLCB0aGlzLmJpbmFyeU9wcywgdGhpcy50ZXJuYXJ5T3BzLCB2YWx1ZXMpLCB0aGlzLnBhcnNlcik7XG59O1xuXG5FeHByZXNzaW9uLnByb3RvdHlwZS5zdWJzdGl0dXRlID0gZnVuY3Rpb24gKHZhcmlhYmxlLCBleHByKSB7XG4gIGlmICghKGV4cHIgaW5zdGFuY2VvZiBFeHByZXNzaW9uKSkge1xuICAgIGV4cHIgPSB0aGlzLnBhcnNlci5wYXJzZShTdHJpbmcoZXhwcikpO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBFeHByZXNzaW9uKHN1YnN0aXR1dGUodGhpcy50b2tlbnMsIHZhcmlhYmxlLCBleHByKSwgdGhpcy5wYXJzZXIpO1xufTtcblxuRXhwcmVzc2lvbi5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAodmFsdWVzKSB7XG4gIHZhbHVlcyA9IHZhbHVlcyB8fCB7fTtcbiAgcmV0dXJuIGV2YWx1YXRlKHRoaXMudG9rZW5zLCB0aGlzLCB2YWx1ZXMpO1xufTtcblxuRXhwcmVzc2lvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBleHByZXNzaW9uVG9TdHJpbmcodGhpcy50b2tlbnMsIGZhbHNlKTtcbn07XG5cbkV4cHJlc3Npb24ucHJvdG90eXBlLnN5bWJvbHMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHZhcnMgPSBbXTtcbiAgZ2V0U3ltYm9scyh0aGlzLnRva2VucywgdmFycywgb3B0aW9ucyk7XG4gIHJldHVybiB2YXJzO1xufTtcblxuRXhwcmVzc2lvbi5wcm90b3R5cGUudmFyaWFibGVzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciB2YXJzID0gW107XG4gIGdldFN5bWJvbHModGhpcy50b2tlbnMsIHZhcnMsIG9wdGlvbnMpO1xuICB2YXIgZnVuY3Rpb25zID0gdGhpcy5mdW5jdGlvbnM7XG4gIHJldHVybiB2YXJzLmZpbHRlcihmdW5jdGlvbiAobmFtZSkge1xuICAgIHJldHVybiAhKG5hbWUgaW4gZnVuY3Rpb25zKTtcbiAgfSk7XG59O1xuXG5FeHByZXNzaW9uLnByb3RvdHlwZS50b0pTRnVuY3Rpb24gPSBmdW5jdGlvbiAocGFyYW0sIHZhcmlhYmxlcykge1xuICB2YXIgZXhwciA9IHRoaXM7XG4gIHZhciBmID0gbmV3IEZ1bmN0aW9uKHBhcmFtLCAnd2l0aCh0aGlzLmZ1bmN0aW9ucykgd2l0aCAodGhpcy50ZXJuYXJ5T3BzKSB3aXRoICh0aGlzLmJpbmFyeU9wcykgd2l0aCAodGhpcy51bmFyeU9wcykgeyByZXR1cm4gJyArIGV4cHJlc3Npb25Ub1N0cmluZyh0aGlzLnNpbXBsaWZ5KHZhcmlhYmxlcykudG9rZW5zLCB0cnVlKSArICc7IH0nKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXctZnVuY1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmLmFwcGx5KGV4cHIsIGFyZ3VtZW50cyk7XG4gIH07XG59O1xuXG52YXIgVEVPRiA9ICdURU9GJztcbnZhciBUT1AgPSAnVE9QJztcbnZhciBUTlVNQkVSID0gJ1ROVU1CRVInO1xudmFyIFRTVFJJTkcgPSAnVFNUUklORyc7XG52YXIgVFBBUkVOID0gJ1RQQVJFTic7XG52YXIgVENPTU1BID0gJ1RDT01NQSc7XG52YXIgVE5BTUUgPSAnVE5BTUUnO1xuXG5mdW5jdGlvbiBUb2tlbih0eXBlLCB2YWx1ZSwgaW5kZXgpIHtcbiAgdGhpcy50eXBlID0gdHlwZTtcbiAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB0aGlzLmluZGV4ID0gaW5kZXg7XG59XG5cblRva2VuLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMudHlwZSArICc6ICcgKyB0aGlzLnZhbHVlO1xufTtcblxuZnVuY3Rpb24gVG9rZW5TdHJlYW0ocGFyc2VyLCBleHByZXNzaW9uKSB7XG4gIHRoaXMucG9zID0gMDtcbiAgdGhpcy5jdXJyZW50ID0gbnVsbDtcbiAgdGhpcy51bmFyeU9wcyA9IHBhcnNlci51bmFyeU9wcztcbiAgdGhpcy5iaW5hcnlPcHMgPSBwYXJzZXIuYmluYXJ5T3BzO1xuICB0aGlzLnRlcm5hcnlPcHMgPSBwYXJzZXIudGVybmFyeU9wcztcbiAgdGhpcy5jb25zdHMgPSBwYXJzZXIuY29uc3RzO1xuICB0aGlzLmV4cHJlc3Npb24gPSBleHByZXNzaW9uO1xuICB0aGlzLnNhdmVkUG9zaXRpb24gPSAwO1xuICB0aGlzLnNhdmVkQ3VycmVudCA9IG51bGw7XG4gIHRoaXMub3B0aW9ucyA9IHBhcnNlci5vcHRpb25zO1xufVxuXG5Ub2tlblN0cmVhbS5wcm90b3R5cGUubmV3VG9rZW4gPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUsIHBvcykge1xuICByZXR1cm4gbmV3IFRva2VuKHR5cGUsIHZhbHVlLCBwb3MgIT0gbnVsbCA/IHBvcyA6IHRoaXMucG9zKTtcbn07XG5cblRva2VuU3RyZWFtLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnNhdmVkUG9zaXRpb24gPSB0aGlzLnBvcztcbiAgdGhpcy5zYXZlZEN1cnJlbnQgPSB0aGlzLmN1cnJlbnQ7XG59O1xuXG5Ub2tlblN0cmVhbS5wcm90b3R5cGUucmVzdG9yZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5wb3MgPSB0aGlzLnNhdmVkUG9zaXRpb247XG4gIHRoaXMuY3VycmVudCA9IHRoaXMuc2F2ZWRDdXJyZW50O1xufTtcblxuVG9rZW5TdHJlYW0ucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLnBvcyA+PSB0aGlzLmV4cHJlc3Npb24ubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHRoaXMubmV3VG9rZW4oVEVPRiwgJ0VPRicpO1xuICB9XG5cbiAgaWYgKHRoaXMuaXNXaGl0ZXNwYWNlKCkgfHwgdGhpcy5pc0NvbW1lbnQoKSkge1xuICAgIHJldHVybiB0aGlzLm5leHQoKTtcbiAgfSBlbHNlIGlmICh0aGlzLmlzUmFkaXhJbnRlZ2VyKCkgfHxcbiAgICAgIHRoaXMuaXNOdW1iZXIoKSB8fFxuICAgICAgdGhpcy5pc09wZXJhdG9yKCkgfHxcbiAgICAgIHRoaXMuaXNTdHJpbmcoKSB8fFxuICAgICAgdGhpcy5pc1BhcmVuKCkgfHxcbiAgICAgIHRoaXMuaXNDb21tYSgpIHx8XG4gICAgICB0aGlzLmlzTmFtZWRPcCgpIHx8XG4gICAgICB0aGlzLmlzQ29uc3QoKSB8fFxuICAgICAgdGhpcy5pc05hbWUoKSkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnQ7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5wYXJzZUVycm9yKCdVbmtub3duIGNoYXJhY3RlciBcIicgKyB0aGlzLmV4cHJlc3Npb24uY2hhckF0KHRoaXMucG9zKSArICdcIicpO1xuICB9XG59O1xuXG5Ub2tlblN0cmVhbS5wcm90b3R5cGUuaXNTdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciByID0gZmFsc2U7XG4gIHZhciBzdGFydFBvcyA9IHRoaXMucG9zO1xuICB2YXIgcXVvdGUgPSB0aGlzLmV4cHJlc3Npb24uY2hhckF0KHN0YXJ0UG9zKTtcblxuICBpZiAocXVvdGUgPT09ICdcXCcnIHx8IHF1b3RlID09PSAnXCInKSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5leHByZXNzaW9uLmluZGV4T2YocXVvdGUsIHN0YXJ0UG9zICsgMSk7XG4gICAgd2hpbGUgKGluZGV4ID49IDAgJiYgdGhpcy5wb3MgPCB0aGlzLmV4cHJlc3Npb24ubGVuZ3RoKSB7XG4gICAgICB0aGlzLnBvcyA9IGluZGV4ICsgMTtcbiAgICAgIGlmICh0aGlzLmV4cHJlc3Npb24uY2hhckF0KGluZGV4IC0gMSkgIT09ICdcXFxcJykge1xuICAgICAgICB2YXIgcmF3U3RyaW5nID0gdGhpcy5leHByZXNzaW9uLnN1YnN0cmluZyhzdGFydFBvcyArIDEsIGluZGV4KTtcbiAgICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5uZXdUb2tlbihUU1RSSU5HLCB0aGlzLnVuZXNjYXBlKHJhd1N0cmluZyksIHN0YXJ0UG9zKTtcbiAgICAgICAgciA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaW5kZXggPSB0aGlzLmV4cHJlc3Npb24uaW5kZXhPZihxdW90ZSwgaW5kZXggKyAxKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHI7XG59O1xuXG5Ub2tlblN0cmVhbS5wcm90b3R5cGUuaXNQYXJlbiA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGMgPSB0aGlzLmV4cHJlc3Npb24uY2hhckF0KHRoaXMucG9zKTtcbiAgaWYgKGMgPT09ICcoJyB8fCBjID09PSAnKScpIHtcbiAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLm5ld1Rva2VuKFRQQVJFTiwgYyk7XG4gICAgdGhpcy5wb3MrKztcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5Ub2tlblN0cmVhbS5wcm90b3R5cGUuaXNDb21tYSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGMgPSB0aGlzLmV4cHJlc3Npb24uY2hhckF0KHRoaXMucG9zKTtcbiAgaWYgKGMgPT09ICcsJykge1xuICAgIHRoaXMuY3VycmVudCA9IHRoaXMubmV3VG9rZW4oVENPTU1BLCAnLCcpO1xuICAgIHRoaXMucG9zKys7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuVG9rZW5TdHJlYW0ucHJvdG90eXBlLmlzQ29uc3QgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGFydFBvcyA9IHRoaXMucG9zO1xuICB2YXIgaSA9IHN0YXJ0UG9zO1xuICBmb3IgKDsgaSA8IHRoaXMuZXhwcmVzc2lvbi5sZW5ndGg7IGkrKykge1xuICAgIHZhciBjID0gdGhpcy5leHByZXNzaW9uLmNoYXJBdChpKTtcbiAgICBpZiAoYy50b1VwcGVyQ2FzZSgpID09PSBjLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGlmIChpID09PSB0aGlzLnBvcyB8fCAoYyAhPT0gJ18nICYmIGMgIT09ICcuJyAmJiAoYyA8ICcwJyB8fCBjID4gJzknKSkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChpID4gc3RhcnRQb3MpIHtcbiAgICB2YXIgc3RyID0gdGhpcy5leHByZXNzaW9uLnN1YnN0cmluZyhzdGFydFBvcywgaSk7XG4gICAgaWYgKHN0ciBpbiB0aGlzLmNvbnN0cykge1xuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5uZXdUb2tlbihUTlVNQkVSLCB0aGlzLmNvbnN0c1tzdHJdKTtcbiAgICAgIHRoaXMucG9zICs9IHN0ci5sZW5ndGg7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuVG9rZW5TdHJlYW0ucHJvdG90eXBlLmlzTmFtZWRPcCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHN0YXJ0UG9zID0gdGhpcy5wb3M7XG4gIHZhciBpID0gc3RhcnRQb3M7XG4gIGZvciAoOyBpIDwgdGhpcy5leHByZXNzaW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGMgPSB0aGlzLmV4cHJlc3Npb24uY2hhckF0KGkpO1xuICAgIGlmIChjLnRvVXBwZXJDYXNlKCkgPT09IGMudG9Mb3dlckNhc2UoKSkge1xuICAgICAgaWYgKGkgPT09IHRoaXMucG9zIHx8IChjICE9PSAnXycgJiYgKGMgPCAnMCcgfHwgYyA+ICc5JykpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoaSA+IHN0YXJ0UG9zKSB7XG4gICAgdmFyIHN0ciA9IHRoaXMuZXhwcmVzc2lvbi5zdWJzdHJpbmcoc3RhcnRQb3MsIGkpO1xuICAgIGlmICh0aGlzLmlzT3BlcmF0b3JFbmFibGVkKHN0cikgJiYgKHN0ciBpbiB0aGlzLmJpbmFyeU9wcyB8fCBzdHIgaW4gdGhpcy51bmFyeU9wcyB8fCBzdHIgaW4gdGhpcy50ZXJuYXJ5T3BzKSkge1xuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5uZXdUb2tlbihUT1AsIHN0cik7XG4gICAgICB0aGlzLnBvcyArPSBzdHIubGVuZ3RoO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cblRva2VuU3RyZWFtLnByb3RvdHlwZS5pc05hbWUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGFydFBvcyA9IHRoaXMucG9zO1xuICB2YXIgaSA9IHN0YXJ0UG9zO1xuICB2YXIgaGFzTGV0dGVyID0gZmFsc2U7XG4gIGZvciAoOyBpIDwgdGhpcy5leHByZXNzaW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGMgPSB0aGlzLmV4cHJlc3Npb24uY2hhckF0KGkpO1xuICAgIGlmIChjLnRvVXBwZXJDYXNlKCkgPT09IGMudG9Mb3dlckNhc2UoKSkge1xuICAgICAgaWYgKGkgPT09IHRoaXMucG9zICYmIGMgPT09ICckJykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSBpZiAoaSA9PT0gdGhpcy5wb3MgfHwgIWhhc0xldHRlciB8fCAoYyAhPT0gJ18nICYmIChjIDwgJzAnIHx8IGMgPiAnOScpKSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaGFzTGV0dGVyID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgaWYgKGhhc0xldHRlcikge1xuICAgIHZhciBzdHIgPSB0aGlzLmV4cHJlc3Npb24uc3Vic3RyaW5nKHN0YXJ0UG9zLCBpKTtcbiAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLm5ld1Rva2VuKFROQU1FLCBzdHIpO1xuICAgIHRoaXMucG9zICs9IHN0ci5sZW5ndGg7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuVG9rZW5TdHJlYW0ucHJvdG90eXBlLmlzV2hpdGVzcGFjZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHIgPSBmYWxzZTtcbiAgdmFyIGMgPSB0aGlzLmV4cHJlc3Npb24uY2hhckF0KHRoaXMucG9zKTtcbiAgd2hpbGUgKGMgPT09ICcgJyB8fCBjID09PSAnXFx0JyB8fCBjID09PSAnXFxuJyB8fCBjID09PSAnXFxyJykge1xuICAgIHIgPSB0cnVlO1xuICAgIHRoaXMucG9zKys7XG4gICAgaWYgKHRoaXMucG9zID49IHRoaXMuZXhwcmVzc2lvbi5sZW5ndGgpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjID0gdGhpcy5leHByZXNzaW9uLmNoYXJBdCh0aGlzLnBvcyk7XG4gIH1cbiAgcmV0dXJuIHI7XG59O1xuXG52YXIgY29kZVBvaW50UGF0dGVybiA9IC9eWzAtOWEtZl17NH0kL2k7XG5cblRva2VuU3RyZWFtLnByb3RvdHlwZS51bmVzY2FwZSA9IGZ1bmN0aW9uICh2KSB7XG4gIHZhciBpbmRleCA9IHYuaW5kZXhPZignXFxcXCcpO1xuICBpZiAoaW5kZXggPCAwKSB7XG4gICAgcmV0dXJuIHY7XG4gIH1cblxuICB2YXIgYnVmZmVyID0gdi5zdWJzdHJpbmcoMCwgaW5kZXgpO1xuICB3aGlsZSAoaW5kZXggPj0gMCkge1xuICAgIHZhciBjID0gdi5jaGFyQXQoKytpbmRleCk7XG4gICAgc3dpdGNoIChjKSB7XG4gICAgICBjYXNlICdcXCcnOlxuICAgICAgICBidWZmZXIgKz0gJ1xcJyc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnXCInOlxuICAgICAgICBidWZmZXIgKz0gJ1wiJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdcXFxcJzpcbiAgICAgICAgYnVmZmVyICs9ICdcXFxcJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICcvJzpcbiAgICAgICAgYnVmZmVyICs9ICcvJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdiJzpcbiAgICAgICAgYnVmZmVyICs9ICdcXGInO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2YnOlxuICAgICAgICBidWZmZXIgKz0gJ1xcZic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbic6XG4gICAgICAgIGJ1ZmZlciArPSAnXFxuJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdyJzpcbiAgICAgICAgYnVmZmVyICs9ICdcXHInO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3QnOlxuICAgICAgICBidWZmZXIgKz0gJ1xcdCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndSc6XG4gICAgICAgIC8vIGludGVycHJldCB0aGUgZm9sbG93aW5nIDQgY2hhcmFjdGVycyBhcyB0aGUgaGV4IG9mIHRoZSB1bmljb2RlIGNvZGUgcG9pbnRcbiAgICAgICAgdmFyIGNvZGVQb2ludCA9IHYuc3Vic3RyaW5nKGluZGV4ICsgMSwgaW5kZXggKyA1KTtcbiAgICAgICAgaWYgKCFjb2RlUG9pbnRQYXR0ZXJuLnRlc3QoY29kZVBvaW50KSkge1xuICAgICAgICAgIHRoaXMucGFyc2VFcnJvcignSWxsZWdhbCBlc2NhcGUgc2VxdWVuY2U6IFxcXFx1JyArIGNvZGVQb2ludCk7XG4gICAgICAgIH1cbiAgICAgICAgYnVmZmVyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoY29kZVBvaW50LCAxNikpO1xuICAgICAgICBpbmRleCArPSA0O1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IHRoaXMucGFyc2VFcnJvcignSWxsZWdhbCBlc2NhcGUgc2VxdWVuY2U6IFwiXFxcXCcgKyBjICsgJ1wiJyk7XG4gICAgfVxuICAgICsraW5kZXg7XG4gICAgdmFyIGJhY2tzbGFzaCA9IHYuaW5kZXhPZignXFxcXCcsIGluZGV4KTtcbiAgICBidWZmZXIgKz0gdi5zdWJzdHJpbmcoaW5kZXgsIGJhY2tzbGFzaCA8IDAgPyB2Lmxlbmd0aCA6IGJhY2tzbGFzaCk7XG4gICAgaW5kZXggPSBiYWNrc2xhc2g7XG4gIH1cblxuICByZXR1cm4gYnVmZmVyO1xufTtcblxuVG9rZW5TdHJlYW0ucHJvdG90eXBlLmlzQ29tbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGMgPSB0aGlzLmV4cHJlc3Npb24uY2hhckF0KHRoaXMucG9zKTtcbiAgaWYgKGMgPT09ICcvJyAmJiB0aGlzLmV4cHJlc3Npb24uY2hhckF0KHRoaXMucG9zICsgMSkgPT09ICcqJykge1xuICAgIHRoaXMucG9zID0gdGhpcy5leHByZXNzaW9uLmluZGV4T2YoJyovJywgdGhpcy5wb3MpICsgMjtcbiAgICBpZiAodGhpcy5wb3MgPT09IDEpIHtcbiAgICAgIHRoaXMucG9zID0gdGhpcy5leHByZXNzaW9uLmxlbmd0aDtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuVG9rZW5TdHJlYW0ucHJvdG90eXBlLmlzUmFkaXhJbnRlZ2VyID0gZnVuY3Rpb24gKCkge1xuICB2YXIgcG9zID0gdGhpcy5wb3M7XG5cbiAgaWYgKHBvcyA+PSB0aGlzLmV4cHJlc3Npb24ubGVuZ3RoIC0gMiB8fCB0aGlzLmV4cHJlc3Npb24uY2hhckF0KHBvcykgIT09ICcwJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICArK3BvcztcblxuICB2YXIgcmFkaXg7XG4gIHZhciB2YWxpZERpZ2l0O1xuICBpZiAodGhpcy5leHByZXNzaW9uLmNoYXJBdChwb3MpID09PSAneCcpIHtcbiAgICByYWRpeCA9IDE2O1xuICAgIHZhbGlkRGlnaXQgPSAvXlswLTlhLWZdJC9pO1xuICAgICsrcG9zO1xuICB9IGVsc2UgaWYgKHRoaXMuZXhwcmVzc2lvbi5jaGFyQXQocG9zKSA9PT0gJ2InKSB7XG4gICAgcmFkaXggPSAyO1xuICAgIHZhbGlkRGlnaXQgPSAvXlswMV0kL2k7XG4gICAgKytwb3M7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIHZhbGlkID0gZmFsc2U7XG4gIHZhciBzdGFydFBvcyA9IHBvcztcblxuICB3aGlsZSAocG9zIDwgdGhpcy5leHByZXNzaW9uLmxlbmd0aCkge1xuICAgIHZhciBjID0gdGhpcy5leHByZXNzaW9uLmNoYXJBdChwb3MpO1xuICAgIGlmICh2YWxpZERpZ2l0LnRlc3QoYykpIHtcbiAgICAgIHBvcysrO1xuICAgICAgdmFsaWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAodmFsaWQpIHtcbiAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLm5ld1Rva2VuKFROVU1CRVIsIHBhcnNlSW50KHRoaXMuZXhwcmVzc2lvbi5zdWJzdHJpbmcoc3RhcnRQb3MsIHBvcyksIHJhZGl4KSk7XG4gICAgdGhpcy5wb3MgPSBwb3M7XG4gIH1cbiAgcmV0dXJuIHZhbGlkO1xufTtcblxuVG9rZW5TdHJlYW0ucHJvdG90eXBlLmlzTnVtYmVyID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdmFsaWQgPSBmYWxzZTtcbiAgdmFyIHBvcyA9IHRoaXMucG9zO1xuICB2YXIgc3RhcnRQb3MgPSBwb3M7XG4gIHZhciByZXNldFBvcyA9IHBvcztcbiAgdmFyIGZvdW5kRG90ID0gZmFsc2U7XG4gIHZhciBmb3VuZERpZ2l0cyA9IGZhbHNlO1xuICB2YXIgYztcblxuICB3aGlsZSAocG9zIDwgdGhpcy5leHByZXNzaW9uLmxlbmd0aCkge1xuICAgIGMgPSB0aGlzLmV4cHJlc3Npb24uY2hhckF0KHBvcyk7XG4gICAgaWYgKChjID49ICcwJyAmJiBjIDw9ICc5JykgfHwgKCFmb3VuZERvdCAmJiBjID09PSAnLicpKSB7XG4gICAgICBpZiAoYyA9PT0gJy4nKSB7XG4gICAgICAgIGZvdW5kRG90ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvdW5kRGlnaXRzID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHBvcysrO1xuICAgICAgdmFsaWQgPSBmb3VuZERpZ2l0cztcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKHZhbGlkKSB7XG4gICAgcmVzZXRQb3MgPSBwb3M7XG4gIH1cblxuICBpZiAoYyA9PT0gJ2UnIHx8IGMgPT09ICdFJykge1xuICAgIHBvcysrO1xuICAgIHZhciBhY2NlcHRTaWduID0gdHJ1ZTtcbiAgICB2YXIgdmFsaWRFeHBvbmVudCA9IGZhbHNlO1xuICAgIHdoaWxlIChwb3MgPCB0aGlzLmV4cHJlc3Npb24ubGVuZ3RoKSB7XG4gICAgICBjID0gdGhpcy5leHByZXNzaW9uLmNoYXJBdChwb3MpO1xuICAgICAgaWYgKGFjY2VwdFNpZ24gJiYgKGMgPT09ICcrJyB8fCBjID09PSAnLScpKSB7XG4gICAgICAgIGFjY2VwdFNpZ24gPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoYyA+PSAnMCcgJiYgYyA8PSAnOScpIHtcbiAgICAgICAgdmFsaWRFeHBvbmVudCA9IHRydWU7XG4gICAgICAgIGFjY2VwdFNpZ24gPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcG9zKys7XG4gICAgfVxuXG4gICAgaWYgKCF2YWxpZEV4cG9uZW50KSB7XG4gICAgICBwb3MgPSByZXNldFBvcztcbiAgICB9XG4gIH1cblxuICBpZiAodmFsaWQpIHtcbiAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLm5ld1Rva2VuKFROVU1CRVIsIHBhcnNlRmxvYXQodGhpcy5leHByZXNzaW9uLnN1YnN0cmluZyhzdGFydFBvcywgcG9zKSkpO1xuICAgIHRoaXMucG9zID0gcG9zO1xuICB9IGVsc2Uge1xuICAgIHRoaXMucG9zID0gcmVzZXRQb3M7XG4gIH1cbiAgcmV0dXJuIHZhbGlkO1xufTtcblxuVG9rZW5TdHJlYW0ucHJvdG90eXBlLmlzT3BlcmF0b3IgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGFydFBvcyA9IHRoaXMucG9zO1xuICB2YXIgYyA9IHRoaXMuZXhwcmVzc2lvbi5jaGFyQXQodGhpcy5wb3MpO1xuXG4gIGlmIChjID09PSAnKycgfHwgYyA9PT0gJy0nIHx8IGMgPT09ICcqJyB8fCBjID09PSAnLycgfHwgYyA9PT0gJyUnIHx8IGMgPT09ICdeJyB8fCBjID09PSAnPycgfHwgYyA9PT0gJzonIHx8IGMgPT09ICcuJykge1xuICAgIHRoaXMuY3VycmVudCA9IHRoaXMubmV3VG9rZW4oVE9QLCBjKTtcbiAgfSBlbHNlIGlmIChjID09PSAn4oiZJyB8fCBjID09PSAn4oCiJykge1xuICAgIHRoaXMuY3VycmVudCA9IHRoaXMubmV3VG9rZW4oVE9QLCAnKicpO1xuICB9IGVsc2UgaWYgKGMgPT09ICc+Jykge1xuICAgIGlmICh0aGlzLmV4cHJlc3Npb24uY2hhckF0KHRoaXMucG9zICsgMSkgPT09ICc9Jykge1xuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5uZXdUb2tlbihUT1AsICc+PScpO1xuICAgICAgdGhpcy5wb3MrKztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5uZXdUb2tlbihUT1AsICc+Jyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGMgPT09ICc8Jykge1xuICAgIGlmICh0aGlzLmV4cHJlc3Npb24uY2hhckF0KHRoaXMucG9zICsgMSkgPT09ICc9Jykge1xuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5uZXdUb2tlbihUT1AsICc8PScpO1xuICAgICAgdGhpcy5wb3MrKztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5uZXdUb2tlbihUT1AsICc8Jyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGMgPT09ICd8Jykge1xuICAgIGlmICh0aGlzLmV4cHJlc3Npb24uY2hhckF0KHRoaXMucG9zICsgMSkgPT09ICd8Jykge1xuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5uZXdUb2tlbihUT1AsICd8fCcpO1xuICAgICAgdGhpcy5wb3MrKztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSBlbHNlIGlmIChjID09PSAnPScpIHtcbiAgICBpZiAodGhpcy5leHByZXNzaW9uLmNoYXJBdCh0aGlzLnBvcyArIDEpID09PSAnPScpIHtcbiAgICAgIHRoaXMuY3VycmVudCA9IHRoaXMubmV3VG9rZW4oVE9QLCAnPT0nKTtcbiAgICAgIHRoaXMucG9zKys7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoYyA9PT0gJyEnKSB7XG4gICAgaWYgKHRoaXMuZXhwcmVzc2lvbi5jaGFyQXQodGhpcy5wb3MgKyAxKSA9PT0gJz0nKSB7XG4gICAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLm5ld1Rva2VuKFRPUCwgJyE9Jyk7XG4gICAgICB0aGlzLnBvcysrO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLm5ld1Rva2VuKFRPUCwgYyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB0aGlzLnBvcysrO1xuXG4gIGlmICh0aGlzLmlzT3BlcmF0b3JFbmFibGVkKHRoaXMuY3VycmVudC52YWx1ZSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnBvcyA9IHN0YXJ0UG9zO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxudmFyIG9wdGlvbk5hbWVNYXAgPSB7XG4gICcrJzogJ2FkZCcsXG4gICctJzogJ3N1YnRyYWN0JyxcbiAgJyonOiAnbXVsdGlwbHknLFxuICAnLyc6ICdkaXZpZGUnLFxuICAnJSc6ICdyZW1haW5kZXInLFxuICAnXic6ICdwb3dlcicsXG4gICchJzogJ2ZhY3RvcmlhbCcsXG4gICc8JzogJ2NvbXBhcmlzb24nLFxuICAnPic6ICdjb21wYXJpc29uJyxcbiAgJzw9JzogJ2NvbXBhcmlzb24nLFxuICAnPj0nOiAnY29tcGFyaXNvbicsXG4gICc9PSc6ICdjb21wYXJpc29uJyxcbiAgJyE9JzogJ2NvbXBhcmlzb24nLFxuICAnfHwnOiAnY29uY2F0ZW5hdGUnLFxuICAnYW5kJzogJ2xvZ2ljYWwnLFxuICAnb3InOiAnbG9naWNhbCcsXG4gICdub3QnOiAnbG9naWNhbCcsXG4gICc/JzogJ2NvbmRpdGlvbmFsJyxcbiAgJzonOiAnY29uZGl0aW9uYWwnXG59O1xuXG5mdW5jdGlvbiBnZXRPcHRpb25OYW1lKG9wKSB7XG4gIHJldHVybiBvcHRpb25OYW1lTWFwLmhhc093blByb3BlcnR5KG9wKSA/IG9wdGlvbk5hbWVNYXBbb3BdIDogb3A7XG59XG5cblRva2VuU3RyZWFtLnByb3RvdHlwZS5pc09wZXJhdG9yRW5hYmxlZCA9IGZ1bmN0aW9uIChvcCkge1xuICB2YXIgb3B0aW9uTmFtZSA9IGdldE9wdGlvbk5hbWUob3ApO1xuICB2YXIgb3BlcmF0b3JzID0gdGhpcy5vcHRpb25zLm9wZXJhdG9ycyB8fCB7fTtcblxuICAvLyBpbiBpcyBhIHNwZWNpYWwgY2FzZSBmb3Igbm93IGJlY2F1c2UgaXQncyBkaXNhYmxlZCBieSBkZWZhdWx0XG4gIGlmIChvcHRpb25OYW1lID09PSAnaW4nKSB7XG4gICAgcmV0dXJuICEhb3BlcmF0b3JzWydpbiddO1xuICB9XG5cbiAgcmV0dXJuICEob3B0aW9uTmFtZSBpbiBvcGVyYXRvcnMpIHx8ICEhb3BlcmF0b3JzW29wdGlvbk5hbWVdO1xufTtcblxuVG9rZW5TdHJlYW0ucHJvdG90eXBlLmdldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbGluZSA9IDA7XG4gIHZhciBjb2x1bW47XG4gIHZhciBuZXdsaW5lID0gLTE7XG4gIGRvIHtcbiAgICBsaW5lKys7XG4gICAgY29sdW1uID0gdGhpcy5wb3MgLSBuZXdsaW5lO1xuICAgIG5ld2xpbmUgPSB0aGlzLmV4cHJlc3Npb24uaW5kZXhPZignXFxuJywgbmV3bGluZSArIDEpO1xuICB9IHdoaWxlIChuZXdsaW5lID49IDAgJiYgbmV3bGluZSA8IHRoaXMucG9zKTtcblxuICByZXR1cm4ge1xuICAgIGxpbmU6IGxpbmUsXG4gICAgY29sdW1uOiBjb2x1bW5cbiAgfTtcbn07XG5cblRva2VuU3RyZWFtLnByb3RvdHlwZS5wYXJzZUVycm9yID0gZnVuY3Rpb24gKG1zZykge1xuICB2YXIgY29vcmRzID0gdGhpcy5nZXRDb29yZGluYXRlcygpO1xuICB0aHJvdyBuZXcgRXJyb3IoJ3BhcnNlIGVycm9yIFsnICsgY29vcmRzLmxpbmUgKyAnOicgKyBjb29yZHMuY29sdW1uICsgJ106ICcgKyBtc2cpO1xufTtcblxuZnVuY3Rpb24gUGFyc2VyU3RhdGUocGFyc2VyLCB0b2tlblN0cmVhbSwgb3B0aW9ucykge1xuICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgdGhpcy50b2tlbnMgPSB0b2tlblN0cmVhbTtcbiAgdGhpcy5jdXJyZW50ID0gbnVsbDtcbiAgdGhpcy5uZXh0VG9rZW4gPSBudWxsO1xuICB0aGlzLm5leHQoKTtcbiAgdGhpcy5zYXZlZEN1cnJlbnQgPSBudWxsO1xuICB0aGlzLnNhdmVkTmV4dFRva2VuID0gbnVsbDtcbiAgdGhpcy5hbGxvd01lbWJlckFjY2VzcyA9IG9wdGlvbnMuYWxsb3dNZW1iZXJBY2Nlc3MgIT09IGZhbHNlO1xufVxuXG5QYXJzZXJTdGF0ZS5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5jdXJyZW50ID0gdGhpcy5uZXh0VG9rZW47XG4gIHJldHVybiAodGhpcy5uZXh0VG9rZW4gPSB0aGlzLnRva2Vucy5uZXh0KCkpO1xufTtcblxuUGFyc2VyU3RhdGUucHJvdG90eXBlLnRva2VuTWF0Y2hlcyA9IGZ1bmN0aW9uICh0b2tlbiwgdmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiBjb250YWlucyh2YWx1ZSwgdG9rZW4udmFsdWUpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiB2YWx1ZSh0b2tlbik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRva2VuLnZhbHVlID09PSB2YWx1ZTtcbiAgfVxufTtcblxuUGFyc2VyU3RhdGUucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuc2F2ZWRDdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuICB0aGlzLnNhdmVkTmV4dFRva2VuID0gdGhpcy5uZXh0VG9rZW47XG4gIHRoaXMudG9rZW5zLnNhdmUoKTtcbn07XG5cblBhcnNlclN0YXRlLnByb3RvdHlwZS5yZXN0b3JlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnRva2Vucy5yZXN0b3JlKCk7XG4gIHRoaXMuY3VycmVudCA9IHRoaXMuc2F2ZWRDdXJyZW50O1xuICB0aGlzLm5leHRUb2tlbiA9IHRoaXMuc2F2ZWROZXh0VG9rZW47XG59O1xuXG5QYXJzZXJTdGF0ZS5wcm90b3R5cGUuYWNjZXB0ID0gZnVuY3Rpb24gKHR5cGUsIHZhbHVlKSB7XG4gIGlmICh0aGlzLm5leHRUb2tlbi50eXBlID09PSB0eXBlICYmIHRoaXMudG9rZW5NYXRjaGVzKHRoaXMubmV4dFRva2VuLCB2YWx1ZSkpIHtcbiAgICB0aGlzLm5leHQoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5QYXJzZXJTdGF0ZS5wcm90b3R5cGUuZXhwZWN0ID0gZnVuY3Rpb24gKHR5cGUsIHZhbHVlKSB7XG4gIGlmICghdGhpcy5hY2NlcHQodHlwZSwgdmFsdWUpKSB7XG4gICAgdmFyIGNvb3JkcyA9IHRoaXMudG9rZW5zLmdldENvb3JkaW5hdGVzKCk7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwYXJzZSBlcnJvciBbJyArIGNvb3Jkcy5saW5lICsgJzonICsgY29vcmRzLmNvbHVtbiArICddOiBFeHBlY3RlZCAnICsgKHZhbHVlIHx8IHR5cGUpKTtcbiAgfVxufTtcblxuUGFyc2VyU3RhdGUucHJvdG90eXBlLnBhcnNlQXRvbSA9IGZ1bmN0aW9uIChpbnN0cikge1xuICBpZiAodGhpcy5hY2NlcHQoVE5BTUUpKSB7XG4gICAgaW5zdHIucHVzaChuZXcgSW5zdHJ1Y3Rpb24oSVZBUiwgdGhpcy5jdXJyZW50LnZhbHVlKSk7XG4gIH0gZWxzZSBpZiAodGhpcy5hY2NlcHQoVE5VTUJFUikpIHtcbiAgICBpbnN0ci5wdXNoKG5ldyBJbnN0cnVjdGlvbihJTlVNQkVSLCB0aGlzLmN1cnJlbnQudmFsdWUpKTtcbiAgfSBlbHNlIGlmICh0aGlzLmFjY2VwdChUU1RSSU5HKSkge1xuICAgIGluc3RyLnB1c2gobmV3IEluc3RydWN0aW9uKElOVU1CRVIsIHRoaXMuY3VycmVudC52YWx1ZSkpO1xuICB9IGVsc2UgaWYgKHRoaXMuYWNjZXB0KFRQQVJFTiwgJygnKSkge1xuICAgIHRoaXMucGFyc2VFeHByZXNzaW9uKGluc3RyKTtcbiAgICB0aGlzLmV4cGVjdChUUEFSRU4sICcpJyk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1bmV4cGVjdGVkICcgKyB0aGlzLm5leHRUb2tlbik7XG4gIH1cbn07XG5cblBhcnNlclN0YXRlLnByb3RvdHlwZS5wYXJzZUV4cHJlc3Npb24gPSBmdW5jdGlvbiAoaW5zdHIpIHtcbiAgdGhpcy5wYXJzZUNvbmRpdGlvbmFsRXhwcmVzc2lvbihpbnN0cik7XG59O1xuXG5QYXJzZXJTdGF0ZS5wcm90b3R5cGUucGFyc2VDb25kaXRpb25hbEV4cHJlc3Npb24gPSBmdW5jdGlvbiAoaW5zdHIpIHtcbiAgdGhpcy5wYXJzZU9yRXhwcmVzc2lvbihpbnN0cik7XG4gIHdoaWxlICh0aGlzLmFjY2VwdChUT1AsICc/JykpIHtcbiAgICB2YXIgdHJ1ZUJyYW5jaCA9IFtdO1xuICAgIHZhciBmYWxzZUJyYW5jaCA9IFtdO1xuICAgIHRoaXMucGFyc2VDb25kaXRpb25hbEV4cHJlc3Npb24odHJ1ZUJyYW5jaCk7XG4gICAgdGhpcy5leHBlY3QoVE9QLCAnOicpO1xuICAgIHRoaXMucGFyc2VDb25kaXRpb25hbEV4cHJlc3Npb24oZmFsc2VCcmFuY2gpO1xuICAgIGluc3RyLnB1c2gobmV3IEluc3RydWN0aW9uKElFWFBSLCB0cnVlQnJhbmNoKSk7XG4gICAgaW5zdHIucHVzaChuZXcgSW5zdHJ1Y3Rpb24oSUVYUFIsIGZhbHNlQnJhbmNoKSk7XG4gICAgaW5zdHIucHVzaCh0ZXJuYXJ5SW5zdHJ1Y3Rpb24oJz8nKSk7XG4gIH1cbn07XG5cblBhcnNlclN0YXRlLnByb3RvdHlwZS5wYXJzZU9yRXhwcmVzc2lvbiA9IGZ1bmN0aW9uIChpbnN0cikge1xuICB0aGlzLnBhcnNlQW5kRXhwcmVzc2lvbihpbnN0cik7XG4gIHdoaWxlICh0aGlzLmFjY2VwdChUT1AsICdvcicpKSB7XG4gICAgdGhpcy5wYXJzZUFuZEV4cHJlc3Npb24oaW5zdHIpO1xuICAgIGluc3RyLnB1c2goYmluYXJ5SW5zdHJ1Y3Rpb24oJ29yJykpO1xuICB9XG59O1xuXG5QYXJzZXJTdGF0ZS5wcm90b3R5cGUucGFyc2VBbmRFeHByZXNzaW9uID0gZnVuY3Rpb24gKGluc3RyKSB7XG4gIHRoaXMucGFyc2VDb21wYXJpc29uKGluc3RyKTtcbiAgd2hpbGUgKHRoaXMuYWNjZXB0KFRPUCwgJ2FuZCcpKSB7XG4gICAgdGhpcy5wYXJzZUNvbXBhcmlzb24oaW5zdHIpO1xuICAgIGluc3RyLnB1c2goYmluYXJ5SW5zdHJ1Y3Rpb24oJ2FuZCcpKTtcbiAgfVxufTtcblxudmFyIENPTVBBUklTT05fT1BFUkFUT1JTID0gWyc9PScsICchPScsICc8JywgJzw9JywgJz49JywgJz4nLCAnaW4nXTtcblxuUGFyc2VyU3RhdGUucHJvdG90eXBlLnBhcnNlQ29tcGFyaXNvbiA9IGZ1bmN0aW9uIChpbnN0cikge1xuICB0aGlzLnBhcnNlQWRkU3ViKGluc3RyKTtcbiAgd2hpbGUgKHRoaXMuYWNjZXB0KFRPUCwgQ09NUEFSSVNPTl9PUEVSQVRPUlMpKSB7XG4gICAgdmFyIG9wID0gdGhpcy5jdXJyZW50O1xuICAgIHRoaXMucGFyc2VBZGRTdWIoaW5zdHIpO1xuICAgIGluc3RyLnB1c2goYmluYXJ5SW5zdHJ1Y3Rpb24ob3AudmFsdWUpKTtcbiAgfVxufTtcblxudmFyIEFERF9TVUJfT1BFUkFUT1JTID0gWycrJywgJy0nLCAnfHwnXTtcblxuUGFyc2VyU3RhdGUucHJvdG90eXBlLnBhcnNlQWRkU3ViID0gZnVuY3Rpb24gKGluc3RyKSB7XG4gIHRoaXMucGFyc2VUZXJtKGluc3RyKTtcbiAgd2hpbGUgKHRoaXMuYWNjZXB0KFRPUCwgQUREX1NVQl9PUEVSQVRPUlMpKSB7XG4gICAgdmFyIG9wID0gdGhpcy5jdXJyZW50O1xuICAgIHRoaXMucGFyc2VUZXJtKGluc3RyKTtcbiAgICBpbnN0ci5wdXNoKGJpbmFyeUluc3RydWN0aW9uKG9wLnZhbHVlKSk7XG4gIH1cbn07XG5cbnZhciBURVJNX09QRVJBVE9SUyA9IFsnKicsICcvJywgJyUnXTtcblxuUGFyc2VyU3RhdGUucHJvdG90eXBlLnBhcnNlVGVybSA9IGZ1bmN0aW9uIChpbnN0cikge1xuICB0aGlzLnBhcnNlRmFjdG9yKGluc3RyKTtcbiAgd2hpbGUgKHRoaXMuYWNjZXB0KFRPUCwgVEVSTV9PUEVSQVRPUlMpKSB7XG4gICAgdmFyIG9wID0gdGhpcy5jdXJyZW50O1xuICAgIHRoaXMucGFyc2VGYWN0b3IoaW5zdHIpO1xuICAgIGluc3RyLnB1c2goYmluYXJ5SW5zdHJ1Y3Rpb24ob3AudmFsdWUpKTtcbiAgfVxufTtcblxuUGFyc2VyU3RhdGUucHJvdG90eXBlLnBhcnNlRmFjdG9yID0gZnVuY3Rpb24gKGluc3RyKSB7XG4gIHZhciB1bmFyeU9wcyA9IHRoaXMudG9rZW5zLnVuYXJ5T3BzO1xuICBmdW5jdGlvbiBpc1ByZWZpeE9wZXJhdG9yKHRva2VuKSB7XG4gICAgcmV0dXJuIHRva2VuLnZhbHVlIGluIHVuYXJ5T3BzO1xuICB9XG5cbiAgdGhpcy5zYXZlKCk7XG4gIGlmICh0aGlzLmFjY2VwdChUT1AsIGlzUHJlZml4T3BlcmF0b3IpKSB7XG4gICAgaWYgKCh0aGlzLmN1cnJlbnQudmFsdWUgIT09ICctJyAmJiB0aGlzLmN1cnJlbnQudmFsdWUgIT09ICcrJyAmJiB0aGlzLm5leHRUb2tlbi50eXBlID09PSBUUEFSRU4gJiYgdGhpcy5uZXh0VG9rZW4udmFsdWUgPT09ICcoJykpIHtcbiAgICAgIHRoaXMucmVzdG9yZSgpO1xuICAgICAgdGhpcy5wYXJzZUV4cG9uZW50aWFsKGluc3RyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG9wID0gdGhpcy5jdXJyZW50O1xuICAgICAgdGhpcy5wYXJzZUZhY3RvcihpbnN0cik7XG4gICAgICBpbnN0ci5wdXNoKHVuYXJ5SW5zdHJ1Y3Rpb24ob3AudmFsdWUpKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5wYXJzZUV4cG9uZW50aWFsKGluc3RyKTtcbiAgfVxufTtcblxuUGFyc2VyU3RhdGUucHJvdG90eXBlLnBhcnNlRXhwb25lbnRpYWwgPSBmdW5jdGlvbiAoaW5zdHIpIHtcbiAgdGhpcy5wYXJzZVBvc3RmaXhFeHByZXNzaW9uKGluc3RyKTtcbiAgd2hpbGUgKHRoaXMuYWNjZXB0KFRPUCwgJ14nKSkge1xuICAgIHRoaXMucGFyc2VGYWN0b3IoaW5zdHIpO1xuICAgIGluc3RyLnB1c2goYmluYXJ5SW5zdHJ1Y3Rpb24oJ14nKSk7XG4gIH1cbn07XG5cblBhcnNlclN0YXRlLnByb3RvdHlwZS5wYXJzZVBvc3RmaXhFeHByZXNzaW9uID0gZnVuY3Rpb24gKGluc3RyKSB7XG4gIHRoaXMucGFyc2VGdW5jdGlvbkNhbGwoaW5zdHIpO1xuICB3aGlsZSAodGhpcy5hY2NlcHQoVE9QLCAnIScpKSB7XG4gICAgaW5zdHIucHVzaCh1bmFyeUluc3RydWN0aW9uKCchJykpO1xuICB9XG59O1xuXG5QYXJzZXJTdGF0ZS5wcm90b3R5cGUucGFyc2VGdW5jdGlvbkNhbGwgPSBmdW5jdGlvbiAoaW5zdHIpIHtcbiAgdmFyIHVuYXJ5T3BzID0gdGhpcy50b2tlbnMudW5hcnlPcHM7XG4gIGZ1bmN0aW9uIGlzUHJlZml4T3BlcmF0b3IodG9rZW4pIHtcbiAgICByZXR1cm4gdG9rZW4udmFsdWUgaW4gdW5hcnlPcHM7XG4gIH1cblxuICBpZiAodGhpcy5hY2NlcHQoVE9QLCBpc1ByZWZpeE9wZXJhdG9yKSkge1xuICAgIHZhciBvcCA9IHRoaXMuY3VycmVudDtcbiAgICB0aGlzLnBhcnNlQXRvbShpbnN0cik7XG4gICAgaW5zdHIucHVzaCh1bmFyeUluc3RydWN0aW9uKG9wLnZhbHVlKSk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5wYXJzZU1lbWJlckV4cHJlc3Npb24oaW5zdHIpO1xuICAgIHdoaWxlICh0aGlzLmFjY2VwdChUUEFSRU4sICcoJykpIHtcbiAgICAgIGlmICh0aGlzLmFjY2VwdChUUEFSRU4sICcpJykpIHtcbiAgICAgICAgaW5zdHIucHVzaChuZXcgSW5zdHJ1Y3Rpb24oSUZVTkNBTEwsIDApKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBhcmdDb3VudCA9IHRoaXMucGFyc2VBcmd1bWVudExpc3QoaW5zdHIpO1xuICAgICAgICBpbnN0ci5wdXNoKG5ldyBJbnN0cnVjdGlvbihJRlVOQ0FMTCwgYXJnQ291bnQpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cblBhcnNlclN0YXRlLnByb3RvdHlwZS5wYXJzZUFyZ3VtZW50TGlzdCA9IGZ1bmN0aW9uIChpbnN0cikge1xuICB2YXIgYXJnQ291bnQgPSAwO1xuXG4gIHdoaWxlICghdGhpcy5hY2NlcHQoVFBBUkVOLCAnKScpKSB7XG4gICAgdGhpcy5wYXJzZUV4cHJlc3Npb24oaW5zdHIpO1xuICAgICsrYXJnQ291bnQ7XG4gICAgd2hpbGUgKHRoaXMuYWNjZXB0KFRDT01NQSkpIHtcbiAgICAgIHRoaXMucGFyc2VFeHByZXNzaW9uKGluc3RyKTtcbiAgICAgICsrYXJnQ291bnQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGFyZ0NvdW50O1xufTtcblxuUGFyc2VyU3RhdGUucHJvdG90eXBlLnBhcnNlTWVtYmVyRXhwcmVzc2lvbiA9IGZ1bmN0aW9uIChpbnN0cikge1xuICB0aGlzLnBhcnNlQXRvbShpbnN0cik7XG4gIHdoaWxlICh0aGlzLmFjY2VwdChUT1AsICcuJykpIHtcbiAgICBpZiAoIXRoaXMuYWxsb3dNZW1iZXJBY2Nlc3MpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndW5leHBlY3RlZCBcIi5cIiwgbWVtYmVyIGFjY2VzcyBpcyBub3QgcGVybWl0dGVkJyk7XG4gICAgfVxuXG4gICAgdGhpcy5leHBlY3QoVE5BTUUpO1xuICAgIGluc3RyLnB1c2gobmV3IEluc3RydWN0aW9uKElNRU1CRVIsIHRoaXMuY3VycmVudC52YWx1ZSkpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBhZGQoYSwgYikge1xuICByZXR1cm4gTnVtYmVyKGEpICsgTnVtYmVyKGIpO1xufVxuXG5mdW5jdGlvbiBzdWIoYSwgYikge1xuICByZXR1cm4gYSAtIGI7XG59XG5cbmZ1bmN0aW9uIG11bChhLCBiKSB7XG4gIHJldHVybiBhICogYjtcbn1cblxuZnVuY3Rpb24gZGl2KGEsIGIpIHtcbiAgcmV0dXJuIGEgLyBiO1xufVxuXG5mdW5jdGlvbiBtb2QoYSwgYikge1xuICByZXR1cm4gYSAlIGI7XG59XG5cbmZ1bmN0aW9uIGNvbmNhdChhLCBiKSB7XG4gIHJldHVybiAnJyArIGEgKyBiO1xufVxuXG5mdW5jdGlvbiBlcXVhbChhLCBiKSB7XG4gIHJldHVybiBhID09PSBiO1xufVxuXG5mdW5jdGlvbiBub3RFcXVhbChhLCBiKSB7XG4gIHJldHVybiBhICE9PSBiO1xufVxuXG5mdW5jdGlvbiBncmVhdGVyVGhhbihhLCBiKSB7XG4gIHJldHVybiBhID4gYjtcbn1cblxuZnVuY3Rpb24gbGVzc1RoYW4oYSwgYikge1xuICByZXR1cm4gYSA8IGI7XG59XG5cbmZ1bmN0aW9uIGdyZWF0ZXJUaGFuRXF1YWwoYSwgYikge1xuICByZXR1cm4gYSA+PSBiO1xufVxuXG5mdW5jdGlvbiBsZXNzVGhhbkVxdWFsKGEsIGIpIHtcbiAgcmV0dXJuIGEgPD0gYjtcbn1cblxuZnVuY3Rpb24gYW5kT3BlcmF0b3IoYSwgYikge1xuICByZXR1cm4gQm9vbGVhbihhICYmIGIpO1xufVxuXG5mdW5jdGlvbiBvck9wZXJhdG9yKGEsIGIpIHtcbiAgcmV0dXJuIEJvb2xlYW4oYSB8fCBiKTtcbn1cblxuZnVuY3Rpb24gaW5PcGVyYXRvcihhLCBiKSB7XG4gIHJldHVybiBjb250YWlucyhiLCBhKTtcbn1cblxuZnVuY3Rpb24gc2luaChhKSB7XG4gIHJldHVybiAoKE1hdGguZXhwKGEpIC0gTWF0aC5leHAoLWEpKSAvIDIpO1xufVxuXG5mdW5jdGlvbiBjb3NoKGEpIHtcbiAgcmV0dXJuICgoTWF0aC5leHAoYSkgKyBNYXRoLmV4cCgtYSkpIC8gMik7XG59XG5cbmZ1bmN0aW9uIHRhbmgoYSkge1xuICBpZiAoYSA9PT0gSW5maW5pdHkpIHJldHVybiAxO1xuICBpZiAoYSA9PT0gLUluZmluaXR5KSByZXR1cm4gLTE7XG4gIHJldHVybiAoTWF0aC5leHAoYSkgLSBNYXRoLmV4cCgtYSkpIC8gKE1hdGguZXhwKGEpICsgTWF0aC5leHAoLWEpKTtcbn1cblxuZnVuY3Rpb24gYXNpbmgoYSkge1xuICBpZiAoYSA9PT0gLUluZmluaXR5KSByZXR1cm4gYTtcbiAgcmV0dXJuIE1hdGgubG9nKGEgKyBNYXRoLnNxcnQoKGEgKiBhKSArIDEpKTtcbn1cblxuZnVuY3Rpb24gYWNvc2goYSkge1xuICByZXR1cm4gTWF0aC5sb2coYSArIE1hdGguc3FydCgoYSAqIGEpIC0gMSkpO1xufVxuXG5mdW5jdGlvbiBhdGFuaChhKSB7XG4gIHJldHVybiAoTWF0aC5sb2coKDEgKyBhKSAvICgxIC0gYSkpIC8gMik7XG59XG5cbmZ1bmN0aW9uIGxvZzEwKGEpIHtcbiAgcmV0dXJuIE1hdGgubG9nKGEpICogTWF0aC5MT0cxMEU7XG59XG5cbmZ1bmN0aW9uIG5lZyhhKSB7XG4gIHJldHVybiAtYTtcbn1cblxuZnVuY3Rpb24gbm90KGEpIHtcbiAgcmV0dXJuICFhO1xufVxuXG5mdW5jdGlvbiB0cnVuYyhhKSB7XG4gIHJldHVybiBhIDwgMCA/IE1hdGguY2VpbChhKSA6IE1hdGguZmxvb3IoYSk7XG59XG5cbmZ1bmN0aW9uIHJhbmRvbShhKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpICogKGEgfHwgMSk7XG59XG5cbmZ1bmN0aW9uIGZhY3RvcmlhbChhKSB7IC8vIGEhXG4gIHJldHVybiBnYW1tYShhICsgMSk7XG59XG5cbmZ1bmN0aW9uIGlzSW50ZWdlcih2YWx1ZSkge1xuICByZXR1cm4gaXNGaW5pdGUodmFsdWUpICYmICh2YWx1ZSA9PT0gTWF0aC5yb3VuZCh2YWx1ZSkpO1xufVxuXG52YXIgR0FNTUFfRyA9IDQuNzQyMTg3NTtcbnZhciBHQU1NQV9QID0gW1xuICAwLjk5OTk5OTk5OTk5OTk5NzA5MTgyLFxuICA1Ny4xNTYyMzU2NjU4NjI5MjM1MTcsIC01OS41OTc5NjAzNTU0NzU0OTEyNDgsXG4gIDE0LjEzNjA5Nzk3NDc0MTc0NzE3NCwgLTAuNDkxOTEzODE2MDk3NjIwMTk5NzgsXG4gIDAuMzM5OTQ2NDk5ODQ4MTE4ODg2OTllLTQsXG4gIDAuNDY1MjM2Mjg5MjcwNDg1NzU2NjVlLTQsIC0wLjk4Mzc0NDc1MzA0ODc5NTY0Njc3ZS00LFxuICAwLjE1ODA4ODcwMzIyNDkxMjQ4ODg0ZS0zLCAtMC4yMTAyNjQ0NDE3MjQxMDQ4ODMxOWUtMyxcbiAgMC4yMTc0Mzk2MTgxMTUyMTI2NDMyMGUtMywgLTAuMTY0MzE4MTA2NTM2NzYzODkwMjJlLTMsXG4gIDAuODQ0MTgyMjM5ODM4NTI3NDMyOTNlLTQsIC0wLjI2MTkwODM4NDAxNTgxNDA4NjcwZS00LFxuICAwLjM2ODk5MTgyNjU5NTMxNjIyNzA0ZS01XG5dO1xuXG4vLyBHYW1tYSBmdW5jdGlvbiBmcm9tIG1hdGguanNcbmZ1bmN0aW9uIGdhbW1hKG4pIHtcbiAgdmFyIHQsIHg7XG5cbiAgaWYgKGlzSW50ZWdlcihuKSkge1xuICAgIGlmIChuIDw9IDApIHtcbiAgICAgIHJldHVybiBpc0Zpbml0ZShuKSA/IEluZmluaXR5IDogTmFOO1xuICAgIH1cblxuICAgIGlmIChuID4gMTcxKSB7XG4gICAgICByZXR1cm4gSW5maW5pdHk7IC8vIFdpbGwgb3ZlcmZsb3dcbiAgICB9XG5cbiAgICB2YXIgdmFsdWUgPSBuIC0gMjtcbiAgICB2YXIgcmVzID0gbiAtIDE7XG4gICAgd2hpbGUgKHZhbHVlID4gMSkge1xuICAgICAgcmVzICo9IHZhbHVlO1xuICAgICAgdmFsdWUtLTtcbiAgICB9XG5cbiAgICBpZiAocmVzID09PSAwKSB7XG4gICAgICByZXMgPSAxOyAvLyAwISBpcyBwZXIgZGVmaW5pdGlvbiAxXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIGlmIChuIDwgMC41KSB7XG4gICAgcmV0dXJuIE1hdGguUEkgLyAoTWF0aC5zaW4oTWF0aC5QSSAqIG4pICogZ2FtbWEoMSAtIG4pKTtcbiAgfVxuXG4gIGlmIChuID49IDE3MS4zNSkge1xuICAgIHJldHVybiBJbmZpbml0eTsgLy8gd2lsbCBvdmVyZmxvd1xuICB9XG5cbiAgaWYgKG4gPiA4NS4wKSB7IC8vIEV4dGVuZGVkIFN0aXJsaW5nIEFwcHJveFxuICAgIHZhciB0d29OID0gbiAqIG47XG4gICAgdmFyIHRocmVlTiA9IHR3b04gKiBuO1xuICAgIHZhciBmb3VyTiA9IHRocmVlTiAqIG47XG4gICAgdmFyIGZpdmVOID0gZm91ck4gKiBuO1xuICAgIHJldHVybiBNYXRoLnNxcnQoMiAqIE1hdGguUEkgLyBuKSAqIE1hdGgucG93KChuIC8gTWF0aC5FKSwgbikgKlxuICAgICAgKDEgKyAoMSAvICgxMiAqIG4pKSArICgxIC8gKDI4OCAqIHR3b04pKSAtICgxMzkgLyAoNTE4NDAgKiB0aHJlZU4pKSAtXG4gICAgICAoNTcxIC8gKDI0ODgzMjAgKiBmb3VyTikpICsgKDE2Mzg3OSAvICgyMDkwMTg4ODAgKiBmaXZlTikpICtcbiAgICAgICg1MjQ2ODE5IC8gKDc1MjQ2Nzk2ODAwICogZml2ZU4gKiBuKSkpO1xuICB9XG5cbiAgLS1uO1xuICB4ID0gR0FNTUFfUFswXTtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBHQU1NQV9QLmxlbmd0aDsgKytpKSB7XG4gICAgeCArPSBHQU1NQV9QW2ldIC8gKG4gKyBpKTtcbiAgfVxuXG4gIHQgPSBuICsgR0FNTUFfRyArIDAuNTtcbiAgcmV0dXJuIE1hdGguc3FydCgyICogTWF0aC5QSSkgKiBNYXRoLnBvdyh0LCBuICsgMC41KSAqIE1hdGguZXhwKC10KSAqIHg7XG59XG5cbmZ1bmN0aW9uIHN0cmluZ0xlbmd0aChzKSB7XG4gIHJldHVybiBTdHJpbmcocykubGVuZ3RoO1xufVxuXG5mdW5jdGlvbiBoeXBvdCgpIHtcbiAgdmFyIHN1bSA9IDA7XG4gIHZhciBsYXJnID0gMDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgYXJnID0gTWF0aC5hYnMoYXJndW1lbnRzW2ldKTtcbiAgICB2YXIgZGl2O1xuICAgIGlmIChsYXJnIDwgYXJnKSB7XG4gICAgICBkaXYgPSBsYXJnIC8gYXJnO1xuICAgICAgc3VtID0gKHN1bSAqIGRpdiAqIGRpdikgKyAxO1xuICAgICAgbGFyZyA9IGFyZztcbiAgICB9IGVsc2UgaWYgKGFyZyA+IDApIHtcbiAgICAgIGRpdiA9IGFyZyAvIGxhcmc7XG4gICAgICBzdW0gKz0gZGl2ICogZGl2O1xuICAgIH0gZWxzZSB7XG4gICAgICBzdW0gKz0gYXJnO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbGFyZyA9PT0gSW5maW5pdHkgPyBJbmZpbml0eSA6IGxhcmcgKiBNYXRoLnNxcnQoc3VtKTtcbn1cblxuZnVuY3Rpb24gY29uZGl0aW9uKGNvbmQsIHllcCwgbm9wZSkge1xuICByZXR1cm4gY29uZCA/IHllcCA6IG5vcGU7XG59XG5cbmZ1bmN0aW9uIFBhcnNlcihvcHRpb25zKSB7XG4gIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHRoaXMudW5hcnlPcHMgPSB7XG4gICAgc2luOiBNYXRoLnNpbixcbiAgICBjb3M6IE1hdGguY29zLFxuICAgIHRhbjogTWF0aC50YW4sXG4gICAgYXNpbjogTWF0aC5hc2luLFxuICAgIGFjb3M6IE1hdGguYWNvcyxcbiAgICBhdGFuOiBNYXRoLmF0YW4sXG4gICAgc2luaDogTWF0aC5zaW5oIHx8IHNpbmgsXG4gICAgY29zaDogTWF0aC5jb3NoIHx8IGNvc2gsXG4gICAgdGFuaDogTWF0aC50YW5oIHx8IHRhbmgsXG4gICAgYXNpbmg6IE1hdGguYXNpbmggfHwgYXNpbmgsXG4gICAgYWNvc2g6IE1hdGguYWNvc2ggfHwgYWNvc2gsXG4gICAgYXRhbmg6IE1hdGguYXRhbmggfHwgYXRhbmgsXG4gICAgc3FydDogTWF0aC5zcXJ0LFxuICAgIGxvZzogTWF0aC5sb2csXG4gICAgbG46IE1hdGgubG9nLFxuICAgIGxnOiBNYXRoLmxvZzEwIHx8IGxvZzEwLFxuICAgIGxvZzEwOiBNYXRoLmxvZzEwIHx8IGxvZzEwLFxuICAgIGFiczogTWF0aC5hYnMsXG4gICAgY2VpbDogTWF0aC5jZWlsLFxuICAgIGZsb29yOiBNYXRoLmZsb29yLFxuICAgIHJvdW5kOiBNYXRoLnJvdW5kLFxuICAgIHRydW5jOiBNYXRoLnRydW5jIHx8IHRydW5jLFxuICAgICctJzogbmVnLFxuICAgICcrJzogTnVtYmVyLFxuICAgIGV4cDogTWF0aC5leHAsXG4gICAgbm90OiBub3QsXG4gICAgbGVuZ3RoOiBzdHJpbmdMZW5ndGgsXG4gICAgJyEnOiBmYWN0b3JpYWxcbiAgfTtcblxuICB0aGlzLmJpbmFyeU9wcyA9IHtcbiAgICAnKyc6IGFkZCxcbiAgICAnLSc6IHN1YixcbiAgICAnKic6IG11bCxcbiAgICAnLyc6IGRpdixcbiAgICAnJSc6IG1vZCxcbiAgICAnXic6IE1hdGgucG93LFxuICAgICd8fCc6IGNvbmNhdCxcbiAgICAnPT0nOiBlcXVhbCxcbiAgICAnIT0nOiBub3RFcXVhbCxcbiAgICAnPic6IGdyZWF0ZXJUaGFuLFxuICAgICc8JzogbGVzc1RoYW4sXG4gICAgJz49JzogZ3JlYXRlclRoYW5FcXVhbCxcbiAgICAnPD0nOiBsZXNzVGhhbkVxdWFsLFxuICAgIGFuZDogYW5kT3BlcmF0b3IsXG4gICAgb3I6IG9yT3BlcmF0b3IsXG4gICAgJ2luJzogaW5PcGVyYXRvclxuICB9O1xuXG4gIHRoaXMudGVybmFyeU9wcyA9IHtcbiAgICAnPyc6IGNvbmRpdGlvblxuICB9O1xuXG4gIHRoaXMuZnVuY3Rpb25zID0ge1xuICAgIHJhbmRvbTogcmFuZG9tLFxuICAgIGZhYzogZmFjdG9yaWFsLFxuICAgIG1pbjogTWF0aC5taW4sXG4gICAgbWF4OiBNYXRoLm1heCxcbiAgICBoeXBvdDogTWF0aC5oeXBvdCB8fCBoeXBvdCxcbiAgICBweXQ6IE1hdGguaHlwb3QgfHwgaHlwb3QsIC8vIGJhY2t3YXJkIGNvbXBhdFxuICAgIHBvdzogTWF0aC5wb3csXG4gICAgYXRhbjI6IE1hdGguYXRhbjIsXG4gICAgJ2lmJzogY29uZGl0aW9uLFxuICAgIGdhbW1hOiBnYW1tYVxuICB9O1xuXG4gIHRoaXMuY29uc3RzID0ge1xuICAgIEU6IE1hdGguRSxcbiAgICBQSTogTWF0aC5QSSxcbiAgICAndHJ1ZSc6IHRydWUsXG4gICAgJ2ZhbHNlJzogZmFsc2VcbiAgfTtcbn1cblxuUGFyc2VyLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChleHByKSB7XG4gIHZhciBpbnN0ciA9IFtdO1xuICB2YXIgcGFyc2VyU3RhdGUgPSBuZXcgUGFyc2VyU3RhdGUoXG4gICAgdGhpcyxcbiAgICBuZXcgVG9rZW5TdHJlYW0odGhpcywgZXhwciksXG4gICAgeyBhbGxvd01lbWJlckFjY2VzczogdGhpcy5vcHRpb25zLmFsbG93TWVtYmVyQWNjZXNzIH1cbiAgKTtcblxuICBwYXJzZXJTdGF0ZS5wYXJzZUV4cHJlc3Npb24oaW5zdHIpO1xuICBwYXJzZXJTdGF0ZS5leHBlY3QoVEVPRiwgJ0VPRicpO1xuXG4gIHJldHVybiBuZXcgRXhwcmVzc2lvbihpbnN0ciwgdGhpcyk7XG59O1xuXG5QYXJzZXIucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24gKGV4cHIsIHZhcmlhYmxlcykge1xuICByZXR1cm4gdGhpcy5wYXJzZShleHByKS5ldmFsdWF0ZSh2YXJpYWJsZXMpO1xufTtcblxudmFyIHNoYXJlZFBhcnNlciA9IG5ldyBQYXJzZXIoKTtcblxuUGFyc2VyLnBhcnNlID0gZnVuY3Rpb24gKGV4cHIpIHtcbiAgcmV0dXJuIHNoYXJlZFBhcnNlci5wYXJzZShleHByKTtcbn07XG5cblBhcnNlci5ldmFsdWF0ZSA9IGZ1bmN0aW9uIChleHByLCB2YXJpYWJsZXMpIHtcbiAgcmV0dXJuIHNoYXJlZFBhcnNlci5wYXJzZShleHByKS5ldmFsdWF0ZSh2YXJpYWJsZXMpO1xufTtcblxuLyohXG4gQmFzZWQgb24gbmRlZi5wYXJzZXIsIGJ5IFJhcGhhZWwgR3JhZihyQHVuZGVmaW5lZC5jaClcbiBodHRwOi8vd3d3LnVuZGVmaW5lZC5jaC9tcGFyc2VyL2luZGV4Lmh0bWxcblxuIFBvcnRlZCB0byBKYXZhU2NyaXB0IGFuZCBtb2RpZmllZCBieSBNYXR0aGV3IENydW1sZXkgKGVtYWlsQG1hdHRoZXdjcnVtbGV5LmNvbSwgaHR0cDovL3NpbGVudG1hdHQuY29tLylcblxuIFlvdSBhcmUgZnJlZSB0byB1c2UgYW5kIG1vZGlmeSB0aGlzIGNvZGUgaW4gYW55d2F5IHlvdSBmaW5kIHVzZWZ1bC4gUGxlYXNlIGxlYXZlIHRoaXMgY29tbWVudCBpbiB0aGUgY29kZVxuIHRvIGFja25vd2xlZGdlIGl0cyBvcmlnaW5hbCBzb3VyY2UuIElmIHlvdSBmZWVsIGxpa2UgaXQsIEkgZW5qb3kgaGVhcmluZyBhYm91dCBwcm9qZWN0cyB0aGF0IHVzZSBteSBjb2RlLFxuIGJ1dCBkb24ndCBmZWVsIGxpa2UgeW91IGhhdmUgdG8gbGV0IG1lIGtub3cgb3IgYXNrIHBlcm1pc3Npb24uXG4qL1xuXG52YXIgaW5kZXggPSB7XG4gIFBhcnNlcjogUGFyc2VyLFxuICBFeHByZXNzaW9uOiBFeHByZXNzaW9uXG59O1xuXG5yZXR1cm4gaW5kZXg7XG5cbn0pKSk7XG4iLCIvKiBGaWxlU2F2ZXIuanNcbiAqIEEgc2F2ZUFzKCkgRmlsZVNhdmVyIGltcGxlbWVudGF0aW9uLlxuICogMS4zLjJcbiAqIDIwMTYtMDYtMTYgMTg6MjU6MTlcbiAqXG4gKiBCeSBFbGkgR3JleSwgaHR0cDovL2VsaWdyZXkuY29tXG4gKiBMaWNlbnNlOiBNSVRcbiAqICAgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGlncmV5L0ZpbGVTYXZlci5qcy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kXG4gKi9cblxuLypnbG9iYWwgc2VsZiAqL1xuLypqc2xpbnQgYml0d2lzZTogdHJ1ZSwgaW5kZW50OiA0LCBsYXhicmVhazogdHJ1ZSwgbGF4Y29tbWE6IHRydWUsIHNtYXJ0dGFiczogdHJ1ZSwgcGx1c3BsdXM6IHRydWUgKi9cblxuLyohIEBzb3VyY2UgaHR0cDovL3B1cmwuZWxpZ3JleS5jb20vZ2l0aHViL0ZpbGVTYXZlci5qcy9ibG9iL21hc3Rlci9GaWxlU2F2ZXIuanMgKi9cblxudmFyIHNhdmVBcyA9IHNhdmVBcyB8fCAoZnVuY3Rpb24odmlldykge1xuXHRcInVzZSBzdHJpY3RcIjtcblx0Ly8gSUUgPDEwIGlzIGV4cGxpY2l0bHkgdW5zdXBwb3J0ZWRcblx0aWYgKHR5cGVvZiB2aWV3ID09PSBcInVuZGVmaW5lZFwiIHx8IHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiYgL01TSUUgWzEtOV1cXC4vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyXG5cdFx0ICBkb2MgPSB2aWV3LmRvY3VtZW50XG5cdFx0ICAvLyBvbmx5IGdldCBVUkwgd2hlbiBuZWNlc3NhcnkgaW4gY2FzZSBCbG9iLmpzIGhhc24ndCBvdmVycmlkZGVuIGl0IHlldFxuXHRcdCwgZ2V0X1VSTCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHZpZXcuVVJMIHx8IHZpZXcud2Via2l0VVJMIHx8IHZpZXc7XG5cdFx0fVxuXHRcdCwgc2F2ZV9saW5rID0gZG9jLmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIiwgXCJhXCIpXG5cdFx0LCBjYW5fdXNlX3NhdmVfbGluayA9IFwiZG93bmxvYWRcIiBpbiBzYXZlX2xpbmtcblx0XHQsIGNsaWNrID0gZnVuY3Rpb24obm9kZSkge1xuXHRcdFx0dmFyIGV2ZW50ID0gbmV3IE1vdXNlRXZlbnQoXCJjbGlja1wiKTtcblx0XHRcdG5vZGUuZGlzcGF0Y2hFdmVudChldmVudCk7XG5cdFx0fVxuXHRcdCwgaXNfc2FmYXJpID0gL2NvbnN0cnVjdG9yL2kudGVzdCh2aWV3LkhUTUxFbGVtZW50KSB8fCB2aWV3LnNhZmFyaVxuXHRcdCwgaXNfY2hyb21lX2lvcyA9L0NyaU9TXFwvW1xcZF0rLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXG5cdFx0LCB0aHJvd19vdXRzaWRlID0gZnVuY3Rpb24oZXgpIHtcblx0XHRcdCh2aWV3LnNldEltbWVkaWF0ZSB8fCB2aWV3LnNldFRpbWVvdXQpKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR0aHJvdyBleDtcblx0XHRcdH0sIDApO1xuXHRcdH1cblx0XHQsIGZvcmNlX3NhdmVhYmxlX3R5cGUgPSBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiXG5cdFx0Ly8gdGhlIEJsb2IgQVBJIGlzIGZ1bmRhbWVudGFsbHkgYnJva2VuIGFzIHRoZXJlIGlzIG5vIFwiZG93bmxvYWRmaW5pc2hlZFwiIGV2ZW50IHRvIHN1YnNjcmliZSB0b1xuXHRcdCwgYXJiaXRyYXJ5X3Jldm9rZV90aW1lb3V0ID0gMTAwMCAqIDQwIC8vIGluIG1zXG5cdFx0LCByZXZva2UgPSBmdW5jdGlvbihmaWxlKSB7XG5cdFx0XHR2YXIgcmV2b2tlciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIGZpbGUgPT09IFwic3RyaW5nXCIpIHsgLy8gZmlsZSBpcyBhbiBvYmplY3QgVVJMXG5cdFx0XHRcdFx0Z2V0X1VSTCgpLnJldm9rZU9iamVjdFVSTChmaWxlKTtcblx0XHRcdFx0fSBlbHNlIHsgLy8gZmlsZSBpcyBhIEZpbGVcblx0XHRcdFx0XHRmaWxlLnJlbW92ZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0c2V0VGltZW91dChyZXZva2VyLCBhcmJpdHJhcnlfcmV2b2tlX3RpbWVvdXQpO1xuXHRcdH1cblx0XHQsIGRpc3BhdGNoID0gZnVuY3Rpb24oZmlsZXNhdmVyLCBldmVudF90eXBlcywgZXZlbnQpIHtcblx0XHRcdGV2ZW50X3R5cGVzID0gW10uY29uY2F0KGV2ZW50X3R5cGVzKTtcblx0XHRcdHZhciBpID0gZXZlbnRfdHlwZXMubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKGktLSkge1xuXHRcdFx0XHR2YXIgbGlzdGVuZXIgPSBmaWxlc2F2ZXJbXCJvblwiICsgZXZlbnRfdHlwZXNbaV1dO1xuXHRcdFx0XHRpZiAodHlwZW9mIGxpc3RlbmVyID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0bGlzdGVuZXIuY2FsbChmaWxlc2F2ZXIsIGV2ZW50IHx8IGZpbGVzYXZlcik7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXgpIHtcblx0XHRcdFx0XHRcdHRocm93X291dHNpZGUoZXgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHQsIGF1dG9fYm9tID0gZnVuY3Rpb24oYmxvYikge1xuXHRcdFx0Ly8gcHJlcGVuZCBCT00gZm9yIFVURi04IFhNTCBhbmQgdGV4dC8qIHR5cGVzIChpbmNsdWRpbmcgSFRNTClcblx0XHRcdC8vIG5vdGU6IHlvdXIgYnJvd3NlciB3aWxsIGF1dG9tYXRpY2FsbHkgY29udmVydCBVVEYtMTYgVStGRUZGIHRvIEVGIEJCIEJGXG5cdFx0XHRpZiAoL15cXHMqKD86dGV4dFxcL1xcUyp8YXBwbGljYXRpb25cXC94bWx8XFxTKlxcL1xcUypcXCt4bWwpXFxzKjsuKmNoYXJzZXRcXHMqPVxccyp1dGYtOC9pLnRlc3QoYmxvYi50eXBlKSkge1xuXHRcdFx0XHRyZXR1cm4gbmV3IEJsb2IoW1N0cmluZy5mcm9tQ2hhckNvZGUoMHhGRUZGKSwgYmxvYl0sIHt0eXBlOiBibG9iLnR5cGV9KTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBibG9iO1xuXHRcdH1cblx0XHQsIEZpbGVTYXZlciA9IGZ1bmN0aW9uKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7XG5cdFx0XHRpZiAoIW5vX2F1dG9fYm9tKSB7XG5cdFx0XHRcdGJsb2IgPSBhdXRvX2JvbShibG9iKTtcblx0XHRcdH1cblx0XHRcdC8vIEZpcnN0IHRyeSBhLmRvd25sb2FkLCB0aGVuIHdlYiBmaWxlc3lzdGVtLCB0aGVuIG9iamVjdCBVUkxzXG5cdFx0XHR2YXJcblx0XHRcdFx0ICBmaWxlc2F2ZXIgPSB0aGlzXG5cdFx0XHRcdCwgdHlwZSA9IGJsb2IudHlwZVxuXHRcdFx0XHQsIGZvcmNlID0gdHlwZSA9PT0gZm9yY2Vfc2F2ZWFibGVfdHlwZVxuXHRcdFx0XHQsIG9iamVjdF91cmxcblx0XHRcdFx0LCBkaXNwYXRjaF9hbGwgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRkaXNwYXRjaChmaWxlc2F2ZXIsIFwid3JpdGVzdGFydCBwcm9ncmVzcyB3cml0ZSB3cml0ZWVuZFwiLnNwbGl0KFwiIFwiKSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gb24gYW55IGZpbGVzeXMgZXJyb3JzIHJldmVydCB0byBzYXZpbmcgd2l0aCBvYmplY3QgVVJMc1xuXHRcdFx0XHQsIGZzX2Vycm9yID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKChpc19jaHJvbWVfaW9zIHx8IChmb3JjZSAmJiBpc19zYWZhcmkpKSAmJiB2aWV3LkZpbGVSZWFkZXIpIHtcblx0XHRcdFx0XHRcdC8vIFNhZmFyaSBkb2Vzbid0IGFsbG93IGRvd25sb2FkaW5nIG9mIGJsb2IgdXJsc1xuXHRcdFx0XHRcdFx0dmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cdFx0XHRcdFx0XHRyZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHZhciB1cmwgPSBpc19jaHJvbWVfaW9zID8gcmVhZGVyLnJlc3VsdCA6IHJlYWRlci5yZXN1bHQucmVwbGFjZSgvXmRhdGE6W147XSo7LywgJ2RhdGE6YXR0YWNobWVudC9maWxlOycpO1xuXHRcdFx0XHRcdFx0XHR2YXIgcG9wdXAgPSB2aWV3Lm9wZW4odXJsLCAnX2JsYW5rJyk7XG5cdFx0XHRcdFx0XHRcdGlmKCFwb3B1cCkgdmlldy5sb2NhdGlvbi5ocmVmID0gdXJsO1xuXHRcdFx0XHRcdFx0XHR1cmw9dW5kZWZpbmVkOyAvLyByZWxlYXNlIHJlZmVyZW5jZSBiZWZvcmUgZGlzcGF0Y2hpbmdcblx0XHRcdFx0XHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTtcblx0XHRcdFx0XHRcdFx0ZGlzcGF0Y2hfYWxsKCk7XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0cmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7XG5cdFx0XHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5JTklUO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyBkb24ndCBjcmVhdGUgbW9yZSBvYmplY3QgVVJMcyB0aGFuIG5lZWRlZFxuXHRcdFx0XHRcdGlmICghb2JqZWN0X3VybCkge1xuXHRcdFx0XHRcdFx0b2JqZWN0X3VybCA9IGdldF9VUkwoKS5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChmb3JjZSkge1xuXHRcdFx0XHRcdFx0dmlldy5sb2NhdGlvbi5ocmVmID0gb2JqZWN0X3VybDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dmFyIG9wZW5lZCA9IHZpZXcub3BlbihvYmplY3RfdXJsLCBcIl9ibGFua1wiKTtcblx0XHRcdFx0XHRcdGlmICghb3BlbmVkKSB7XG5cdFx0XHRcdFx0XHRcdC8vIEFwcGxlIGRvZXMgbm90IGFsbG93IHdpbmRvdy5vcGVuLCBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2xpYnJhcnkvc2FmYXJpL2RvY3VtZW50YXRpb24vVG9vbHMvQ29uY2VwdHVhbC9TYWZhcmlFeHRlbnNpb25HdWlkZS9Xb3JraW5nd2l0aFdpbmRvd3NhbmRUYWJzL1dvcmtpbmd3aXRoV2luZG93c2FuZFRhYnMuaHRtbFxuXHRcdFx0XHRcdFx0XHR2aWV3LmxvY2F0aW9uLmhyZWYgPSBvYmplY3RfdXJsO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FO1xuXHRcdFx0XHRcdGRpc3BhdGNoX2FsbCgpO1xuXHRcdFx0XHRcdHJldm9rZShvYmplY3RfdXJsKTtcblx0XHRcdFx0fVxuXHRcdFx0O1xuXHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuSU5JVDtcblxuXHRcdFx0aWYgKGNhbl91c2Vfc2F2ZV9saW5rKSB7XG5cdFx0XHRcdG9iamVjdF91cmwgPSBnZXRfVVJMKCkuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHNhdmVfbGluay5ocmVmID0gb2JqZWN0X3VybDtcblx0XHRcdFx0XHRzYXZlX2xpbmsuZG93bmxvYWQgPSBuYW1lO1xuXHRcdFx0XHRcdGNsaWNrKHNhdmVfbGluayk7XG5cdFx0XHRcdFx0ZGlzcGF0Y2hfYWxsKCk7XG5cdFx0XHRcdFx0cmV2b2tlKG9iamVjdF91cmwpO1xuXHRcdFx0XHRcdGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLkRPTkU7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGZzX2Vycm9yKCk7XG5cdFx0fVxuXHRcdCwgRlNfcHJvdG8gPSBGaWxlU2F2ZXIucHJvdG90eXBlXG5cdFx0LCBzYXZlQXMgPSBmdW5jdGlvbihibG9iLCBuYW1lLCBub19hdXRvX2JvbSkge1xuXHRcdFx0cmV0dXJuIG5ldyBGaWxlU2F2ZXIoYmxvYiwgbmFtZSB8fCBibG9iLm5hbWUgfHwgXCJkb3dubG9hZFwiLCBub19hdXRvX2JvbSk7XG5cdFx0fVxuXHQ7XG5cdC8vIElFIDEwKyAobmF0aXZlIHNhdmVBcylcblx0aWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiYgbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IpIHtcblx0XHRyZXR1cm4gZnVuY3Rpb24oYmxvYiwgbmFtZSwgbm9fYXV0b19ib20pIHtcblx0XHRcdG5hbWUgPSBuYW1lIHx8IGJsb2IubmFtZSB8fCBcImRvd25sb2FkXCI7XG5cblx0XHRcdGlmICghbm9fYXV0b19ib20pIHtcblx0XHRcdFx0YmxvYiA9IGF1dG9fYm9tKGJsb2IpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGJsb2IsIG5hbWUpO1xuXHRcdH07XG5cdH1cblxuXHRGU19wcm90by5hYm9ydCA9IGZ1bmN0aW9uKCl7fTtcblx0RlNfcHJvdG8ucmVhZHlTdGF0ZSA9IEZTX3Byb3RvLklOSVQgPSAwO1xuXHRGU19wcm90by5XUklUSU5HID0gMTtcblx0RlNfcHJvdG8uRE9ORSA9IDI7XG5cblx0RlNfcHJvdG8uZXJyb3IgPVxuXHRGU19wcm90by5vbndyaXRlc3RhcnQgPVxuXHRGU19wcm90by5vbnByb2dyZXNzID1cblx0RlNfcHJvdG8ub253cml0ZSA9XG5cdEZTX3Byb3RvLm9uYWJvcnQgPVxuXHRGU19wcm90by5vbmVycm9yID1cblx0RlNfcHJvdG8ub253cml0ZWVuZCA9XG5cdFx0bnVsbDtcblxuXHRyZXR1cm4gc2F2ZUFzO1xufShcblx0ICAgdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZlxuXHR8fCB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvd1xuXHR8fCB0aGlzLmNvbnRlbnRcbikpO1xuLy8gYHNlbGZgIGlzIHVuZGVmaW5lZCBpbiBGaXJlZm94IGZvciBBbmRyb2lkIGNvbnRlbnQgc2NyaXB0IGNvbnRleHRcbi8vIHdoaWxlIGB0aGlzYCBpcyBuc0lDb250ZW50RnJhbWVNZXNzYWdlTWFuYWdlclxuLy8gd2l0aCBhbiBhdHRyaWJ1dGUgYGNvbnRlbnRgIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIHdpbmRvd1xuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUuZXhwb3J0cykge1xuICBtb2R1bGUuZXhwb3J0cy5zYXZlQXMgPSBzYXZlQXM7XG59IGVsc2UgaWYgKCh0eXBlb2YgZGVmaW5lICE9PSBcInVuZGVmaW5lZFwiICYmIGRlZmluZSAhPT0gbnVsbCkgJiYgKGRlZmluZS5hbWQgIT09IG51bGwpKSB7XG4gIGRlZmluZShcIkZpbGVTYXZlci5qc1wiLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2F2ZUFzO1xuICB9KTtcbn1cbiIsIi8vIENvcHlyaWdodCAoYykgMjAxMyBQaWVyb3h5IDxwaWVyb3h5QHBpZXJveHkubmV0PlxuLy8gVGhpcyB3b3JrIGlzIGZyZWUuIFlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkgaXRcbi8vIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgV1RGUEwsIFZlcnNpb24gMlxuLy8gRm9yIG1vcmUgaW5mb3JtYXRpb24gc2VlIExJQ0VOU0UudHh0IG9yIGh0dHA6Ly93d3cud3RmcGwubmV0L1xuLy9cbi8vIEZvciBtb3JlIGluZm9ybWF0aW9uLCB0aGUgaG9tZSBwYWdlOlxuLy8gaHR0cDovL3BpZXJveHkubmV0L2Jsb2cvcGFnZXMvbHotc3RyaW5nL3Rlc3RpbmcuaHRtbFxuLy9cbi8vIExaLWJhc2VkIGNvbXByZXNzaW9uIGFsZ29yaXRobSwgdmVyc2lvbiAxLjQuNFxudmFyIExaU3RyaW5nID0gKGZ1bmN0aW9uKCkge1xuXG4vLyBwcml2YXRlIHByb3BlcnR5XG52YXIgZiA9IFN0cmluZy5mcm9tQ2hhckNvZGU7XG52YXIga2V5U3RyQmFzZTY0ID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVwiO1xudmFyIGtleVN0clVyaVNhZmUgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky0kXCI7XG52YXIgYmFzZVJldmVyc2VEaWMgPSB7fTtcblxuZnVuY3Rpb24gZ2V0QmFzZVZhbHVlKGFscGhhYmV0LCBjaGFyYWN0ZXIpIHtcbiAgaWYgKCFiYXNlUmV2ZXJzZURpY1thbHBoYWJldF0pIHtcbiAgICBiYXNlUmV2ZXJzZURpY1thbHBoYWJldF0gPSB7fTtcbiAgICBmb3IgKHZhciBpPTAgOyBpPGFscGhhYmV0Lmxlbmd0aCA7IGkrKykge1xuICAgICAgYmFzZVJldmVyc2VEaWNbYWxwaGFiZXRdW2FscGhhYmV0LmNoYXJBdChpKV0gPSBpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYmFzZVJldmVyc2VEaWNbYWxwaGFiZXRdW2NoYXJhY3Rlcl07XG59XG5cbnZhciBMWlN0cmluZyA9IHtcbiAgY29tcHJlc3NUb0Jhc2U2NCA6IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIGlmIChpbnB1dCA9PSBudWxsKSByZXR1cm4gXCJcIjtcbiAgICB2YXIgcmVzID0gTFpTdHJpbmcuX2NvbXByZXNzKGlucHV0LCA2LCBmdW5jdGlvbihhKXtyZXR1cm4ga2V5U3RyQmFzZTY0LmNoYXJBdChhKTt9KTtcbiAgICBzd2l0Y2ggKHJlcy5sZW5ndGggJSA0KSB7IC8vIFRvIHByb2R1Y2UgdmFsaWQgQmFzZTY0XG4gICAgZGVmYXVsdDogLy8gV2hlbiBjb3VsZCB0aGlzIGhhcHBlbiA/XG4gICAgY2FzZSAwIDogcmV0dXJuIHJlcztcbiAgICBjYXNlIDEgOiByZXR1cm4gcmVzK1wiPT09XCI7XG4gICAgY2FzZSAyIDogcmV0dXJuIHJlcytcIj09XCI7XG4gICAgY2FzZSAzIDogcmV0dXJuIHJlcytcIj1cIjtcbiAgICB9XG4gIH0sXG5cbiAgZGVjb21wcmVzc0Zyb21CYXNlNjQgOiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQgPT0gbnVsbCkgcmV0dXJuIFwiXCI7XG4gICAgaWYgKGlucHV0ID09IFwiXCIpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBMWlN0cmluZy5fZGVjb21wcmVzcyhpbnB1dC5sZW5ndGgsIDMyLCBmdW5jdGlvbihpbmRleCkgeyByZXR1cm4gZ2V0QmFzZVZhbHVlKGtleVN0ckJhc2U2NCwgaW5wdXQuY2hhckF0KGluZGV4KSk7IH0pO1xuICB9LFxuXG4gIGNvbXByZXNzVG9VVEYxNiA6IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIGlmIChpbnB1dCA9PSBudWxsKSByZXR1cm4gXCJcIjtcbiAgICByZXR1cm4gTFpTdHJpbmcuX2NvbXByZXNzKGlucHV0LCAxNSwgZnVuY3Rpb24oYSl7cmV0dXJuIGYoYSszMik7fSkgKyBcIiBcIjtcbiAgfSxcblxuICBkZWNvbXByZXNzRnJvbVVURjE2OiBmdW5jdGlvbiAoY29tcHJlc3NlZCkge1xuICAgIGlmIChjb21wcmVzc2VkID09IG51bGwpIHJldHVybiBcIlwiO1xuICAgIGlmIChjb21wcmVzc2VkID09IFwiXCIpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBMWlN0cmluZy5fZGVjb21wcmVzcyhjb21wcmVzc2VkLmxlbmd0aCwgMTYzODQsIGZ1bmN0aW9uKGluZGV4KSB7IHJldHVybiBjb21wcmVzc2VkLmNoYXJDb2RlQXQoaW5kZXgpIC0gMzI7IH0pO1xuICB9LFxuXG4gIC8vY29tcHJlc3MgaW50byB1aW50OGFycmF5IChVQ1MtMiBiaWcgZW5kaWFuIGZvcm1hdClcbiAgY29tcHJlc3NUb1VpbnQ4QXJyYXk6IGZ1bmN0aW9uICh1bmNvbXByZXNzZWQpIHtcbiAgICB2YXIgY29tcHJlc3NlZCA9IExaU3RyaW5nLmNvbXByZXNzKHVuY29tcHJlc3NlZCk7XG4gICAgdmFyIGJ1Zj1uZXcgVWludDhBcnJheShjb21wcmVzc2VkLmxlbmd0aCoyKTsgLy8gMiBieXRlcyBwZXIgY2hhcmFjdGVyXG5cbiAgICBmb3IgKHZhciBpPTAsIFRvdGFsTGVuPWNvbXByZXNzZWQubGVuZ3RoOyBpPFRvdGFsTGVuOyBpKyspIHtcbiAgICAgIHZhciBjdXJyZW50X3ZhbHVlID0gY29tcHJlc3NlZC5jaGFyQ29kZUF0KGkpO1xuICAgICAgYnVmW2kqMl0gPSBjdXJyZW50X3ZhbHVlID4+PiA4O1xuICAgICAgYnVmW2kqMisxXSA9IGN1cnJlbnRfdmFsdWUgJSAyNTY7XG4gICAgfVxuICAgIHJldHVybiBidWY7XG4gIH0sXG5cbiAgLy9kZWNvbXByZXNzIGZyb20gdWludDhhcnJheSAoVUNTLTIgYmlnIGVuZGlhbiBmb3JtYXQpXG4gIGRlY29tcHJlc3NGcm9tVWludDhBcnJheTpmdW5jdGlvbiAoY29tcHJlc3NlZCkge1xuICAgIGlmIChjb21wcmVzc2VkPT09bnVsbCB8fCBjb21wcmVzc2VkPT09dW5kZWZpbmVkKXtcbiAgICAgICAgcmV0dXJuIExaU3RyaW5nLmRlY29tcHJlc3MoY29tcHJlc3NlZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJ1Zj1uZXcgQXJyYXkoY29tcHJlc3NlZC5sZW5ndGgvMik7IC8vIDIgYnl0ZXMgcGVyIGNoYXJhY3RlclxuICAgICAgICBmb3IgKHZhciBpPTAsIFRvdGFsTGVuPWJ1Zi5sZW5ndGg7IGk8VG90YWxMZW47IGkrKykge1xuICAgICAgICAgIGJ1ZltpXT1jb21wcmVzc2VkW2kqMl0qMjU2K2NvbXByZXNzZWRbaSoyKzFdO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICBidWYuZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGYoYykpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIExaU3RyaW5nLmRlY29tcHJlc3MocmVzdWx0LmpvaW4oJycpKTtcblxuICAgIH1cblxuICB9LFxuXG5cbiAgLy9jb21wcmVzcyBpbnRvIGEgc3RyaW5nIHRoYXQgaXMgYWxyZWFkeSBVUkkgZW5jb2RlZFxuICBjb21wcmVzc1RvRW5jb2RlZFVSSUNvbXBvbmVudDogZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgaWYgKGlucHV0ID09IG51bGwpIHJldHVybiBcIlwiO1xuICAgIHJldHVybiBMWlN0cmluZy5fY29tcHJlc3MoaW5wdXQsIDYsIGZ1bmN0aW9uKGEpe3JldHVybiBrZXlTdHJVcmlTYWZlLmNoYXJBdChhKTt9KTtcbiAgfSxcblxuICAvL2RlY29tcHJlc3MgZnJvbSBhbiBvdXRwdXQgb2YgY29tcHJlc3NUb0VuY29kZWRVUklDb21wb25lbnRcbiAgZGVjb21wcmVzc0Zyb21FbmNvZGVkVVJJQ29tcG9uZW50OmZ1bmN0aW9uIChpbnB1dCkge1xuICAgIGlmIChpbnB1dCA9PSBudWxsKSByZXR1cm4gXCJcIjtcbiAgICBpZiAoaW5wdXQgPT0gXCJcIikgcmV0dXJuIG51bGw7XG4gICAgaW5wdXQgPSBpbnB1dC5yZXBsYWNlKC8gL2csIFwiK1wiKTtcbiAgICByZXR1cm4gTFpTdHJpbmcuX2RlY29tcHJlc3MoaW5wdXQubGVuZ3RoLCAzMiwgZnVuY3Rpb24oaW5kZXgpIHsgcmV0dXJuIGdldEJhc2VWYWx1ZShrZXlTdHJVcmlTYWZlLCBpbnB1dC5jaGFyQXQoaW5kZXgpKTsgfSk7XG4gIH0sXG5cbiAgY29tcHJlc3M6IGZ1bmN0aW9uICh1bmNvbXByZXNzZWQpIHtcbiAgICByZXR1cm4gTFpTdHJpbmcuX2NvbXByZXNzKHVuY29tcHJlc3NlZCwgMTYsIGZ1bmN0aW9uKGEpe3JldHVybiBmKGEpO30pO1xuICB9LFxuICBfY29tcHJlc3M6IGZ1bmN0aW9uICh1bmNvbXByZXNzZWQsIGJpdHNQZXJDaGFyLCBnZXRDaGFyRnJvbUludCkge1xuICAgIGlmICh1bmNvbXByZXNzZWQgPT0gbnVsbCkgcmV0dXJuIFwiXCI7XG4gICAgdmFyIGksIHZhbHVlLFxuICAgICAgICBjb250ZXh0X2RpY3Rpb25hcnk9IHt9LFxuICAgICAgICBjb250ZXh0X2RpY3Rpb25hcnlUb0NyZWF0ZT0ge30sXG4gICAgICAgIGNvbnRleHRfYz1cIlwiLFxuICAgICAgICBjb250ZXh0X3djPVwiXCIsXG4gICAgICAgIGNvbnRleHRfdz1cIlwiLFxuICAgICAgICBjb250ZXh0X2VubGFyZ2VJbj0gMiwgLy8gQ29tcGVuc2F0ZSBmb3IgdGhlIGZpcnN0IGVudHJ5IHdoaWNoIHNob3VsZCBub3QgY291bnRcbiAgICAgICAgY29udGV4dF9kaWN0U2l6ZT0gMyxcbiAgICAgICAgY29udGV4dF9udW1CaXRzPSAyLFxuICAgICAgICBjb250ZXh0X2RhdGE9W10sXG4gICAgICAgIGNvbnRleHRfZGF0YV92YWw9MCxcbiAgICAgICAgY29udGV4dF9kYXRhX3Bvc2l0aW9uPTAsXG4gICAgICAgIGlpO1xuXG4gICAgZm9yIChpaSA9IDA7IGlpIDwgdW5jb21wcmVzc2VkLmxlbmd0aDsgaWkgKz0gMSkge1xuICAgICAgY29udGV4dF9jID0gdW5jb21wcmVzc2VkLmNoYXJBdChpaSk7XG4gICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjb250ZXh0X2RpY3Rpb25hcnksY29udGV4dF9jKSkge1xuICAgICAgICBjb250ZXh0X2RpY3Rpb25hcnlbY29udGV4dF9jXSA9IGNvbnRleHRfZGljdFNpemUrKztcbiAgICAgICAgY29udGV4dF9kaWN0aW9uYXJ5VG9DcmVhdGVbY29udGV4dF9jXSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnRleHRfd2MgPSBjb250ZXh0X3cgKyBjb250ZXh0X2M7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbnRleHRfZGljdGlvbmFyeSxjb250ZXh0X3djKSkge1xuICAgICAgICBjb250ZXh0X3cgPSBjb250ZXh0X3djO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjb250ZXh0X2RpY3Rpb25hcnlUb0NyZWF0ZSxjb250ZXh0X3cpKSB7XG4gICAgICAgICAgaWYgKGNvbnRleHRfdy5jaGFyQ29kZUF0KDApPDI1Nikge1xuICAgICAgICAgICAgZm9yIChpPTAgOyBpPGNvbnRleHRfbnVtQml0cyA7IGkrKykge1xuICAgICAgICAgICAgICBjb250ZXh0X2RhdGFfdmFsID0gKGNvbnRleHRfZGF0YV92YWwgPDwgMSk7XG4gICAgICAgICAgICAgIGlmIChjb250ZXh0X2RhdGFfcG9zaXRpb24gPT0gYml0c1BlckNoYXItMSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHRfZGF0YV9wb3NpdGlvbiA9IDA7XG4gICAgICAgICAgICAgICAgY29udGV4dF9kYXRhLnB1c2goZ2V0Q2hhckZyb21JbnQoY29udGV4dF9kYXRhX3ZhbCkpO1xuICAgICAgICAgICAgICAgIGNvbnRleHRfZGF0YV92YWwgPSAwO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRleHRfZGF0YV9wb3NpdGlvbisrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YWx1ZSA9IGNvbnRleHRfdy5jaGFyQ29kZUF0KDApO1xuICAgICAgICAgICAgZm9yIChpPTAgOyBpPDggOyBpKyspIHtcbiAgICAgICAgICAgICAgY29udGV4dF9kYXRhX3ZhbCA9IChjb250ZXh0X2RhdGFfdmFsIDw8IDEpIHwgKHZhbHVlJjEpO1xuICAgICAgICAgICAgICBpZiAoY29udGV4dF9kYXRhX3Bvc2l0aW9uID09IGJpdHNQZXJDaGFyLTEpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0X2RhdGFfcG9zaXRpb24gPSAwO1xuICAgICAgICAgICAgICAgIGNvbnRleHRfZGF0YS5wdXNoKGdldENoYXJGcm9tSW50KGNvbnRleHRfZGF0YV92YWwpKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0X2RhdGFfdmFsID0gMDtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0X2RhdGFfcG9zaXRpb24rKztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlID4+IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhbHVlID0gMTtcbiAgICAgICAgICAgIGZvciAoaT0wIDsgaTxjb250ZXh0X251bUJpdHMgOyBpKyspIHtcbiAgICAgICAgICAgICAgY29udGV4dF9kYXRhX3ZhbCA9IChjb250ZXh0X2RhdGFfdmFsIDw8IDEpIHwgdmFsdWU7XG4gICAgICAgICAgICAgIGlmIChjb250ZXh0X2RhdGFfcG9zaXRpb24gPT1iaXRzUGVyQ2hhci0xKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dF9kYXRhX3Bvc2l0aW9uID0gMDtcbiAgICAgICAgICAgICAgICBjb250ZXh0X2RhdGEucHVzaChnZXRDaGFyRnJvbUludChjb250ZXh0X2RhdGFfdmFsKSk7XG4gICAgICAgICAgICAgICAgY29udGV4dF9kYXRhX3ZhbCA9IDA7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGV4dF9kYXRhX3Bvc2l0aW9uKys7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdmFsdWUgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgPSBjb250ZXh0X3cuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgICAgIGZvciAoaT0wIDsgaTwxNiA7IGkrKykge1xuICAgICAgICAgICAgICBjb250ZXh0X2RhdGFfdmFsID0gKGNvbnRleHRfZGF0YV92YWwgPDwgMSkgfCAodmFsdWUmMSk7XG4gICAgICAgICAgICAgIGlmIChjb250ZXh0X2RhdGFfcG9zaXRpb24gPT0gYml0c1BlckNoYXItMSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHRfZGF0YV9wb3NpdGlvbiA9IDA7XG4gICAgICAgICAgICAgICAgY29udGV4dF9kYXRhLnB1c2goZ2V0Q2hhckZyb21JbnQoY29udGV4dF9kYXRhX3ZhbCkpO1xuICAgICAgICAgICAgICAgIGNvbnRleHRfZGF0YV92YWwgPSAwO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRleHRfZGF0YV9wb3NpdGlvbisrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgPj4gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGV4dF9lbmxhcmdlSW4tLTtcbiAgICAgICAgICBpZiAoY29udGV4dF9lbmxhcmdlSW4gPT0gMCkge1xuICAgICAgICAgICAgY29udGV4dF9lbmxhcmdlSW4gPSBNYXRoLnBvdygyLCBjb250ZXh0X251bUJpdHMpO1xuICAgICAgICAgICAgY29udGV4dF9udW1CaXRzKys7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlbGV0ZSBjb250ZXh0X2RpY3Rpb25hcnlUb0NyZWF0ZVtjb250ZXh0X3ddO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbHVlID0gY29udGV4dF9kaWN0aW9uYXJ5W2NvbnRleHRfd107XG4gICAgICAgICAgZm9yIChpPTAgOyBpPGNvbnRleHRfbnVtQml0cyA7IGkrKykge1xuICAgICAgICAgICAgY29udGV4dF9kYXRhX3ZhbCA9IChjb250ZXh0X2RhdGFfdmFsIDw8IDEpIHwgKHZhbHVlJjEpO1xuICAgICAgICAgICAgaWYgKGNvbnRleHRfZGF0YV9wb3NpdGlvbiA9PSBiaXRzUGVyQ2hhci0xKSB7XG4gICAgICAgICAgICAgIGNvbnRleHRfZGF0YV9wb3NpdGlvbiA9IDA7XG4gICAgICAgICAgICAgIGNvbnRleHRfZGF0YS5wdXNoKGdldENoYXJGcm9tSW50KGNvbnRleHRfZGF0YV92YWwpKTtcbiAgICAgICAgICAgICAgY29udGV4dF9kYXRhX3ZhbCA9IDA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb250ZXh0X2RhdGFfcG9zaXRpb24rKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgPj4gMTtcbiAgICAgICAgICB9XG5cblxuICAgICAgICB9XG4gICAgICAgIGNvbnRleHRfZW5sYXJnZUluLS07XG4gICAgICAgIGlmIChjb250ZXh0X2VubGFyZ2VJbiA9PSAwKSB7XG4gICAgICAgICAgY29udGV4dF9lbmxhcmdlSW4gPSBNYXRoLnBvdygyLCBjb250ZXh0X251bUJpdHMpO1xuICAgICAgICAgIGNvbnRleHRfbnVtQml0cysrO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFkZCB3YyB0byB0aGUgZGljdGlvbmFyeS5cbiAgICAgICAgY29udGV4dF9kaWN0aW9uYXJ5W2NvbnRleHRfd2NdID0gY29udGV4dF9kaWN0U2l6ZSsrO1xuICAgICAgICBjb250ZXh0X3cgPSBTdHJpbmcoY29udGV4dF9jKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBPdXRwdXQgdGhlIGNvZGUgZm9yIHcuXG4gICAgaWYgKGNvbnRleHRfdyAhPT0gXCJcIikge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjb250ZXh0X2RpY3Rpb25hcnlUb0NyZWF0ZSxjb250ZXh0X3cpKSB7XG4gICAgICAgIGlmIChjb250ZXh0X3cuY2hhckNvZGVBdCgwKTwyNTYpIHtcbiAgICAgICAgICBmb3IgKGk9MCA7IGk8Y29udGV4dF9udW1CaXRzIDsgaSsrKSB7XG4gICAgICAgICAgICBjb250ZXh0X2RhdGFfdmFsID0gKGNvbnRleHRfZGF0YV92YWwgPDwgMSk7XG4gICAgICAgICAgICBpZiAoY29udGV4dF9kYXRhX3Bvc2l0aW9uID09IGJpdHNQZXJDaGFyLTEpIHtcbiAgICAgICAgICAgICAgY29udGV4dF9kYXRhX3Bvc2l0aW9uID0gMDtcbiAgICAgICAgICAgICAgY29udGV4dF9kYXRhLnB1c2goZ2V0Q2hhckZyb21JbnQoY29udGV4dF9kYXRhX3ZhbCkpO1xuICAgICAgICAgICAgICBjb250ZXh0X2RhdGFfdmFsID0gMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnRleHRfZGF0YV9wb3NpdGlvbisrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB2YWx1ZSA9IGNvbnRleHRfdy5jaGFyQ29kZUF0KDApO1xuICAgICAgICAgIGZvciAoaT0wIDsgaTw4IDsgaSsrKSB7XG4gICAgICAgICAgICBjb250ZXh0X2RhdGFfdmFsID0gKGNvbnRleHRfZGF0YV92YWwgPDwgMSkgfCAodmFsdWUmMSk7XG4gICAgICAgICAgICBpZiAoY29udGV4dF9kYXRhX3Bvc2l0aW9uID09IGJpdHNQZXJDaGFyLTEpIHtcbiAgICAgICAgICAgICAgY29udGV4dF9kYXRhX3Bvc2l0aW9uID0gMDtcbiAgICAgICAgICAgICAgY29udGV4dF9kYXRhLnB1c2goZ2V0Q2hhckZyb21JbnQoY29udGV4dF9kYXRhX3ZhbCkpO1xuICAgICAgICAgICAgICBjb250ZXh0X2RhdGFfdmFsID0gMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnRleHRfZGF0YV9wb3NpdGlvbisrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZSA+PiAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YWx1ZSA9IDE7XG4gICAgICAgICAgZm9yIChpPTAgOyBpPGNvbnRleHRfbnVtQml0cyA7IGkrKykge1xuICAgICAgICAgICAgY29udGV4dF9kYXRhX3ZhbCA9IChjb250ZXh0X2RhdGFfdmFsIDw8IDEpIHwgdmFsdWU7XG4gICAgICAgICAgICBpZiAoY29udGV4dF9kYXRhX3Bvc2l0aW9uID09IGJpdHNQZXJDaGFyLTEpIHtcbiAgICAgICAgICAgICAgY29udGV4dF9kYXRhX3Bvc2l0aW9uID0gMDtcbiAgICAgICAgICAgICAgY29udGV4dF9kYXRhLnB1c2goZ2V0Q2hhckZyb21JbnQoY29udGV4dF9kYXRhX3ZhbCkpO1xuICAgICAgICAgICAgICBjb250ZXh0X2RhdGFfdmFsID0gMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnRleHRfZGF0YV9wb3NpdGlvbisrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YWx1ZSA9IGNvbnRleHRfdy5jaGFyQ29kZUF0KDApO1xuICAgICAgICAgIGZvciAoaT0wIDsgaTwxNiA7IGkrKykge1xuICAgICAgICAgICAgY29udGV4dF9kYXRhX3ZhbCA9IChjb250ZXh0X2RhdGFfdmFsIDw8IDEpIHwgKHZhbHVlJjEpO1xuICAgICAgICAgICAgaWYgKGNvbnRleHRfZGF0YV9wb3NpdGlvbiA9PSBiaXRzUGVyQ2hhci0xKSB7XG4gICAgICAgICAgICAgIGNvbnRleHRfZGF0YV9wb3NpdGlvbiA9IDA7XG4gICAgICAgICAgICAgIGNvbnRleHRfZGF0YS5wdXNoKGdldENoYXJGcm9tSW50KGNvbnRleHRfZGF0YV92YWwpKTtcbiAgICAgICAgICAgICAgY29udGV4dF9kYXRhX3ZhbCA9IDA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb250ZXh0X2RhdGFfcG9zaXRpb24rKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgPj4gMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dF9lbmxhcmdlSW4tLTtcbiAgICAgICAgaWYgKGNvbnRleHRfZW5sYXJnZUluID09IDApIHtcbiAgICAgICAgICBjb250ZXh0X2VubGFyZ2VJbiA9IE1hdGgucG93KDIsIGNvbnRleHRfbnVtQml0cyk7XG4gICAgICAgICAgY29udGV4dF9udW1CaXRzKys7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIGNvbnRleHRfZGljdGlvbmFyeVRvQ3JlYXRlW2NvbnRleHRfd107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IGNvbnRleHRfZGljdGlvbmFyeVtjb250ZXh0X3ddO1xuICAgICAgICBmb3IgKGk9MCA7IGk8Y29udGV4dF9udW1CaXRzIDsgaSsrKSB7XG4gICAgICAgICAgY29udGV4dF9kYXRhX3ZhbCA9IChjb250ZXh0X2RhdGFfdmFsIDw8IDEpIHwgKHZhbHVlJjEpO1xuICAgICAgICAgIGlmIChjb250ZXh0X2RhdGFfcG9zaXRpb24gPT0gYml0c1BlckNoYXItMSkge1xuICAgICAgICAgICAgY29udGV4dF9kYXRhX3Bvc2l0aW9uID0gMDtcbiAgICAgICAgICAgIGNvbnRleHRfZGF0YS5wdXNoKGdldENoYXJGcm9tSW50KGNvbnRleHRfZGF0YV92YWwpKTtcbiAgICAgICAgICAgIGNvbnRleHRfZGF0YV92YWwgPSAwO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb250ZXh0X2RhdGFfcG9zaXRpb24rKztcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSB2YWx1ZSA+PiAxO1xuICAgICAgICB9XG5cblxuICAgICAgfVxuICAgICAgY29udGV4dF9lbmxhcmdlSW4tLTtcbiAgICAgIGlmIChjb250ZXh0X2VubGFyZ2VJbiA9PSAwKSB7XG4gICAgICAgIGNvbnRleHRfZW5sYXJnZUluID0gTWF0aC5wb3coMiwgY29udGV4dF9udW1CaXRzKTtcbiAgICAgICAgY29udGV4dF9udW1CaXRzKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWFyayB0aGUgZW5kIG9mIHRoZSBzdHJlYW1cbiAgICB2YWx1ZSA9IDI7XG4gICAgZm9yIChpPTAgOyBpPGNvbnRleHRfbnVtQml0cyA7IGkrKykge1xuICAgICAgY29udGV4dF9kYXRhX3ZhbCA9IChjb250ZXh0X2RhdGFfdmFsIDw8IDEpIHwgKHZhbHVlJjEpO1xuICAgICAgaWYgKGNvbnRleHRfZGF0YV9wb3NpdGlvbiA9PSBiaXRzUGVyQ2hhci0xKSB7XG4gICAgICAgIGNvbnRleHRfZGF0YV9wb3NpdGlvbiA9IDA7XG4gICAgICAgIGNvbnRleHRfZGF0YS5wdXNoKGdldENoYXJGcm9tSW50KGNvbnRleHRfZGF0YV92YWwpKTtcbiAgICAgICAgY29udGV4dF9kYXRhX3ZhbCA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZXh0X2RhdGFfcG9zaXRpb24rKztcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gdmFsdWUgPj4gMTtcbiAgICB9XG5cbiAgICAvLyBGbHVzaCB0aGUgbGFzdCBjaGFyXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGNvbnRleHRfZGF0YV92YWwgPSAoY29udGV4dF9kYXRhX3ZhbCA8PCAxKTtcbiAgICAgIGlmIChjb250ZXh0X2RhdGFfcG9zaXRpb24gPT0gYml0c1BlckNoYXItMSkge1xuICAgICAgICBjb250ZXh0X2RhdGEucHVzaChnZXRDaGFyRnJvbUludChjb250ZXh0X2RhdGFfdmFsKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgZWxzZSBjb250ZXh0X2RhdGFfcG9zaXRpb24rKztcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRleHRfZGF0YS5qb2luKCcnKTtcbiAgfSxcblxuICBkZWNvbXByZXNzOiBmdW5jdGlvbiAoY29tcHJlc3NlZCkge1xuICAgIGlmIChjb21wcmVzc2VkID09IG51bGwpIHJldHVybiBcIlwiO1xuICAgIGlmIChjb21wcmVzc2VkID09IFwiXCIpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBMWlN0cmluZy5fZGVjb21wcmVzcyhjb21wcmVzc2VkLmxlbmd0aCwgMzI3NjgsIGZ1bmN0aW9uKGluZGV4KSB7IHJldHVybiBjb21wcmVzc2VkLmNoYXJDb2RlQXQoaW5kZXgpOyB9KTtcbiAgfSxcblxuICBfZGVjb21wcmVzczogZnVuY3Rpb24gKGxlbmd0aCwgcmVzZXRWYWx1ZSwgZ2V0TmV4dFZhbHVlKSB7XG4gICAgdmFyIGRpY3Rpb25hcnkgPSBbXSxcbiAgICAgICAgbmV4dCxcbiAgICAgICAgZW5sYXJnZUluID0gNCxcbiAgICAgICAgZGljdFNpemUgPSA0LFxuICAgICAgICBudW1CaXRzID0gMyxcbiAgICAgICAgZW50cnkgPSBcIlwiLFxuICAgICAgICByZXN1bHQgPSBbXSxcbiAgICAgICAgaSxcbiAgICAgICAgdyxcbiAgICAgICAgYml0cywgcmVzYiwgbWF4cG93ZXIsIHBvd2VyLFxuICAgICAgICBjLFxuICAgICAgICBkYXRhID0ge3ZhbDpnZXROZXh0VmFsdWUoMCksIHBvc2l0aW9uOnJlc2V0VmFsdWUsIGluZGV4OjF9O1xuXG4gICAgZm9yIChpID0gMDsgaSA8IDM7IGkgKz0gMSkge1xuICAgICAgZGljdGlvbmFyeVtpXSA9IGk7XG4gICAgfVxuXG4gICAgYml0cyA9IDA7XG4gICAgbWF4cG93ZXIgPSBNYXRoLnBvdygyLDIpO1xuICAgIHBvd2VyPTE7XG4gICAgd2hpbGUgKHBvd2VyIT1tYXhwb3dlcikge1xuICAgICAgcmVzYiA9IGRhdGEudmFsICYgZGF0YS5wb3NpdGlvbjtcbiAgICAgIGRhdGEucG9zaXRpb24gPj49IDE7XG4gICAgICBpZiAoZGF0YS5wb3NpdGlvbiA9PSAwKSB7XG4gICAgICAgIGRhdGEucG9zaXRpb24gPSByZXNldFZhbHVlO1xuICAgICAgICBkYXRhLnZhbCA9IGdldE5leHRWYWx1ZShkYXRhLmluZGV4KyspO1xuICAgICAgfVxuICAgICAgYml0cyB8PSAocmVzYj4wID8gMSA6IDApICogcG93ZXI7XG4gICAgICBwb3dlciA8PD0gMTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKG5leHQgPSBiaXRzKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgICAgYml0cyA9IDA7XG4gICAgICAgICAgbWF4cG93ZXIgPSBNYXRoLnBvdygyLDgpO1xuICAgICAgICAgIHBvd2VyPTE7XG4gICAgICAgICAgd2hpbGUgKHBvd2VyIT1tYXhwb3dlcikge1xuICAgICAgICAgICAgcmVzYiA9IGRhdGEudmFsICYgZGF0YS5wb3NpdGlvbjtcbiAgICAgICAgICAgIGRhdGEucG9zaXRpb24gPj49IDE7XG4gICAgICAgICAgICBpZiAoZGF0YS5wb3NpdGlvbiA9PSAwKSB7XG4gICAgICAgICAgICAgIGRhdGEucG9zaXRpb24gPSByZXNldFZhbHVlO1xuICAgICAgICAgICAgICBkYXRhLnZhbCA9IGdldE5leHRWYWx1ZShkYXRhLmluZGV4KyspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYml0cyB8PSAocmVzYj4wID8gMSA6IDApICogcG93ZXI7XG4gICAgICAgICAgICBwb3dlciA8PD0gMTtcbiAgICAgICAgICB9XG4gICAgICAgIGMgPSBmKGJpdHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgICBiaXRzID0gMDtcbiAgICAgICAgICBtYXhwb3dlciA9IE1hdGgucG93KDIsMTYpO1xuICAgICAgICAgIHBvd2VyPTE7XG4gICAgICAgICAgd2hpbGUgKHBvd2VyIT1tYXhwb3dlcikge1xuICAgICAgICAgICAgcmVzYiA9IGRhdGEudmFsICYgZGF0YS5wb3NpdGlvbjtcbiAgICAgICAgICAgIGRhdGEucG9zaXRpb24gPj49IDE7XG4gICAgICAgICAgICBpZiAoZGF0YS5wb3NpdGlvbiA9PSAwKSB7XG4gICAgICAgICAgICAgIGRhdGEucG9zaXRpb24gPSByZXNldFZhbHVlO1xuICAgICAgICAgICAgICBkYXRhLnZhbCA9IGdldE5leHRWYWx1ZShkYXRhLmluZGV4KyspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYml0cyB8PSAocmVzYj4wID8gMSA6IDApICogcG93ZXI7XG4gICAgICAgICAgICBwb3dlciA8PD0gMTtcbiAgICAgICAgICB9XG4gICAgICAgIGMgPSBmKGJpdHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIGRpY3Rpb25hcnlbM10gPSBjO1xuICAgIHcgPSBjO1xuICAgIHJlc3VsdC5wdXNoKGMpO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBpZiAoZGF0YS5pbmRleCA+IGxlbmd0aCkge1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgIH1cblxuICAgICAgYml0cyA9IDA7XG4gICAgICBtYXhwb3dlciA9IE1hdGgucG93KDIsbnVtQml0cyk7XG4gICAgICBwb3dlcj0xO1xuICAgICAgd2hpbGUgKHBvd2VyIT1tYXhwb3dlcikge1xuICAgICAgICByZXNiID0gZGF0YS52YWwgJiBkYXRhLnBvc2l0aW9uO1xuICAgICAgICBkYXRhLnBvc2l0aW9uID4+PSAxO1xuICAgICAgICBpZiAoZGF0YS5wb3NpdGlvbiA9PSAwKSB7XG4gICAgICAgICAgZGF0YS5wb3NpdGlvbiA9IHJlc2V0VmFsdWU7XG4gICAgICAgICAgZGF0YS52YWwgPSBnZXROZXh0VmFsdWUoZGF0YS5pbmRleCsrKTtcbiAgICAgICAgfVxuICAgICAgICBiaXRzIHw9IChyZXNiPjAgPyAxIDogMCkgKiBwb3dlcjtcbiAgICAgICAgcG93ZXIgPDw9IDE7XG4gICAgICB9XG5cbiAgICAgIHN3aXRjaCAoYyA9IGJpdHMpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIGJpdHMgPSAwO1xuICAgICAgICAgIG1heHBvd2VyID0gTWF0aC5wb3coMiw4KTtcbiAgICAgICAgICBwb3dlcj0xO1xuICAgICAgICAgIHdoaWxlIChwb3dlciE9bWF4cG93ZXIpIHtcbiAgICAgICAgICAgIHJlc2IgPSBkYXRhLnZhbCAmIGRhdGEucG9zaXRpb247XG4gICAgICAgICAgICBkYXRhLnBvc2l0aW9uID4+PSAxO1xuICAgICAgICAgICAgaWYgKGRhdGEucG9zaXRpb24gPT0gMCkge1xuICAgICAgICAgICAgICBkYXRhLnBvc2l0aW9uID0gcmVzZXRWYWx1ZTtcbiAgICAgICAgICAgICAgZGF0YS52YWwgPSBnZXROZXh0VmFsdWUoZGF0YS5pbmRleCsrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJpdHMgfD0gKHJlc2I+MCA/IDEgOiAwKSAqIHBvd2VyO1xuICAgICAgICAgICAgcG93ZXIgPDw9IDE7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZGljdGlvbmFyeVtkaWN0U2l6ZSsrXSA9IGYoYml0cyk7XG4gICAgICAgICAgYyA9IGRpY3RTaXplLTE7XG4gICAgICAgICAgZW5sYXJnZUluLS07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBiaXRzID0gMDtcbiAgICAgICAgICBtYXhwb3dlciA9IE1hdGgucG93KDIsMTYpO1xuICAgICAgICAgIHBvd2VyPTE7XG4gICAgICAgICAgd2hpbGUgKHBvd2VyIT1tYXhwb3dlcikge1xuICAgICAgICAgICAgcmVzYiA9IGRhdGEudmFsICYgZGF0YS5wb3NpdGlvbjtcbiAgICAgICAgICAgIGRhdGEucG9zaXRpb24gPj49IDE7XG4gICAgICAgICAgICBpZiAoZGF0YS5wb3NpdGlvbiA9PSAwKSB7XG4gICAgICAgICAgICAgIGRhdGEucG9zaXRpb24gPSByZXNldFZhbHVlO1xuICAgICAgICAgICAgICBkYXRhLnZhbCA9IGdldE5leHRWYWx1ZShkYXRhLmluZGV4KyspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYml0cyB8PSAocmVzYj4wID8gMSA6IDApICogcG93ZXI7XG4gICAgICAgICAgICBwb3dlciA8PD0gMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGljdGlvbmFyeVtkaWN0U2l6ZSsrXSA9IGYoYml0cyk7XG4gICAgICAgICAgYyA9IGRpY3RTaXplLTE7XG4gICAgICAgICAgZW5sYXJnZUluLS07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LmpvaW4oJycpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZW5sYXJnZUluID09IDApIHtcbiAgICAgICAgZW5sYXJnZUluID0gTWF0aC5wb3coMiwgbnVtQml0cyk7XG4gICAgICAgIG51bUJpdHMrKztcbiAgICAgIH1cblxuICAgICAgaWYgKGRpY3Rpb25hcnlbY10pIHtcbiAgICAgICAgZW50cnkgPSBkaWN0aW9uYXJ5W2NdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGMgPT09IGRpY3RTaXplKSB7XG4gICAgICAgICAgZW50cnkgPSB3ICsgdy5jaGFyQXQoMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJlc3VsdC5wdXNoKGVudHJ5KTtcblxuICAgICAgLy8gQWRkIHcrZW50cnlbMF0gdG8gdGhlIGRpY3Rpb25hcnkuXG4gICAgICBkaWN0aW9uYXJ5W2RpY3RTaXplKytdID0gdyArIGVudHJ5LmNoYXJBdCgwKTtcbiAgICAgIGVubGFyZ2VJbi0tO1xuXG4gICAgICB3ID0gZW50cnk7XG5cbiAgICAgIGlmIChlbmxhcmdlSW4gPT0gMCkge1xuICAgICAgICBlbmxhcmdlSW4gPSBNYXRoLnBvdygyLCBudW1CaXRzKTtcbiAgICAgICAgbnVtQml0cysrO1xuICAgICAgfVxuXG4gICAgfVxuICB9XG59O1xuICByZXR1cm4gTFpTdHJpbmc7XG59KSgpO1xuXG5pZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gIGRlZmluZShmdW5jdGlvbiAoKSB7IHJldHVybiBMWlN0cmluZzsgfSk7XG59IGVsc2UgaWYoIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZSAhPSBudWxsICkge1xuICBtb2R1bGUuZXhwb3J0cyA9IExaU3RyaW5nXG59XG4iLCIvLyEgbW9tZW50LmpzXG4vLyEgdmVyc2lvbiA6IDIuMTguMVxuLy8hIGF1dGhvcnMgOiBUaW0gV29vZCwgSXNrcmVuIENoZXJuZXYsIE1vbWVudC5qcyBjb250cmlidXRvcnNcbi8vISBsaWNlbnNlIDogTUlUXG4vLyEgbW9tZW50anMuY29tXG5cbjsoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICAgIGdsb2JhbC5tb21lbnQgPSBmYWN0b3J5KClcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG52YXIgaG9va0NhbGxiYWNrO1xuXG5mdW5jdGlvbiBob29rcyAoKSB7XG4gICAgcmV0dXJuIGhvb2tDYWxsYmFjay5hcHBseShudWxsLCBhcmd1bWVudHMpO1xufVxuXG4vLyBUaGlzIGlzIGRvbmUgdG8gcmVnaXN0ZXIgdGhlIG1ldGhvZCBjYWxsZWQgd2l0aCBtb21lbnQoKVxuLy8gd2l0aG91dCBjcmVhdGluZyBjaXJjdWxhciBkZXBlbmRlbmNpZXMuXG5mdW5jdGlvbiBzZXRIb29rQ2FsbGJhY2sgKGNhbGxiYWNrKSB7XG4gICAgaG9va0NhbGxiYWNrID0gY2FsbGJhY2s7XG59XG5cbmZ1bmN0aW9uIGlzQXJyYXkoaW5wdXQpIHtcbiAgICByZXR1cm4gaW5wdXQgaW5zdGFuY2VvZiBBcnJheSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5wdXQpID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdChpbnB1dCkge1xuICAgIC8vIElFOCB3aWxsIHRyZWF0IHVuZGVmaW5lZCBhbmQgbnVsbCBhcyBvYmplY3QgaWYgaXQgd2Fzbid0IGZvclxuICAgIC8vIGlucHV0ICE9IG51bGxcbiAgICByZXR1cm4gaW5wdXQgIT0gbnVsbCAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5wdXQpID09PSAnW29iamVjdCBPYmplY3RdJztcbn1cblxuZnVuY3Rpb24gaXNPYmplY3RFbXB0eShvYmopIHtcbiAgICB2YXIgaztcbiAgICBmb3IgKGsgaW4gb2JqKSB7XG4gICAgICAgIC8vIGV2ZW4gaWYgaXRzIG5vdCBvd24gcHJvcGVydHkgSSdkIHN0aWxsIGNhbGwgaXQgbm9uLWVtcHR5XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0ID09PSB2b2lkIDA7XG59XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGlucHV0KSB7XG4gICAgcmV0dXJuIHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGlucHV0KSA9PT0gJ1tvYmplY3QgTnVtYmVyXSc7XG59XG5cbmZ1bmN0aW9uIGlzRGF0ZShpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dCBpbnN0YW5jZW9mIERhdGUgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGlucHV0KSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuXG5mdW5jdGlvbiBtYXAoYXJyLCBmbikge1xuICAgIHZhciByZXMgPSBbXSwgaTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHJlcy5wdXNoKGZuKGFycltpXSwgaSkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuXG5mdW5jdGlvbiBoYXNPd25Qcm9wKGEsIGIpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsIGIpO1xufVxuXG5mdW5jdGlvbiBleHRlbmQoYSwgYikge1xuICAgIGZvciAodmFyIGkgaW4gYikge1xuICAgICAgICBpZiAoaGFzT3duUHJvcChiLCBpKSkge1xuICAgICAgICAgICAgYVtpXSA9IGJbaV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaGFzT3duUHJvcChiLCAndG9TdHJpbmcnKSkge1xuICAgICAgICBhLnRvU3RyaW5nID0gYi50b1N0cmluZztcbiAgICB9XG5cbiAgICBpZiAoaGFzT3duUHJvcChiLCAndmFsdWVPZicpKSB7XG4gICAgICAgIGEudmFsdWVPZiA9IGIudmFsdWVPZjtcbiAgICB9XG5cbiAgICByZXR1cm4gYTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVVRDIChpbnB1dCwgZm9ybWF0LCBsb2NhbGUsIHN0cmljdCkge1xuICAgIHJldHVybiBjcmVhdGVMb2NhbE9yVVRDKGlucHV0LCBmb3JtYXQsIGxvY2FsZSwgc3RyaWN0LCB0cnVlKS51dGMoKTtcbn1cblxuZnVuY3Rpb24gZGVmYXVsdFBhcnNpbmdGbGFncygpIHtcbiAgICAvLyBXZSBuZWVkIHRvIGRlZXAgY2xvbmUgdGhpcyBvYmplY3QuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZW1wdHkgICAgICAgICAgIDogZmFsc2UsXG4gICAgICAgIHVudXNlZFRva2VucyAgICA6IFtdLFxuICAgICAgICB1bnVzZWRJbnB1dCAgICAgOiBbXSxcbiAgICAgICAgb3ZlcmZsb3cgICAgICAgIDogLTIsXG4gICAgICAgIGNoYXJzTGVmdE92ZXIgICA6IDAsXG4gICAgICAgIG51bGxJbnB1dCAgICAgICA6IGZhbHNlLFxuICAgICAgICBpbnZhbGlkTW9udGggICAgOiBudWxsLFxuICAgICAgICBpbnZhbGlkRm9ybWF0ICAgOiBmYWxzZSxcbiAgICAgICAgdXNlckludmFsaWRhdGVkIDogZmFsc2UsXG4gICAgICAgIGlzbyAgICAgICAgICAgICA6IGZhbHNlLFxuICAgICAgICBwYXJzZWREYXRlUGFydHMgOiBbXSxcbiAgICAgICAgbWVyaWRpZW0gICAgICAgIDogbnVsbCxcbiAgICAgICAgcmZjMjgyMiAgICAgICAgIDogZmFsc2UsXG4gICAgICAgIHdlZWtkYXlNaXNtYXRjaCA6IGZhbHNlXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0UGFyc2luZ0ZsYWdzKG0pIHtcbiAgICBpZiAobS5fcGYgPT0gbnVsbCkge1xuICAgICAgICBtLl9wZiA9IGRlZmF1bHRQYXJzaW5nRmxhZ3MoKTtcbiAgICB9XG4gICAgcmV0dXJuIG0uX3BmO1xufVxuXG52YXIgc29tZTtcbmlmIChBcnJheS5wcm90b3R5cGUuc29tZSkge1xuICAgIHNvbWUgPSBBcnJheS5wcm90b3R5cGUuc29tZTtcbn0gZWxzZSB7XG4gICAgc29tZSA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICAgICAgdmFyIHQgPSBPYmplY3QodGhpcyk7XG4gICAgICAgIHZhciBsZW4gPSB0Lmxlbmd0aCA+Pj4gMDtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaSBpbiB0ICYmIGZ1bi5jYWxsKHRoaXMsIHRbaV0sIGksIHQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbn1cblxudmFyIHNvbWUkMSA9IHNvbWU7XG5cbmZ1bmN0aW9uIGlzVmFsaWQobSkge1xuICAgIGlmIChtLl9pc1ZhbGlkID09IG51bGwpIHtcbiAgICAgICAgdmFyIGZsYWdzID0gZ2V0UGFyc2luZ0ZsYWdzKG0pO1xuICAgICAgICB2YXIgcGFyc2VkUGFydHMgPSBzb21lJDEuY2FsbChmbGFncy5wYXJzZWREYXRlUGFydHMsIGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICByZXR1cm4gaSAhPSBudWxsO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGlzTm93VmFsaWQgPSAhaXNOYU4obS5fZC5nZXRUaW1lKCkpICYmXG4gICAgICAgICAgICBmbGFncy5vdmVyZmxvdyA8IDAgJiZcbiAgICAgICAgICAgICFmbGFncy5lbXB0eSAmJlxuICAgICAgICAgICAgIWZsYWdzLmludmFsaWRNb250aCAmJlxuICAgICAgICAgICAgIWZsYWdzLmludmFsaWRXZWVrZGF5ICYmXG4gICAgICAgICAgICAhZmxhZ3MubnVsbElucHV0ICYmXG4gICAgICAgICAgICAhZmxhZ3MuaW52YWxpZEZvcm1hdCAmJlxuICAgICAgICAgICAgIWZsYWdzLnVzZXJJbnZhbGlkYXRlZCAmJlxuICAgICAgICAgICAgKCFmbGFncy5tZXJpZGllbSB8fCAoZmxhZ3MubWVyaWRpZW0gJiYgcGFyc2VkUGFydHMpKTtcblxuICAgICAgICBpZiAobS5fc3RyaWN0KSB7XG4gICAgICAgICAgICBpc05vd1ZhbGlkID0gaXNOb3dWYWxpZCAmJlxuICAgICAgICAgICAgICAgIGZsYWdzLmNoYXJzTGVmdE92ZXIgPT09IDAgJiZcbiAgICAgICAgICAgICAgICBmbGFncy51bnVzZWRUb2tlbnMubGVuZ3RoID09PSAwICYmXG4gICAgICAgICAgICAgICAgZmxhZ3MuYmlnSG91ciA9PT0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKE9iamVjdC5pc0Zyb3plbiA9PSBudWxsIHx8ICFPYmplY3QuaXNGcm96ZW4obSkpIHtcbiAgICAgICAgICAgIG0uX2lzVmFsaWQgPSBpc05vd1ZhbGlkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGlzTm93VmFsaWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG0uX2lzVmFsaWQ7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUludmFsaWQgKGZsYWdzKSB7XG4gICAgdmFyIG0gPSBjcmVhdGVVVEMoTmFOKTtcbiAgICBpZiAoZmxhZ3MgIT0gbnVsbCkge1xuICAgICAgICBleHRlbmQoZ2V0UGFyc2luZ0ZsYWdzKG0pLCBmbGFncyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBnZXRQYXJzaW5nRmxhZ3MobSkudXNlckludmFsaWRhdGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbTtcbn1cblxuLy8gUGx1Z2lucyB0aGF0IGFkZCBwcm9wZXJ0aWVzIHNob3VsZCBhbHNvIGFkZCB0aGUga2V5IGhlcmUgKG51bGwgdmFsdWUpLFxuLy8gc28gd2UgY2FuIHByb3Blcmx5IGNsb25lIG91cnNlbHZlcy5cbnZhciBtb21lbnRQcm9wZXJ0aWVzID0gaG9va3MubW9tZW50UHJvcGVydGllcyA9IFtdO1xuXG5mdW5jdGlvbiBjb3B5Q29uZmlnKHRvLCBmcm9tKSB7XG4gICAgdmFyIGksIHByb3AsIHZhbDtcblxuICAgIGlmICghaXNVbmRlZmluZWQoZnJvbS5faXNBTW9tZW50T2JqZWN0KSkge1xuICAgICAgICB0by5faXNBTW9tZW50T2JqZWN0ID0gZnJvbS5faXNBTW9tZW50T2JqZWN0O1xuICAgIH1cbiAgICBpZiAoIWlzVW5kZWZpbmVkKGZyb20uX2kpKSB7XG4gICAgICAgIHRvLl9pID0gZnJvbS5faTtcbiAgICB9XG4gICAgaWYgKCFpc1VuZGVmaW5lZChmcm9tLl9mKSkge1xuICAgICAgICB0by5fZiA9IGZyb20uX2Y7XG4gICAgfVxuICAgIGlmICghaXNVbmRlZmluZWQoZnJvbS5fbCkpIHtcbiAgICAgICAgdG8uX2wgPSBmcm9tLl9sO1xuICAgIH1cbiAgICBpZiAoIWlzVW5kZWZpbmVkKGZyb20uX3N0cmljdCkpIHtcbiAgICAgICAgdG8uX3N0cmljdCA9IGZyb20uX3N0cmljdDtcbiAgICB9XG4gICAgaWYgKCFpc1VuZGVmaW5lZChmcm9tLl90em0pKSB7XG4gICAgICAgIHRvLl90em0gPSBmcm9tLl90em07XG4gICAgfVxuICAgIGlmICghaXNVbmRlZmluZWQoZnJvbS5faXNVVEMpKSB7XG4gICAgICAgIHRvLl9pc1VUQyA9IGZyb20uX2lzVVRDO1xuICAgIH1cbiAgICBpZiAoIWlzVW5kZWZpbmVkKGZyb20uX29mZnNldCkpIHtcbiAgICAgICAgdG8uX29mZnNldCA9IGZyb20uX29mZnNldDtcbiAgICB9XG4gICAgaWYgKCFpc1VuZGVmaW5lZChmcm9tLl9wZikpIHtcbiAgICAgICAgdG8uX3BmID0gZ2V0UGFyc2luZ0ZsYWdzKGZyb20pO1xuICAgIH1cbiAgICBpZiAoIWlzVW5kZWZpbmVkKGZyb20uX2xvY2FsZSkpIHtcbiAgICAgICAgdG8uX2xvY2FsZSA9IGZyb20uX2xvY2FsZTtcbiAgICB9XG5cbiAgICBpZiAobW9tZW50UHJvcGVydGllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBtb21lbnRQcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBwcm9wID0gbW9tZW50UHJvcGVydGllc1tpXTtcbiAgICAgICAgICAgIHZhbCA9IGZyb21bcHJvcF07XG4gICAgICAgICAgICBpZiAoIWlzVW5kZWZpbmVkKHZhbCkpIHtcbiAgICAgICAgICAgICAgICB0b1twcm9wXSA9IHZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0bztcbn1cblxudmFyIHVwZGF0ZUluUHJvZ3Jlc3MgPSBmYWxzZTtcblxuLy8gTW9tZW50IHByb3RvdHlwZSBvYmplY3RcbmZ1bmN0aW9uIE1vbWVudChjb25maWcpIHtcbiAgICBjb3B5Q29uZmlnKHRoaXMsIGNvbmZpZyk7XG4gICAgdGhpcy5fZCA9IG5ldyBEYXRlKGNvbmZpZy5fZCAhPSBudWxsID8gY29uZmlnLl9kLmdldFRpbWUoKSA6IE5hTik7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQoKSkge1xuICAgICAgICB0aGlzLl9kID0gbmV3IERhdGUoTmFOKTtcbiAgICB9XG4gICAgLy8gUHJldmVudCBpbmZpbml0ZSBsb29wIGluIGNhc2UgdXBkYXRlT2Zmc2V0IGNyZWF0ZXMgbmV3IG1vbWVudFxuICAgIC8vIG9iamVjdHMuXG4gICAgaWYgKHVwZGF0ZUluUHJvZ3Jlc3MgPT09IGZhbHNlKSB7XG4gICAgICAgIHVwZGF0ZUluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICBob29rcy51cGRhdGVPZmZzZXQodGhpcyk7XG4gICAgICAgIHVwZGF0ZUluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzTW9tZW50IChvYmopIHtcbiAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgTW9tZW50IHx8IChvYmogIT0gbnVsbCAmJiBvYmouX2lzQU1vbWVudE9iamVjdCAhPSBudWxsKTtcbn1cblxuZnVuY3Rpb24gYWJzRmxvb3IgKG51bWJlcikge1xuICAgIGlmIChudW1iZXIgPCAwKSB7XG4gICAgICAgIC8vIC0wIC0+IDBcbiAgICAgICAgcmV0dXJuIE1hdGguY2VpbChudW1iZXIpIHx8IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IobnVtYmVyKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRvSW50KGFyZ3VtZW50Rm9yQ29lcmNpb24pIHtcbiAgICB2YXIgY29lcmNlZE51bWJlciA9ICthcmd1bWVudEZvckNvZXJjaW9uLFxuICAgICAgICB2YWx1ZSA9IDA7XG5cbiAgICBpZiAoY29lcmNlZE51bWJlciAhPT0gMCAmJiBpc0Zpbml0ZShjb2VyY2VkTnVtYmVyKSkge1xuICAgICAgICB2YWx1ZSA9IGFic0Zsb29yKGNvZXJjZWROdW1iZXIpO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbn1cblxuLy8gY29tcGFyZSB0d28gYXJyYXlzLCByZXR1cm4gdGhlIG51bWJlciBvZiBkaWZmZXJlbmNlc1xuZnVuY3Rpb24gY29tcGFyZUFycmF5cyhhcnJheTEsIGFycmF5MiwgZG9udENvbnZlcnQpIHtcbiAgICB2YXIgbGVuID0gTWF0aC5taW4oYXJyYXkxLmxlbmd0aCwgYXJyYXkyLmxlbmd0aCksXG4gICAgICAgIGxlbmd0aERpZmYgPSBNYXRoLmFicyhhcnJheTEubGVuZ3RoIC0gYXJyYXkyLmxlbmd0aCksXG4gICAgICAgIGRpZmZzID0gMCxcbiAgICAgICAgaTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgaWYgKChkb250Q29udmVydCAmJiBhcnJheTFbaV0gIT09IGFycmF5MltpXSkgfHxcbiAgICAgICAgICAgICghZG9udENvbnZlcnQgJiYgdG9JbnQoYXJyYXkxW2ldKSAhPT0gdG9JbnQoYXJyYXkyW2ldKSkpIHtcbiAgICAgICAgICAgIGRpZmZzKys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRpZmZzICsgbGVuZ3RoRGlmZjtcbn1cblxuZnVuY3Rpb24gd2Fybihtc2cpIHtcbiAgICBpZiAoaG9va3Muc3VwcHJlc3NEZXByZWNhdGlvbldhcm5pbmdzID09PSBmYWxzZSAmJlxuICAgICAgICAgICAgKHR5cGVvZiBjb25zb2xlICE9PSAgJ3VuZGVmaW5lZCcpICYmIGNvbnNvbGUud2Fybikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ0RlcHJlY2F0aW9uIHdhcm5pbmc6ICcgKyBtc2cpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZGVwcmVjYXRlKG1zZywgZm4pIHtcbiAgICB2YXIgZmlyc3RUaW1lID0gdHJ1ZTtcblxuICAgIHJldHVybiBleHRlbmQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoaG9va3MuZGVwcmVjYXRpb25IYW5kbGVyICE9IG51bGwpIHtcbiAgICAgICAgICAgIGhvb2tzLmRlcHJlY2F0aW9uSGFuZGxlcihudWxsLCBtc2cpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaXJzdFRpbWUpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICB2YXIgYXJnO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBhcmcgPSAnJztcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1tpXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJnICs9ICdcXG5bJyArIGkgKyAnXSAnO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gYXJndW1lbnRzWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgKz0ga2V5ICsgJzogJyArIGFyZ3VtZW50c1swXVtrZXldICsgJywgJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcuc2xpY2UoMCwgLTIpOyAvLyBSZW1vdmUgdHJhaWxpbmcgY29tbWEgYW5kIHNwYWNlXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhcmdzLnB1c2goYXJnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdhcm4obXNnICsgJ1xcbkFyZ3VtZW50czogJyArIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3MpLmpvaW4oJycpICsgJ1xcbicgKyAobmV3IEVycm9yKCkpLnN0YWNrKTtcbiAgICAgICAgICAgIGZpcnN0VGltZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH0sIGZuKTtcbn1cblxudmFyIGRlcHJlY2F0aW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBkZXByZWNhdGVTaW1wbGUobmFtZSwgbXNnKSB7XG4gICAgaWYgKGhvb2tzLmRlcHJlY2F0aW9uSGFuZGxlciAhPSBudWxsKSB7XG4gICAgICAgIGhvb2tzLmRlcHJlY2F0aW9uSGFuZGxlcihuYW1lLCBtc2cpO1xuICAgIH1cbiAgICBpZiAoIWRlcHJlY2F0aW9uc1tuYW1lXSkge1xuICAgICAgICB3YXJuKG1zZyk7XG4gICAgICAgIGRlcHJlY2F0aW9uc1tuYW1lXSA9IHRydWU7XG4gICAgfVxufVxuXG5ob29rcy5zdXBwcmVzc0RlcHJlY2F0aW9uV2FybmluZ3MgPSBmYWxzZTtcbmhvb2tzLmRlcHJlY2F0aW9uSGFuZGxlciA9IG51bGw7XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oaW5wdXQpIHtcbiAgICByZXR1cm4gaW5wdXQgaW5zdGFuY2VvZiBGdW5jdGlvbiB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5wdXQpID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xufVxuXG5mdW5jdGlvbiBzZXQgKGNvbmZpZykge1xuICAgIHZhciBwcm9wLCBpO1xuICAgIGZvciAoaSBpbiBjb25maWcpIHtcbiAgICAgICAgcHJvcCA9IGNvbmZpZ1tpXTtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24ocHJvcCkpIHtcbiAgICAgICAgICAgIHRoaXNbaV0gPSBwcm9wO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpc1snXycgKyBpXSA9IHByb3A7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgIC8vIExlbmllbnQgb3JkaW5hbCBwYXJzaW5nIGFjY2VwdHMganVzdCBhIG51bWJlciBpbiBhZGRpdGlvbiB0b1xuICAgIC8vIG51bWJlciArIChwb3NzaWJseSkgc3R1ZmYgY29taW5nIGZyb20gX2RheU9mTW9udGhPcmRpbmFsUGFyc2UuXG4gICAgLy8gVE9ETzogUmVtb3ZlIFwib3JkaW5hbFBhcnNlXCIgZmFsbGJhY2sgaW4gbmV4dCBtYWpvciByZWxlYXNlLlxuICAgIHRoaXMuX2RheU9mTW9udGhPcmRpbmFsUGFyc2VMZW5pZW50ID0gbmV3IFJlZ0V4cChcbiAgICAgICAgKHRoaXMuX2RheU9mTW9udGhPcmRpbmFsUGFyc2Uuc291cmNlIHx8IHRoaXMuX29yZGluYWxQYXJzZS5zb3VyY2UpICtcbiAgICAgICAgICAgICd8JyArICgvXFxkezEsMn0vKS5zb3VyY2UpO1xufVxuXG5mdW5jdGlvbiBtZXJnZUNvbmZpZ3MocGFyZW50Q29uZmlnLCBjaGlsZENvbmZpZykge1xuICAgIHZhciByZXMgPSBleHRlbmQoe30sIHBhcmVudENvbmZpZyksIHByb3A7XG4gICAgZm9yIChwcm9wIGluIGNoaWxkQ29uZmlnKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wKGNoaWxkQ29uZmlnLCBwcm9wKSkge1xuICAgICAgICAgICAgaWYgKGlzT2JqZWN0KHBhcmVudENvbmZpZ1twcm9wXSkgJiYgaXNPYmplY3QoY2hpbGRDb25maWdbcHJvcF0pKSB7XG4gICAgICAgICAgICAgICAgcmVzW3Byb3BdID0ge307XG4gICAgICAgICAgICAgICAgZXh0ZW5kKHJlc1twcm9wXSwgcGFyZW50Q29uZmlnW3Byb3BdKTtcbiAgICAgICAgICAgICAgICBleHRlbmQocmVzW3Byb3BdLCBjaGlsZENvbmZpZ1twcm9wXSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoaWxkQ29uZmlnW3Byb3BdICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXNbcHJvcF0gPSBjaGlsZENvbmZpZ1twcm9wXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHJlc1twcm9wXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHByb3AgaW4gcGFyZW50Q29uZmlnKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wKHBhcmVudENvbmZpZywgcHJvcCkgJiZcbiAgICAgICAgICAgICAgICAhaGFzT3duUHJvcChjaGlsZENvbmZpZywgcHJvcCkgJiZcbiAgICAgICAgICAgICAgICBpc09iamVjdChwYXJlbnRDb25maWdbcHJvcF0pKSB7XG4gICAgICAgICAgICAvLyBtYWtlIHN1cmUgY2hhbmdlcyB0byBwcm9wZXJ0aWVzIGRvbid0IG1vZGlmeSBwYXJlbnQgY29uZmlnXG4gICAgICAgICAgICByZXNbcHJvcF0gPSBleHRlbmQoe30sIHJlc1twcm9wXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cblxuZnVuY3Rpb24gTG9jYWxlKGNvbmZpZykge1xuICAgIGlmIChjb25maWcgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnNldChjb25maWcpO1xuICAgIH1cbn1cblxudmFyIGtleXM7XG5cbmlmIChPYmplY3Qua2V5cykge1xuICAgIGtleXMgPSBPYmplY3Qua2V5cztcbn0gZWxzZSB7XG4gICAga2V5cyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgdmFyIGksIHJlcyA9IFtdO1xuICAgICAgICBmb3IgKGkgaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duUHJvcChvYmosIGkpKSB7XG4gICAgICAgICAgICAgICAgcmVzLnB1c2goaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xufVxuXG52YXIga2V5cyQxID0ga2V5cztcblxudmFyIGRlZmF1bHRDYWxlbmRhciA9IHtcbiAgICBzYW1lRGF5IDogJ1tUb2RheSBhdF0gTFQnLFxuICAgIG5leHREYXkgOiAnW1RvbW9ycm93IGF0XSBMVCcsXG4gICAgbmV4dFdlZWsgOiAnZGRkZCBbYXRdIExUJyxcbiAgICBsYXN0RGF5IDogJ1tZZXN0ZXJkYXkgYXRdIExUJyxcbiAgICBsYXN0V2VlayA6ICdbTGFzdF0gZGRkZCBbYXRdIExUJyxcbiAgICBzYW1lRWxzZSA6ICdMJ1xufTtcblxuZnVuY3Rpb24gY2FsZW5kYXIgKGtleSwgbW9tLCBub3cpIHtcbiAgICB2YXIgb3V0cHV0ID0gdGhpcy5fY2FsZW5kYXJba2V5XSB8fCB0aGlzLl9jYWxlbmRhclsnc2FtZUVsc2UnXTtcbiAgICByZXR1cm4gaXNGdW5jdGlvbihvdXRwdXQpID8gb3V0cHV0LmNhbGwobW9tLCBub3cpIDogb3V0cHV0O1xufVxuXG52YXIgZGVmYXVsdExvbmdEYXRlRm9ybWF0ID0ge1xuICAgIExUUyAgOiAnaDptbTpzcyBBJyxcbiAgICBMVCAgIDogJ2g6bW0gQScsXG4gICAgTCAgICA6ICdNTS9ERC9ZWVlZJyxcbiAgICBMTCAgIDogJ01NTU0gRCwgWVlZWScsXG4gICAgTExMICA6ICdNTU1NIEQsIFlZWVkgaDptbSBBJyxcbiAgICBMTExMIDogJ2RkZGQsIE1NTU0gRCwgWVlZWSBoOm1tIEEnXG59O1xuXG5mdW5jdGlvbiBsb25nRGF0ZUZvcm1hdCAoa2V5KSB7XG4gICAgdmFyIGZvcm1hdCA9IHRoaXMuX2xvbmdEYXRlRm9ybWF0W2tleV0sXG4gICAgICAgIGZvcm1hdFVwcGVyID0gdGhpcy5fbG9uZ0RhdGVGb3JtYXRba2V5LnRvVXBwZXJDYXNlKCldO1xuXG4gICAgaWYgKGZvcm1hdCB8fCAhZm9ybWF0VXBwZXIpIHtcbiAgICAgICAgcmV0dXJuIGZvcm1hdDtcbiAgICB9XG5cbiAgICB0aGlzLl9sb25nRGF0ZUZvcm1hdFtrZXldID0gZm9ybWF0VXBwZXIucmVwbGFjZSgvTU1NTXxNTXxERHxkZGRkL2csIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbC5zbGljZSgxKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLl9sb25nRGF0ZUZvcm1hdFtrZXldO1xufVxuXG52YXIgZGVmYXVsdEludmFsaWREYXRlID0gJ0ludmFsaWQgZGF0ZSc7XG5cbmZ1bmN0aW9uIGludmFsaWREYXRlICgpIHtcbiAgICByZXR1cm4gdGhpcy5faW52YWxpZERhdGU7XG59XG5cbnZhciBkZWZhdWx0T3JkaW5hbCA9ICclZCc7XG52YXIgZGVmYXVsdERheU9mTW9udGhPcmRpbmFsUGFyc2UgPSAvXFxkezEsMn0vO1xuXG5mdW5jdGlvbiBvcmRpbmFsIChudW1iZXIpIHtcbiAgICByZXR1cm4gdGhpcy5fb3JkaW5hbC5yZXBsYWNlKCclZCcsIG51bWJlcik7XG59XG5cbnZhciBkZWZhdWx0UmVsYXRpdmVUaW1lID0ge1xuICAgIGZ1dHVyZSA6ICdpbiAlcycsXG4gICAgcGFzdCAgIDogJyVzIGFnbycsXG4gICAgcyAgOiAnYSBmZXcgc2Vjb25kcycsXG4gICAgc3MgOiAnJWQgc2Vjb25kcycsXG4gICAgbSAgOiAnYSBtaW51dGUnLFxuICAgIG1tIDogJyVkIG1pbnV0ZXMnLFxuICAgIGggIDogJ2FuIGhvdXInLFxuICAgIGhoIDogJyVkIGhvdXJzJyxcbiAgICBkICA6ICdhIGRheScsXG4gICAgZGQgOiAnJWQgZGF5cycsXG4gICAgTSAgOiAnYSBtb250aCcsXG4gICAgTU0gOiAnJWQgbW9udGhzJyxcbiAgICB5ICA6ICdhIHllYXInLFxuICAgIHl5IDogJyVkIHllYXJzJ1xufTtcblxuZnVuY3Rpb24gcmVsYXRpdmVUaW1lIChudW1iZXIsIHdpdGhvdXRTdWZmaXgsIHN0cmluZywgaXNGdXR1cmUpIHtcbiAgICB2YXIgb3V0cHV0ID0gdGhpcy5fcmVsYXRpdmVUaW1lW3N0cmluZ107XG4gICAgcmV0dXJuIChpc0Z1bmN0aW9uKG91dHB1dCkpID9cbiAgICAgICAgb3V0cHV0KG51bWJlciwgd2l0aG91dFN1ZmZpeCwgc3RyaW5nLCBpc0Z1dHVyZSkgOlxuICAgICAgICBvdXRwdXQucmVwbGFjZSgvJWQvaSwgbnVtYmVyKTtcbn1cblxuZnVuY3Rpb24gcGFzdEZ1dHVyZSAoZGlmZiwgb3V0cHV0KSB7XG4gICAgdmFyIGZvcm1hdCA9IHRoaXMuX3JlbGF0aXZlVGltZVtkaWZmID4gMCA/ICdmdXR1cmUnIDogJ3Bhc3QnXTtcbiAgICByZXR1cm4gaXNGdW5jdGlvbihmb3JtYXQpID8gZm9ybWF0KG91dHB1dCkgOiBmb3JtYXQucmVwbGFjZSgvJXMvaSwgb3V0cHV0KTtcbn1cblxudmFyIGFsaWFzZXMgPSB7fTtcblxuZnVuY3Rpb24gYWRkVW5pdEFsaWFzICh1bml0LCBzaG9ydGhhbmQpIHtcbiAgICB2YXIgbG93ZXJDYXNlID0gdW5pdC50b0xvd2VyQ2FzZSgpO1xuICAgIGFsaWFzZXNbbG93ZXJDYXNlXSA9IGFsaWFzZXNbbG93ZXJDYXNlICsgJ3MnXSA9IGFsaWFzZXNbc2hvcnRoYW5kXSA9IHVuaXQ7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVVuaXRzKHVuaXRzKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB1bml0cyA9PT0gJ3N0cmluZycgPyBhbGlhc2VzW3VuaXRzXSB8fCBhbGlhc2VzW3VuaXRzLnRvTG93ZXJDYXNlKCldIDogdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVPYmplY3RVbml0cyhpbnB1dE9iamVjdCkge1xuICAgIHZhciBub3JtYWxpemVkSW5wdXQgPSB7fSxcbiAgICAgICAgbm9ybWFsaXplZFByb3AsXG4gICAgICAgIHByb3A7XG5cbiAgICBmb3IgKHByb3AgaW4gaW5wdXRPYmplY3QpIHtcbiAgICAgICAgaWYgKGhhc093blByb3AoaW5wdXRPYmplY3QsIHByb3ApKSB7XG4gICAgICAgICAgICBub3JtYWxpemVkUHJvcCA9IG5vcm1hbGl6ZVVuaXRzKHByb3ApO1xuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRQcm9wKSB7XG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZElucHV0W25vcm1hbGl6ZWRQcm9wXSA9IGlucHV0T2JqZWN0W3Byb3BdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vcm1hbGl6ZWRJbnB1dDtcbn1cblxudmFyIHByaW9yaXRpZXMgPSB7fTtcblxuZnVuY3Rpb24gYWRkVW5pdFByaW9yaXR5KHVuaXQsIHByaW9yaXR5KSB7XG4gICAgcHJpb3JpdGllc1t1bml0XSA9IHByaW9yaXR5O1xufVxuXG5mdW5jdGlvbiBnZXRQcmlvcml0aXplZFVuaXRzKHVuaXRzT2JqKSB7XG4gICAgdmFyIHVuaXRzID0gW107XG4gICAgZm9yICh2YXIgdSBpbiB1bml0c09iaikge1xuICAgICAgICB1bml0cy5wdXNoKHt1bml0OiB1LCBwcmlvcml0eTogcHJpb3JpdGllc1t1XX0pO1xuICAgIH1cbiAgICB1bml0cy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhLnByaW9yaXR5IC0gYi5wcmlvcml0eTtcbiAgICB9KTtcbiAgICByZXR1cm4gdW5pdHM7XG59XG5cbmZ1bmN0aW9uIG1ha2VHZXRTZXQgKHVuaXQsIGtlZXBUaW1lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgc2V0JDEodGhpcywgdW5pdCwgdmFsdWUpO1xuICAgICAgICAgICAgaG9va3MudXBkYXRlT2Zmc2V0KHRoaXMsIGtlZXBUaW1lKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGdldCh0aGlzLCB1bml0KTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGdldCAobW9tLCB1bml0KSB7XG4gICAgcmV0dXJuIG1vbS5pc1ZhbGlkKCkgP1xuICAgICAgICBtb20uX2RbJ2dldCcgKyAobW9tLl9pc1VUQyA/ICdVVEMnIDogJycpICsgdW5pdF0oKSA6IE5hTjtcbn1cblxuZnVuY3Rpb24gc2V0JDEgKG1vbSwgdW5pdCwgdmFsdWUpIHtcbiAgICBpZiAobW9tLmlzVmFsaWQoKSkge1xuICAgICAgICBtb20uX2RbJ3NldCcgKyAobW9tLl9pc1VUQyA/ICdVVEMnIDogJycpICsgdW5pdF0odmFsdWUpO1xuICAgIH1cbn1cblxuLy8gTU9NRU5UU1xuXG5mdW5jdGlvbiBzdHJpbmdHZXQgKHVuaXRzKSB7XG4gICAgdW5pdHMgPSBub3JtYWxpemVVbml0cyh1bml0cyk7XG4gICAgaWYgKGlzRnVuY3Rpb24odGhpc1t1bml0c10pKSB7XG4gICAgICAgIHJldHVybiB0aGlzW3VuaXRzXSgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn1cblxuXG5mdW5jdGlvbiBzdHJpbmdTZXQgKHVuaXRzLCB2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdW5pdHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHVuaXRzID0gbm9ybWFsaXplT2JqZWN0VW5pdHModW5pdHMpO1xuICAgICAgICB2YXIgcHJpb3JpdGl6ZWQgPSBnZXRQcmlvcml0aXplZFVuaXRzKHVuaXRzKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmlvcml0aXplZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpc1twcmlvcml0aXplZFtpXS51bml0XSh1bml0c1twcmlvcml0aXplZFtpXS51bml0XSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB1bml0cyA9IG5vcm1hbGl6ZVVuaXRzKHVuaXRzKTtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpc1t1bml0c10pKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1t1bml0c10odmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiB6ZXJvRmlsbChudW1iZXIsIHRhcmdldExlbmd0aCwgZm9yY2VTaWduKSB7XG4gICAgdmFyIGFic051bWJlciA9ICcnICsgTWF0aC5hYnMobnVtYmVyKSxcbiAgICAgICAgemVyb3NUb0ZpbGwgPSB0YXJnZXRMZW5ndGggLSBhYnNOdW1iZXIubGVuZ3RoLFxuICAgICAgICBzaWduID0gbnVtYmVyID49IDA7XG4gICAgcmV0dXJuIChzaWduID8gKGZvcmNlU2lnbiA/ICcrJyA6ICcnKSA6ICctJykgK1xuICAgICAgICBNYXRoLnBvdygxMCwgTWF0aC5tYXgoMCwgemVyb3NUb0ZpbGwpKS50b1N0cmluZygpLnN1YnN0cigxKSArIGFic051bWJlcjtcbn1cblxudmFyIGZvcm1hdHRpbmdUb2tlbnMgPSAvKFxcW1teXFxbXSpcXF0pfChcXFxcKT8oW0hoXW1tKHNzKT98TW98TU0/TT9NP3xEb3xERERvfEREP0Q/RD98ZGRkP2Q/fGRvP3x3W298d10/fFdbb3xXXT98UW8/fFlZWVlZWXxZWVlZWXxZWVlZfFlZfGdnKGdnZz8pP3xHRyhHR0c/KT98ZXxFfGF8QXxoaD98SEg/fGtrP3xtbT98c3M/fFN7MSw5fXx4fFh8eno/fFpaP3wuKS9nO1xuXG52YXIgbG9jYWxGb3JtYXR0aW5nVG9rZW5zID0gLyhcXFtbXlxcW10qXFxdKXwoXFxcXCk/KExUU3xMVHxMTD9MP0w/fGx7MSw0fSkvZztcblxudmFyIGZvcm1hdEZ1bmN0aW9ucyA9IHt9O1xuXG52YXIgZm9ybWF0VG9rZW5GdW5jdGlvbnMgPSB7fTtcblxuLy8gdG9rZW46ICAgICdNJ1xuLy8gcGFkZGVkOiAgIFsnTU0nLCAyXVxuLy8gb3JkaW5hbDogICdNbydcbi8vIGNhbGxiYWNrOiBmdW5jdGlvbiAoKSB7IHRoaXMubW9udGgoKSArIDEgfVxuZnVuY3Rpb24gYWRkRm9ybWF0VG9rZW4gKHRva2VuLCBwYWRkZWQsIG9yZGluYWwsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGZ1bmMgPSBjYWxsYmFjaztcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnc3RyaW5nJykge1xuICAgICAgICBmdW5jID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNbY2FsbGJhY2tdKCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICh0b2tlbikge1xuICAgICAgICBmb3JtYXRUb2tlbkZ1bmN0aW9uc1t0b2tlbl0gPSBmdW5jO1xuICAgIH1cbiAgICBpZiAocGFkZGVkKSB7XG4gICAgICAgIGZvcm1hdFRva2VuRnVuY3Rpb25zW3BhZGRlZFswXV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gemVyb0ZpbGwoZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCBwYWRkZWRbMV0sIHBhZGRlZFsyXSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChvcmRpbmFsKSB7XG4gICAgICAgIGZvcm1hdFRva2VuRnVuY3Rpb25zW29yZGluYWxdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm9yZGluYWwoZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCB0b2tlbik7XG4gICAgICAgIH07XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVGb3JtYXR0aW5nVG9rZW5zKGlucHV0KSB7XG4gICAgaWYgKGlucHV0Lm1hdGNoKC9cXFtbXFxzXFxTXS8pKSB7XG4gICAgICAgIHJldHVybiBpbnB1dC5yZXBsYWNlKC9eXFxbfFxcXSQvZywgJycpO1xuICAgIH1cbiAgICByZXR1cm4gaW5wdXQucmVwbGFjZSgvXFxcXC9nLCAnJyk7XG59XG5cbmZ1bmN0aW9uIG1ha2VGb3JtYXRGdW5jdGlvbihmb3JtYXQpIHtcbiAgICB2YXIgYXJyYXkgPSBmb3JtYXQubWF0Y2goZm9ybWF0dGluZ1Rva2VucyksIGksIGxlbmd0aDtcblxuICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChmb3JtYXRUb2tlbkZ1bmN0aW9uc1thcnJheVtpXV0pIHtcbiAgICAgICAgICAgIGFycmF5W2ldID0gZm9ybWF0VG9rZW5GdW5jdGlvbnNbYXJyYXlbaV1dO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXJyYXlbaV0gPSByZW1vdmVGb3JtYXR0aW5nVG9rZW5zKGFycmF5W2ldKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAobW9tKSB7XG4gICAgICAgIHZhciBvdXRwdXQgPSAnJywgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBvdXRwdXQgKz0gaXNGdW5jdGlvbihhcnJheVtpXSkgPyBhcnJheVtpXS5jYWxsKG1vbSwgZm9ybWF0KSA6IGFycmF5W2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfTtcbn1cblxuLy8gZm9ybWF0IGRhdGUgdXNpbmcgbmF0aXZlIGRhdGUgb2JqZWN0XG5mdW5jdGlvbiBmb3JtYXRNb21lbnQobSwgZm9ybWF0KSB7XG4gICAgaWYgKCFtLmlzVmFsaWQoKSkge1xuICAgICAgICByZXR1cm4gbS5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKTtcbiAgICB9XG5cbiAgICBmb3JtYXQgPSBleHBhbmRGb3JtYXQoZm9ybWF0LCBtLmxvY2FsZURhdGEoKSk7XG4gICAgZm9ybWF0RnVuY3Rpb25zW2Zvcm1hdF0gPSBmb3JtYXRGdW5jdGlvbnNbZm9ybWF0XSB8fCBtYWtlRm9ybWF0RnVuY3Rpb24oZm9ybWF0KTtcblxuICAgIHJldHVybiBmb3JtYXRGdW5jdGlvbnNbZm9ybWF0XShtKTtcbn1cblxuZnVuY3Rpb24gZXhwYW5kRm9ybWF0KGZvcm1hdCwgbG9jYWxlKSB7XG4gICAgdmFyIGkgPSA1O1xuXG4gICAgZnVuY3Rpb24gcmVwbGFjZUxvbmdEYXRlRm9ybWF0VG9rZW5zKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBsb2NhbGUubG9uZ0RhdGVGb3JtYXQoaW5wdXQpIHx8IGlucHV0O1xuICAgIH1cblxuICAgIGxvY2FsRm9ybWF0dGluZ1Rva2Vucy5sYXN0SW5kZXggPSAwO1xuICAgIHdoaWxlIChpID49IDAgJiYgbG9jYWxGb3JtYXR0aW5nVG9rZW5zLnRlc3QoZm9ybWF0KSkge1xuICAgICAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZShsb2NhbEZvcm1hdHRpbmdUb2tlbnMsIHJlcGxhY2VMb25nRGF0ZUZvcm1hdFRva2Vucyk7XG4gICAgICAgIGxvY2FsRm9ybWF0dGluZ1Rva2Vucy5sYXN0SW5kZXggPSAwO1xuICAgICAgICBpIC09IDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvcm1hdDtcbn1cblxudmFyIG1hdGNoMSAgICAgICAgID0gL1xcZC87ICAgICAgICAgICAgLy8gICAgICAgMCAtIDlcbnZhciBtYXRjaDIgICAgICAgICA9IC9cXGRcXGQvOyAgICAgICAgICAvLyAgICAgIDAwIC0gOTlcbnZhciBtYXRjaDMgICAgICAgICA9IC9cXGR7M30vOyAgICAgICAgIC8vICAgICAwMDAgLSA5OTlcbnZhciBtYXRjaDQgICAgICAgICA9IC9cXGR7NH0vOyAgICAgICAgIC8vICAgIDAwMDAgLSA5OTk5XG52YXIgbWF0Y2g2ICAgICAgICAgPSAvWystXT9cXGR7Nn0vOyAgICAvLyAtOTk5OTk5IC0gOTk5OTk5XG52YXIgbWF0Y2gxdG8yICAgICAgPSAvXFxkXFxkPy87ICAgICAgICAgLy8gICAgICAgMCAtIDk5XG52YXIgbWF0Y2gzdG80ICAgICAgPSAvXFxkXFxkXFxkXFxkPy87ICAgICAvLyAgICAgOTk5IC0gOTk5OVxudmFyIG1hdGNoNXRvNiAgICAgID0gL1xcZFxcZFxcZFxcZFxcZFxcZD8vOyAvLyAgIDk5OTk5IC0gOTk5OTk5XG52YXIgbWF0Y2gxdG8zICAgICAgPSAvXFxkezEsM30vOyAgICAgICAvLyAgICAgICAwIC0gOTk5XG52YXIgbWF0Y2gxdG80ICAgICAgPSAvXFxkezEsNH0vOyAgICAgICAvLyAgICAgICAwIC0gOTk5OVxudmFyIG1hdGNoMXRvNiAgICAgID0gL1srLV0/XFxkezEsNn0vOyAgLy8gLTk5OTk5OSAtIDk5OTk5OVxuXG52YXIgbWF0Y2hVbnNpZ25lZCAgPSAvXFxkKy87ICAgICAgICAgICAvLyAgICAgICAwIC0gaW5mXG52YXIgbWF0Y2hTaWduZWQgICAgPSAvWystXT9cXGQrLzsgICAgICAvLyAgICAtaW5mIC0gaW5mXG5cbnZhciBtYXRjaE9mZnNldCAgICA9IC9afFsrLV1cXGRcXGQ6P1xcZFxcZC9naTsgLy8gKzAwOjAwIC0wMDowMCArMDAwMCAtMDAwMCBvciBaXG52YXIgbWF0Y2hTaG9ydE9mZnNldCA9IC9afFsrLV1cXGRcXGQoPzo6P1xcZFxcZCk/L2dpOyAvLyArMDAgLTAwICswMDowMCAtMDA6MDAgKzAwMDAgLTAwMDAgb3IgWlxuXG52YXIgbWF0Y2hUaW1lc3RhbXAgPSAvWystXT9cXGQrKFxcLlxcZHsxLDN9KT8vOyAvLyAxMjM0NTY3ODkgMTIzNDU2Nzg5LjEyM1xuXG4vLyBhbnkgd29yZCAob3IgdHdvKSBjaGFyYWN0ZXJzIG9yIG51bWJlcnMgaW5jbHVkaW5nIHR3by90aHJlZSB3b3JkIG1vbnRoIGluIGFyYWJpYy5cbi8vIGluY2x1ZGVzIHNjb3R0aXNoIGdhZWxpYyB0d28gd29yZCBhbmQgaHlwaGVuYXRlZCBtb250aHNcbnZhciBtYXRjaFdvcmQgPSAvWzAtOV0qWydhLXpcXHUwMEEwLVxcdTA1RkZcXHUwNzAwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdK3xbXFx1MDYwMC1cXHUwNkZGXFwvXSsoXFxzKj9bXFx1MDYwMC1cXHUwNkZGXSspezEsMn0vaTtcblxuXG52YXIgcmVnZXhlcyA9IHt9O1xuXG5mdW5jdGlvbiBhZGRSZWdleFRva2VuICh0b2tlbiwgcmVnZXgsIHN0cmljdFJlZ2V4KSB7XG4gICAgcmVnZXhlc1t0b2tlbl0gPSBpc0Z1bmN0aW9uKHJlZ2V4KSA/IHJlZ2V4IDogZnVuY3Rpb24gKGlzU3RyaWN0LCBsb2NhbGVEYXRhKSB7XG4gICAgICAgIHJldHVybiAoaXNTdHJpY3QgJiYgc3RyaWN0UmVnZXgpID8gc3RyaWN0UmVnZXggOiByZWdleDtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBnZXRQYXJzZVJlZ2V4Rm9yVG9rZW4gKHRva2VuLCBjb25maWcpIHtcbiAgICBpZiAoIWhhc093blByb3AocmVnZXhlcywgdG9rZW4pKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVnRXhwKHVuZXNjYXBlRm9ybWF0KHRva2VuKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlZ2V4ZXNbdG9rZW5dKGNvbmZpZy5fc3RyaWN0LCBjb25maWcuX2xvY2FsZSk7XG59XG5cbi8vIENvZGUgZnJvbSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM1NjE0OTMvaXMtdGhlcmUtYS1yZWdleHAtZXNjYXBlLWZ1bmN0aW9uLWluLWphdmFzY3JpcHRcbmZ1bmN0aW9uIHVuZXNjYXBlRm9ybWF0KHMpIHtcbiAgICByZXR1cm4gcmVnZXhFc2NhcGUocy5yZXBsYWNlKCdcXFxcJywgJycpLnJlcGxhY2UoL1xcXFwoXFxbKXxcXFxcKFxcXSl8XFxbKFteXFxdXFxbXSopXFxdfFxcXFwoLikvZywgZnVuY3Rpb24gKG1hdGNoZWQsIHAxLCBwMiwgcDMsIHA0KSB7XG4gICAgICAgIHJldHVybiBwMSB8fCBwMiB8fCBwMyB8fCBwNDtcbiAgICB9KSk7XG59XG5cbmZ1bmN0aW9uIHJlZ2V4RXNjYXBlKHMpIHtcbiAgICByZXR1cm4gcy5yZXBsYWNlKC9bLVxcL1xcXFxeJCorPy4oKXxbXFxde31dL2csICdcXFxcJCYnKTtcbn1cblxudmFyIHRva2VucyA9IHt9O1xuXG5mdW5jdGlvbiBhZGRQYXJzZVRva2VuICh0b2tlbiwgY2FsbGJhY2spIHtcbiAgICB2YXIgaSwgZnVuYyA9IGNhbGxiYWNrO1xuICAgIGlmICh0eXBlb2YgdG9rZW4gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRva2VuID0gW3Rva2VuXTtcbiAgICB9XG4gICAgaWYgKGlzTnVtYmVyKGNhbGxiYWNrKSkge1xuICAgICAgICBmdW5jID0gZnVuY3Rpb24gKGlucHV0LCBhcnJheSkge1xuICAgICAgICAgICAgYXJyYXlbY2FsbGJhY2tdID0gdG9JbnQoaW5wdXQpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBmb3IgKGkgPSAwOyBpIDwgdG9rZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdG9rZW5zW3Rva2VuW2ldXSA9IGZ1bmM7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhZGRXZWVrUGFyc2VUb2tlbiAodG9rZW4sIGNhbGxiYWNrKSB7XG4gICAgYWRkUGFyc2VUb2tlbih0b2tlbiwgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnLCB0b2tlbikge1xuICAgICAgICBjb25maWcuX3cgPSBjb25maWcuX3cgfHwge307XG4gICAgICAgIGNhbGxiYWNrKGlucHV0LCBjb25maWcuX3csIGNvbmZpZywgdG9rZW4pO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBhZGRUaW1lVG9BcnJheUZyb21Ub2tlbih0b2tlbiwgaW5wdXQsIGNvbmZpZykge1xuICAgIGlmIChpbnB1dCAhPSBudWxsICYmIGhhc093blByb3AodG9rZW5zLCB0b2tlbikpIHtcbiAgICAgICAgdG9rZW5zW3Rva2VuXShpbnB1dCwgY29uZmlnLl9hLCBjb25maWcsIHRva2VuKTtcbiAgICB9XG59XG5cbnZhciBZRUFSID0gMDtcbnZhciBNT05USCA9IDE7XG52YXIgREFURSA9IDI7XG52YXIgSE9VUiA9IDM7XG52YXIgTUlOVVRFID0gNDtcbnZhciBTRUNPTkQgPSA1O1xudmFyIE1JTExJU0VDT05EID0gNjtcbnZhciBXRUVLID0gNztcbnZhciBXRUVLREFZID0gODtcblxudmFyIGluZGV4T2Y7XG5cbmlmIChBcnJheS5wcm90b3R5cGUuaW5kZXhPZikge1xuICAgIGluZGV4T2YgPSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZjtcbn0gZWxzZSB7XG4gICAgaW5kZXhPZiA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIC8vIEkga25vd1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmICh0aGlzW2ldID09PSBvKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH07XG59XG5cbnZhciBpbmRleE9mJDEgPSBpbmRleE9mO1xuXG5mdW5jdGlvbiBkYXlzSW5Nb250aCh5ZWFyLCBtb250aCkge1xuICAgIHJldHVybiBuZXcgRGF0ZShEYXRlLlVUQyh5ZWFyLCBtb250aCArIDEsIDApKS5nZXRVVENEYXRlKCk7XG59XG5cbi8vIEZPUk1BVFRJTkdcblxuYWRkRm9ybWF0VG9rZW4oJ00nLCBbJ01NJywgMl0sICdNbycsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5tb250aCgpICsgMTtcbn0pO1xuXG5hZGRGb3JtYXRUb2tlbignTU1NJywgMCwgMCwgZnVuY3Rpb24gKGZvcm1hdCkge1xuICAgIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS5tb250aHNTaG9ydCh0aGlzLCBmb3JtYXQpO1xufSk7XG5cbmFkZEZvcm1hdFRva2VuKCdNTU1NJywgMCwgMCwgZnVuY3Rpb24gKGZvcm1hdCkge1xuICAgIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS5tb250aHModGhpcywgZm9ybWF0KTtcbn0pO1xuXG4vLyBBTElBU0VTXG5cbmFkZFVuaXRBbGlhcygnbW9udGgnLCAnTScpO1xuXG4vLyBQUklPUklUWVxuXG5hZGRVbml0UHJpb3JpdHkoJ21vbnRoJywgOCk7XG5cbi8vIFBBUlNJTkdcblxuYWRkUmVnZXhUb2tlbignTScsICAgIG1hdGNoMXRvMik7XG5hZGRSZWdleFRva2VuKCdNTScsICAgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuYWRkUmVnZXhUb2tlbignTU1NJywgIGZ1bmN0aW9uIChpc1N0cmljdCwgbG9jYWxlKSB7XG4gICAgcmV0dXJuIGxvY2FsZS5tb250aHNTaG9ydFJlZ2V4KGlzU3RyaWN0KTtcbn0pO1xuYWRkUmVnZXhUb2tlbignTU1NTScsIGZ1bmN0aW9uIChpc1N0cmljdCwgbG9jYWxlKSB7XG4gICAgcmV0dXJuIGxvY2FsZS5tb250aHNSZWdleChpc1N0cmljdCk7XG59KTtcblxuYWRkUGFyc2VUb2tlbihbJ00nLCAnTU0nXSwgZnVuY3Rpb24gKGlucHV0LCBhcnJheSkge1xuICAgIGFycmF5W01PTlRIXSA9IHRvSW50KGlucHV0KSAtIDE7XG59KTtcblxuYWRkUGFyc2VUb2tlbihbJ01NTScsICdNTU1NJ10sIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZywgdG9rZW4pIHtcbiAgICB2YXIgbW9udGggPSBjb25maWcuX2xvY2FsZS5tb250aHNQYXJzZShpbnB1dCwgdG9rZW4sIGNvbmZpZy5fc3RyaWN0KTtcbiAgICAvLyBpZiB3ZSBkaWRuJ3QgZmluZCBhIG1vbnRoIG5hbWUsIG1hcmsgdGhlIGRhdGUgYXMgaW52YWxpZC5cbiAgICBpZiAobW9udGggIT0gbnVsbCkge1xuICAgICAgICBhcnJheVtNT05USF0gPSBtb250aDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5pbnZhbGlkTW9udGggPSBpbnB1dDtcbiAgICB9XG59KTtcblxuLy8gTE9DQUxFU1xuXG52YXIgTU9OVEhTX0lOX0ZPUk1BVCA9IC9EW29EXT8oXFxbW15cXFtcXF1dKlxcXXxcXHMpK01NTU0/LztcbnZhciBkZWZhdWx0TG9jYWxlTW9udGhzID0gJ0phbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXInLnNwbGl0KCdfJyk7XG5mdW5jdGlvbiBsb2NhbGVNb250aHMgKG0sIGZvcm1hdCkge1xuICAgIGlmICghbSkge1xuICAgICAgICByZXR1cm4gaXNBcnJheSh0aGlzLl9tb250aHMpID8gdGhpcy5fbW9udGhzIDpcbiAgICAgICAgICAgIHRoaXMuX21vbnRoc1snc3RhbmRhbG9uZSddO1xuICAgIH1cbiAgICByZXR1cm4gaXNBcnJheSh0aGlzLl9tb250aHMpID8gdGhpcy5fbW9udGhzW20ubW9udGgoKV0gOlxuICAgICAgICB0aGlzLl9tb250aHNbKHRoaXMuX21vbnRocy5pc0Zvcm1hdCB8fCBNT05USFNfSU5fRk9STUFUKS50ZXN0KGZvcm1hdCkgPyAnZm9ybWF0JyA6ICdzdGFuZGFsb25lJ11bbS5tb250aCgpXTtcbn1cblxudmFyIGRlZmF1bHRMb2NhbGVNb250aHNTaG9ydCA9ICdKYW5fRmViX01hcl9BcHJfTWF5X0p1bl9KdWxfQXVnX1NlcF9PY3RfTm92X0RlYycuc3BsaXQoJ18nKTtcbmZ1bmN0aW9uIGxvY2FsZU1vbnRoc1Nob3J0IChtLCBmb3JtYXQpIHtcbiAgICBpZiAoIW0pIHtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkodGhpcy5fbW9udGhzU2hvcnQpID8gdGhpcy5fbW9udGhzU2hvcnQgOlxuICAgICAgICAgICAgdGhpcy5fbW9udGhzU2hvcnRbJ3N0YW5kYWxvbmUnXTtcbiAgICB9XG4gICAgcmV0dXJuIGlzQXJyYXkodGhpcy5fbW9udGhzU2hvcnQpID8gdGhpcy5fbW9udGhzU2hvcnRbbS5tb250aCgpXSA6XG4gICAgICAgIHRoaXMuX21vbnRoc1Nob3J0W01PTlRIU19JTl9GT1JNQVQudGVzdChmb3JtYXQpID8gJ2Zvcm1hdCcgOiAnc3RhbmRhbG9uZSddW20ubW9udGgoKV07XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVN0cmljdFBhcnNlKG1vbnRoTmFtZSwgZm9ybWF0LCBzdHJpY3QpIHtcbiAgICB2YXIgaSwgaWksIG1vbSwgbGxjID0gbW9udGhOYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gICAgaWYgKCF0aGlzLl9tb250aHNQYXJzZSkge1xuICAgICAgICAvLyB0aGlzIGlzIG5vdCB1c2VkXG4gICAgICAgIHRoaXMuX21vbnRoc1BhcnNlID0gW107XG4gICAgICAgIHRoaXMuX2xvbmdNb250aHNQYXJzZSA9IFtdO1xuICAgICAgICB0aGlzLl9zaG9ydE1vbnRoc1BhcnNlID0gW107XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCAxMjsgKytpKSB7XG4gICAgICAgICAgICBtb20gPSBjcmVhdGVVVEMoWzIwMDAsIGldKTtcbiAgICAgICAgICAgIHRoaXMuX3Nob3J0TW9udGhzUGFyc2VbaV0gPSB0aGlzLm1vbnRoc1Nob3J0KG1vbSwgJycpLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB0aGlzLl9sb25nTW9udGhzUGFyc2VbaV0gPSB0aGlzLm1vbnRocyhtb20sICcnKS50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN0cmljdCkge1xuICAgICAgICBpZiAoZm9ybWF0ID09PSAnTU1NJykge1xuICAgICAgICAgICAgaWkgPSBpbmRleE9mJDEuY2FsbCh0aGlzLl9zaG9ydE1vbnRoc1BhcnNlLCBsbGMpO1xuICAgICAgICAgICAgcmV0dXJuIGlpICE9PSAtMSA/IGlpIDogbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlpID0gaW5kZXhPZiQxLmNhbGwodGhpcy5fbG9uZ01vbnRoc1BhcnNlLCBsbGMpO1xuICAgICAgICAgICAgcmV0dXJuIGlpICE9PSAtMSA/IGlpIDogbnVsbDtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChmb3JtYXQgPT09ICdNTU0nKSB7XG4gICAgICAgICAgICBpaSA9IGluZGV4T2YkMS5jYWxsKHRoaXMuX3Nob3J0TW9udGhzUGFyc2UsIGxsYyk7XG4gICAgICAgICAgICBpZiAoaWkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWkgPSBpbmRleE9mJDEuY2FsbCh0aGlzLl9sb25nTW9udGhzUGFyc2UsIGxsYyk7XG4gICAgICAgICAgICByZXR1cm4gaWkgIT09IC0xID8gaWkgOiBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWkgPSBpbmRleE9mJDEuY2FsbCh0aGlzLl9sb25nTW9udGhzUGFyc2UsIGxsYyk7XG4gICAgICAgICAgICBpZiAoaWkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWkgPSBpbmRleE9mJDEuY2FsbCh0aGlzLl9zaG9ydE1vbnRoc1BhcnNlLCBsbGMpO1xuICAgICAgICAgICAgcmV0dXJuIGlpICE9PSAtMSA/IGlpIDogbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gbG9jYWxlTW9udGhzUGFyc2UgKG1vbnRoTmFtZSwgZm9ybWF0LCBzdHJpY3QpIHtcbiAgICB2YXIgaSwgbW9tLCByZWdleDtcblxuICAgIGlmICh0aGlzLl9tb250aHNQYXJzZUV4YWN0KSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVTdHJpY3RQYXJzZS5jYWxsKHRoaXMsIG1vbnRoTmFtZSwgZm9ybWF0LCBzdHJpY3QpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fbW9udGhzUGFyc2UpIHtcbiAgICAgICAgdGhpcy5fbW9udGhzUGFyc2UgPSBbXTtcbiAgICAgICAgdGhpcy5fbG9uZ01vbnRoc1BhcnNlID0gW107XG4gICAgICAgIHRoaXMuX3Nob3J0TW9udGhzUGFyc2UgPSBbXTtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBhZGQgc29ydGluZ1xuICAgIC8vIFNvcnRpbmcgbWFrZXMgc3VyZSBpZiBvbmUgbW9udGggKG9yIGFiYnIpIGlzIGEgcHJlZml4IG9mIGFub3RoZXJcbiAgICAvLyBzZWUgc29ydGluZyBpbiBjb21wdXRlTW9udGhzUGFyc2VcbiAgICBmb3IgKGkgPSAwOyBpIDwgMTI7IGkrKykge1xuICAgICAgICAvLyBtYWtlIHRoZSByZWdleCBpZiB3ZSBkb24ndCBoYXZlIGl0IGFscmVhZHlcbiAgICAgICAgbW9tID0gY3JlYXRlVVRDKFsyMDAwLCBpXSk7XG4gICAgICAgIGlmIChzdHJpY3QgJiYgIXRoaXMuX2xvbmdNb250aHNQYXJzZVtpXSkge1xuICAgICAgICAgICAgdGhpcy5fbG9uZ01vbnRoc1BhcnNlW2ldID0gbmV3IFJlZ0V4cCgnXicgKyB0aGlzLm1vbnRocyhtb20sICcnKS5yZXBsYWNlKCcuJywgJycpICsgJyQnLCAnaScpO1xuICAgICAgICAgICAgdGhpcy5fc2hvcnRNb250aHNQYXJzZVtpXSA9IG5ldyBSZWdFeHAoJ14nICsgdGhpcy5tb250aHNTaG9ydChtb20sICcnKS5yZXBsYWNlKCcuJywgJycpICsgJyQnLCAnaScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc3RyaWN0ICYmICF0aGlzLl9tb250aHNQYXJzZVtpXSkge1xuICAgICAgICAgICAgcmVnZXggPSAnXicgKyB0aGlzLm1vbnRocyhtb20sICcnKSArICd8XicgKyB0aGlzLm1vbnRoc1Nob3J0KG1vbSwgJycpO1xuICAgICAgICAgICAgdGhpcy5fbW9udGhzUGFyc2VbaV0gPSBuZXcgUmVnRXhwKHJlZ2V4LnJlcGxhY2UoJy4nLCAnJyksICdpJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGVzdCB0aGUgcmVnZXhcbiAgICAgICAgaWYgKHN0cmljdCAmJiBmb3JtYXQgPT09ICdNTU1NJyAmJiB0aGlzLl9sb25nTW9udGhzUGFyc2VbaV0udGVzdChtb250aE5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfSBlbHNlIGlmIChzdHJpY3QgJiYgZm9ybWF0ID09PSAnTU1NJyAmJiB0aGlzLl9zaG9ydE1vbnRoc1BhcnNlW2ldLnRlc3QobW9udGhOYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXN0cmljdCAmJiB0aGlzLl9tb250aHNQYXJzZVtpXS50ZXN0KG1vbnRoTmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBNT01FTlRTXG5cbmZ1bmN0aW9uIHNldE1vbnRoIChtb20sIHZhbHVlKSB7XG4gICAgdmFyIGRheU9mTW9udGg7XG5cbiAgICBpZiAoIW1vbS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgLy8gTm8gb3BcbiAgICAgICAgcmV0dXJuIG1vbTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAoL15cXGQrJC8udGVzdCh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdG9JbnQodmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsdWUgPSBtb20ubG9jYWxlRGF0YSgpLm1vbnRoc1BhcnNlKHZhbHVlKTtcbiAgICAgICAgICAgIC8vIFRPRE86IEFub3RoZXIgc2lsZW50IGZhaWx1cmU/XG4gICAgICAgICAgICBpZiAoIWlzTnVtYmVyKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtb207XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkYXlPZk1vbnRoID0gTWF0aC5taW4obW9tLmRhdGUoKSwgZGF5c0luTW9udGgobW9tLnllYXIoKSwgdmFsdWUpKTtcbiAgICBtb20uX2RbJ3NldCcgKyAobW9tLl9pc1VUQyA/ICdVVEMnIDogJycpICsgJ01vbnRoJ10odmFsdWUsIGRheU9mTW9udGgpO1xuICAgIHJldHVybiBtb207XG59XG5cbmZ1bmN0aW9uIGdldFNldE1vbnRoICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIHNldE1vbnRoKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgaG9va3MudXBkYXRlT2Zmc2V0KHRoaXMsIHRydWUpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZ2V0KHRoaXMsICdNb250aCcpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0RGF5c0luTW9udGggKCkge1xuICAgIHJldHVybiBkYXlzSW5Nb250aCh0aGlzLnllYXIoKSwgdGhpcy5tb250aCgpKTtcbn1cblxudmFyIGRlZmF1bHRNb250aHNTaG9ydFJlZ2V4ID0gbWF0Y2hXb3JkO1xuZnVuY3Rpb24gbW9udGhzU2hvcnRSZWdleCAoaXNTdHJpY3QpIHtcbiAgICBpZiAodGhpcy5fbW9udGhzUGFyc2VFeGFjdCkge1xuICAgICAgICBpZiAoIWhhc093blByb3AodGhpcywgJ19tb250aHNSZWdleCcpKSB7XG4gICAgICAgICAgICBjb21wdXRlTW9udGhzUGFyc2UuY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNTdHJpY3QpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tb250aHNTaG9ydFN0cmljdFJlZ2V4O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21vbnRoc1Nob3J0UmVnZXg7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIWhhc093blByb3AodGhpcywgJ19tb250aHNTaG9ydFJlZ2V4JykpIHtcbiAgICAgICAgICAgIHRoaXMuX21vbnRoc1Nob3J0UmVnZXggPSBkZWZhdWx0TW9udGhzU2hvcnRSZWdleDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fbW9udGhzU2hvcnRTdHJpY3RSZWdleCAmJiBpc1N0cmljdCA/XG4gICAgICAgICAgICB0aGlzLl9tb250aHNTaG9ydFN0cmljdFJlZ2V4IDogdGhpcy5fbW9udGhzU2hvcnRSZWdleDtcbiAgICB9XG59XG5cbnZhciBkZWZhdWx0TW9udGhzUmVnZXggPSBtYXRjaFdvcmQ7XG5mdW5jdGlvbiBtb250aHNSZWdleCAoaXNTdHJpY3QpIHtcbiAgICBpZiAodGhpcy5fbW9udGhzUGFyc2VFeGFjdCkge1xuICAgICAgICBpZiAoIWhhc093blByb3AodGhpcywgJ19tb250aHNSZWdleCcpKSB7XG4gICAgICAgICAgICBjb21wdXRlTW9udGhzUGFyc2UuY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNTdHJpY3QpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tb250aHNTdHJpY3RSZWdleDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tb250aHNSZWdleDtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghaGFzT3duUHJvcCh0aGlzLCAnX21vbnRoc1JlZ2V4JykpIHtcbiAgICAgICAgICAgIHRoaXMuX21vbnRoc1JlZ2V4ID0gZGVmYXVsdE1vbnRoc1JlZ2V4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9tb250aHNTdHJpY3RSZWdleCAmJiBpc1N0cmljdCA/XG4gICAgICAgICAgICB0aGlzLl9tb250aHNTdHJpY3RSZWdleCA6IHRoaXMuX21vbnRoc1JlZ2V4O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY29tcHV0ZU1vbnRoc1BhcnNlICgpIHtcbiAgICBmdW5jdGlvbiBjbXBMZW5SZXYoYSwgYikge1xuICAgICAgICByZXR1cm4gYi5sZW5ndGggLSBhLmxlbmd0aDtcbiAgICB9XG5cbiAgICB2YXIgc2hvcnRQaWVjZXMgPSBbXSwgbG9uZ1BpZWNlcyA9IFtdLCBtaXhlZFBpZWNlcyA9IFtdLFxuICAgICAgICBpLCBtb207XG4gICAgZm9yIChpID0gMDsgaSA8IDEyOyBpKyspIHtcbiAgICAgICAgLy8gbWFrZSB0aGUgcmVnZXggaWYgd2UgZG9uJ3QgaGF2ZSBpdCBhbHJlYWR5XG4gICAgICAgIG1vbSA9IGNyZWF0ZVVUQyhbMjAwMCwgaV0pO1xuICAgICAgICBzaG9ydFBpZWNlcy5wdXNoKHRoaXMubW9udGhzU2hvcnQobW9tLCAnJykpO1xuICAgICAgICBsb25nUGllY2VzLnB1c2godGhpcy5tb250aHMobW9tLCAnJykpO1xuICAgICAgICBtaXhlZFBpZWNlcy5wdXNoKHRoaXMubW9udGhzKG1vbSwgJycpKTtcbiAgICAgICAgbWl4ZWRQaWVjZXMucHVzaCh0aGlzLm1vbnRoc1Nob3J0KG1vbSwgJycpKTtcbiAgICB9XG4gICAgLy8gU29ydGluZyBtYWtlcyBzdXJlIGlmIG9uZSBtb250aCAob3IgYWJicikgaXMgYSBwcmVmaXggb2YgYW5vdGhlciBpdFxuICAgIC8vIHdpbGwgbWF0Y2ggdGhlIGxvbmdlciBwaWVjZS5cbiAgICBzaG9ydFBpZWNlcy5zb3J0KGNtcExlblJldik7XG4gICAgbG9uZ1BpZWNlcy5zb3J0KGNtcExlblJldik7XG4gICAgbWl4ZWRQaWVjZXMuc29ydChjbXBMZW5SZXYpO1xuICAgIGZvciAoaSA9IDA7IGkgPCAxMjsgaSsrKSB7XG4gICAgICAgIHNob3J0UGllY2VzW2ldID0gcmVnZXhFc2NhcGUoc2hvcnRQaWVjZXNbaV0pO1xuICAgICAgICBsb25nUGllY2VzW2ldID0gcmVnZXhFc2NhcGUobG9uZ1BpZWNlc1tpXSk7XG4gICAgfVxuICAgIGZvciAoaSA9IDA7IGkgPCAyNDsgaSsrKSB7XG4gICAgICAgIG1peGVkUGllY2VzW2ldID0gcmVnZXhFc2NhcGUobWl4ZWRQaWVjZXNbaV0pO1xuICAgIH1cblxuICAgIHRoaXMuX21vbnRoc1JlZ2V4ID0gbmV3IFJlZ0V4cCgnXignICsgbWl4ZWRQaWVjZXMuam9pbignfCcpICsgJyknLCAnaScpO1xuICAgIHRoaXMuX21vbnRoc1Nob3J0UmVnZXggPSB0aGlzLl9tb250aHNSZWdleDtcbiAgICB0aGlzLl9tb250aHNTdHJpY3RSZWdleCA9IG5ldyBSZWdFeHAoJ14oJyArIGxvbmdQaWVjZXMuam9pbignfCcpICsgJyknLCAnaScpO1xuICAgIHRoaXMuX21vbnRoc1Nob3J0U3RyaWN0UmVnZXggPSBuZXcgUmVnRXhwKCdeKCcgKyBzaG9ydFBpZWNlcy5qb2luKCd8JykgKyAnKScsICdpJyk7XG59XG5cbi8vIEZPUk1BVFRJTkdcblxuYWRkRm9ybWF0VG9rZW4oJ1knLCAwLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHkgPSB0aGlzLnllYXIoKTtcbiAgICByZXR1cm4geSA8PSA5OTk5ID8gJycgKyB5IDogJysnICsgeTtcbn0pO1xuXG5hZGRGb3JtYXRUb2tlbigwLCBbJ1lZJywgMl0sIDAsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy55ZWFyKCkgJSAxMDA7XG59KTtcblxuYWRkRm9ybWF0VG9rZW4oMCwgWydZWVlZJywgICA0XSwgICAgICAgMCwgJ3llYXInKTtcbmFkZEZvcm1hdFRva2VuKDAsIFsnWVlZWVknLCAgNV0sICAgICAgIDAsICd5ZWFyJyk7XG5hZGRGb3JtYXRUb2tlbigwLCBbJ1lZWVlZWScsIDYsIHRydWVdLCAwLCAneWVhcicpO1xuXG4vLyBBTElBU0VTXG5cbmFkZFVuaXRBbGlhcygneWVhcicsICd5Jyk7XG5cbi8vIFBSSU9SSVRJRVNcblxuYWRkVW5pdFByaW9yaXR5KCd5ZWFyJywgMSk7XG5cbi8vIFBBUlNJTkdcblxuYWRkUmVnZXhUb2tlbignWScsICAgICAgbWF0Y2hTaWduZWQpO1xuYWRkUmVnZXhUb2tlbignWVknLCAgICAgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuYWRkUmVnZXhUb2tlbignWVlZWScsICAgbWF0Y2gxdG80LCBtYXRjaDQpO1xuYWRkUmVnZXhUb2tlbignWVlZWVknLCAgbWF0Y2gxdG82LCBtYXRjaDYpO1xuYWRkUmVnZXhUb2tlbignWVlZWVlZJywgbWF0Y2gxdG82LCBtYXRjaDYpO1xuXG5hZGRQYXJzZVRva2VuKFsnWVlZWVknLCAnWVlZWVlZJ10sIFlFQVIpO1xuYWRkUGFyc2VUb2tlbignWVlZWScsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXkpIHtcbiAgICBhcnJheVtZRUFSXSA9IGlucHV0Lmxlbmd0aCA9PT0gMiA/IGhvb2tzLnBhcnNlVHdvRGlnaXRZZWFyKGlucHV0KSA6IHRvSW50KGlucHV0KTtcbn0pO1xuYWRkUGFyc2VUb2tlbignWVknLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5KSB7XG4gICAgYXJyYXlbWUVBUl0gPSBob29rcy5wYXJzZVR3b0RpZ2l0WWVhcihpbnB1dCk7XG59KTtcbmFkZFBhcnNlVG9rZW4oJ1knLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5KSB7XG4gICAgYXJyYXlbWUVBUl0gPSBwYXJzZUludChpbnB1dCwgMTApO1xufSk7XG5cbi8vIEhFTFBFUlNcblxuZnVuY3Rpb24gZGF5c0luWWVhcih5ZWFyKSB7XG4gICAgcmV0dXJuIGlzTGVhcFllYXIoeWVhcikgPyAzNjYgOiAzNjU7XG59XG5cbmZ1bmN0aW9uIGlzTGVhcFllYXIoeWVhcikge1xuICAgIHJldHVybiAoeWVhciAlIDQgPT09IDAgJiYgeWVhciAlIDEwMCAhPT0gMCkgfHwgeWVhciAlIDQwMCA9PT0gMDtcbn1cblxuLy8gSE9PS1NcblxuaG9va3MucGFyc2VUd29EaWdpdFllYXIgPSBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICByZXR1cm4gdG9JbnQoaW5wdXQpICsgKHRvSW50KGlucHV0KSA+IDY4ID8gMTkwMCA6IDIwMDApO1xufTtcblxuLy8gTU9NRU5UU1xuXG52YXIgZ2V0U2V0WWVhciA9IG1ha2VHZXRTZXQoJ0Z1bGxZZWFyJywgdHJ1ZSk7XG5cbmZ1bmN0aW9uIGdldElzTGVhcFllYXIgKCkge1xuICAgIHJldHVybiBpc0xlYXBZZWFyKHRoaXMueWVhcigpKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRGF0ZSAoeSwgbSwgZCwgaCwgTSwgcywgbXMpIHtcbiAgICAvLyBjYW4ndCBqdXN0IGFwcGx5KCkgdG8gY3JlYXRlIGEgZGF0ZTpcbiAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvMTgxMzQ4XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh5LCBtLCBkLCBoLCBNLCBzLCBtcyk7XG5cbiAgICAvLyB0aGUgZGF0ZSBjb25zdHJ1Y3RvciByZW1hcHMgeWVhcnMgMC05OSB0byAxOTAwLTE5OTlcbiAgICBpZiAoeSA8IDEwMCAmJiB5ID49IDAgJiYgaXNGaW5pdGUoZGF0ZS5nZXRGdWxsWWVhcigpKSkge1xuICAgICAgICBkYXRlLnNldEZ1bGxZZWFyKHkpO1xuICAgIH1cbiAgICByZXR1cm4gZGF0ZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVVRDRGF0ZSAoeSkge1xuICAgIHZhciBkYXRlID0gbmV3IERhdGUoRGF0ZS5VVEMuYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7XG5cbiAgICAvLyB0aGUgRGF0ZS5VVEMgZnVuY3Rpb24gcmVtYXBzIHllYXJzIDAtOTkgdG8gMTkwMC0xOTk5XG4gICAgaWYgKHkgPCAxMDAgJiYgeSA+PSAwICYmIGlzRmluaXRlKGRhdGUuZ2V0VVRDRnVsbFllYXIoKSkpIHtcbiAgICAgICAgZGF0ZS5zZXRVVENGdWxsWWVhcih5KTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGU7XG59XG5cbi8vIHN0YXJ0LW9mLWZpcnN0LXdlZWsgLSBzdGFydC1vZi15ZWFyXG5mdW5jdGlvbiBmaXJzdFdlZWtPZmZzZXQoeWVhciwgZG93LCBkb3kpIHtcbiAgICB2YXIgLy8gZmlyc3Qtd2VlayBkYXkgLS0gd2hpY2ggamFudWFyeSBpcyBhbHdheXMgaW4gdGhlIGZpcnN0IHdlZWsgKDQgZm9yIGlzbywgMSBmb3Igb3RoZXIpXG4gICAgICAgIGZ3ZCA9IDcgKyBkb3cgLSBkb3ksXG4gICAgICAgIC8vIGZpcnN0LXdlZWsgZGF5IGxvY2FsIHdlZWtkYXkgLS0gd2hpY2ggbG9jYWwgd2Vla2RheSBpcyBmd2RcbiAgICAgICAgZndkbHcgPSAoNyArIGNyZWF0ZVVUQ0RhdGUoeWVhciwgMCwgZndkKS5nZXRVVENEYXkoKSAtIGRvdykgJSA3O1xuXG4gICAgcmV0dXJuIC1md2RsdyArIGZ3ZCAtIDE7XG59XG5cbi8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGUjQ2FsY3VsYXRpbmdfYV9kYXRlX2dpdmVuX3RoZV95ZWFyLjJDX3dlZWtfbnVtYmVyX2FuZF93ZWVrZGF5XG5mdW5jdGlvbiBkYXlPZlllYXJGcm9tV2Vla3MoeWVhciwgd2Vlaywgd2Vla2RheSwgZG93LCBkb3kpIHtcbiAgICB2YXIgbG9jYWxXZWVrZGF5ID0gKDcgKyB3ZWVrZGF5IC0gZG93KSAlIDcsXG4gICAgICAgIHdlZWtPZmZzZXQgPSBmaXJzdFdlZWtPZmZzZXQoeWVhciwgZG93LCBkb3kpLFxuICAgICAgICBkYXlPZlllYXIgPSAxICsgNyAqICh3ZWVrIC0gMSkgKyBsb2NhbFdlZWtkYXkgKyB3ZWVrT2Zmc2V0LFxuICAgICAgICByZXNZZWFyLCByZXNEYXlPZlllYXI7XG5cbiAgICBpZiAoZGF5T2ZZZWFyIDw9IDApIHtcbiAgICAgICAgcmVzWWVhciA9IHllYXIgLSAxO1xuICAgICAgICByZXNEYXlPZlllYXIgPSBkYXlzSW5ZZWFyKHJlc1llYXIpICsgZGF5T2ZZZWFyO1xuICAgIH0gZWxzZSBpZiAoZGF5T2ZZZWFyID4gZGF5c0luWWVhcih5ZWFyKSkge1xuICAgICAgICByZXNZZWFyID0geWVhciArIDE7XG4gICAgICAgIHJlc0RheU9mWWVhciA9IGRheU9mWWVhciAtIGRheXNJblllYXIoeWVhcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmVzWWVhciA9IHllYXI7XG4gICAgICAgIHJlc0RheU9mWWVhciA9IGRheU9mWWVhcjtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB5ZWFyOiByZXNZZWFyLFxuICAgICAgICBkYXlPZlllYXI6IHJlc0RheU9mWWVhclxuICAgIH07XG59XG5cbmZ1bmN0aW9uIHdlZWtPZlllYXIobW9tLCBkb3csIGRveSkge1xuICAgIHZhciB3ZWVrT2Zmc2V0ID0gZmlyc3RXZWVrT2Zmc2V0KG1vbS55ZWFyKCksIGRvdywgZG95KSxcbiAgICAgICAgd2VlayA9IE1hdGguZmxvb3IoKG1vbS5kYXlPZlllYXIoKSAtIHdlZWtPZmZzZXQgLSAxKSAvIDcpICsgMSxcbiAgICAgICAgcmVzV2VlaywgcmVzWWVhcjtcblxuICAgIGlmICh3ZWVrIDwgMSkge1xuICAgICAgICByZXNZZWFyID0gbW9tLnllYXIoKSAtIDE7XG4gICAgICAgIHJlc1dlZWsgPSB3ZWVrICsgd2Vla3NJblllYXIocmVzWWVhciwgZG93LCBkb3kpO1xuICAgIH0gZWxzZSBpZiAod2VlayA+IHdlZWtzSW5ZZWFyKG1vbS55ZWFyKCksIGRvdywgZG95KSkge1xuICAgICAgICByZXNXZWVrID0gd2VlayAtIHdlZWtzSW5ZZWFyKG1vbS55ZWFyKCksIGRvdywgZG95KTtcbiAgICAgICAgcmVzWWVhciA9IG1vbS55ZWFyKCkgKyAxO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc1llYXIgPSBtb20ueWVhcigpO1xuICAgICAgICByZXNXZWVrID0gd2VlaztcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB3ZWVrOiByZXNXZWVrLFxuICAgICAgICB5ZWFyOiByZXNZZWFyXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gd2Vla3NJblllYXIoeWVhciwgZG93LCBkb3kpIHtcbiAgICB2YXIgd2Vla09mZnNldCA9IGZpcnN0V2Vla09mZnNldCh5ZWFyLCBkb3csIGRveSksXG4gICAgICAgIHdlZWtPZmZzZXROZXh0ID0gZmlyc3RXZWVrT2Zmc2V0KHllYXIgKyAxLCBkb3csIGRveSk7XG4gICAgcmV0dXJuIChkYXlzSW5ZZWFyKHllYXIpIC0gd2Vla09mZnNldCArIHdlZWtPZmZzZXROZXh0KSAvIDc7XG59XG5cbi8vIEZPUk1BVFRJTkdcblxuYWRkRm9ybWF0VG9rZW4oJ3cnLCBbJ3d3JywgMl0sICd3bycsICd3ZWVrJyk7XG5hZGRGb3JtYXRUb2tlbignVycsIFsnV1cnLCAyXSwgJ1dvJywgJ2lzb1dlZWsnKTtcblxuLy8gQUxJQVNFU1xuXG5hZGRVbml0QWxpYXMoJ3dlZWsnLCAndycpO1xuYWRkVW5pdEFsaWFzKCdpc29XZWVrJywgJ1cnKTtcblxuLy8gUFJJT1JJVElFU1xuXG5hZGRVbml0UHJpb3JpdHkoJ3dlZWsnLCA1KTtcbmFkZFVuaXRQcmlvcml0eSgnaXNvV2VlaycsIDUpO1xuXG4vLyBQQVJTSU5HXG5cbmFkZFJlZ2V4VG9rZW4oJ3cnLCAgbWF0Y2gxdG8yKTtcbmFkZFJlZ2V4VG9rZW4oJ3d3JywgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuYWRkUmVnZXhUb2tlbignVycsICBtYXRjaDF0bzIpO1xuYWRkUmVnZXhUb2tlbignV1cnLCBtYXRjaDF0bzIsIG1hdGNoMik7XG5cbmFkZFdlZWtQYXJzZVRva2VuKFsndycsICd3dycsICdXJywgJ1dXJ10sIGZ1bmN0aW9uIChpbnB1dCwgd2VlaywgY29uZmlnLCB0b2tlbikge1xuICAgIHdlZWtbdG9rZW4uc3Vic3RyKDAsIDEpXSA9IHRvSW50KGlucHV0KTtcbn0pO1xuXG4vLyBIRUxQRVJTXG5cbi8vIExPQ0FMRVNcblxuZnVuY3Rpb24gbG9jYWxlV2VlayAobW9tKSB7XG4gICAgcmV0dXJuIHdlZWtPZlllYXIobW9tLCB0aGlzLl93ZWVrLmRvdywgdGhpcy5fd2Vlay5kb3kpLndlZWs7XG59XG5cbnZhciBkZWZhdWx0TG9jYWxlV2VlayA9IHtcbiAgICBkb3cgOiAwLCAvLyBTdW5kYXkgaXMgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2Vlay5cbiAgICBkb3kgOiA2ICAvLyBUaGUgd2VlayB0aGF0IGNvbnRhaW5zIEphbiAxc3QgaXMgdGhlIGZpcnN0IHdlZWsgb2YgdGhlIHllYXIuXG59O1xuXG5mdW5jdGlvbiBsb2NhbGVGaXJzdERheU9mV2VlayAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3dlZWsuZG93O1xufVxuXG5mdW5jdGlvbiBsb2NhbGVGaXJzdERheU9mWWVhciAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3dlZWsuZG95O1xufVxuXG4vLyBNT01FTlRTXG5cbmZ1bmN0aW9uIGdldFNldFdlZWsgKGlucHV0KSB7XG4gICAgdmFyIHdlZWsgPSB0aGlzLmxvY2FsZURhdGEoKS53ZWVrKHRoaXMpO1xuICAgIHJldHVybiBpbnB1dCA9PSBudWxsID8gd2VlayA6IHRoaXMuYWRkKChpbnB1dCAtIHdlZWspICogNywgJ2QnKTtcbn1cblxuZnVuY3Rpb24gZ2V0U2V0SVNPV2VlayAoaW5wdXQpIHtcbiAgICB2YXIgd2VlayA9IHdlZWtPZlllYXIodGhpcywgMSwgNCkud2VlaztcbiAgICByZXR1cm4gaW5wdXQgPT0gbnVsbCA/IHdlZWsgOiB0aGlzLmFkZCgoaW5wdXQgLSB3ZWVrKSAqIDcsICdkJyk7XG59XG5cbi8vIEZPUk1BVFRJTkdcblxuYWRkRm9ybWF0VG9rZW4oJ2QnLCAwLCAnZG8nLCAnZGF5Jyk7XG5cbmFkZEZvcm1hdFRva2VuKCdkZCcsIDAsIDAsIGZ1bmN0aW9uIChmb3JtYXQpIHtcbiAgICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkud2Vla2RheXNNaW4odGhpcywgZm9ybWF0KTtcbn0pO1xuXG5hZGRGb3JtYXRUb2tlbignZGRkJywgMCwgMCwgZnVuY3Rpb24gKGZvcm1hdCkge1xuICAgIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS53ZWVrZGF5c1Nob3J0KHRoaXMsIGZvcm1hdCk7XG59KTtcblxuYWRkRm9ybWF0VG9rZW4oJ2RkZGQnLCAwLCAwLCBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLndlZWtkYXlzKHRoaXMsIGZvcm1hdCk7XG59KTtcblxuYWRkRm9ybWF0VG9rZW4oJ2UnLCAwLCAwLCAnd2Vla2RheScpO1xuYWRkRm9ybWF0VG9rZW4oJ0UnLCAwLCAwLCAnaXNvV2Vla2RheScpO1xuXG4vLyBBTElBU0VTXG5cbmFkZFVuaXRBbGlhcygnZGF5JywgJ2QnKTtcbmFkZFVuaXRBbGlhcygnd2Vla2RheScsICdlJyk7XG5hZGRVbml0QWxpYXMoJ2lzb1dlZWtkYXknLCAnRScpO1xuXG4vLyBQUklPUklUWVxuYWRkVW5pdFByaW9yaXR5KCdkYXknLCAxMSk7XG5hZGRVbml0UHJpb3JpdHkoJ3dlZWtkYXknLCAxMSk7XG5hZGRVbml0UHJpb3JpdHkoJ2lzb1dlZWtkYXknLCAxMSk7XG5cbi8vIFBBUlNJTkdcblxuYWRkUmVnZXhUb2tlbignZCcsICAgIG1hdGNoMXRvMik7XG5hZGRSZWdleFRva2VuKCdlJywgICAgbWF0Y2gxdG8yKTtcbmFkZFJlZ2V4VG9rZW4oJ0UnLCAgICBtYXRjaDF0bzIpO1xuYWRkUmVnZXhUb2tlbignZGQnLCAgIGZ1bmN0aW9uIChpc1N0cmljdCwgbG9jYWxlKSB7XG4gICAgcmV0dXJuIGxvY2FsZS53ZWVrZGF5c01pblJlZ2V4KGlzU3RyaWN0KTtcbn0pO1xuYWRkUmVnZXhUb2tlbignZGRkJywgICBmdW5jdGlvbiAoaXNTdHJpY3QsIGxvY2FsZSkge1xuICAgIHJldHVybiBsb2NhbGUud2Vla2RheXNTaG9ydFJlZ2V4KGlzU3RyaWN0KTtcbn0pO1xuYWRkUmVnZXhUb2tlbignZGRkZCcsICAgZnVuY3Rpb24gKGlzU3RyaWN0LCBsb2NhbGUpIHtcbiAgICByZXR1cm4gbG9jYWxlLndlZWtkYXlzUmVnZXgoaXNTdHJpY3QpO1xufSk7XG5cbmFkZFdlZWtQYXJzZVRva2VuKFsnZGQnLCAnZGRkJywgJ2RkZGQnXSwgZnVuY3Rpb24gKGlucHV0LCB3ZWVrLCBjb25maWcsIHRva2VuKSB7XG4gICAgdmFyIHdlZWtkYXkgPSBjb25maWcuX2xvY2FsZS53ZWVrZGF5c1BhcnNlKGlucHV0LCB0b2tlbiwgY29uZmlnLl9zdHJpY3QpO1xuICAgIC8vIGlmIHdlIGRpZG4ndCBnZXQgYSB3ZWVrZGF5IG5hbWUsIG1hcmsgdGhlIGRhdGUgYXMgaW52YWxpZFxuICAgIGlmICh3ZWVrZGF5ICE9IG51bGwpIHtcbiAgICAgICAgd2Vlay5kID0gd2Vla2RheTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5pbnZhbGlkV2Vla2RheSA9IGlucHV0O1xuICAgIH1cbn0pO1xuXG5hZGRXZWVrUGFyc2VUb2tlbihbJ2QnLCAnZScsICdFJ10sIGZ1bmN0aW9uIChpbnB1dCwgd2VlaywgY29uZmlnLCB0b2tlbikge1xuICAgIHdlZWtbdG9rZW5dID0gdG9JbnQoaW5wdXQpO1xufSk7XG5cbi8vIEhFTFBFUlNcblxuZnVuY3Rpb24gcGFyc2VXZWVrZGF5KGlucHV0LCBsb2NhbGUpIHtcbiAgICBpZiAodHlwZW9mIGlucHV0ICE9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfVxuXG4gICAgaWYgKCFpc05hTihpbnB1dCkpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KGlucHV0LCAxMCk7XG4gICAgfVxuXG4gICAgaW5wdXQgPSBsb2NhbGUud2Vla2RheXNQYXJzZShpbnB1dCk7XG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBwYXJzZUlzb1dlZWtkYXkoaW5wdXQsIGxvY2FsZSkge1xuICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGUud2Vla2RheXNQYXJzZShpbnB1dCkgJSA3IHx8IDc7XG4gICAgfVxuICAgIHJldHVybiBpc05hTihpbnB1dCkgPyBudWxsIDogaW5wdXQ7XG59XG5cbi8vIExPQ0FMRVNcblxudmFyIGRlZmF1bHRMb2NhbGVXZWVrZGF5cyA9ICdTdW5kYXlfTW9uZGF5X1R1ZXNkYXlfV2VkbmVzZGF5X1RodXJzZGF5X0ZyaWRheV9TYXR1cmRheScuc3BsaXQoJ18nKTtcbmZ1bmN0aW9uIGxvY2FsZVdlZWtkYXlzIChtLCBmb3JtYXQpIHtcbiAgICBpZiAoIW0pIHtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkodGhpcy5fd2Vla2RheXMpID8gdGhpcy5fd2Vla2RheXMgOlxuICAgICAgICAgICAgdGhpcy5fd2Vla2RheXNbJ3N0YW5kYWxvbmUnXTtcbiAgICB9XG4gICAgcmV0dXJuIGlzQXJyYXkodGhpcy5fd2Vla2RheXMpID8gdGhpcy5fd2Vla2RheXNbbS5kYXkoKV0gOlxuICAgICAgICB0aGlzLl93ZWVrZGF5c1t0aGlzLl93ZWVrZGF5cy5pc0Zvcm1hdC50ZXN0KGZvcm1hdCkgPyAnZm9ybWF0JyA6ICdzdGFuZGFsb25lJ11bbS5kYXkoKV07XG59XG5cbnZhciBkZWZhdWx0TG9jYWxlV2Vla2RheXNTaG9ydCA9ICdTdW5fTW9uX1R1ZV9XZWRfVGh1X0ZyaV9TYXQnLnNwbGl0KCdfJyk7XG5mdW5jdGlvbiBsb2NhbGVXZWVrZGF5c1Nob3J0IChtKSB7XG4gICAgcmV0dXJuIChtKSA/IHRoaXMuX3dlZWtkYXlzU2hvcnRbbS5kYXkoKV0gOiB0aGlzLl93ZWVrZGF5c1Nob3J0O1xufVxuXG52YXIgZGVmYXVsdExvY2FsZVdlZWtkYXlzTWluID0gJ1N1X01vX1R1X1dlX1RoX0ZyX1NhJy5zcGxpdCgnXycpO1xuZnVuY3Rpb24gbG9jYWxlV2Vla2RheXNNaW4gKG0pIHtcbiAgICByZXR1cm4gKG0pID8gdGhpcy5fd2Vla2RheXNNaW5bbS5kYXkoKV0gOiB0aGlzLl93ZWVrZGF5c01pbjtcbn1cblxuZnVuY3Rpb24gaGFuZGxlU3RyaWN0UGFyc2UkMSh3ZWVrZGF5TmFtZSwgZm9ybWF0LCBzdHJpY3QpIHtcbiAgICB2YXIgaSwgaWksIG1vbSwgbGxjID0gd2Vla2RheU5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKTtcbiAgICBpZiAoIXRoaXMuX3dlZWtkYXlzUGFyc2UpIHtcbiAgICAgICAgdGhpcy5fd2Vla2RheXNQYXJzZSA9IFtdO1xuICAgICAgICB0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2UgPSBbXTtcbiAgICAgICAgdGhpcy5fbWluV2Vla2RheXNQYXJzZSA9IFtdO1xuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCA3OyArK2kpIHtcbiAgICAgICAgICAgIG1vbSA9IGNyZWF0ZVVUQyhbMjAwMCwgMV0pLmRheShpKTtcbiAgICAgICAgICAgIHRoaXMuX21pbldlZWtkYXlzUGFyc2VbaV0gPSB0aGlzLndlZWtkYXlzTWluKG1vbSwgJycpLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2VbaV0gPSB0aGlzLndlZWtkYXlzU2hvcnQobW9tLCAnJykudG9Mb2NhbGVMb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHRoaXMuX3dlZWtkYXlzUGFyc2VbaV0gPSB0aGlzLndlZWtkYXlzKG1vbSwgJycpLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3RyaWN0KSB7XG4gICAgICAgIGlmIChmb3JtYXQgPT09ICdkZGRkJykge1xuICAgICAgICAgICAgaWkgPSBpbmRleE9mJDEuY2FsbCh0aGlzLl93ZWVrZGF5c1BhcnNlLCBsbGMpO1xuICAgICAgICAgICAgcmV0dXJuIGlpICE9PSAtMSA/IGlpIDogbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmIChmb3JtYXQgPT09ICdkZGQnKSB7XG4gICAgICAgICAgICBpaSA9IGluZGV4T2YkMS5jYWxsKHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSwgbGxjKTtcbiAgICAgICAgICAgIHJldHVybiBpaSAhPT0gLTEgPyBpaSA6IG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpaSA9IGluZGV4T2YkMS5jYWxsKHRoaXMuX21pbldlZWtkYXlzUGFyc2UsIGxsYyk7XG4gICAgICAgICAgICByZXR1cm4gaWkgIT09IC0xID8gaWkgOiBudWxsO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gJ2RkZGQnKSB7XG4gICAgICAgICAgICBpaSA9IGluZGV4T2YkMS5jYWxsKHRoaXMuX3dlZWtkYXlzUGFyc2UsIGxsYyk7XG4gICAgICAgICAgICBpZiAoaWkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWkgPSBpbmRleE9mJDEuY2FsbCh0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2UsIGxsYyk7XG4gICAgICAgICAgICBpZiAoaWkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWkgPSBpbmRleE9mJDEuY2FsbCh0aGlzLl9taW5XZWVrZGF5c1BhcnNlLCBsbGMpO1xuICAgICAgICAgICAgcmV0dXJuIGlpICE9PSAtMSA/IGlpIDogbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmIChmb3JtYXQgPT09ICdkZGQnKSB7XG4gICAgICAgICAgICBpaSA9IGluZGV4T2YkMS5jYWxsKHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSwgbGxjKTtcbiAgICAgICAgICAgIGlmIChpaSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpaSA9IGluZGV4T2YkMS5jYWxsKHRoaXMuX3dlZWtkYXlzUGFyc2UsIGxsYyk7XG4gICAgICAgICAgICBpZiAoaWkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWkgPSBpbmRleE9mJDEuY2FsbCh0aGlzLl9taW5XZWVrZGF5c1BhcnNlLCBsbGMpO1xuICAgICAgICAgICAgcmV0dXJuIGlpICE9PSAtMSA/IGlpIDogbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlpID0gaW5kZXhPZiQxLmNhbGwodGhpcy5fbWluV2Vla2RheXNQYXJzZSwgbGxjKTtcbiAgICAgICAgICAgIGlmIChpaSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpaSA9IGluZGV4T2YkMS5jYWxsKHRoaXMuX3dlZWtkYXlzUGFyc2UsIGxsYyk7XG4gICAgICAgICAgICBpZiAoaWkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWkgPSBpbmRleE9mJDEuY2FsbCh0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2UsIGxsYyk7XG4gICAgICAgICAgICByZXR1cm4gaWkgIT09IC0xID8gaWkgOiBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBsb2NhbGVXZWVrZGF5c1BhcnNlICh3ZWVrZGF5TmFtZSwgZm9ybWF0LCBzdHJpY3QpIHtcbiAgICB2YXIgaSwgbW9tLCByZWdleDtcblxuICAgIGlmICh0aGlzLl93ZWVrZGF5c1BhcnNlRXhhY3QpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVN0cmljdFBhcnNlJDEuY2FsbCh0aGlzLCB3ZWVrZGF5TmFtZSwgZm9ybWF0LCBzdHJpY3QpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fd2Vla2RheXNQYXJzZSkge1xuICAgICAgICB0aGlzLl93ZWVrZGF5c1BhcnNlID0gW107XG4gICAgICAgIHRoaXMuX21pbldlZWtkYXlzUGFyc2UgPSBbXTtcbiAgICAgICAgdGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlID0gW107XG4gICAgICAgIHRoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlID0gW107XG4gICAgfVxuXG4gICAgZm9yIChpID0gMDsgaSA8IDc7IGkrKykge1xuICAgICAgICAvLyBtYWtlIHRoZSByZWdleCBpZiB3ZSBkb24ndCBoYXZlIGl0IGFscmVhZHlcblxuICAgICAgICBtb20gPSBjcmVhdGVVVEMoWzIwMDAsIDFdKS5kYXkoaSk7XG4gICAgICAgIGlmIChzdHJpY3QgJiYgIXRoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlW2ldKSB7XG4gICAgICAgICAgICB0aGlzLl9mdWxsV2Vla2RheXNQYXJzZVtpXSA9IG5ldyBSZWdFeHAoJ14nICsgdGhpcy53ZWVrZGF5cyhtb20sICcnKS5yZXBsYWNlKCcuJywgJ1xcLj8nKSArICckJywgJ2knKTtcbiAgICAgICAgICAgIHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZVtpXSA9IG5ldyBSZWdFeHAoJ14nICsgdGhpcy53ZWVrZGF5c1Nob3J0KG1vbSwgJycpLnJlcGxhY2UoJy4nLCAnXFwuPycpICsgJyQnLCAnaScpO1xuICAgICAgICAgICAgdGhpcy5fbWluV2Vla2RheXNQYXJzZVtpXSA9IG5ldyBSZWdFeHAoJ14nICsgdGhpcy53ZWVrZGF5c01pbihtb20sICcnKS5yZXBsYWNlKCcuJywgJ1xcLj8nKSArICckJywgJ2knKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX3dlZWtkYXlzUGFyc2VbaV0pIHtcbiAgICAgICAgICAgIHJlZ2V4ID0gJ14nICsgdGhpcy53ZWVrZGF5cyhtb20sICcnKSArICd8XicgKyB0aGlzLndlZWtkYXlzU2hvcnQobW9tLCAnJykgKyAnfF4nICsgdGhpcy53ZWVrZGF5c01pbihtb20sICcnKTtcbiAgICAgICAgICAgIHRoaXMuX3dlZWtkYXlzUGFyc2VbaV0gPSBuZXcgUmVnRXhwKHJlZ2V4LnJlcGxhY2UoJy4nLCAnJyksICdpJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGVzdCB0aGUgcmVnZXhcbiAgICAgICAgaWYgKHN0cmljdCAmJiBmb3JtYXQgPT09ICdkZGRkJyAmJiB0aGlzLl9mdWxsV2Vla2RheXNQYXJzZVtpXS50ZXN0KHdlZWtkYXlOYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RyaWN0ICYmIGZvcm1hdCA9PT0gJ2RkZCcgJiYgdGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlW2ldLnRlc3Qod2Vla2RheU5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfSBlbHNlIGlmIChzdHJpY3QgJiYgZm9ybWF0ID09PSAnZGQnICYmIHRoaXMuX21pbldlZWtkYXlzUGFyc2VbaV0udGVzdCh3ZWVrZGF5TmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9IGVsc2UgaWYgKCFzdHJpY3QgJiYgdGhpcy5fd2Vla2RheXNQYXJzZVtpXS50ZXN0KHdlZWtkYXlOYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIE1PTUVOVFNcblxuZnVuY3Rpb24gZ2V0U2V0RGF5T2ZXZWVrIChpbnB1dCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0ICE9IG51bGwgPyB0aGlzIDogTmFOO1xuICAgIH1cbiAgICB2YXIgZGF5ID0gdGhpcy5faXNVVEMgPyB0aGlzLl9kLmdldFVUQ0RheSgpIDogdGhpcy5fZC5nZXREYXkoKTtcbiAgICBpZiAoaW5wdXQgIT0gbnVsbCkge1xuICAgICAgICBpbnB1dCA9IHBhcnNlV2Vla2RheShpbnB1dCwgdGhpcy5sb2NhbGVEYXRhKCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5hZGQoaW5wdXQgLSBkYXksICdkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRheTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldFNldExvY2FsZURheU9mV2VlayAoaW5wdXQpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgICAgIHJldHVybiBpbnB1dCAhPSBudWxsID8gdGhpcyA6IE5hTjtcbiAgICB9XG4gICAgdmFyIHdlZWtkYXkgPSAodGhpcy5kYXkoKSArIDcgLSB0aGlzLmxvY2FsZURhdGEoKS5fd2Vlay5kb3cpICUgNztcbiAgICByZXR1cm4gaW5wdXQgPT0gbnVsbCA/IHdlZWtkYXkgOiB0aGlzLmFkZChpbnB1dCAtIHdlZWtkYXksICdkJyk7XG59XG5cbmZ1bmN0aW9uIGdldFNldElTT0RheU9mV2VlayAoaW5wdXQpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgICAgIHJldHVybiBpbnB1dCAhPSBudWxsID8gdGhpcyA6IE5hTjtcbiAgICB9XG5cbiAgICAvLyBiZWhhdmVzIHRoZSBzYW1lIGFzIG1vbWVudCNkYXkgZXhjZXB0XG4gICAgLy8gYXMgYSBnZXR0ZXIsIHJldHVybnMgNyBpbnN0ZWFkIG9mIDAgKDEtNyByYW5nZSBpbnN0ZWFkIG9mIDAtNilcbiAgICAvLyBhcyBhIHNldHRlciwgc3VuZGF5IHNob3VsZCBiZWxvbmcgdG8gdGhlIHByZXZpb3VzIHdlZWsuXG5cbiAgICBpZiAoaW5wdXQgIT0gbnVsbCkge1xuICAgICAgICB2YXIgd2Vla2RheSA9IHBhcnNlSXNvV2Vla2RheShpbnB1dCwgdGhpcy5sb2NhbGVEYXRhKCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYXkodGhpcy5kYXkoKSAlIDcgPyB3ZWVrZGF5IDogd2Vla2RheSAtIDcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRheSgpIHx8IDc7XG4gICAgfVxufVxuXG52YXIgZGVmYXVsdFdlZWtkYXlzUmVnZXggPSBtYXRjaFdvcmQ7XG5mdW5jdGlvbiB3ZWVrZGF5c1JlZ2V4IChpc1N0cmljdCkge1xuICAgIGlmICh0aGlzLl93ZWVrZGF5c1BhcnNlRXhhY3QpIHtcbiAgICAgICAgaWYgKCFoYXNPd25Qcm9wKHRoaXMsICdfd2Vla2RheXNSZWdleCcpKSB7XG4gICAgICAgICAgICBjb21wdXRlV2Vla2RheXNQYXJzZS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1N0cmljdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dlZWtkYXlzU3RyaWN0UmVnZXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd2Vla2RheXNSZWdleDtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghaGFzT3duUHJvcCh0aGlzLCAnX3dlZWtkYXlzUmVnZXgnKSkge1xuICAgICAgICAgICAgdGhpcy5fd2Vla2RheXNSZWdleCA9IGRlZmF1bHRXZWVrZGF5c1JlZ2V4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl93ZWVrZGF5c1N0cmljdFJlZ2V4ICYmIGlzU3RyaWN0ID9cbiAgICAgICAgICAgIHRoaXMuX3dlZWtkYXlzU3RyaWN0UmVnZXggOiB0aGlzLl93ZWVrZGF5c1JlZ2V4O1xuICAgIH1cbn1cblxudmFyIGRlZmF1bHRXZWVrZGF5c1Nob3J0UmVnZXggPSBtYXRjaFdvcmQ7XG5mdW5jdGlvbiB3ZWVrZGF5c1Nob3J0UmVnZXggKGlzU3RyaWN0KSB7XG4gICAgaWYgKHRoaXMuX3dlZWtkYXlzUGFyc2VFeGFjdCkge1xuICAgICAgICBpZiAoIWhhc093blByb3AodGhpcywgJ193ZWVrZGF5c1JlZ2V4JykpIHtcbiAgICAgICAgICAgIGNvbXB1dGVXZWVrZGF5c1BhcnNlLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzU3RyaWN0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd2Vla2RheXNTaG9ydFN0cmljdFJlZ2V4O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dlZWtkYXlzU2hvcnRSZWdleDtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghaGFzT3duUHJvcCh0aGlzLCAnX3dlZWtkYXlzU2hvcnRSZWdleCcpKSB7XG4gICAgICAgICAgICB0aGlzLl93ZWVrZGF5c1Nob3J0UmVnZXggPSBkZWZhdWx0V2Vla2RheXNTaG9ydFJlZ2V4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl93ZWVrZGF5c1Nob3J0U3RyaWN0UmVnZXggJiYgaXNTdHJpY3QgP1xuICAgICAgICAgICAgdGhpcy5fd2Vla2RheXNTaG9ydFN0cmljdFJlZ2V4IDogdGhpcy5fd2Vla2RheXNTaG9ydFJlZ2V4O1xuICAgIH1cbn1cblxudmFyIGRlZmF1bHRXZWVrZGF5c01pblJlZ2V4ID0gbWF0Y2hXb3JkO1xuZnVuY3Rpb24gd2Vla2RheXNNaW5SZWdleCAoaXNTdHJpY3QpIHtcbiAgICBpZiAodGhpcy5fd2Vla2RheXNQYXJzZUV4YWN0KSB7XG4gICAgICAgIGlmICghaGFzT3duUHJvcCh0aGlzLCAnX3dlZWtkYXlzUmVnZXgnKSkge1xuICAgICAgICAgICAgY29tcHV0ZVdlZWtkYXlzUGFyc2UuY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNTdHJpY3QpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl93ZWVrZGF5c01pblN0cmljdFJlZ2V4O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dlZWtkYXlzTWluUmVnZXg7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIWhhc093blByb3AodGhpcywgJ193ZWVrZGF5c01pblJlZ2V4JykpIHtcbiAgICAgICAgICAgIHRoaXMuX3dlZWtkYXlzTWluUmVnZXggPSBkZWZhdWx0V2Vla2RheXNNaW5SZWdleDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fd2Vla2RheXNNaW5TdHJpY3RSZWdleCAmJiBpc1N0cmljdCA/XG4gICAgICAgICAgICB0aGlzLl93ZWVrZGF5c01pblN0cmljdFJlZ2V4IDogdGhpcy5fd2Vla2RheXNNaW5SZWdleDtcbiAgICB9XG59XG5cblxuZnVuY3Rpb24gY29tcHV0ZVdlZWtkYXlzUGFyc2UgKCkge1xuICAgIGZ1bmN0aW9uIGNtcExlblJldihhLCBiKSB7XG4gICAgICAgIHJldHVybiBiLmxlbmd0aCAtIGEubGVuZ3RoO1xuICAgIH1cblxuICAgIHZhciBtaW5QaWVjZXMgPSBbXSwgc2hvcnRQaWVjZXMgPSBbXSwgbG9uZ1BpZWNlcyA9IFtdLCBtaXhlZFBpZWNlcyA9IFtdLFxuICAgICAgICBpLCBtb20sIG1pbnAsIHNob3J0cCwgbG9uZ3A7XG4gICAgZm9yIChpID0gMDsgaSA8IDc7IGkrKykge1xuICAgICAgICAvLyBtYWtlIHRoZSByZWdleCBpZiB3ZSBkb24ndCBoYXZlIGl0IGFscmVhZHlcbiAgICAgICAgbW9tID0gY3JlYXRlVVRDKFsyMDAwLCAxXSkuZGF5KGkpO1xuICAgICAgICBtaW5wID0gdGhpcy53ZWVrZGF5c01pbihtb20sICcnKTtcbiAgICAgICAgc2hvcnRwID0gdGhpcy53ZWVrZGF5c1Nob3J0KG1vbSwgJycpO1xuICAgICAgICBsb25ncCA9IHRoaXMud2Vla2RheXMobW9tLCAnJyk7XG4gICAgICAgIG1pblBpZWNlcy5wdXNoKG1pbnApO1xuICAgICAgICBzaG9ydFBpZWNlcy5wdXNoKHNob3J0cCk7XG4gICAgICAgIGxvbmdQaWVjZXMucHVzaChsb25ncCk7XG4gICAgICAgIG1peGVkUGllY2VzLnB1c2gobWlucCk7XG4gICAgICAgIG1peGVkUGllY2VzLnB1c2goc2hvcnRwKTtcbiAgICAgICAgbWl4ZWRQaWVjZXMucHVzaChsb25ncCk7XG4gICAgfVxuICAgIC8vIFNvcnRpbmcgbWFrZXMgc3VyZSBpZiBvbmUgd2Vla2RheSAob3IgYWJicikgaXMgYSBwcmVmaXggb2YgYW5vdGhlciBpdFxuICAgIC8vIHdpbGwgbWF0Y2ggdGhlIGxvbmdlciBwaWVjZS5cbiAgICBtaW5QaWVjZXMuc29ydChjbXBMZW5SZXYpO1xuICAgIHNob3J0UGllY2VzLnNvcnQoY21wTGVuUmV2KTtcbiAgICBsb25nUGllY2VzLnNvcnQoY21wTGVuUmV2KTtcbiAgICBtaXhlZFBpZWNlcy5zb3J0KGNtcExlblJldik7XG4gICAgZm9yIChpID0gMDsgaSA8IDc7IGkrKykge1xuICAgICAgICBzaG9ydFBpZWNlc1tpXSA9IHJlZ2V4RXNjYXBlKHNob3J0UGllY2VzW2ldKTtcbiAgICAgICAgbG9uZ1BpZWNlc1tpXSA9IHJlZ2V4RXNjYXBlKGxvbmdQaWVjZXNbaV0pO1xuICAgICAgICBtaXhlZFBpZWNlc1tpXSA9IHJlZ2V4RXNjYXBlKG1peGVkUGllY2VzW2ldKTtcbiAgICB9XG5cbiAgICB0aGlzLl93ZWVrZGF5c1JlZ2V4ID0gbmV3IFJlZ0V4cCgnXignICsgbWl4ZWRQaWVjZXMuam9pbignfCcpICsgJyknLCAnaScpO1xuICAgIHRoaXMuX3dlZWtkYXlzU2hvcnRSZWdleCA9IHRoaXMuX3dlZWtkYXlzUmVnZXg7XG4gICAgdGhpcy5fd2Vla2RheXNNaW5SZWdleCA9IHRoaXMuX3dlZWtkYXlzUmVnZXg7XG5cbiAgICB0aGlzLl93ZWVrZGF5c1N0cmljdFJlZ2V4ID0gbmV3IFJlZ0V4cCgnXignICsgbG9uZ1BpZWNlcy5qb2luKCd8JykgKyAnKScsICdpJyk7XG4gICAgdGhpcy5fd2Vla2RheXNTaG9ydFN0cmljdFJlZ2V4ID0gbmV3IFJlZ0V4cCgnXignICsgc2hvcnRQaWVjZXMuam9pbignfCcpICsgJyknLCAnaScpO1xuICAgIHRoaXMuX3dlZWtkYXlzTWluU3RyaWN0UmVnZXggPSBuZXcgUmVnRXhwKCdeKCcgKyBtaW5QaWVjZXMuam9pbignfCcpICsgJyknLCAnaScpO1xufVxuXG4vLyBGT1JNQVRUSU5HXG5cbmZ1bmN0aW9uIGhGb3JtYXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaG91cnMoKSAlIDEyIHx8IDEyO1xufVxuXG5mdW5jdGlvbiBrRm9ybWF0KCkge1xuICAgIHJldHVybiB0aGlzLmhvdXJzKCkgfHwgMjQ7XG59XG5cbmFkZEZvcm1hdFRva2VuKCdIJywgWydISCcsIDJdLCAwLCAnaG91cicpO1xuYWRkRm9ybWF0VG9rZW4oJ2gnLCBbJ2hoJywgMl0sIDAsIGhGb3JtYXQpO1xuYWRkRm9ybWF0VG9rZW4oJ2snLCBbJ2trJywgMl0sIDAsIGtGb3JtYXQpO1xuXG5hZGRGb3JtYXRUb2tlbignaG1tJywgMCwgMCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAnJyArIGhGb3JtYXQuYXBwbHkodGhpcykgKyB6ZXJvRmlsbCh0aGlzLm1pbnV0ZXMoKSwgMik7XG59KTtcblxuYWRkRm9ybWF0VG9rZW4oJ2htbXNzJywgMCwgMCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAnJyArIGhGb3JtYXQuYXBwbHkodGhpcykgKyB6ZXJvRmlsbCh0aGlzLm1pbnV0ZXMoKSwgMikgK1xuICAgICAgICB6ZXJvRmlsbCh0aGlzLnNlY29uZHMoKSwgMik7XG59KTtcblxuYWRkRm9ybWF0VG9rZW4oJ0htbScsIDAsIDAsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJycgKyB0aGlzLmhvdXJzKCkgKyB6ZXJvRmlsbCh0aGlzLm1pbnV0ZXMoKSwgMik7XG59KTtcblxuYWRkRm9ybWF0VG9rZW4oJ0htbXNzJywgMCwgMCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAnJyArIHRoaXMuaG91cnMoKSArIHplcm9GaWxsKHRoaXMubWludXRlcygpLCAyKSArXG4gICAgICAgIHplcm9GaWxsKHRoaXMuc2Vjb25kcygpLCAyKTtcbn0pO1xuXG5mdW5jdGlvbiBtZXJpZGllbSAodG9rZW4sIGxvd2VyY2FzZSkge1xuICAgIGFkZEZvcm1hdFRva2VuKHRva2VuLCAwLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS5tZXJpZGllbSh0aGlzLmhvdXJzKCksIHRoaXMubWludXRlcygpLCBsb3dlcmNhc2UpO1xuICAgIH0pO1xufVxuXG5tZXJpZGllbSgnYScsIHRydWUpO1xubWVyaWRpZW0oJ0EnLCBmYWxzZSk7XG5cbi8vIEFMSUFTRVNcblxuYWRkVW5pdEFsaWFzKCdob3VyJywgJ2gnKTtcblxuLy8gUFJJT1JJVFlcbmFkZFVuaXRQcmlvcml0eSgnaG91cicsIDEzKTtcblxuLy8gUEFSU0lOR1xuXG5mdW5jdGlvbiBtYXRjaE1lcmlkaWVtIChpc1N0cmljdCwgbG9jYWxlKSB7XG4gICAgcmV0dXJuIGxvY2FsZS5fbWVyaWRpZW1QYXJzZTtcbn1cblxuYWRkUmVnZXhUb2tlbignYScsICBtYXRjaE1lcmlkaWVtKTtcbmFkZFJlZ2V4VG9rZW4oJ0EnLCAgbWF0Y2hNZXJpZGllbSk7XG5hZGRSZWdleFRva2VuKCdIJywgIG1hdGNoMXRvMik7XG5hZGRSZWdleFRva2VuKCdoJywgIG1hdGNoMXRvMik7XG5hZGRSZWdleFRva2VuKCdrJywgIG1hdGNoMXRvMik7XG5hZGRSZWdleFRva2VuKCdISCcsIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbmFkZFJlZ2V4VG9rZW4oJ2hoJywgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuYWRkUmVnZXhUb2tlbigna2snLCBtYXRjaDF0bzIsIG1hdGNoMik7XG5cbmFkZFJlZ2V4VG9rZW4oJ2htbScsIG1hdGNoM3RvNCk7XG5hZGRSZWdleFRva2VuKCdobW1zcycsIG1hdGNoNXRvNik7XG5hZGRSZWdleFRva2VuKCdIbW0nLCBtYXRjaDN0bzQpO1xuYWRkUmVnZXhUb2tlbignSG1tc3MnLCBtYXRjaDV0bzYpO1xuXG5hZGRQYXJzZVRva2VuKFsnSCcsICdISCddLCBIT1VSKTtcbmFkZFBhcnNlVG9rZW4oWydrJywgJ2trJ10sIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICAgIHZhciBrSW5wdXQgPSB0b0ludChpbnB1dCk7XG4gICAgYXJyYXlbSE9VUl0gPSBrSW5wdXQgPT09IDI0ID8gMCA6IGtJbnB1dDtcbn0pO1xuYWRkUGFyc2VUb2tlbihbJ2EnLCAnQSddLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgICBjb25maWcuX2lzUG0gPSBjb25maWcuX2xvY2FsZS5pc1BNKGlucHV0KTtcbiAgICBjb25maWcuX21lcmlkaWVtID0gaW5wdXQ7XG59KTtcbmFkZFBhcnNlVG9rZW4oWydoJywgJ2hoJ10sIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICAgIGFycmF5W0hPVVJdID0gdG9JbnQoaW5wdXQpO1xuICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmJpZ0hvdXIgPSB0cnVlO1xufSk7XG5hZGRQYXJzZVRva2VuKCdobW0nLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgICB2YXIgcG9zID0gaW5wdXQubGVuZ3RoIC0gMjtcbiAgICBhcnJheVtIT1VSXSA9IHRvSW50KGlucHV0LnN1YnN0cigwLCBwb3MpKTtcbiAgICBhcnJheVtNSU5VVEVdID0gdG9JbnQoaW5wdXQuc3Vic3RyKHBvcykpO1xuICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmJpZ0hvdXIgPSB0cnVlO1xufSk7XG5hZGRQYXJzZVRva2VuKCdobW1zcycsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICAgIHZhciBwb3MxID0gaW5wdXQubGVuZ3RoIC0gNDtcbiAgICB2YXIgcG9zMiA9IGlucHV0Lmxlbmd0aCAtIDI7XG4gICAgYXJyYXlbSE9VUl0gPSB0b0ludChpbnB1dC5zdWJzdHIoMCwgcG9zMSkpO1xuICAgIGFycmF5W01JTlVURV0gPSB0b0ludChpbnB1dC5zdWJzdHIocG9zMSwgMikpO1xuICAgIGFycmF5W1NFQ09ORF0gPSB0b0ludChpbnB1dC5zdWJzdHIocG9zMikpO1xuICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmJpZ0hvdXIgPSB0cnVlO1xufSk7XG5hZGRQYXJzZVRva2VuKCdIbW0nLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgICB2YXIgcG9zID0gaW5wdXQubGVuZ3RoIC0gMjtcbiAgICBhcnJheVtIT1VSXSA9IHRvSW50KGlucHV0LnN1YnN0cigwLCBwb3MpKTtcbiAgICBhcnJheVtNSU5VVEVdID0gdG9JbnQoaW5wdXQuc3Vic3RyKHBvcykpO1xufSk7XG5hZGRQYXJzZVRva2VuKCdIbW1zcycsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICAgIHZhciBwb3MxID0gaW5wdXQubGVuZ3RoIC0gNDtcbiAgICB2YXIgcG9zMiA9IGlucHV0Lmxlbmd0aCAtIDI7XG4gICAgYXJyYXlbSE9VUl0gPSB0b0ludChpbnB1dC5zdWJzdHIoMCwgcG9zMSkpO1xuICAgIGFycmF5W01JTlVURV0gPSB0b0ludChpbnB1dC5zdWJzdHIocG9zMSwgMikpO1xuICAgIGFycmF5W1NFQ09ORF0gPSB0b0ludChpbnB1dC5zdWJzdHIocG9zMikpO1xufSk7XG5cbi8vIExPQ0FMRVNcblxuZnVuY3Rpb24gbG9jYWxlSXNQTSAoaW5wdXQpIHtcbiAgICAvLyBJRTggUXVpcmtzIE1vZGUgJiBJRTcgU3RhbmRhcmRzIE1vZGUgZG8gbm90IGFsbG93IGFjY2Vzc2luZyBzdHJpbmdzIGxpa2UgYXJyYXlzXG4gICAgLy8gVXNpbmcgY2hhckF0IHNob3VsZCBiZSBtb3JlIGNvbXBhdGlibGUuXG4gICAgcmV0dXJuICgoaW5wdXQgKyAnJykudG9Mb3dlckNhc2UoKS5jaGFyQXQoMCkgPT09ICdwJyk7XG59XG5cbnZhciBkZWZhdWx0TG9jYWxlTWVyaWRpZW1QYXJzZSA9IC9bYXBdXFwuP20/XFwuPy9pO1xuZnVuY3Rpb24gbG9jYWxlTWVyaWRpZW0gKGhvdXJzLCBtaW51dGVzLCBpc0xvd2VyKSB7XG4gICAgaWYgKGhvdXJzID4gMTEpIHtcbiAgICAgICAgcmV0dXJuIGlzTG93ZXIgPyAncG0nIDogJ1BNJztcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gaXNMb3dlciA/ICdhbScgOiAnQU0nO1xuICAgIH1cbn1cblxuXG4vLyBNT01FTlRTXG5cbi8vIFNldHRpbmcgdGhlIGhvdXIgc2hvdWxkIGtlZXAgdGhlIHRpbWUsIGJlY2F1c2UgdGhlIHVzZXIgZXhwbGljaXRseVxuLy8gc3BlY2lmaWVkIHdoaWNoIGhvdXIgaGUgd2FudHMuIFNvIHRyeWluZyB0byBtYWludGFpbiB0aGUgc2FtZSBob3VyIChpblxuLy8gYSBuZXcgdGltZXpvbmUpIG1ha2VzIHNlbnNlLiBBZGRpbmcvc3VidHJhY3RpbmcgaG91cnMgZG9lcyBub3QgZm9sbG93XG4vLyB0aGlzIHJ1bGUuXG52YXIgZ2V0U2V0SG91ciA9IG1ha2VHZXRTZXQoJ0hvdXJzJywgdHJ1ZSk7XG5cbi8vIG1vbnRoc1xuLy8gd2Vla1xuLy8gd2Vla2RheXNcbi8vIG1lcmlkaWVtXG52YXIgYmFzZUNvbmZpZyA9IHtcbiAgICBjYWxlbmRhcjogZGVmYXVsdENhbGVuZGFyLFxuICAgIGxvbmdEYXRlRm9ybWF0OiBkZWZhdWx0TG9uZ0RhdGVGb3JtYXQsXG4gICAgaW52YWxpZERhdGU6IGRlZmF1bHRJbnZhbGlkRGF0ZSxcbiAgICBvcmRpbmFsOiBkZWZhdWx0T3JkaW5hbCxcbiAgICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiBkZWZhdWx0RGF5T2ZNb250aE9yZGluYWxQYXJzZSxcbiAgICByZWxhdGl2ZVRpbWU6IGRlZmF1bHRSZWxhdGl2ZVRpbWUsXG5cbiAgICBtb250aHM6IGRlZmF1bHRMb2NhbGVNb250aHMsXG4gICAgbW9udGhzU2hvcnQ6IGRlZmF1bHRMb2NhbGVNb250aHNTaG9ydCxcblxuICAgIHdlZWs6IGRlZmF1bHRMb2NhbGVXZWVrLFxuXG4gICAgd2Vla2RheXM6IGRlZmF1bHRMb2NhbGVXZWVrZGF5cyxcbiAgICB3ZWVrZGF5c01pbjogZGVmYXVsdExvY2FsZVdlZWtkYXlzTWluLFxuICAgIHdlZWtkYXlzU2hvcnQ6IGRlZmF1bHRMb2NhbGVXZWVrZGF5c1Nob3J0LFxuXG4gICAgbWVyaWRpZW1QYXJzZTogZGVmYXVsdExvY2FsZU1lcmlkaWVtUGFyc2Vcbn07XG5cbi8vIGludGVybmFsIHN0b3JhZ2UgZm9yIGxvY2FsZSBjb25maWcgZmlsZXNcbnZhciBsb2NhbGVzID0ge307XG52YXIgbG9jYWxlRmFtaWxpZXMgPSB7fTtcbnZhciBnbG9iYWxMb2NhbGU7XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUxvY2FsZShrZXkpIHtcbiAgICByZXR1cm4ga2V5ID8ga2V5LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgnXycsICctJykgOiBrZXk7XG59XG5cbi8vIHBpY2sgdGhlIGxvY2FsZSBmcm9tIHRoZSBhcnJheVxuLy8gdHJ5IFsnZW4tYXUnLCAnZW4tZ2InXSBhcyAnZW4tYXUnLCAnZW4tZ2InLCAnZW4nLCBhcyBpbiBtb3ZlIHRocm91Z2ggdGhlIGxpc3QgdHJ5aW5nIGVhY2hcbi8vIHN1YnN0cmluZyBmcm9tIG1vc3Qgc3BlY2lmaWMgdG8gbGVhc3QsIGJ1dCBtb3ZlIHRvIHRoZSBuZXh0IGFycmF5IGl0ZW0gaWYgaXQncyBhIG1vcmUgc3BlY2lmaWMgdmFyaWFudCB0aGFuIHRoZSBjdXJyZW50IHJvb3RcbmZ1bmN0aW9uIGNob29zZUxvY2FsZShuYW1lcykge1xuICAgIHZhciBpID0gMCwgaiwgbmV4dCwgbG9jYWxlLCBzcGxpdDtcblxuICAgIHdoaWxlIChpIDwgbmFtZXMubGVuZ3RoKSB7XG4gICAgICAgIHNwbGl0ID0gbm9ybWFsaXplTG9jYWxlKG5hbWVzW2ldKS5zcGxpdCgnLScpO1xuICAgICAgICBqID0gc3BsaXQubGVuZ3RoO1xuICAgICAgICBuZXh0ID0gbm9ybWFsaXplTG9jYWxlKG5hbWVzW2kgKyAxXSk7XG4gICAgICAgIG5leHQgPSBuZXh0ID8gbmV4dC5zcGxpdCgnLScpIDogbnVsbDtcbiAgICAgICAgd2hpbGUgKGogPiAwKSB7XG4gICAgICAgICAgICBsb2NhbGUgPSBsb2FkTG9jYWxlKHNwbGl0LnNsaWNlKDAsIGopLmpvaW4oJy0nKSk7XG4gICAgICAgICAgICBpZiAobG9jYWxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZXh0ICYmIG5leHQubGVuZ3RoID49IGogJiYgY29tcGFyZUFycmF5cyhzcGxpdCwgbmV4dCwgdHJ1ZSkgPj0gaiAtIDEpIHtcbiAgICAgICAgICAgICAgICAvL3RoZSBuZXh0IGFycmF5IGl0ZW0gaXMgYmV0dGVyIHRoYW4gYSBzaGFsbG93ZXIgc3Vic3RyaW5nIG9mIHRoaXMgb25lXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBqLS07XG4gICAgICAgIH1cbiAgICAgICAgaSsrO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gbG9hZExvY2FsZShuYW1lKSB7XG4gICAgdmFyIG9sZExvY2FsZSA9IG51bGw7XG4gICAgLy8gVE9ETzogRmluZCBhIGJldHRlciB3YXkgdG8gcmVnaXN0ZXIgYW5kIGxvYWQgYWxsIHRoZSBsb2NhbGVzIGluIE5vZGVcbiAgICBpZiAoIWxvY2FsZXNbbmFtZV0gJiYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSAmJlxuICAgICAgICAgICAgbW9kdWxlICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvbGRMb2NhbGUgPSBnbG9iYWxMb2NhbGUuX2FiYnI7XG4gICAgICAgICAgICByZXF1aXJlKCcuL2xvY2FsZS8nICsgbmFtZSk7XG4gICAgICAgICAgICAvLyBiZWNhdXNlIGRlZmluZUxvY2FsZSBjdXJyZW50bHkgYWxzbyBzZXRzIHRoZSBnbG9iYWwgbG9jYWxlLCB3ZVxuICAgICAgICAgICAgLy8gd2FudCB0byB1bmRvIHRoYXQgZm9yIGxhenkgbG9hZGVkIGxvY2FsZXNcbiAgICAgICAgICAgIGdldFNldEdsb2JhbExvY2FsZShvbGRMb2NhbGUpO1xuICAgICAgICB9IGNhdGNoIChlKSB7IH1cbiAgICB9XG4gICAgcmV0dXJuIGxvY2FsZXNbbmFtZV07XG59XG5cbi8vIFRoaXMgZnVuY3Rpb24gd2lsbCBsb2FkIGxvY2FsZSBhbmQgdGhlbiBzZXQgdGhlIGdsb2JhbCBsb2NhbGUuICBJZlxuLy8gbm8gYXJndW1lbnRzIGFyZSBwYXNzZWQgaW4sIGl0IHdpbGwgc2ltcGx5IHJldHVybiB0aGUgY3VycmVudCBnbG9iYWxcbi8vIGxvY2FsZSBrZXkuXG5mdW5jdGlvbiBnZXRTZXRHbG9iYWxMb2NhbGUgKGtleSwgdmFsdWVzKSB7XG4gICAgdmFyIGRhdGE7XG4gICAgaWYgKGtleSkge1xuICAgICAgICBpZiAoaXNVbmRlZmluZWQodmFsdWVzKSkge1xuICAgICAgICAgICAgZGF0YSA9IGdldExvY2FsZShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGF0YSA9IGRlZmluZUxvY2FsZShrZXksIHZhbHVlcyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgLy8gbW9tZW50LmR1cmF0aW9uLl9sb2NhbGUgPSBtb21lbnQuX2xvY2FsZSA9IGRhdGE7XG4gICAgICAgICAgICBnbG9iYWxMb2NhbGUgPSBkYXRhO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGdsb2JhbExvY2FsZS5fYWJicjtcbn1cblxuZnVuY3Rpb24gZGVmaW5lTG9jYWxlIChuYW1lLCBjb25maWcpIHtcbiAgICBpZiAoY29uZmlnICE9PSBudWxsKSB7XG4gICAgICAgIHZhciBwYXJlbnRDb25maWcgPSBiYXNlQ29uZmlnO1xuICAgICAgICBjb25maWcuYWJiciA9IG5hbWU7XG4gICAgICAgIGlmIChsb2NhbGVzW25hbWVdICE9IG51bGwpIHtcbiAgICAgICAgICAgIGRlcHJlY2F0ZVNpbXBsZSgnZGVmaW5lTG9jYWxlT3ZlcnJpZGUnLFxuICAgICAgICAgICAgICAgICAgICAndXNlIG1vbWVudC51cGRhdGVMb2NhbGUobG9jYWxlTmFtZSwgY29uZmlnKSB0byBjaGFuZ2UgJyArXG4gICAgICAgICAgICAgICAgICAgICdhbiBleGlzdGluZyBsb2NhbGUuIG1vbWVudC5kZWZpbmVMb2NhbGUobG9jYWxlTmFtZSwgJyArXG4gICAgICAgICAgICAgICAgICAgICdjb25maWcpIHNob3VsZCBvbmx5IGJlIHVzZWQgZm9yIGNyZWF0aW5nIGEgbmV3IGxvY2FsZSAnICtcbiAgICAgICAgICAgICAgICAgICAgJ1NlZSBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2RlZmluZS1sb2NhbGUvIGZvciBtb3JlIGluZm8uJyk7XG4gICAgICAgICAgICBwYXJlbnRDb25maWcgPSBsb2NhbGVzW25hbWVdLl9jb25maWc7XG4gICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLnBhcmVudExvY2FsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxlc1tjb25maWcucGFyZW50TG9jYWxlXSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50Q29uZmlnID0gbG9jYWxlc1tjb25maWcucGFyZW50TG9jYWxlXS5fY29uZmlnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxvY2FsZUZhbWlsaWVzW2NvbmZpZy5wYXJlbnRMb2NhbGVdKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsZUZhbWlsaWVzW2NvbmZpZy5wYXJlbnRMb2NhbGVdID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxvY2FsZUZhbWlsaWVzW2NvbmZpZy5wYXJlbnRMb2NhbGVdLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgICAgICBjb25maWc6IGNvbmZpZ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxvY2FsZXNbbmFtZV0gPSBuZXcgTG9jYWxlKG1lcmdlQ29uZmlncyhwYXJlbnRDb25maWcsIGNvbmZpZykpO1xuXG4gICAgICAgIGlmIChsb2NhbGVGYW1pbGllc1tuYW1lXSkge1xuICAgICAgICAgICAgbG9jYWxlRmFtaWxpZXNbbmFtZV0uZm9yRWFjaChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgIGRlZmluZUxvY2FsZSh4Lm5hbWUsIHguY29uZmlnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYmFja3dhcmRzIGNvbXBhdCBmb3Igbm93OiBhbHNvIHNldCB0aGUgbG9jYWxlXG4gICAgICAgIC8vIG1ha2Ugc3VyZSB3ZSBzZXQgdGhlIGxvY2FsZSBBRlRFUiBhbGwgY2hpbGQgbG9jYWxlcyBoYXZlIGJlZW5cbiAgICAgICAgLy8gY3JlYXRlZCwgc28gd2Ugd29uJ3QgZW5kIHVwIHdpdGggdGhlIGNoaWxkIGxvY2FsZSBzZXQuXG4gICAgICAgIGdldFNldEdsb2JhbExvY2FsZShuYW1lKTtcblxuXG4gICAgICAgIHJldHVybiBsb2NhbGVzW25hbWVdO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHVzZWZ1bCBmb3IgdGVzdGluZ1xuICAgICAgICBkZWxldGUgbG9jYWxlc1tuYW1lXTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB1cGRhdGVMb2NhbGUobmFtZSwgY29uZmlnKSB7XG4gICAgaWYgKGNvbmZpZyAhPSBudWxsKSB7XG4gICAgICAgIHZhciBsb2NhbGUsIHBhcmVudENvbmZpZyA9IGJhc2VDb25maWc7XG4gICAgICAgIC8vIE1FUkdFXG4gICAgICAgIGlmIChsb2NhbGVzW25hbWVdICE9IG51bGwpIHtcbiAgICAgICAgICAgIHBhcmVudENvbmZpZyA9IGxvY2FsZXNbbmFtZV0uX2NvbmZpZztcbiAgICAgICAgfVxuICAgICAgICBjb25maWcgPSBtZXJnZUNvbmZpZ3MocGFyZW50Q29uZmlnLCBjb25maWcpO1xuICAgICAgICBsb2NhbGUgPSBuZXcgTG9jYWxlKGNvbmZpZyk7XG4gICAgICAgIGxvY2FsZS5wYXJlbnRMb2NhbGUgPSBsb2NhbGVzW25hbWVdO1xuICAgICAgICBsb2NhbGVzW25hbWVdID0gbG9jYWxlO1xuXG4gICAgICAgIC8vIGJhY2t3YXJkcyBjb21wYXQgZm9yIG5vdzogYWxzbyBzZXQgdGhlIGxvY2FsZVxuICAgICAgICBnZXRTZXRHbG9iYWxMb2NhbGUobmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcGFzcyBudWxsIGZvciBjb25maWcgdG8gdW51cGRhdGUsIHVzZWZ1bCBmb3IgdGVzdHNcbiAgICAgICAgaWYgKGxvY2FsZXNbbmFtZV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsZXNbbmFtZV0ucGFyZW50TG9jYWxlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBsb2NhbGVzW25hbWVdID0gbG9jYWxlc1tuYW1lXS5wYXJlbnRMb2NhbGU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxvY2FsZXNbbmFtZV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBsb2NhbGVzW25hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsb2NhbGVzW25hbWVdO1xufVxuXG4vLyByZXR1cm5zIGxvY2FsZSBkYXRhXG5mdW5jdGlvbiBnZXRMb2NhbGUgKGtleSkge1xuICAgIHZhciBsb2NhbGU7XG5cbiAgICBpZiAoa2V5ICYmIGtleS5fbG9jYWxlICYmIGtleS5fbG9jYWxlLl9hYmJyKSB7XG4gICAgICAgIGtleSA9IGtleS5fbG9jYWxlLl9hYmJyO1xuICAgIH1cblxuICAgIGlmICgha2V5KSB7XG4gICAgICAgIHJldHVybiBnbG9iYWxMb2NhbGU7XG4gICAgfVxuXG4gICAgaWYgKCFpc0FycmF5KGtleSkpIHtcbiAgICAgICAgLy9zaG9ydC1jaXJjdWl0IGV2ZXJ5dGhpbmcgZWxzZVxuICAgICAgICBsb2NhbGUgPSBsb2FkTG9jYWxlKGtleSk7XG4gICAgICAgIGlmIChsb2NhbGUpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGU7XG4gICAgICAgIH1cbiAgICAgICAga2V5ID0gW2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGNob29zZUxvY2FsZShrZXkpO1xufVxuXG5mdW5jdGlvbiBsaXN0TG9jYWxlcygpIHtcbiAgICByZXR1cm4ga2V5cyQxKGxvY2FsZXMpO1xufVxuXG5mdW5jdGlvbiBjaGVja092ZXJmbG93IChtKSB7XG4gICAgdmFyIG92ZXJmbG93O1xuICAgIHZhciBhID0gbS5fYTtcblxuICAgIGlmIChhICYmIGdldFBhcnNpbmdGbGFncyhtKS5vdmVyZmxvdyA9PT0gLTIpIHtcbiAgICAgICAgb3ZlcmZsb3cgPVxuICAgICAgICAgICAgYVtNT05USF0gICAgICAgPCAwIHx8IGFbTU9OVEhdICAgICAgID4gMTEgID8gTU9OVEggOlxuICAgICAgICAgICAgYVtEQVRFXSAgICAgICAgPCAxIHx8IGFbREFURV0gICAgICAgID4gZGF5c0luTW9udGgoYVtZRUFSXSwgYVtNT05USF0pID8gREFURSA6XG4gICAgICAgICAgICBhW0hPVVJdICAgICAgICA8IDAgfHwgYVtIT1VSXSAgICAgICAgPiAyNCB8fCAoYVtIT1VSXSA9PT0gMjQgJiYgKGFbTUlOVVRFXSAhPT0gMCB8fCBhW1NFQ09ORF0gIT09IDAgfHwgYVtNSUxMSVNFQ09ORF0gIT09IDApKSA/IEhPVVIgOlxuICAgICAgICAgICAgYVtNSU5VVEVdICAgICAgPCAwIHx8IGFbTUlOVVRFXSAgICAgID4gNTkgID8gTUlOVVRFIDpcbiAgICAgICAgICAgIGFbU0VDT05EXSAgICAgIDwgMCB8fCBhW1NFQ09ORF0gICAgICA+IDU5ICA/IFNFQ09ORCA6XG4gICAgICAgICAgICBhW01JTExJU0VDT05EXSA8IDAgfHwgYVtNSUxMSVNFQ09ORF0gPiA5OTkgPyBNSUxMSVNFQ09ORCA6XG4gICAgICAgICAgICAtMTtcblxuICAgICAgICBpZiAoZ2V0UGFyc2luZ0ZsYWdzKG0pLl9vdmVyZmxvd0RheU9mWWVhciAmJiAob3ZlcmZsb3cgPCBZRUFSIHx8IG92ZXJmbG93ID4gREFURSkpIHtcbiAgICAgICAgICAgIG92ZXJmbG93ID0gREFURTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2V0UGFyc2luZ0ZsYWdzKG0pLl9vdmVyZmxvd1dlZWtzICYmIG92ZXJmbG93ID09PSAtMSkge1xuICAgICAgICAgICAgb3ZlcmZsb3cgPSBXRUVLO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnZXRQYXJzaW5nRmxhZ3MobSkuX292ZXJmbG93V2Vla2RheSAmJiBvdmVyZmxvdyA9PT0gLTEpIHtcbiAgICAgICAgICAgIG92ZXJmbG93ID0gV0VFS0RBWTtcbiAgICAgICAgfVxuXG4gICAgICAgIGdldFBhcnNpbmdGbGFncyhtKS5vdmVyZmxvdyA9IG92ZXJmbG93O1xuICAgIH1cblxuICAgIHJldHVybiBtO1xufVxuXG4vLyBpc28gODYwMSByZWdleFxuLy8gMDAwMC0wMC0wMCAwMDAwLVcwMCBvciAwMDAwLVcwMC0wICsgVCArIDAwIG9yIDAwOjAwIG9yIDAwOjAwOjAwIG9yIDAwOjAwOjAwLjAwMCArICswMDowMCBvciArMDAwMCBvciArMDApXG52YXIgZXh0ZW5kZWRJc29SZWdleCA9IC9eXFxzKigoPzpbKy1dXFxkezZ9fFxcZHs0fSktKD86XFxkXFxkLVxcZFxcZHxXXFxkXFxkLVxcZHxXXFxkXFxkfFxcZFxcZFxcZHxcXGRcXGQpKSg/OihUfCApKFxcZFxcZCg/OjpcXGRcXGQoPzo6XFxkXFxkKD86Wy4sXVxcZCspPyk/KT8pKFtcXCtcXC1dXFxkXFxkKD86Oj9cXGRcXGQpP3xcXHMqWik/KT8kLztcbnZhciBiYXNpY0lzb1JlZ2V4ID0gL15cXHMqKCg/OlsrLV1cXGR7Nn18XFxkezR9KSg/OlxcZFxcZFxcZFxcZHxXXFxkXFxkXFxkfFdcXGRcXGR8XFxkXFxkXFxkfFxcZFxcZCkpKD86KFR8ICkoXFxkXFxkKD86XFxkXFxkKD86XFxkXFxkKD86Wy4sXVxcZCspPyk/KT8pKFtcXCtcXC1dXFxkXFxkKD86Oj9cXGRcXGQpP3xcXHMqWik/KT8kLztcblxudmFyIHR6UmVnZXggPSAvWnxbKy1dXFxkXFxkKD86Oj9cXGRcXGQpPy87XG5cbnZhciBpc29EYXRlcyA9IFtcbiAgICBbJ1lZWVlZWS1NTS1ERCcsIC9bKy1dXFxkezZ9LVxcZFxcZC1cXGRcXGQvXSxcbiAgICBbJ1lZWVktTU0tREQnLCAvXFxkezR9LVxcZFxcZC1cXGRcXGQvXSxcbiAgICBbJ0dHR0ctW1ddV1ctRScsIC9cXGR7NH0tV1xcZFxcZC1cXGQvXSxcbiAgICBbJ0dHR0ctW1ddV1cnLCAvXFxkezR9LVdcXGRcXGQvLCBmYWxzZV0sXG4gICAgWydZWVlZLURERCcsIC9cXGR7NH0tXFxkezN9L10sXG4gICAgWydZWVlZLU1NJywgL1xcZHs0fS1cXGRcXGQvLCBmYWxzZV0sXG4gICAgWydZWVlZWVlNTUREJywgL1srLV1cXGR7MTB9L10sXG4gICAgWydZWVlZTU1ERCcsIC9cXGR7OH0vXSxcbiAgICAvLyBZWVlZTU0gaXMgTk9UIGFsbG93ZWQgYnkgdGhlIHN0YW5kYXJkXG4gICAgWydHR0dHW1ddV1dFJywgL1xcZHs0fVdcXGR7M30vXSxcbiAgICBbJ0dHR0dbV11XVycsIC9cXGR7NH1XXFxkezJ9LywgZmFsc2VdLFxuICAgIFsnWVlZWURERCcsIC9cXGR7N30vXVxuXTtcblxuLy8gaXNvIHRpbWUgZm9ybWF0cyBhbmQgcmVnZXhlc1xudmFyIGlzb1RpbWVzID0gW1xuICAgIFsnSEg6bW06c3MuU1NTUycsIC9cXGRcXGQ6XFxkXFxkOlxcZFxcZFxcLlxcZCsvXSxcbiAgICBbJ0hIOm1tOnNzLFNTU1MnLCAvXFxkXFxkOlxcZFxcZDpcXGRcXGQsXFxkKy9dLFxuICAgIFsnSEg6bW06c3MnLCAvXFxkXFxkOlxcZFxcZDpcXGRcXGQvXSxcbiAgICBbJ0hIOm1tJywgL1xcZFxcZDpcXGRcXGQvXSxcbiAgICBbJ0hIbW1zcy5TU1NTJywgL1xcZFxcZFxcZFxcZFxcZFxcZFxcLlxcZCsvXSxcbiAgICBbJ0hIbW1zcyxTU1NTJywgL1xcZFxcZFxcZFxcZFxcZFxcZCxcXGQrL10sXG4gICAgWydISG1tc3MnLCAvXFxkXFxkXFxkXFxkXFxkXFxkL10sXG4gICAgWydISG1tJywgL1xcZFxcZFxcZFxcZC9dLFxuICAgIFsnSEgnLCAvXFxkXFxkL11cbl07XG5cbnZhciBhc3BOZXRKc29uUmVnZXggPSAvXlxcLz9EYXRlXFwoKFxcLT9cXGQrKS9pO1xuXG4vLyBkYXRlIGZyb20gaXNvIGZvcm1hdFxuZnVuY3Rpb24gY29uZmlnRnJvbUlTTyhjb25maWcpIHtcbiAgICB2YXIgaSwgbCxcbiAgICAgICAgc3RyaW5nID0gY29uZmlnLl9pLFxuICAgICAgICBtYXRjaCA9IGV4dGVuZGVkSXNvUmVnZXguZXhlYyhzdHJpbmcpIHx8IGJhc2ljSXNvUmVnZXguZXhlYyhzdHJpbmcpLFxuICAgICAgICBhbGxvd1RpbWUsIGRhdGVGb3JtYXQsIHRpbWVGb3JtYXQsIHR6Rm9ybWF0O1xuXG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmlzbyA9IHRydWU7XG5cbiAgICAgICAgZm9yIChpID0gMCwgbCA9IGlzb0RhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgaWYgKGlzb0RhdGVzW2ldWzFdLmV4ZWMobWF0Y2hbMV0pKSB7XG4gICAgICAgICAgICAgICAgZGF0ZUZvcm1hdCA9IGlzb0RhdGVzW2ldWzBdO1xuICAgICAgICAgICAgICAgIGFsbG93VGltZSA9IGlzb0RhdGVzW2ldWzJdICE9PSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0ZUZvcm1hdCA9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25maWcuX2lzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWF0Y2hbM10pIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSBpc29UaW1lcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNvVGltZXNbaV1bMV0uZXhlYyhtYXRjaFszXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbWF0Y2hbMl0gc2hvdWxkIGJlICdUJyBvciBzcGFjZVxuICAgICAgICAgICAgICAgICAgICB0aW1lRm9ybWF0ID0gKG1hdGNoWzJdIHx8ICcgJykgKyBpc29UaW1lc1tpXVswXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRpbWVGb3JtYXQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5faXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFsbG93VGltZSAmJiB0aW1lRm9ybWF0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNvbmZpZy5faXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXRjaFs0XSkge1xuICAgICAgICAgICAgaWYgKHR6UmVnZXguZXhlYyhtYXRjaFs0XSkpIHtcbiAgICAgICAgICAgICAgICB0ekZvcm1hdCA9ICdaJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLl9pc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbmZpZy5fZiA9IGRhdGVGb3JtYXQgKyAodGltZUZvcm1hdCB8fCAnJykgKyAodHpGb3JtYXQgfHwgJycpO1xuICAgICAgICBjb25maWdGcm9tU3RyaW5nQW5kRm9ybWF0KGNvbmZpZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uZmlnLl9pc1ZhbGlkID0gZmFsc2U7XG4gICAgfVxufVxuXG4vLyBSRkMgMjgyMiByZWdleDogRm9yIGRldGFpbHMgc2VlIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMyODIyI3NlY3Rpb24tMy4zXG52YXIgYmFzaWNSZmNSZWdleCA9IC9eKCg/Ok1vbnxUdWV8V2VkfFRodXxGcml8U2F0fFN1biksP1xccyk/KFxcZD9cXGRcXHMoPzpKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYylcXHMoPzpcXGRcXGQpP1xcZFxcZFxccykoXFxkXFxkOlxcZFxcZCkoXFw6XFxkXFxkKT8oXFxzKD86VVR8R01UfFtFQ01QXVtTRF1UfFtBLUlLLVphLWlrLXpdfFsrLV1cXGR7NH0pKSQvO1xuXG4vLyBkYXRlIGFuZCB0aW1lIGZyb20gcmVmIDI4MjIgZm9ybWF0XG5mdW5jdGlvbiBjb25maWdGcm9tUkZDMjgyMihjb25maWcpIHtcbiAgICB2YXIgc3RyaW5nLCBtYXRjaCwgZGF5Rm9ybWF0LFxuICAgICAgICBkYXRlRm9ybWF0LCB0aW1lRm9ybWF0LCB0ekZvcm1hdDtcbiAgICB2YXIgdGltZXpvbmVzID0ge1xuICAgICAgICAnIEdNVCc6ICcgKzAwMDAnLFxuICAgICAgICAnIEVEVCc6ICcgLTA0MDAnLFxuICAgICAgICAnIEVTVCc6ICcgLTA1MDAnLFxuICAgICAgICAnIENEVCc6ICcgLTA1MDAnLFxuICAgICAgICAnIENTVCc6ICcgLTA2MDAnLFxuICAgICAgICAnIE1EVCc6ICcgLTA2MDAnLFxuICAgICAgICAnIE1TVCc6ICcgLTA3MDAnLFxuICAgICAgICAnIFBEVCc6ICcgLTA3MDAnLFxuICAgICAgICAnIFBTVCc6ICcgLTA4MDAnXG4gICAgfTtcbiAgICB2YXIgbWlsaXRhcnkgPSAnWVhXVlVUU1JRUE9OWkFCQ0RFRkdISUtMTSc7XG4gICAgdmFyIHRpbWV6b25lLCB0aW1lem9uZUluZGV4O1xuXG4gICAgc3RyaW5nID0gY29uZmlnLl9pXG4gICAgICAgIC5yZXBsYWNlKC9cXChbXlxcKV0qXFwpfFtcXG5cXHRdL2csICcgJykgLy8gUmVtb3ZlIGNvbW1lbnRzIGFuZCBmb2xkaW5nIHdoaXRlc3BhY2VcbiAgICAgICAgLnJlcGxhY2UoLyhcXHNcXHMrKS9nLCAnICcpIC8vIFJlcGxhY2UgbXVsdGlwbGUtc3BhY2VzIHdpdGggYSBzaW5nbGUgc3BhY2VcbiAgICAgICAgLnJlcGxhY2UoL15cXHN8XFxzJC9nLCAnJyk7IC8vIFJlbW92ZSBsZWFkaW5nIGFuZCB0cmFpbGluZyBzcGFjZXNcbiAgICBtYXRjaCA9IGJhc2ljUmZjUmVnZXguZXhlYyhzdHJpbmcpO1xuXG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGRheUZvcm1hdCA9IG1hdGNoWzFdID8gJ2RkZCcgKyAoKG1hdGNoWzFdLmxlbmd0aCA9PT0gNSkgPyAnLCAnIDogJyAnKSA6ICcnO1xuICAgICAgICBkYXRlRm9ybWF0ID0gJ0QgTU1NICcgKyAoKG1hdGNoWzJdLmxlbmd0aCA+IDEwKSA/ICdZWVlZICcgOiAnWVkgJyk7XG4gICAgICAgIHRpbWVGb3JtYXQgPSAnSEg6bW0nICsgKG1hdGNoWzRdID8gJzpzcycgOiAnJyk7XG5cbiAgICAgICAgLy8gVE9ETzogUmVwbGFjZSB0aGUgdmFuaWxsYSBKUyBEYXRlIG9iamVjdCB3aXRoIGFuIGluZGVwZW50ZW50IGRheS1vZi13ZWVrIGNoZWNrLlxuICAgICAgICBpZiAobWF0Y2hbMV0pIHsgLy8gZGF5IG9mIHdlZWsgZ2l2ZW5cbiAgICAgICAgICAgIHZhciBtb21lbnREYXRlID0gbmV3IERhdGUobWF0Y2hbMl0pO1xuICAgICAgICAgICAgdmFyIG1vbWVudERheSA9IFsnU3VuJywnTW9uJywnVHVlJywnV2VkJywnVGh1JywnRnJpJywnU2F0J11bbW9tZW50RGF0ZS5nZXREYXkoKV07XG5cbiAgICAgICAgICAgIGlmIChtYXRjaFsxXS5zdWJzdHIoMCwzKSAhPT0gbW9tZW50RGF5KSB7XG4gICAgICAgICAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykud2Vla2RheU1pc21hdGNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25maWcuX2lzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKG1hdGNoWzVdLmxlbmd0aCkge1xuICAgICAgICAgICAgY2FzZSAyOiAvLyBtaWxpdGFyeVxuICAgICAgICAgICAgICAgIGlmICh0aW1lem9uZUluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWV6b25lID0gJyArMDAwMCc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGltZXpvbmVJbmRleCA9IG1pbGl0YXJ5LmluZGV4T2YobWF0Y2hbNV1bMV0udG9VcHBlckNhc2UoKSkgLSAxMjtcbiAgICAgICAgICAgICAgICAgICAgdGltZXpvbmUgPSAoKHRpbWV6b25lSW5kZXggPCAwKSA/ICcgLScgOiAnICsnKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAoKCcnICsgdGltZXpvbmVJbmRleCkucmVwbGFjZSgvXi0/LywgJzAnKSkubWF0Y2goLy4uJC8pWzBdICsgJzAwJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQ6IC8vIFpvbmVcbiAgICAgICAgICAgICAgICB0aW1lem9uZSA9IHRpbWV6b25lc1ttYXRjaFs1XV07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OiAvLyBVVCBvciArLy05OTk5XG4gICAgICAgICAgICAgICAgdGltZXpvbmUgPSB0aW1lem9uZXNbJyBHTVQnXTtcbiAgICAgICAgfVxuICAgICAgICBtYXRjaFs1XSA9IHRpbWV6b25lO1xuICAgICAgICBjb25maWcuX2kgPSBtYXRjaC5zcGxpY2UoMSkuam9pbignJyk7XG4gICAgICAgIHR6Rm9ybWF0ID0gJyBaWic7XG4gICAgICAgIGNvbmZpZy5fZiA9IGRheUZvcm1hdCArIGRhdGVGb3JtYXQgKyB0aW1lRm9ybWF0ICsgdHpGb3JtYXQ7XG4gICAgICAgIGNvbmZpZ0Zyb21TdHJpbmdBbmRGb3JtYXQoY29uZmlnKTtcbiAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykucmZjMjgyMiA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uZmlnLl9pc1ZhbGlkID0gZmFsc2U7XG4gICAgfVxufVxuXG4vLyBkYXRlIGZyb20gaXNvIGZvcm1hdCBvciBmYWxsYmFja1xuZnVuY3Rpb24gY29uZmlnRnJvbVN0cmluZyhjb25maWcpIHtcbiAgICB2YXIgbWF0Y2hlZCA9IGFzcE5ldEpzb25SZWdleC5leGVjKGNvbmZpZy5faSk7XG5cbiAgICBpZiAobWF0Y2hlZCAhPT0gbnVsbCkge1xuICAgICAgICBjb25maWcuX2QgPSBuZXcgRGF0ZSgrbWF0Y2hlZFsxXSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25maWdGcm9tSVNPKGNvbmZpZyk7XG4gICAgaWYgKGNvbmZpZy5faXNWYWxpZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgZGVsZXRlIGNvbmZpZy5faXNWYWxpZDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uZmlnRnJvbVJGQzI4MjIoY29uZmlnKTtcbiAgICBpZiAoY29uZmlnLl9pc1ZhbGlkID09PSBmYWxzZSkge1xuICAgICAgICBkZWxldGUgY29uZmlnLl9pc1ZhbGlkO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBGaW5hbCBhdHRlbXB0LCB1c2UgSW5wdXQgRmFsbGJhY2tcbiAgICBob29rcy5jcmVhdGVGcm9tSW5wdXRGYWxsYmFjayhjb25maWcpO1xufVxuXG5ob29rcy5jcmVhdGVGcm9tSW5wdXRGYWxsYmFjayA9IGRlcHJlY2F0ZShcbiAgICAndmFsdWUgcHJvdmlkZWQgaXMgbm90IGluIGEgcmVjb2duaXplZCBSRkMyODIyIG9yIElTTyBmb3JtYXQuIG1vbWVudCBjb25zdHJ1Y3Rpb24gZmFsbHMgYmFjayB0byBqcyBEYXRlKCksICcgK1xuICAgICd3aGljaCBpcyBub3QgcmVsaWFibGUgYWNyb3NzIGFsbCBicm93c2VycyBhbmQgdmVyc2lvbnMuIE5vbiBSRkMyODIyL0lTTyBkYXRlIGZvcm1hdHMgYXJlICcgK1xuICAgICdkaXNjb3VyYWdlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGFuIHVwY29taW5nIG1ham9yIHJlbGVhc2UuIFBsZWFzZSByZWZlciB0byAnICtcbiAgICAnaHR0cDovL21vbWVudGpzLmNvbS9ndWlkZXMvIy93YXJuaW5ncy9qcy1kYXRlLyBmb3IgbW9yZSBpbmZvLicsXG4gICAgZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICBjb25maWcuX2QgPSBuZXcgRGF0ZShjb25maWcuX2kgKyAoY29uZmlnLl91c2VVVEMgPyAnIFVUQycgOiAnJykpO1xuICAgIH1cbik7XG5cbi8vIFBpY2sgdGhlIGZpcnN0IGRlZmluZWQgb2YgdHdvIG9yIHRocmVlIGFyZ3VtZW50cy5cbmZ1bmN0aW9uIGRlZmF1bHRzKGEsIGIsIGMpIHtcbiAgICBpZiAoYSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBhO1xuICAgIH1cbiAgICBpZiAoYiAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBiO1xuICAgIH1cbiAgICByZXR1cm4gYztcbn1cblxuZnVuY3Rpb24gY3VycmVudERhdGVBcnJheShjb25maWcpIHtcbiAgICAvLyBob29rcyBpcyBhY3R1YWxseSB0aGUgZXhwb3J0ZWQgbW9tZW50IG9iamVjdFxuICAgIHZhciBub3dWYWx1ZSA9IG5ldyBEYXRlKGhvb2tzLm5vdygpKTtcbiAgICBpZiAoY29uZmlnLl91c2VVVEMpIHtcbiAgICAgICAgcmV0dXJuIFtub3dWYWx1ZS5nZXRVVENGdWxsWWVhcigpLCBub3dWYWx1ZS5nZXRVVENNb250aCgpLCBub3dWYWx1ZS5nZXRVVENEYXRlKCldO1xuICAgIH1cbiAgICByZXR1cm4gW25vd1ZhbHVlLmdldEZ1bGxZZWFyKCksIG5vd1ZhbHVlLmdldE1vbnRoKCksIG5vd1ZhbHVlLmdldERhdGUoKV07XG59XG5cbi8vIGNvbnZlcnQgYW4gYXJyYXkgdG8gYSBkYXRlLlxuLy8gdGhlIGFycmF5IHNob3VsZCBtaXJyb3IgdGhlIHBhcmFtZXRlcnMgYmVsb3dcbi8vIG5vdGU6IGFsbCB2YWx1ZXMgcGFzdCB0aGUgeWVhciBhcmUgb3B0aW9uYWwgYW5kIHdpbGwgZGVmYXVsdCB0byB0aGUgbG93ZXN0IHBvc3NpYmxlIHZhbHVlLlxuLy8gW3llYXIsIG1vbnRoLCBkYXkgLCBob3VyLCBtaW51dGUsIHNlY29uZCwgbWlsbGlzZWNvbmRdXG5mdW5jdGlvbiBjb25maWdGcm9tQXJyYXkgKGNvbmZpZykge1xuICAgIHZhciBpLCBkYXRlLCBpbnB1dCA9IFtdLCBjdXJyZW50RGF0ZSwgeWVhclRvVXNlO1xuXG4gICAgaWYgKGNvbmZpZy5fZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY3VycmVudERhdGUgPSBjdXJyZW50RGF0ZUFycmF5KGNvbmZpZyk7XG5cbiAgICAvL2NvbXB1dGUgZGF5IG9mIHRoZSB5ZWFyIGZyb20gd2Vla3MgYW5kIHdlZWtkYXlzXG4gICAgaWYgKGNvbmZpZy5fdyAmJiBjb25maWcuX2FbREFURV0gPT0gbnVsbCAmJiBjb25maWcuX2FbTU9OVEhdID09IG51bGwpIHtcbiAgICAgICAgZGF5T2ZZZWFyRnJvbVdlZWtJbmZvKGNvbmZpZyk7XG4gICAgfVxuXG4gICAgLy9pZiB0aGUgZGF5IG9mIHRoZSB5ZWFyIGlzIHNldCwgZmlndXJlIG91dCB3aGF0IGl0IGlzXG4gICAgaWYgKGNvbmZpZy5fZGF5T2ZZZWFyICE9IG51bGwpIHtcbiAgICAgICAgeWVhclRvVXNlID0gZGVmYXVsdHMoY29uZmlnLl9hW1lFQVJdLCBjdXJyZW50RGF0ZVtZRUFSXSk7XG5cbiAgICAgICAgaWYgKGNvbmZpZy5fZGF5T2ZZZWFyID4gZGF5c0luWWVhcih5ZWFyVG9Vc2UpIHx8IGNvbmZpZy5fZGF5T2ZZZWFyID09PSAwKSB7XG4gICAgICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5fb3ZlcmZsb3dEYXlPZlllYXIgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF0ZSA9IGNyZWF0ZVVUQ0RhdGUoeWVhclRvVXNlLCAwLCBjb25maWcuX2RheU9mWWVhcik7XG4gICAgICAgIGNvbmZpZy5fYVtNT05USF0gPSBkYXRlLmdldFVUQ01vbnRoKCk7XG4gICAgICAgIGNvbmZpZy5fYVtEQVRFXSA9IGRhdGUuZ2V0VVRDRGF0ZSgpO1xuICAgIH1cblxuICAgIC8vIERlZmF1bHQgdG8gY3VycmVudCBkYXRlLlxuICAgIC8vICogaWYgbm8geWVhciwgbW9udGgsIGRheSBvZiBtb250aCBhcmUgZ2l2ZW4sIGRlZmF1bHQgdG8gdG9kYXlcbiAgICAvLyAqIGlmIGRheSBvZiBtb250aCBpcyBnaXZlbiwgZGVmYXVsdCBtb250aCBhbmQgeWVhclxuICAgIC8vICogaWYgbW9udGggaXMgZ2l2ZW4sIGRlZmF1bHQgb25seSB5ZWFyXG4gICAgLy8gKiBpZiB5ZWFyIGlzIGdpdmVuLCBkb24ndCBkZWZhdWx0IGFueXRoaW5nXG4gICAgZm9yIChpID0gMDsgaSA8IDMgJiYgY29uZmlnLl9hW2ldID09IG51bGw7ICsraSkge1xuICAgICAgICBjb25maWcuX2FbaV0gPSBpbnB1dFtpXSA9IGN1cnJlbnREYXRlW2ldO1xuICAgIH1cblxuICAgIC8vIFplcm8gb3V0IHdoYXRldmVyIHdhcyBub3QgZGVmYXVsdGVkLCBpbmNsdWRpbmcgdGltZVxuICAgIGZvciAoOyBpIDwgNzsgaSsrKSB7XG4gICAgICAgIGNvbmZpZy5fYVtpXSA9IGlucHV0W2ldID0gKGNvbmZpZy5fYVtpXSA9PSBudWxsKSA/IChpID09PSAyID8gMSA6IDApIDogY29uZmlnLl9hW2ldO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciAyNDowMDowMC4wMDBcbiAgICBpZiAoY29uZmlnLl9hW0hPVVJdID09PSAyNCAmJlxuICAgICAgICAgICAgY29uZmlnLl9hW01JTlVURV0gPT09IDAgJiZcbiAgICAgICAgICAgIGNvbmZpZy5fYVtTRUNPTkRdID09PSAwICYmXG4gICAgICAgICAgICBjb25maWcuX2FbTUlMTElTRUNPTkRdID09PSAwKSB7XG4gICAgICAgIGNvbmZpZy5fbmV4dERheSA9IHRydWU7XG4gICAgICAgIGNvbmZpZy5fYVtIT1VSXSA9IDA7XG4gICAgfVxuXG4gICAgY29uZmlnLl9kID0gKGNvbmZpZy5fdXNlVVRDID8gY3JlYXRlVVRDRGF0ZSA6IGNyZWF0ZURhdGUpLmFwcGx5KG51bGwsIGlucHV0KTtcbiAgICAvLyBBcHBseSB0aW1lem9uZSBvZmZzZXQgZnJvbSBpbnB1dC4gVGhlIGFjdHVhbCB1dGNPZmZzZXQgY2FuIGJlIGNoYW5nZWRcbiAgICAvLyB3aXRoIHBhcnNlWm9uZS5cbiAgICBpZiAoY29uZmlnLl90em0gIT0gbnVsbCkge1xuICAgICAgICBjb25maWcuX2Quc2V0VVRDTWludXRlcyhjb25maWcuX2QuZ2V0VVRDTWludXRlcygpIC0gY29uZmlnLl90em0pO1xuICAgIH1cblxuICAgIGlmIChjb25maWcuX25leHREYXkpIHtcbiAgICAgICAgY29uZmlnLl9hW0hPVVJdID0gMjQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkYXlPZlllYXJGcm9tV2Vla0luZm8oY29uZmlnKSB7XG4gICAgdmFyIHcsIHdlZWtZZWFyLCB3ZWVrLCB3ZWVrZGF5LCBkb3csIGRveSwgdGVtcCwgd2Vla2RheU92ZXJmbG93O1xuXG4gICAgdyA9IGNvbmZpZy5fdztcbiAgICBpZiAody5HRyAhPSBudWxsIHx8IHcuVyAhPSBudWxsIHx8IHcuRSAhPSBudWxsKSB7XG4gICAgICAgIGRvdyA9IDE7XG4gICAgICAgIGRveSA9IDQ7XG5cbiAgICAgICAgLy8gVE9ETzogV2UgbmVlZCB0byB0YWtlIHRoZSBjdXJyZW50IGlzb1dlZWtZZWFyLCBidXQgdGhhdCBkZXBlbmRzIG9uXG4gICAgICAgIC8vIGhvdyB3ZSBpbnRlcnByZXQgbm93IChsb2NhbCwgdXRjLCBmaXhlZCBvZmZzZXQpLiBTbyBjcmVhdGVcbiAgICAgICAgLy8gYSBub3cgdmVyc2lvbiBvZiBjdXJyZW50IGNvbmZpZyAodGFrZSBsb2NhbC91dGMvb2Zmc2V0IGZsYWdzLCBhbmRcbiAgICAgICAgLy8gY3JlYXRlIG5vdykuXG4gICAgICAgIHdlZWtZZWFyID0gZGVmYXVsdHMody5HRywgY29uZmlnLl9hW1lFQVJdLCB3ZWVrT2ZZZWFyKGNyZWF0ZUxvY2FsKCksIDEsIDQpLnllYXIpO1xuICAgICAgICB3ZWVrID0gZGVmYXVsdHMody5XLCAxKTtcbiAgICAgICAgd2Vla2RheSA9IGRlZmF1bHRzKHcuRSwgMSk7XG4gICAgICAgIGlmICh3ZWVrZGF5IDwgMSB8fCB3ZWVrZGF5ID4gNykge1xuICAgICAgICAgICAgd2Vla2RheU92ZXJmbG93ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGRvdyA9IGNvbmZpZy5fbG9jYWxlLl93ZWVrLmRvdztcbiAgICAgICAgZG95ID0gY29uZmlnLl9sb2NhbGUuX3dlZWsuZG95O1xuXG4gICAgICAgIHZhciBjdXJXZWVrID0gd2Vla09mWWVhcihjcmVhdGVMb2NhbCgpLCBkb3csIGRveSk7XG5cbiAgICAgICAgd2Vla1llYXIgPSBkZWZhdWx0cyh3LmdnLCBjb25maWcuX2FbWUVBUl0sIGN1cldlZWsueWVhcik7XG5cbiAgICAgICAgLy8gRGVmYXVsdCB0byBjdXJyZW50IHdlZWsuXG4gICAgICAgIHdlZWsgPSBkZWZhdWx0cyh3LncsIGN1cldlZWsud2Vlayk7XG5cbiAgICAgICAgaWYgKHcuZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyB3ZWVrZGF5IC0tIGxvdyBkYXkgbnVtYmVycyBhcmUgY29uc2lkZXJlZCBuZXh0IHdlZWtcbiAgICAgICAgICAgIHdlZWtkYXkgPSB3LmQ7XG4gICAgICAgICAgICBpZiAod2Vla2RheSA8IDAgfHwgd2Vla2RheSA+IDYpIHtcbiAgICAgICAgICAgICAgICB3ZWVrZGF5T3ZlcmZsb3cgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHcuZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyBsb2NhbCB3ZWVrZGF5IC0tIGNvdW50aW5nIHN0YXJ0cyBmcm9tIGJlZ2luaW5nIG9mIHdlZWtcbiAgICAgICAgICAgIHdlZWtkYXkgPSB3LmUgKyBkb3c7XG4gICAgICAgICAgICBpZiAody5lIDwgMCB8fCB3LmUgPiA2KSB7XG4gICAgICAgICAgICAgICAgd2Vla2RheU92ZXJmbG93ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGRlZmF1bHQgdG8gYmVnaW5pbmcgb2Ygd2Vla1xuICAgICAgICAgICAgd2Vla2RheSA9IGRvdztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAod2VlayA8IDEgfHwgd2VlayA+IHdlZWtzSW5ZZWFyKHdlZWtZZWFyLCBkb3csIGRveSkpIHtcbiAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuX292ZXJmbG93V2Vla3MgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAod2Vla2RheU92ZXJmbG93ICE9IG51bGwpIHtcbiAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuX292ZXJmbG93V2Vla2RheSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGVtcCA9IGRheU9mWWVhckZyb21XZWVrcyh3ZWVrWWVhciwgd2Vlaywgd2Vla2RheSwgZG93LCBkb3kpO1xuICAgICAgICBjb25maWcuX2FbWUVBUl0gPSB0ZW1wLnllYXI7XG4gICAgICAgIGNvbmZpZy5fZGF5T2ZZZWFyID0gdGVtcC5kYXlPZlllYXI7XG4gICAgfVxufVxuXG4vLyBjb25zdGFudCB0aGF0IHJlZmVycyB0byB0aGUgSVNPIHN0YW5kYXJkXG5ob29rcy5JU09fODYwMSA9IGZ1bmN0aW9uICgpIHt9O1xuXG4vLyBjb25zdGFudCB0aGF0IHJlZmVycyB0byB0aGUgUkZDIDI4MjIgZm9ybVxuaG9va3MuUkZDXzI4MjIgPSBmdW5jdGlvbiAoKSB7fTtcblxuLy8gZGF0ZSBmcm9tIHN0cmluZyBhbmQgZm9ybWF0IHN0cmluZ1xuZnVuY3Rpb24gY29uZmlnRnJvbVN0cmluZ0FuZEZvcm1hdChjb25maWcpIHtcbiAgICAvLyBUT0RPOiBNb3ZlIHRoaXMgdG8gYW5vdGhlciBwYXJ0IG9mIHRoZSBjcmVhdGlvbiBmbG93IHRvIHByZXZlbnQgY2lyY3VsYXIgZGVwc1xuICAgIGlmIChjb25maWcuX2YgPT09IGhvb2tzLklTT184NjAxKSB7XG4gICAgICAgIGNvbmZpZ0Zyb21JU08oY29uZmlnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLl9mID09PSBob29rcy5SRkNfMjgyMikge1xuICAgICAgICBjb25maWdGcm9tUkZDMjgyMihjb25maWcpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbmZpZy5fYSA9IFtdO1xuICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmVtcHR5ID0gdHJ1ZTtcblxuICAgIC8vIFRoaXMgYXJyYXkgaXMgdXNlZCB0byBtYWtlIGEgRGF0ZSwgZWl0aGVyIHdpdGggYG5ldyBEYXRlYCBvciBgRGF0ZS5VVENgXG4gICAgdmFyIHN0cmluZyA9ICcnICsgY29uZmlnLl9pLFxuICAgICAgICBpLCBwYXJzZWRJbnB1dCwgdG9rZW5zLCB0b2tlbiwgc2tpcHBlZCxcbiAgICAgICAgc3RyaW5nTGVuZ3RoID0gc3RyaW5nLmxlbmd0aCxcbiAgICAgICAgdG90YWxQYXJzZWRJbnB1dExlbmd0aCA9IDA7XG5cbiAgICB0b2tlbnMgPSBleHBhbmRGb3JtYXQoY29uZmlnLl9mLCBjb25maWcuX2xvY2FsZSkubWF0Y2goZm9ybWF0dGluZ1Rva2VucykgfHwgW107XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRva2VuID0gdG9rZW5zW2ldO1xuICAgICAgICBwYXJzZWRJbnB1dCA9IChzdHJpbmcubWF0Y2goZ2V0UGFyc2VSZWdleEZvclRva2VuKHRva2VuLCBjb25maWcpKSB8fCBbXSlbMF07XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd0b2tlbicsIHRva2VuLCAncGFyc2VkSW5wdXQnLCBwYXJzZWRJbnB1dCxcbiAgICAgICAgLy8gICAgICAgICAncmVnZXgnLCBnZXRQYXJzZVJlZ2V4Rm9yVG9rZW4odG9rZW4sIGNvbmZpZykpO1xuICAgICAgICBpZiAocGFyc2VkSW5wdXQpIHtcbiAgICAgICAgICAgIHNraXBwZWQgPSBzdHJpbmcuc3Vic3RyKDAsIHN0cmluZy5pbmRleE9mKHBhcnNlZElucHV0KSk7XG4gICAgICAgICAgICBpZiAoc2tpcHBlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykudW51c2VkSW5wdXQucHVzaChza2lwcGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0cmluZyA9IHN0cmluZy5zbGljZShzdHJpbmcuaW5kZXhPZihwYXJzZWRJbnB1dCkgKyBwYXJzZWRJbnB1dC5sZW5ndGgpO1xuICAgICAgICAgICAgdG90YWxQYXJzZWRJbnB1dExlbmd0aCArPSBwYXJzZWRJbnB1dC5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZG9uJ3QgcGFyc2UgaWYgaXQncyBub3QgYSBrbm93biB0b2tlblxuICAgICAgICBpZiAoZm9ybWF0VG9rZW5GdW5jdGlvbnNbdG9rZW5dKSB7XG4gICAgICAgICAgICBpZiAocGFyc2VkSW5wdXQpIHtcbiAgICAgICAgICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5lbXB0eSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykudW51c2VkVG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWRkVGltZVRvQXJyYXlGcm9tVG9rZW4odG9rZW4sIHBhcnNlZElucHV0LCBjb25maWcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNvbmZpZy5fc3RyaWN0ICYmICFwYXJzZWRJbnB1dCkge1xuICAgICAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykudW51c2VkVG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gYWRkIHJlbWFpbmluZyB1bnBhcnNlZCBpbnB1dCBsZW5ndGggdG8gdGhlIHN0cmluZ1xuICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmNoYXJzTGVmdE92ZXIgPSBzdHJpbmdMZW5ndGggLSB0b3RhbFBhcnNlZElucHV0TGVuZ3RoO1xuICAgIGlmIChzdHJpbmcubGVuZ3RoID4gMCkge1xuICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS51bnVzZWRJbnB1dC5wdXNoKHN0cmluZyk7XG4gICAgfVxuXG4gICAgLy8gY2xlYXIgXzEyaCBmbGFnIGlmIGhvdXIgaXMgPD0gMTJcbiAgICBpZiAoY29uZmlnLl9hW0hPVVJdIDw9IDEyICYmXG4gICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmJpZ0hvdXIgPT09IHRydWUgJiZcbiAgICAgICAgY29uZmlnLl9hW0hPVVJdID4gMCkge1xuICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5iaWdIb3VyID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLnBhcnNlZERhdGVQYXJ0cyA9IGNvbmZpZy5fYS5zbGljZSgwKTtcbiAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5tZXJpZGllbSA9IGNvbmZpZy5fbWVyaWRpZW07XG4gICAgLy8gaGFuZGxlIG1lcmlkaWVtXG4gICAgY29uZmlnLl9hW0hPVVJdID0gbWVyaWRpZW1GaXhXcmFwKGNvbmZpZy5fbG9jYWxlLCBjb25maWcuX2FbSE9VUl0sIGNvbmZpZy5fbWVyaWRpZW0pO1xuXG4gICAgY29uZmlnRnJvbUFycmF5KGNvbmZpZyk7XG4gICAgY2hlY2tPdmVyZmxvdyhjb25maWcpO1xufVxuXG5cbmZ1bmN0aW9uIG1lcmlkaWVtRml4V3JhcCAobG9jYWxlLCBob3VyLCBtZXJpZGllbSkge1xuICAgIHZhciBpc1BtO1xuXG4gICAgaWYgKG1lcmlkaWVtID09IG51bGwpIHtcbiAgICAgICAgLy8gbm90aGluZyB0byBkb1xuICAgICAgICByZXR1cm4gaG91cjtcbiAgICB9XG4gICAgaWYgKGxvY2FsZS5tZXJpZGllbUhvdXIgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbG9jYWxlLm1lcmlkaWVtSG91cihob3VyLCBtZXJpZGllbSk7XG4gICAgfSBlbHNlIGlmIChsb2NhbGUuaXNQTSAhPSBudWxsKSB7XG4gICAgICAgIC8vIEZhbGxiYWNrXG4gICAgICAgIGlzUG0gPSBsb2NhbGUuaXNQTShtZXJpZGllbSk7XG4gICAgICAgIGlmIChpc1BtICYmIGhvdXIgPCAxMikge1xuICAgICAgICAgICAgaG91ciArPSAxMjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzUG0gJiYgaG91ciA9PT0gMTIpIHtcbiAgICAgICAgICAgIGhvdXIgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBob3VyO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHRoaXMgaXMgbm90IHN1cHBvc2VkIHRvIGhhcHBlblxuICAgICAgICByZXR1cm4gaG91cjtcbiAgICB9XG59XG5cbi8vIGRhdGUgZnJvbSBzdHJpbmcgYW5kIGFycmF5IG9mIGZvcm1hdCBzdHJpbmdzXG5mdW5jdGlvbiBjb25maWdGcm9tU3RyaW5nQW5kQXJyYXkoY29uZmlnKSB7XG4gICAgdmFyIHRlbXBDb25maWcsXG4gICAgICAgIGJlc3RNb21lbnQsXG5cbiAgICAgICAgc2NvcmVUb0JlYXQsXG4gICAgICAgIGksXG4gICAgICAgIGN1cnJlbnRTY29yZTtcblxuICAgIGlmIChjb25maWcuX2YubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmludmFsaWRGb3JtYXQgPSB0cnVlO1xuICAgICAgICBjb25maWcuX2QgPSBuZXcgRGF0ZShOYU4pO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChpID0gMDsgaSA8IGNvbmZpZy5fZi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjdXJyZW50U2NvcmUgPSAwO1xuICAgICAgICB0ZW1wQ29uZmlnID0gY29weUNvbmZpZyh7fSwgY29uZmlnKTtcbiAgICAgICAgaWYgKGNvbmZpZy5fdXNlVVRDICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRlbXBDb25maWcuX3VzZVVUQyA9IGNvbmZpZy5fdXNlVVRDO1xuICAgICAgICB9XG4gICAgICAgIHRlbXBDb25maWcuX2YgPSBjb25maWcuX2ZbaV07XG4gICAgICAgIGNvbmZpZ0Zyb21TdHJpbmdBbmRGb3JtYXQodGVtcENvbmZpZyk7XG5cbiAgICAgICAgaWYgKCFpc1ZhbGlkKHRlbXBDb25maWcpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGFueSBpbnB1dCB0aGF0IHdhcyBub3QgcGFyc2VkIGFkZCBhIHBlbmFsdHkgZm9yIHRoYXQgZm9ybWF0XG4gICAgICAgIGN1cnJlbnRTY29yZSArPSBnZXRQYXJzaW5nRmxhZ3ModGVtcENvbmZpZykuY2hhcnNMZWZ0T3ZlcjtcblxuICAgICAgICAvL29yIHRva2Vuc1xuICAgICAgICBjdXJyZW50U2NvcmUgKz0gZ2V0UGFyc2luZ0ZsYWdzKHRlbXBDb25maWcpLnVudXNlZFRva2Vucy5sZW5ndGggKiAxMDtcblxuICAgICAgICBnZXRQYXJzaW5nRmxhZ3ModGVtcENvbmZpZykuc2NvcmUgPSBjdXJyZW50U2NvcmU7XG5cbiAgICAgICAgaWYgKHNjb3JlVG9CZWF0ID09IG51bGwgfHwgY3VycmVudFNjb3JlIDwgc2NvcmVUb0JlYXQpIHtcbiAgICAgICAgICAgIHNjb3JlVG9CZWF0ID0gY3VycmVudFNjb3JlO1xuICAgICAgICAgICAgYmVzdE1vbWVudCA9IHRlbXBDb25maWc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHRlbmQoY29uZmlnLCBiZXN0TW9tZW50IHx8IHRlbXBDb25maWcpO1xufVxuXG5mdW5jdGlvbiBjb25maWdGcm9tT2JqZWN0KGNvbmZpZykge1xuICAgIGlmIChjb25maWcuX2QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBpID0gbm9ybWFsaXplT2JqZWN0VW5pdHMoY29uZmlnLl9pKTtcbiAgICBjb25maWcuX2EgPSBtYXAoW2kueWVhciwgaS5tb250aCwgaS5kYXkgfHwgaS5kYXRlLCBpLmhvdXIsIGkubWludXRlLCBpLnNlY29uZCwgaS5taWxsaXNlY29uZF0sIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAmJiBwYXJzZUludChvYmosIDEwKTtcbiAgICB9KTtcblxuICAgIGNvbmZpZ0Zyb21BcnJheShjb25maWcpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVGcm9tQ29uZmlnIChjb25maWcpIHtcbiAgICB2YXIgcmVzID0gbmV3IE1vbWVudChjaGVja092ZXJmbG93KHByZXBhcmVDb25maWcoY29uZmlnKSkpO1xuICAgIGlmIChyZXMuX25leHREYXkpIHtcbiAgICAgICAgLy8gQWRkaW5nIGlzIHNtYXJ0IGVub3VnaCBhcm91bmQgRFNUXG4gICAgICAgIHJlcy5hZGQoMSwgJ2QnKTtcbiAgICAgICAgcmVzLl9uZXh0RGF5ID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiByZXM7XG59XG5cbmZ1bmN0aW9uIHByZXBhcmVDb25maWcgKGNvbmZpZykge1xuICAgIHZhciBpbnB1dCA9IGNvbmZpZy5faSxcbiAgICAgICAgZm9ybWF0ID0gY29uZmlnLl9mO1xuXG4gICAgY29uZmlnLl9sb2NhbGUgPSBjb25maWcuX2xvY2FsZSB8fCBnZXRMb2NhbGUoY29uZmlnLl9sKTtcblxuICAgIGlmIChpbnB1dCA9PT0gbnVsbCB8fCAoZm9ybWF0ID09PSB1bmRlZmluZWQgJiYgaW5wdXQgPT09ICcnKSkge1xuICAgICAgICByZXR1cm4gY3JlYXRlSW52YWxpZCh7bnVsbElucHV0OiB0cnVlfSk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uZmlnLl9pID0gaW5wdXQgPSBjb25maWcuX2xvY2FsZS5wcmVwYXJzZShpbnB1dCk7XG4gICAgfVxuXG4gICAgaWYgKGlzTW9tZW50KGlucHV0KSkge1xuICAgICAgICByZXR1cm4gbmV3IE1vbWVudChjaGVja092ZXJmbG93KGlucHV0KSk7XG4gICAgfSBlbHNlIGlmIChpc0RhdGUoaW5wdXQpKSB7XG4gICAgICAgIGNvbmZpZy5fZCA9IGlucHV0O1xuICAgIH0gZWxzZSBpZiAoaXNBcnJheShmb3JtYXQpKSB7XG4gICAgICAgIGNvbmZpZ0Zyb21TdHJpbmdBbmRBcnJheShjb25maWcpO1xuICAgIH0gZWxzZSBpZiAoZm9ybWF0KSB7XG4gICAgICAgIGNvbmZpZ0Zyb21TdHJpbmdBbmRGb3JtYXQoY29uZmlnKTtcbiAgICB9ICBlbHNlIHtcbiAgICAgICAgY29uZmlnRnJvbUlucHV0KGNvbmZpZyk7XG4gICAgfVxuXG4gICAgaWYgKCFpc1ZhbGlkKGNvbmZpZykpIHtcbiAgICAgICAgY29uZmlnLl9kID0gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gY29uZmlnO1xufVxuXG5mdW5jdGlvbiBjb25maWdGcm9tSW5wdXQoY29uZmlnKSB7XG4gICAgdmFyIGlucHV0ID0gY29uZmlnLl9pO1xuICAgIGlmIChpc1VuZGVmaW5lZChpbnB1dCkpIHtcbiAgICAgICAgY29uZmlnLl9kID0gbmV3IERhdGUoaG9va3Mubm93KCkpO1xuICAgIH0gZWxzZSBpZiAoaXNEYXRlKGlucHV0KSkge1xuICAgICAgICBjb25maWcuX2QgPSBuZXcgRGF0ZShpbnB1dC52YWx1ZU9mKCkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25maWdGcm9tU3RyaW5nKGNvbmZpZyk7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KGlucHV0KSkge1xuICAgICAgICBjb25maWcuX2EgPSBtYXAoaW5wdXQuc2xpY2UoMCksIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUludChvYmosIDEwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbmZpZ0Zyb21BcnJheShjb25maWcpO1xuICAgIH0gZWxzZSBpZiAoaXNPYmplY3QoaW5wdXQpKSB7XG4gICAgICAgIGNvbmZpZ0Zyb21PYmplY3QoY29uZmlnKTtcbiAgICB9IGVsc2UgaWYgKGlzTnVtYmVyKGlucHV0KSkge1xuICAgICAgICAvLyBmcm9tIG1pbGxpc2Vjb25kc1xuICAgICAgICBjb25maWcuX2QgPSBuZXcgRGF0ZShpbnB1dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaG9va3MuY3JlYXRlRnJvbUlucHV0RmFsbGJhY2soY29uZmlnKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxvY2FsT3JVVEMgKGlucHV0LCBmb3JtYXQsIGxvY2FsZSwgc3RyaWN0LCBpc1VUQykge1xuICAgIHZhciBjID0ge307XG5cbiAgICBpZiAobG9jYWxlID09PSB0cnVlIHx8IGxvY2FsZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgc3RyaWN0ID0gbG9jYWxlO1xuICAgICAgICBsb2NhbGUgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKChpc09iamVjdChpbnB1dCkgJiYgaXNPYmplY3RFbXB0eShpbnB1dCkpIHx8XG4gICAgICAgICAgICAoaXNBcnJheShpbnB1dCkgJiYgaW5wdXQubGVuZ3RoID09PSAwKSkge1xuICAgICAgICBpbnB1dCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLy8gb2JqZWN0IGNvbnN0cnVjdGlvbiBtdXN0IGJlIGRvbmUgdGhpcyB3YXkuXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21vbWVudC9tb21lbnQvaXNzdWVzLzE0MjNcbiAgICBjLl9pc0FNb21lbnRPYmplY3QgPSB0cnVlO1xuICAgIGMuX3VzZVVUQyA9IGMuX2lzVVRDID0gaXNVVEM7XG4gICAgYy5fbCA9IGxvY2FsZTtcbiAgICBjLl9pID0gaW5wdXQ7XG4gICAgYy5fZiA9IGZvcm1hdDtcbiAgICBjLl9zdHJpY3QgPSBzdHJpY3Q7XG5cbiAgICByZXR1cm4gY3JlYXRlRnJvbUNvbmZpZyhjKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTG9jYWwgKGlucHV0LCBmb3JtYXQsIGxvY2FsZSwgc3RyaWN0KSB7XG4gICAgcmV0dXJuIGNyZWF0ZUxvY2FsT3JVVEMoaW5wdXQsIGZvcm1hdCwgbG9jYWxlLCBzdHJpY3QsIGZhbHNlKTtcbn1cblxudmFyIHByb3RvdHlwZU1pbiA9IGRlcHJlY2F0ZShcbiAgICAnbW9tZW50KCkubWluIGlzIGRlcHJlY2F0ZWQsIHVzZSBtb21lbnQubWF4IGluc3RlYWQuIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvbWluLW1heC8nLFxuICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG90aGVyID0gY3JlYXRlTG9jYWwuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICAgICAgaWYgKHRoaXMuaXNWYWxpZCgpICYmIG90aGVyLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIG90aGVyIDwgdGhpcyA/IHRoaXMgOiBvdGhlcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVJbnZhbGlkKCk7XG4gICAgICAgIH1cbiAgICB9XG4pO1xuXG52YXIgcHJvdG90eXBlTWF4ID0gZGVwcmVjYXRlKFxuICAgICdtb21lbnQoKS5tYXggaXMgZGVwcmVjYXRlZCwgdXNlIG1vbWVudC5taW4gaW5zdGVhZC4gaHR0cDovL21vbWVudGpzLmNvbS9ndWlkZXMvIy93YXJuaW5ncy9taW4tbWF4LycsXG4gICAgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb3RoZXIgPSBjcmVhdGVMb2NhbC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgICAgICBpZiAodGhpcy5pc1ZhbGlkKCkgJiYgb3RoZXIuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gb3RoZXIgPiB0aGlzID8gdGhpcyA6IG90aGVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUludmFsaWQoKTtcbiAgICAgICAgfVxuICAgIH1cbik7XG5cbi8vIFBpY2sgYSBtb21lbnQgbSBmcm9tIG1vbWVudHMgc28gdGhhdCBtW2ZuXShvdGhlcikgaXMgdHJ1ZSBmb3IgYWxsXG4vLyBvdGhlci4gVGhpcyByZWxpZXMgb24gdGhlIGZ1bmN0aW9uIGZuIHRvIGJlIHRyYW5zaXRpdmUuXG4vL1xuLy8gbW9tZW50cyBzaG91bGQgZWl0aGVyIGJlIGFuIGFycmF5IG9mIG1vbWVudCBvYmplY3RzIG9yIGFuIGFycmF5LCB3aG9zZVxuLy8gZmlyc3QgZWxlbWVudCBpcyBhbiBhcnJheSBvZiBtb21lbnQgb2JqZWN0cy5cbmZ1bmN0aW9uIHBpY2tCeShmbiwgbW9tZW50cykge1xuICAgIHZhciByZXMsIGk7XG4gICAgaWYgKG1vbWVudHMubGVuZ3RoID09PSAxICYmIGlzQXJyYXkobW9tZW50c1swXSkpIHtcbiAgICAgICAgbW9tZW50cyA9IG1vbWVudHNbMF07XG4gICAgfVxuICAgIGlmICghbW9tZW50cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUxvY2FsKCk7XG4gICAgfVxuICAgIHJlcyA9IG1vbWVudHNbMF07XG4gICAgZm9yIChpID0gMTsgaSA8IG1vbWVudHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKCFtb21lbnRzW2ldLmlzVmFsaWQoKSB8fCBtb21lbnRzW2ldW2ZuXShyZXMpKSB7XG4gICAgICAgICAgICByZXMgPSBtb21lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5cbi8vIFRPRE86IFVzZSBbXS5zb3J0IGluc3RlYWQ/XG5mdW5jdGlvbiBtaW4gKCkge1xuICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuXG4gICAgcmV0dXJuIHBpY2tCeSgnaXNCZWZvcmUnLCBhcmdzKTtcbn1cblxuZnVuY3Rpb24gbWF4ICgpIHtcbiAgICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcblxuICAgIHJldHVybiBwaWNrQnkoJ2lzQWZ0ZXInLCBhcmdzKTtcbn1cblxudmFyIG5vdyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gRGF0ZS5ub3cgPyBEYXRlLm5vdygpIDogKyhuZXcgRGF0ZSgpKTtcbn07XG5cbnZhciBvcmRlcmluZyA9IFsneWVhcicsICdxdWFydGVyJywgJ21vbnRoJywgJ3dlZWsnLCAnZGF5JywgJ2hvdXInLCAnbWludXRlJywgJ3NlY29uZCcsICdtaWxsaXNlY29uZCddO1xuXG5mdW5jdGlvbiBpc0R1cmF0aW9uVmFsaWQobSkge1xuICAgIGZvciAodmFyIGtleSBpbiBtKSB7XG4gICAgICAgIGlmICghKG9yZGVyaW5nLmluZGV4T2Yoa2V5KSAhPT0gLTEgJiYgKG1ba2V5XSA9PSBudWxsIHx8ICFpc05hTihtW2tleV0pKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciB1bml0SGFzRGVjaW1hbCA9IGZhbHNlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3JkZXJpbmcubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKG1bb3JkZXJpbmdbaV1dKSB7XG4gICAgICAgICAgICBpZiAodW5pdEhhc0RlY2ltYWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIG9ubHkgYWxsb3cgbm9uLWludGVnZXJzIGZvciBzbWFsbGVzdCB1bml0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyc2VGbG9hdChtW29yZGVyaW5nW2ldXSkgIT09IHRvSW50KG1bb3JkZXJpbmdbaV1dKSkge1xuICAgICAgICAgICAgICAgIHVuaXRIYXNEZWNpbWFsID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBpc1ZhbGlkJDEoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzVmFsaWQ7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUludmFsaWQkMSgpIHtcbiAgICByZXR1cm4gY3JlYXRlRHVyYXRpb24oTmFOKTtcbn1cblxuZnVuY3Rpb24gRHVyYXRpb24gKGR1cmF0aW9uKSB7XG4gICAgdmFyIG5vcm1hbGl6ZWRJbnB1dCA9IG5vcm1hbGl6ZU9iamVjdFVuaXRzKGR1cmF0aW9uKSxcbiAgICAgICAgeWVhcnMgPSBub3JtYWxpemVkSW5wdXQueWVhciB8fCAwLFxuICAgICAgICBxdWFydGVycyA9IG5vcm1hbGl6ZWRJbnB1dC5xdWFydGVyIHx8IDAsXG4gICAgICAgIG1vbnRocyA9IG5vcm1hbGl6ZWRJbnB1dC5tb250aCB8fCAwLFxuICAgICAgICB3ZWVrcyA9IG5vcm1hbGl6ZWRJbnB1dC53ZWVrIHx8IDAsXG4gICAgICAgIGRheXMgPSBub3JtYWxpemVkSW5wdXQuZGF5IHx8IDAsXG4gICAgICAgIGhvdXJzID0gbm9ybWFsaXplZElucHV0LmhvdXIgfHwgMCxcbiAgICAgICAgbWludXRlcyA9IG5vcm1hbGl6ZWRJbnB1dC5taW51dGUgfHwgMCxcbiAgICAgICAgc2Vjb25kcyA9IG5vcm1hbGl6ZWRJbnB1dC5zZWNvbmQgfHwgMCxcbiAgICAgICAgbWlsbGlzZWNvbmRzID0gbm9ybWFsaXplZElucHV0Lm1pbGxpc2Vjb25kIHx8IDA7XG5cbiAgICB0aGlzLl9pc1ZhbGlkID0gaXNEdXJhdGlvblZhbGlkKG5vcm1hbGl6ZWRJbnB1dCk7XG5cbiAgICAvLyByZXByZXNlbnRhdGlvbiBmb3IgZGF0ZUFkZFJlbW92ZVxuICAgIHRoaXMuX21pbGxpc2Vjb25kcyA9ICttaWxsaXNlY29uZHMgK1xuICAgICAgICBzZWNvbmRzICogMWUzICsgLy8gMTAwMFxuICAgICAgICBtaW51dGVzICogNmU0ICsgLy8gMTAwMCAqIDYwXG4gICAgICAgIGhvdXJzICogMTAwMCAqIDYwICogNjA7IC8vdXNpbmcgMTAwMCAqIDYwICogNjAgaW5zdGVhZCBvZiAzNmU1IHRvIGF2b2lkIGZsb2F0aW5nIHBvaW50IHJvdW5kaW5nIGVycm9ycyBodHRwczovL2dpdGh1Yi5jb20vbW9tZW50L21vbWVudC9pc3N1ZXMvMjk3OFxuICAgIC8vIEJlY2F1c2Ugb2YgZGF0ZUFkZFJlbW92ZSB0cmVhdHMgMjQgaG91cnMgYXMgZGlmZmVyZW50IGZyb20gYVxuICAgIC8vIGRheSB3aGVuIHdvcmtpbmcgYXJvdW5kIERTVCwgd2UgbmVlZCB0byBzdG9yZSB0aGVtIHNlcGFyYXRlbHlcbiAgICB0aGlzLl9kYXlzID0gK2RheXMgK1xuICAgICAgICB3ZWVrcyAqIDc7XG4gICAgLy8gSXQgaXMgaW1wb3NzaWJsZSB0cmFuc2xhdGUgbW9udGhzIGludG8gZGF5cyB3aXRob3V0IGtub3dpbmdcbiAgICAvLyB3aGljaCBtb250aHMgeW91IGFyZSBhcmUgdGFsa2luZyBhYm91dCwgc28gd2UgaGF2ZSB0byBzdG9yZVxuICAgIC8vIGl0IHNlcGFyYXRlbHkuXG4gICAgdGhpcy5fbW9udGhzID0gK21vbnRocyArXG4gICAgICAgIHF1YXJ0ZXJzICogMyArXG4gICAgICAgIHllYXJzICogMTI7XG5cbiAgICB0aGlzLl9kYXRhID0ge307XG5cbiAgICB0aGlzLl9sb2NhbGUgPSBnZXRMb2NhbGUoKTtcblxuICAgIHRoaXMuX2J1YmJsZSgpO1xufVxuXG5mdW5jdGlvbiBpc0R1cmF0aW9uIChvYmopIHtcbiAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgRHVyYXRpb247XG59XG5cbmZ1bmN0aW9uIGFic1JvdW5kIChudW1iZXIpIHtcbiAgICBpZiAobnVtYmVyIDwgMCkge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgtMSAqIG51bWJlcikgKiAtMTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChudW1iZXIpO1xuICAgIH1cbn1cblxuLy8gRk9STUFUVElOR1xuXG5mdW5jdGlvbiBvZmZzZXQgKHRva2VuLCBzZXBhcmF0b3IpIHtcbiAgICBhZGRGb3JtYXRUb2tlbih0b2tlbiwgMCwgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb2Zmc2V0ID0gdGhpcy51dGNPZmZzZXQoKTtcbiAgICAgICAgdmFyIHNpZ24gPSAnKyc7XG4gICAgICAgIGlmIChvZmZzZXQgPCAwKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSAtb2Zmc2V0O1xuICAgICAgICAgICAgc2lnbiA9ICctJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2lnbiArIHplcm9GaWxsKH5+KG9mZnNldCAvIDYwKSwgMikgKyBzZXBhcmF0b3IgKyB6ZXJvRmlsbCh+fihvZmZzZXQpICUgNjAsIDIpO1xuICAgIH0pO1xufVxuXG5vZmZzZXQoJ1onLCAnOicpO1xub2Zmc2V0KCdaWicsICcnKTtcblxuLy8gUEFSU0lOR1xuXG5hZGRSZWdleFRva2VuKCdaJywgIG1hdGNoU2hvcnRPZmZzZXQpO1xuYWRkUmVnZXhUb2tlbignWlonLCBtYXRjaFNob3J0T2Zmc2V0KTtcbmFkZFBhcnNlVG9rZW4oWydaJywgJ1paJ10sIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICAgIGNvbmZpZy5fdXNlVVRDID0gdHJ1ZTtcbiAgICBjb25maWcuX3R6bSA9IG9mZnNldEZyb21TdHJpbmcobWF0Y2hTaG9ydE9mZnNldCwgaW5wdXQpO1xufSk7XG5cbi8vIEhFTFBFUlNcblxuLy8gdGltZXpvbmUgY2h1bmtlclxuLy8gJysxMDowMCcgPiBbJzEwJywgICcwMCddXG4vLyAnLTE1MzAnICA+IFsnLTE1JywgJzMwJ11cbnZhciBjaHVua09mZnNldCA9IC8oW1xcK1xcLV18XFxkXFxkKS9naTtcblxuZnVuY3Rpb24gb2Zmc2V0RnJvbVN0cmluZyhtYXRjaGVyLCBzdHJpbmcpIHtcbiAgICB2YXIgbWF0Y2hlcyA9IChzdHJpbmcgfHwgJycpLm1hdGNoKG1hdGNoZXIpO1xuXG4gICAgaWYgKG1hdGNoZXMgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIGNodW5rICAgPSBtYXRjaGVzW21hdGNoZXMubGVuZ3RoIC0gMV0gfHwgW107XG4gICAgdmFyIHBhcnRzICAgPSAoY2h1bmsgKyAnJykubWF0Y2goY2h1bmtPZmZzZXQpIHx8IFsnLScsIDAsIDBdO1xuICAgIHZhciBtaW51dGVzID0gKyhwYXJ0c1sxXSAqIDYwKSArIHRvSW50KHBhcnRzWzJdKTtcblxuICAgIHJldHVybiBtaW51dGVzID09PSAwID9cbiAgICAgIDAgOlxuICAgICAgcGFydHNbMF0gPT09ICcrJyA/IG1pbnV0ZXMgOiAtbWludXRlcztcbn1cblxuLy8gUmV0dXJuIGEgbW9tZW50IGZyb20gaW5wdXQsIHRoYXQgaXMgbG9jYWwvdXRjL3pvbmUgZXF1aXZhbGVudCB0byBtb2RlbC5cbmZ1bmN0aW9uIGNsb25lV2l0aE9mZnNldChpbnB1dCwgbW9kZWwpIHtcbiAgICB2YXIgcmVzLCBkaWZmO1xuICAgIGlmIChtb2RlbC5faXNVVEMpIHtcbiAgICAgICAgcmVzID0gbW9kZWwuY2xvbmUoKTtcbiAgICAgICAgZGlmZiA9IChpc01vbWVudChpbnB1dCkgfHwgaXNEYXRlKGlucHV0KSA/IGlucHV0LnZhbHVlT2YoKSA6IGNyZWF0ZUxvY2FsKGlucHV0KS52YWx1ZU9mKCkpIC0gcmVzLnZhbHVlT2YoKTtcbiAgICAgICAgLy8gVXNlIGxvdy1sZXZlbCBhcGksIGJlY2F1c2UgdGhpcyBmbiBpcyBsb3ctbGV2ZWwgYXBpLlxuICAgICAgICByZXMuX2Quc2V0VGltZShyZXMuX2QudmFsdWVPZigpICsgZGlmZik7XG4gICAgICAgIGhvb2tzLnVwZGF0ZU9mZnNldChyZXMsIGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gY3JlYXRlTG9jYWwoaW5wdXQpLmxvY2FsKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXREYXRlT2Zmc2V0IChtKSB7XG4gICAgLy8gT24gRmlyZWZveC4yNCBEYXRlI2dldFRpbWV6b25lT2Zmc2V0IHJldHVybnMgYSBmbG9hdGluZyBwb2ludC5cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbW9tZW50L21vbWVudC9wdWxsLzE4NzFcbiAgICByZXR1cm4gLU1hdGgucm91bmQobS5fZC5nZXRUaW1lem9uZU9mZnNldCgpIC8gMTUpICogMTU7XG59XG5cbi8vIEhPT0tTXG5cbi8vIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgd2hlbmV2ZXIgYSBtb21lbnQgaXMgbXV0YXRlZC5cbi8vIEl0IGlzIGludGVuZGVkIHRvIGtlZXAgdGhlIG9mZnNldCBpbiBzeW5jIHdpdGggdGhlIHRpbWV6b25lLlxuaG9va3MudXBkYXRlT2Zmc2V0ID0gZnVuY3Rpb24gKCkge307XG5cbi8vIE1PTUVOVFNcblxuLy8ga2VlcExvY2FsVGltZSA9IHRydWUgbWVhbnMgb25seSBjaGFuZ2UgdGhlIHRpbWV6b25lLCB3aXRob3V0XG4vLyBhZmZlY3RpbmcgdGhlIGxvY2FsIGhvdXIuIFNvIDU6MzE6MjYgKzAzMDAgLS1bdXRjT2Zmc2V0KDIsIHRydWUpXS0tPlxuLy8gNTozMToyNiArMDIwMCBJdCBpcyBwb3NzaWJsZSB0aGF0IDU6MzE6MjYgZG9lc24ndCBleGlzdCB3aXRoIG9mZnNldFxuLy8gKzAyMDAsIHNvIHdlIGFkanVzdCB0aGUgdGltZSBhcyBuZWVkZWQsIHRvIGJlIHZhbGlkLlxuLy9cbi8vIEtlZXBpbmcgdGhlIHRpbWUgYWN0dWFsbHkgYWRkcy9zdWJ0cmFjdHMgKG9uZSBob3VyKVxuLy8gZnJvbSB0aGUgYWN0dWFsIHJlcHJlc2VudGVkIHRpbWUuIFRoYXQgaXMgd2h5IHdlIGNhbGwgdXBkYXRlT2Zmc2V0XG4vLyBhIHNlY29uZCB0aW1lLiBJbiBjYXNlIGl0IHdhbnRzIHVzIHRvIGNoYW5nZSB0aGUgb2Zmc2V0IGFnYWluXG4vLyBfY2hhbmdlSW5Qcm9ncmVzcyA9PSB0cnVlIGNhc2UsIHRoZW4gd2UgaGF2ZSB0byBhZGp1c3QsIGJlY2F1c2Vcbi8vIHRoZXJlIGlzIG5vIHN1Y2ggdGltZSBpbiB0aGUgZ2l2ZW4gdGltZXpvbmUuXG5mdW5jdGlvbiBnZXRTZXRPZmZzZXQgKGlucHV0LCBrZWVwTG9jYWxUaW1lLCBrZWVwTWludXRlcykge1xuICAgIHZhciBvZmZzZXQgPSB0aGlzLl9vZmZzZXQgfHwgMCxcbiAgICAgICAgbG9jYWxBZGp1c3Q7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQoKSkge1xuICAgICAgICByZXR1cm4gaW5wdXQgIT0gbnVsbCA/IHRoaXMgOiBOYU47XG4gICAgfVxuICAgIGlmIChpbnB1dCAhPSBudWxsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpbnB1dCA9IG9mZnNldEZyb21TdHJpbmcobWF0Y2hTaG9ydE9mZnNldCwgaW5wdXQpO1xuICAgICAgICAgICAgaWYgKGlucHV0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoTWF0aC5hYnMoaW5wdXQpIDwgMTYgJiYgIWtlZXBNaW51dGVzKSB7XG4gICAgICAgICAgICBpbnB1dCA9IGlucHV0ICogNjA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9pc1VUQyAmJiBrZWVwTG9jYWxUaW1lKSB7XG4gICAgICAgICAgICBsb2NhbEFkanVzdCA9IGdldERhdGVPZmZzZXQodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fb2Zmc2V0ID0gaW5wdXQ7XG4gICAgICAgIHRoaXMuX2lzVVRDID0gdHJ1ZTtcbiAgICAgICAgaWYgKGxvY2FsQWRqdXN0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkKGxvY2FsQWRqdXN0LCAnbScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvZmZzZXQgIT09IGlucHV0KSB7XG4gICAgICAgICAgICBpZiAoIWtlZXBMb2NhbFRpbWUgfHwgdGhpcy5fY2hhbmdlSW5Qcm9ncmVzcykge1xuICAgICAgICAgICAgICAgIGFkZFN1YnRyYWN0KHRoaXMsIGNyZWF0ZUR1cmF0aW9uKGlucHV0IC0gb2Zmc2V0LCAnbScpLCAxLCBmYWxzZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLl9jaGFuZ2VJblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2hhbmdlSW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgaG9va3MudXBkYXRlT2Zmc2V0KHRoaXMsIHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2NoYW5nZUluUHJvZ3Jlc3MgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc1VUQyA/IG9mZnNldCA6IGdldERhdGVPZmZzZXQodGhpcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRTZXRab25lIChpbnB1dCwga2VlcExvY2FsVGltZSkge1xuICAgIGlmIChpbnB1dCAhPSBudWxsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpbnB1dCA9IC1pbnB1dDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudXRjT2Zmc2V0KGlucHV0LCBrZWVwTG9jYWxUaW1lKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gLXRoaXMudXRjT2Zmc2V0KCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzZXRPZmZzZXRUb1VUQyAoa2VlcExvY2FsVGltZSkge1xuICAgIHJldHVybiB0aGlzLnV0Y09mZnNldCgwLCBrZWVwTG9jYWxUaW1lKTtcbn1cblxuZnVuY3Rpb24gc2V0T2Zmc2V0VG9Mb2NhbCAoa2VlcExvY2FsVGltZSkge1xuICAgIGlmICh0aGlzLl9pc1VUQykge1xuICAgICAgICB0aGlzLnV0Y09mZnNldCgwLCBrZWVwTG9jYWxUaW1lKTtcbiAgICAgICAgdGhpcy5faXNVVEMgPSBmYWxzZTtcblxuICAgICAgICBpZiAoa2VlcExvY2FsVGltZSkge1xuICAgICAgICAgICAgdGhpcy5zdWJ0cmFjdChnZXREYXRlT2Zmc2V0KHRoaXMpLCAnbScpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiBzZXRPZmZzZXRUb1BhcnNlZE9mZnNldCAoKSB7XG4gICAgaWYgKHRoaXMuX3R6bSAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMudXRjT2Zmc2V0KHRoaXMuX3R6bSwgZmFsc2UsIHRydWUpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMuX2kgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHZhciB0Wm9uZSA9IG9mZnNldEZyb21TdHJpbmcobWF0Y2hPZmZzZXQsIHRoaXMuX2kpO1xuICAgICAgICBpZiAodFpvbmUgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy51dGNPZmZzZXQodFpvbmUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51dGNPZmZzZXQoMCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIGhhc0FsaWduZWRIb3VyT2Zmc2V0IChpbnB1dCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpbnB1dCA9IGlucHV0ID8gY3JlYXRlTG9jYWwoaW5wdXQpLnV0Y09mZnNldCgpIDogMDtcblxuICAgIHJldHVybiAodGhpcy51dGNPZmZzZXQoKSAtIGlucHV0KSAlIDYwID09PSAwO1xufVxuXG5mdW5jdGlvbiBpc0RheWxpZ2h0U2F2aW5nVGltZSAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy51dGNPZmZzZXQoKSA+IHRoaXMuY2xvbmUoKS5tb250aCgwKS51dGNPZmZzZXQoKSB8fFxuICAgICAgICB0aGlzLnV0Y09mZnNldCgpID4gdGhpcy5jbG9uZSgpLm1vbnRoKDUpLnV0Y09mZnNldCgpXG4gICAgKTtcbn1cblxuZnVuY3Rpb24gaXNEYXlsaWdodFNhdmluZ1RpbWVTaGlmdGVkICgpIHtcbiAgICBpZiAoIWlzVW5kZWZpbmVkKHRoaXMuX2lzRFNUU2hpZnRlZCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRFNUU2hpZnRlZDtcbiAgICB9XG5cbiAgICB2YXIgYyA9IHt9O1xuXG4gICAgY29weUNvbmZpZyhjLCB0aGlzKTtcbiAgICBjID0gcHJlcGFyZUNvbmZpZyhjKTtcblxuICAgIGlmIChjLl9hKSB7XG4gICAgICAgIHZhciBvdGhlciA9IGMuX2lzVVRDID8gY3JlYXRlVVRDKGMuX2EpIDogY3JlYXRlTG9jYWwoYy5fYSk7XG4gICAgICAgIHRoaXMuX2lzRFNUU2hpZnRlZCA9IHRoaXMuaXNWYWxpZCgpICYmXG4gICAgICAgICAgICBjb21wYXJlQXJyYXlzKGMuX2EsIG90aGVyLnRvQXJyYXkoKSkgPiAwO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2lzRFNUU2hpZnRlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9pc0RTVFNoaWZ0ZWQ7XG59XG5cbmZ1bmN0aW9uIGlzTG9jYWwgKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQoKSA/ICF0aGlzLl9pc1VUQyA6IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBpc1V0Y09mZnNldCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCgpID8gdGhpcy5faXNVVEMgOiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gaXNVdGMgKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQoKSA/IHRoaXMuX2lzVVRDICYmIHRoaXMuX29mZnNldCA9PT0gMCA6IGZhbHNlO1xufVxuXG4vLyBBU1AuTkVUIGpzb24gZGF0ZSBmb3JtYXQgcmVnZXhcbnZhciBhc3BOZXRSZWdleCA9IC9eKFxcLSk/KD86KFxcZCopWy4gXSk/KFxcZCspXFw6KFxcZCspKD86XFw6KFxcZCspKFxcLlxcZCopPyk/JC87XG5cbi8vIGZyb20gaHR0cDovL2RvY3MuY2xvc3VyZS1saWJyYXJ5Lmdvb2dsZWNvZGUuY29tL2dpdC9jbG9zdXJlX2dvb2dfZGF0ZV9kYXRlLmpzLnNvdXJjZS5odG1sXG4vLyBzb21ld2hhdCBtb3JlIGluIGxpbmUgd2l0aCA0LjQuMy4yIDIwMDQgc3BlYywgYnV0IGFsbG93cyBkZWNpbWFsIGFueXdoZXJlXG4vLyBhbmQgZnVydGhlciBtb2RpZmllZCB0byBhbGxvdyBmb3Igc3RyaW5ncyBjb250YWluaW5nIGJvdGggd2VlayBhbmQgZGF5XG52YXIgaXNvUmVnZXggPSAvXigtKT9QKD86KC0/WzAtOSwuXSopWSk/KD86KC0/WzAtOSwuXSopTSk/KD86KC0/WzAtOSwuXSopVyk/KD86KC0/WzAtOSwuXSopRCk/KD86VCg/OigtP1swLTksLl0qKUgpPyg/OigtP1swLTksLl0qKU0pPyg/OigtP1swLTksLl0qKVMpPyk/JC87XG5cbmZ1bmN0aW9uIGNyZWF0ZUR1cmF0aW9uIChpbnB1dCwga2V5KSB7XG4gICAgdmFyIGR1cmF0aW9uID0gaW5wdXQsXG4gICAgICAgIC8vIG1hdGNoaW5nIGFnYWluc3QgcmVnZXhwIGlzIGV4cGVuc2l2ZSwgZG8gaXQgb24gZGVtYW5kXG4gICAgICAgIG1hdGNoID0gbnVsbCxcbiAgICAgICAgc2lnbixcbiAgICAgICAgcmV0LFxuICAgICAgICBkaWZmUmVzO1xuXG4gICAgaWYgKGlzRHVyYXRpb24oaW5wdXQpKSB7XG4gICAgICAgIGR1cmF0aW9uID0ge1xuICAgICAgICAgICAgbXMgOiBpbnB1dC5fbWlsbGlzZWNvbmRzLFxuICAgICAgICAgICAgZCAgOiBpbnB1dC5fZGF5cyxcbiAgICAgICAgICAgIE0gIDogaW5wdXQuX21vbnRoc1xuICAgICAgICB9O1xuICAgIH0gZWxzZSBpZiAoaXNOdW1iZXIoaW5wdXQpKSB7XG4gICAgICAgIGR1cmF0aW9uID0ge307XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgIGR1cmF0aW9uW2tleV0gPSBpbnB1dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGR1cmF0aW9uLm1pbGxpc2Vjb25kcyA9IGlucHV0O1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmICghIShtYXRjaCA9IGFzcE5ldFJlZ2V4LmV4ZWMoaW5wdXQpKSkge1xuICAgICAgICBzaWduID0gKG1hdGNoWzFdID09PSAnLScpID8gLTEgOiAxO1xuICAgICAgICBkdXJhdGlvbiA9IHtcbiAgICAgICAgICAgIHkgIDogMCxcbiAgICAgICAgICAgIGQgIDogdG9JbnQobWF0Y2hbREFURV0pICAgICAgICAgICAgICAgICAgICAgICAgICogc2lnbixcbiAgICAgICAgICAgIGggIDogdG9JbnQobWF0Y2hbSE9VUl0pICAgICAgICAgICAgICAgICAgICAgICAgICogc2lnbixcbiAgICAgICAgICAgIG0gIDogdG9JbnQobWF0Y2hbTUlOVVRFXSkgICAgICAgICAgICAgICAgICAgICAgICogc2lnbixcbiAgICAgICAgICAgIHMgIDogdG9JbnQobWF0Y2hbU0VDT05EXSkgICAgICAgICAgICAgICAgICAgICAgICogc2lnbixcbiAgICAgICAgICAgIG1zIDogdG9JbnQoYWJzUm91bmQobWF0Y2hbTUlMTElTRUNPTkRdICogMTAwMCkpICogc2lnbiAvLyB0aGUgbWlsbGlzZWNvbmQgZGVjaW1hbCBwb2ludCBpcyBpbmNsdWRlZCBpbiB0aGUgbWF0Y2hcbiAgICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKCEhKG1hdGNoID0gaXNvUmVnZXguZXhlYyhpbnB1dCkpKSB7XG4gICAgICAgIHNpZ24gPSAobWF0Y2hbMV0gPT09ICctJykgPyAtMSA6IDE7XG4gICAgICAgIGR1cmF0aW9uID0ge1xuICAgICAgICAgICAgeSA6IHBhcnNlSXNvKG1hdGNoWzJdLCBzaWduKSxcbiAgICAgICAgICAgIE0gOiBwYXJzZUlzbyhtYXRjaFszXSwgc2lnbiksXG4gICAgICAgICAgICB3IDogcGFyc2VJc28obWF0Y2hbNF0sIHNpZ24pLFxuICAgICAgICAgICAgZCA6IHBhcnNlSXNvKG1hdGNoWzVdLCBzaWduKSxcbiAgICAgICAgICAgIGggOiBwYXJzZUlzbyhtYXRjaFs2XSwgc2lnbiksXG4gICAgICAgICAgICBtIDogcGFyc2VJc28obWF0Y2hbN10sIHNpZ24pLFxuICAgICAgICAgICAgcyA6IHBhcnNlSXNvKG1hdGNoWzhdLCBzaWduKVxuICAgICAgICB9O1xuICAgIH0gZWxzZSBpZiAoZHVyYXRpb24gPT0gbnVsbCkgey8vIGNoZWNrcyBmb3IgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgZHVyYXRpb24gPSB7fTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkdXJhdGlvbiA9PT0gJ29iamVjdCcgJiYgKCdmcm9tJyBpbiBkdXJhdGlvbiB8fCAndG8nIGluIGR1cmF0aW9uKSkge1xuICAgICAgICBkaWZmUmVzID0gbW9tZW50c0RpZmZlcmVuY2UoY3JlYXRlTG9jYWwoZHVyYXRpb24uZnJvbSksIGNyZWF0ZUxvY2FsKGR1cmF0aW9uLnRvKSk7XG5cbiAgICAgICAgZHVyYXRpb24gPSB7fTtcbiAgICAgICAgZHVyYXRpb24ubXMgPSBkaWZmUmVzLm1pbGxpc2Vjb25kcztcbiAgICAgICAgZHVyYXRpb24uTSA9IGRpZmZSZXMubW9udGhzO1xuICAgIH1cblxuICAgIHJldCA9IG5ldyBEdXJhdGlvbihkdXJhdGlvbik7XG5cbiAgICBpZiAoaXNEdXJhdGlvbihpbnB1dCkgJiYgaGFzT3duUHJvcChpbnB1dCwgJ19sb2NhbGUnKSkge1xuICAgICAgICByZXQuX2xvY2FsZSA9IGlucHV0Ll9sb2NhbGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldDtcbn1cblxuY3JlYXRlRHVyYXRpb24uZm4gPSBEdXJhdGlvbi5wcm90b3R5cGU7XG5jcmVhdGVEdXJhdGlvbi5pbnZhbGlkID0gY3JlYXRlSW52YWxpZCQxO1xuXG5mdW5jdGlvbiBwYXJzZUlzbyAoaW5wLCBzaWduKSB7XG4gICAgLy8gV2UnZCBub3JtYWxseSB1c2Ugfn5pbnAgZm9yIHRoaXMsIGJ1dCB1bmZvcnR1bmF0ZWx5IGl0IGFsc29cbiAgICAvLyBjb252ZXJ0cyBmbG9hdHMgdG8gaW50cy5cbiAgICAvLyBpbnAgbWF5IGJlIHVuZGVmaW5lZCwgc28gY2FyZWZ1bCBjYWxsaW5nIHJlcGxhY2Ugb24gaXQuXG4gICAgdmFyIHJlcyA9IGlucCAmJiBwYXJzZUZsb2F0KGlucC5yZXBsYWNlKCcsJywgJy4nKSk7XG4gICAgLy8gYXBwbHkgc2lnbiB3aGlsZSB3ZSdyZSBhdCBpdFxuICAgIHJldHVybiAoaXNOYU4ocmVzKSA/IDAgOiByZXMpICogc2lnbjtcbn1cblxuZnVuY3Rpb24gcG9zaXRpdmVNb21lbnRzRGlmZmVyZW5jZShiYXNlLCBvdGhlcikge1xuICAgIHZhciByZXMgPSB7bWlsbGlzZWNvbmRzOiAwLCBtb250aHM6IDB9O1xuXG4gICAgcmVzLm1vbnRocyA9IG90aGVyLm1vbnRoKCkgLSBiYXNlLm1vbnRoKCkgK1xuICAgICAgICAob3RoZXIueWVhcigpIC0gYmFzZS55ZWFyKCkpICogMTI7XG4gICAgaWYgKGJhc2UuY2xvbmUoKS5hZGQocmVzLm1vbnRocywgJ00nKS5pc0FmdGVyKG90aGVyKSkge1xuICAgICAgICAtLXJlcy5tb250aHM7XG4gICAgfVxuXG4gICAgcmVzLm1pbGxpc2Vjb25kcyA9ICtvdGhlciAtICsoYmFzZS5jbG9uZSgpLmFkZChyZXMubW9udGhzLCAnTScpKTtcblxuICAgIHJldHVybiByZXM7XG59XG5cbmZ1bmN0aW9uIG1vbWVudHNEaWZmZXJlbmNlKGJhc2UsIG90aGVyKSB7XG4gICAgdmFyIHJlcztcbiAgICBpZiAoIShiYXNlLmlzVmFsaWQoKSAmJiBvdGhlci5pc1ZhbGlkKCkpKSB7XG4gICAgICAgIHJldHVybiB7bWlsbGlzZWNvbmRzOiAwLCBtb250aHM6IDB9O1xuICAgIH1cblxuICAgIG90aGVyID0gY2xvbmVXaXRoT2Zmc2V0KG90aGVyLCBiYXNlKTtcbiAgICBpZiAoYmFzZS5pc0JlZm9yZShvdGhlcikpIHtcbiAgICAgICAgcmVzID0gcG9zaXRpdmVNb21lbnRzRGlmZmVyZW5jZShiYXNlLCBvdGhlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmVzID0gcG9zaXRpdmVNb21lbnRzRGlmZmVyZW5jZShvdGhlciwgYmFzZSk7XG4gICAgICAgIHJlcy5taWxsaXNlY29uZHMgPSAtcmVzLm1pbGxpc2Vjb25kcztcbiAgICAgICAgcmVzLm1vbnRocyA9IC1yZXMubW9udGhzO1xuICAgIH1cblxuICAgIHJldHVybiByZXM7XG59XG5cbi8vIFRPRE86IHJlbW92ZSAnbmFtZScgYXJnIGFmdGVyIGRlcHJlY2F0aW9uIGlzIHJlbW92ZWRcbmZ1bmN0aW9uIGNyZWF0ZUFkZGVyKGRpcmVjdGlvbiwgbmFtZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAodmFsLCBwZXJpb2QpIHtcbiAgICAgICAgdmFyIGR1ciwgdG1wO1xuICAgICAgICAvL2ludmVydCB0aGUgYXJndW1lbnRzLCBidXQgY29tcGxhaW4gYWJvdXQgaXRcbiAgICAgICAgaWYgKHBlcmlvZCAhPT0gbnVsbCAmJiAhaXNOYU4oK3BlcmlvZCkpIHtcbiAgICAgICAgICAgIGRlcHJlY2F0ZVNpbXBsZShuYW1lLCAnbW9tZW50KCkuJyArIG5hbWUgICsgJyhwZXJpb2QsIG51bWJlcikgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBtb21lbnQoKS4nICsgbmFtZSArICcobnVtYmVyLCBwZXJpb2QpLiAnICtcbiAgICAgICAgICAgICdTZWUgaHR0cDovL21vbWVudGpzLmNvbS9ndWlkZXMvIy93YXJuaW5ncy9hZGQtaW52ZXJ0ZWQtcGFyYW0vIGZvciBtb3JlIGluZm8uJyk7XG4gICAgICAgICAgICB0bXAgPSB2YWw7IHZhbCA9IHBlcmlvZDsgcGVyaW9kID0gdG1wO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFsID0gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgPyArdmFsIDogdmFsO1xuICAgICAgICBkdXIgPSBjcmVhdGVEdXJhdGlvbih2YWwsIHBlcmlvZCk7XG4gICAgICAgIGFkZFN1YnRyYWN0KHRoaXMsIGR1ciwgZGlyZWN0aW9uKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gYWRkU3VidHJhY3QgKG1vbSwgZHVyYXRpb24sIGlzQWRkaW5nLCB1cGRhdGVPZmZzZXQpIHtcbiAgICB2YXIgbWlsbGlzZWNvbmRzID0gZHVyYXRpb24uX21pbGxpc2Vjb25kcyxcbiAgICAgICAgZGF5cyA9IGFic1JvdW5kKGR1cmF0aW9uLl9kYXlzKSxcbiAgICAgICAgbW9udGhzID0gYWJzUm91bmQoZHVyYXRpb24uX21vbnRocyk7XG5cbiAgICBpZiAoIW1vbS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgLy8gTm8gb3BcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHVwZGF0ZU9mZnNldCA9IHVwZGF0ZU9mZnNldCA9PSBudWxsID8gdHJ1ZSA6IHVwZGF0ZU9mZnNldDtcblxuICAgIGlmIChtaWxsaXNlY29uZHMpIHtcbiAgICAgICAgbW9tLl9kLnNldFRpbWUobW9tLl9kLnZhbHVlT2YoKSArIG1pbGxpc2Vjb25kcyAqIGlzQWRkaW5nKTtcbiAgICB9XG4gICAgaWYgKGRheXMpIHtcbiAgICAgICAgc2V0JDEobW9tLCAnRGF0ZScsIGdldChtb20sICdEYXRlJykgKyBkYXlzICogaXNBZGRpbmcpO1xuICAgIH1cbiAgICBpZiAobW9udGhzKSB7XG4gICAgICAgIHNldE1vbnRoKG1vbSwgZ2V0KG1vbSwgJ01vbnRoJykgKyBtb250aHMgKiBpc0FkZGluZyk7XG4gICAgfVxuICAgIGlmICh1cGRhdGVPZmZzZXQpIHtcbiAgICAgICAgaG9va3MudXBkYXRlT2Zmc2V0KG1vbSwgZGF5cyB8fCBtb250aHMpO1xuICAgIH1cbn1cblxudmFyIGFkZCAgICAgID0gY3JlYXRlQWRkZXIoMSwgJ2FkZCcpO1xudmFyIHN1YnRyYWN0ID0gY3JlYXRlQWRkZXIoLTEsICdzdWJ0cmFjdCcpO1xuXG5mdW5jdGlvbiBnZXRDYWxlbmRhckZvcm1hdChteU1vbWVudCwgbm93KSB7XG4gICAgdmFyIGRpZmYgPSBteU1vbWVudC5kaWZmKG5vdywgJ2RheXMnLCB0cnVlKTtcbiAgICByZXR1cm4gZGlmZiA8IC02ID8gJ3NhbWVFbHNlJyA6XG4gICAgICAgICAgICBkaWZmIDwgLTEgPyAnbGFzdFdlZWsnIDpcbiAgICAgICAgICAgIGRpZmYgPCAwID8gJ2xhc3REYXknIDpcbiAgICAgICAgICAgIGRpZmYgPCAxID8gJ3NhbWVEYXknIDpcbiAgICAgICAgICAgIGRpZmYgPCAyID8gJ25leHREYXknIDpcbiAgICAgICAgICAgIGRpZmYgPCA3ID8gJ25leHRXZWVrJyA6ICdzYW1lRWxzZSc7XG59XG5cbmZ1bmN0aW9uIGNhbGVuZGFyJDEgKHRpbWUsIGZvcm1hdHMpIHtcbiAgICAvLyBXZSB3YW50IHRvIGNvbXBhcmUgdGhlIHN0YXJ0IG9mIHRvZGF5LCB2cyB0aGlzLlxuICAgIC8vIEdldHRpbmcgc3RhcnQtb2YtdG9kYXkgZGVwZW5kcyBvbiB3aGV0aGVyIHdlJ3JlIGxvY2FsL3V0Yy9vZmZzZXQgb3Igbm90LlxuICAgIHZhciBub3cgPSB0aW1lIHx8IGNyZWF0ZUxvY2FsKCksXG4gICAgICAgIHNvZCA9IGNsb25lV2l0aE9mZnNldChub3csIHRoaXMpLnN0YXJ0T2YoJ2RheScpLFxuICAgICAgICBmb3JtYXQgPSBob29rcy5jYWxlbmRhckZvcm1hdCh0aGlzLCBzb2QpIHx8ICdzYW1lRWxzZSc7XG5cbiAgICB2YXIgb3V0cHV0ID0gZm9ybWF0cyAmJiAoaXNGdW5jdGlvbihmb3JtYXRzW2Zvcm1hdF0pID8gZm9ybWF0c1tmb3JtYXRdLmNhbGwodGhpcywgbm93KSA6IGZvcm1hdHNbZm9ybWF0XSk7XG5cbiAgICByZXR1cm4gdGhpcy5mb3JtYXQob3V0cHV0IHx8IHRoaXMubG9jYWxlRGF0YSgpLmNhbGVuZGFyKGZvcm1hdCwgdGhpcywgY3JlYXRlTG9jYWwobm93KSkpO1xufVxuXG5mdW5jdGlvbiBjbG9uZSAoKSB7XG4gICAgcmV0dXJuIG5ldyBNb21lbnQodGhpcyk7XG59XG5cbmZ1bmN0aW9uIGlzQWZ0ZXIgKGlucHV0LCB1bml0cykge1xuICAgIHZhciBsb2NhbElucHV0ID0gaXNNb21lbnQoaW5wdXQpID8gaW5wdXQgOiBjcmVhdGVMb2NhbChpbnB1dCk7XG4gICAgaWYgKCEodGhpcy5pc1ZhbGlkKCkgJiYgbG9jYWxJbnB1dC5pc1ZhbGlkKCkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdW5pdHMgPSBub3JtYWxpemVVbml0cyghaXNVbmRlZmluZWQodW5pdHMpID8gdW5pdHMgOiAnbWlsbGlzZWNvbmQnKTtcbiAgICBpZiAodW5pdHMgPT09ICdtaWxsaXNlY29uZCcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVPZigpID4gbG9jYWxJbnB1dC52YWx1ZU9mKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsSW5wdXQudmFsdWVPZigpIDwgdGhpcy5jbG9uZSgpLnN0YXJ0T2YodW5pdHMpLnZhbHVlT2YoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzQmVmb3JlIChpbnB1dCwgdW5pdHMpIHtcbiAgICB2YXIgbG9jYWxJbnB1dCA9IGlzTW9tZW50KGlucHV0KSA/IGlucHV0IDogY3JlYXRlTG9jYWwoaW5wdXQpO1xuICAgIGlmICghKHRoaXMuaXNWYWxpZCgpICYmIGxvY2FsSW5wdXQuaXNWYWxpZCgpKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHVuaXRzID0gbm9ybWFsaXplVW5pdHMoIWlzVW5kZWZpbmVkKHVuaXRzKSA/IHVuaXRzIDogJ21pbGxpc2Vjb25kJyk7XG4gICAgaWYgKHVuaXRzID09PSAnbWlsbGlzZWNvbmQnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlT2YoKSA8IGxvY2FsSW5wdXQudmFsdWVPZigpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuZW5kT2YodW5pdHMpLnZhbHVlT2YoKSA8IGxvY2FsSW5wdXQudmFsdWVPZigpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaXNCZXR3ZWVuIChmcm9tLCB0bywgdW5pdHMsIGluY2x1c2l2aXR5KSB7XG4gICAgaW5jbHVzaXZpdHkgPSBpbmNsdXNpdml0eSB8fCAnKCknO1xuICAgIHJldHVybiAoaW5jbHVzaXZpdHlbMF0gPT09ICcoJyA/IHRoaXMuaXNBZnRlcihmcm9tLCB1bml0cykgOiAhdGhpcy5pc0JlZm9yZShmcm9tLCB1bml0cykpICYmXG4gICAgICAgIChpbmNsdXNpdml0eVsxXSA9PT0gJyknID8gdGhpcy5pc0JlZm9yZSh0bywgdW5pdHMpIDogIXRoaXMuaXNBZnRlcih0bywgdW5pdHMpKTtcbn1cblxuZnVuY3Rpb24gaXNTYW1lIChpbnB1dCwgdW5pdHMpIHtcbiAgICB2YXIgbG9jYWxJbnB1dCA9IGlzTW9tZW50KGlucHV0KSA/IGlucHV0IDogY3JlYXRlTG9jYWwoaW5wdXQpLFxuICAgICAgICBpbnB1dE1zO1xuICAgIGlmICghKHRoaXMuaXNWYWxpZCgpICYmIGxvY2FsSW5wdXQuaXNWYWxpZCgpKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHVuaXRzID0gbm9ybWFsaXplVW5pdHModW5pdHMgfHwgJ21pbGxpc2Vjb25kJyk7XG4gICAgaWYgKHVuaXRzID09PSAnbWlsbGlzZWNvbmQnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlT2YoKSA9PT0gbG9jYWxJbnB1dC52YWx1ZU9mKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaW5wdXRNcyA9IGxvY2FsSW5wdXQudmFsdWVPZigpO1xuICAgICAgICByZXR1cm4gdGhpcy5jbG9uZSgpLnN0YXJ0T2YodW5pdHMpLnZhbHVlT2YoKSA8PSBpbnB1dE1zICYmIGlucHV0TXMgPD0gdGhpcy5jbG9uZSgpLmVuZE9mKHVuaXRzKS52YWx1ZU9mKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc1NhbWVPckFmdGVyIChpbnB1dCwgdW5pdHMpIHtcbiAgICByZXR1cm4gdGhpcy5pc1NhbWUoaW5wdXQsIHVuaXRzKSB8fCB0aGlzLmlzQWZ0ZXIoaW5wdXQsdW5pdHMpO1xufVxuXG5mdW5jdGlvbiBpc1NhbWVPckJlZm9yZSAoaW5wdXQsIHVuaXRzKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNTYW1lKGlucHV0LCB1bml0cykgfHwgdGhpcy5pc0JlZm9yZShpbnB1dCx1bml0cyk7XG59XG5cbmZ1bmN0aW9uIGRpZmYgKGlucHV0LCB1bml0cywgYXNGbG9hdCkge1xuICAgIHZhciB0aGF0LFxuICAgICAgICB6b25lRGVsdGEsXG4gICAgICAgIGRlbHRhLCBvdXRwdXQ7XG5cbiAgICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgICAgIHJldHVybiBOYU47XG4gICAgfVxuXG4gICAgdGhhdCA9IGNsb25lV2l0aE9mZnNldChpbnB1dCwgdGhpcyk7XG5cbiAgICBpZiAoIXRoYXQuaXNWYWxpZCgpKSB7XG4gICAgICAgIHJldHVybiBOYU47XG4gICAgfVxuXG4gICAgem9uZURlbHRhID0gKHRoYXQudXRjT2Zmc2V0KCkgLSB0aGlzLnV0Y09mZnNldCgpKSAqIDZlNDtcblxuICAgIHVuaXRzID0gbm9ybWFsaXplVW5pdHModW5pdHMpO1xuXG4gICAgaWYgKHVuaXRzID09PSAneWVhcicgfHwgdW5pdHMgPT09ICdtb250aCcgfHwgdW5pdHMgPT09ICdxdWFydGVyJykge1xuICAgICAgICBvdXRwdXQgPSBtb250aERpZmYodGhpcywgdGhhdCk7XG4gICAgICAgIGlmICh1bml0cyA9PT0gJ3F1YXJ0ZXInKSB7XG4gICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQgLyAzO1xuICAgICAgICB9IGVsc2UgaWYgKHVuaXRzID09PSAneWVhcicpIHtcbiAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dCAvIDEyO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGVsdGEgPSB0aGlzIC0gdGhhdDtcbiAgICAgICAgb3V0cHV0ID0gdW5pdHMgPT09ICdzZWNvbmQnID8gZGVsdGEgLyAxZTMgOiAvLyAxMDAwXG4gICAgICAgICAgICB1bml0cyA9PT0gJ21pbnV0ZScgPyBkZWx0YSAvIDZlNCA6IC8vIDEwMDAgKiA2MFxuICAgICAgICAgICAgdW5pdHMgPT09ICdob3VyJyA/IGRlbHRhIC8gMzZlNSA6IC8vIDEwMDAgKiA2MCAqIDYwXG4gICAgICAgICAgICB1bml0cyA9PT0gJ2RheScgPyAoZGVsdGEgLSB6b25lRGVsdGEpIC8gODY0ZTUgOiAvLyAxMDAwICogNjAgKiA2MCAqIDI0LCBuZWdhdGUgZHN0XG4gICAgICAgICAgICB1bml0cyA9PT0gJ3dlZWsnID8gKGRlbHRhIC0gem9uZURlbHRhKSAvIDYwNDhlNSA6IC8vIDEwMDAgKiA2MCAqIDYwICogMjQgKiA3LCBuZWdhdGUgZHN0XG4gICAgICAgICAgICBkZWx0YTtcbiAgICB9XG4gICAgcmV0dXJuIGFzRmxvYXQgPyBvdXRwdXQgOiBhYnNGbG9vcihvdXRwdXQpO1xufVxuXG5mdW5jdGlvbiBtb250aERpZmYgKGEsIGIpIHtcbiAgICAvLyBkaWZmZXJlbmNlIGluIG1vbnRoc1xuICAgIHZhciB3aG9sZU1vbnRoRGlmZiA9ICgoYi55ZWFyKCkgLSBhLnllYXIoKSkgKiAxMikgKyAoYi5tb250aCgpIC0gYS5tb250aCgpKSxcbiAgICAgICAgLy8gYiBpcyBpbiAoYW5jaG9yIC0gMSBtb250aCwgYW5jaG9yICsgMSBtb250aClcbiAgICAgICAgYW5jaG9yID0gYS5jbG9uZSgpLmFkZCh3aG9sZU1vbnRoRGlmZiwgJ21vbnRocycpLFxuICAgICAgICBhbmNob3IyLCBhZGp1c3Q7XG5cbiAgICBpZiAoYiAtIGFuY2hvciA8IDApIHtcbiAgICAgICAgYW5jaG9yMiA9IGEuY2xvbmUoKS5hZGQod2hvbGVNb250aERpZmYgLSAxLCAnbW9udGhzJyk7XG4gICAgICAgIC8vIGxpbmVhciBhY3Jvc3MgdGhlIG1vbnRoXG4gICAgICAgIGFkanVzdCA9IChiIC0gYW5jaG9yKSAvIChhbmNob3IgLSBhbmNob3IyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBhbmNob3IyID0gYS5jbG9uZSgpLmFkZCh3aG9sZU1vbnRoRGlmZiArIDEsICdtb250aHMnKTtcbiAgICAgICAgLy8gbGluZWFyIGFjcm9zcyB0aGUgbW9udGhcbiAgICAgICAgYWRqdXN0ID0gKGIgLSBhbmNob3IpIC8gKGFuY2hvcjIgLSBhbmNob3IpO1xuICAgIH1cblxuICAgIC8vY2hlY2sgZm9yIG5lZ2F0aXZlIHplcm8sIHJldHVybiB6ZXJvIGlmIG5lZ2F0aXZlIHplcm9cbiAgICByZXR1cm4gLSh3aG9sZU1vbnRoRGlmZiArIGFkanVzdCkgfHwgMDtcbn1cblxuaG9va3MuZGVmYXVsdEZvcm1hdCA9ICdZWVlZLU1NLUREVEhIOm1tOnNzWic7XG5ob29rcy5kZWZhdWx0Rm9ybWF0VXRjID0gJ1lZWVktTU0tRERUSEg6bW06c3NbWl0nO1xuXG5mdW5jdGlvbiB0b1N0cmluZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5sb2NhbGUoJ2VuJykuZm9ybWF0KCdkZGQgTU1NIEREIFlZWVkgSEg6bW06c3MgW0dNVF1aWicpO1xufVxuXG5mdW5jdGlvbiB0b0lTT1N0cmluZygpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgbSA9IHRoaXMuY2xvbmUoKS51dGMoKTtcbiAgICBpZiAobS55ZWFyKCkgPCAwIHx8IG0ueWVhcigpID4gOTk5OSkge1xuICAgICAgICByZXR1cm4gZm9ybWF0TW9tZW50KG0sICdZWVlZWVktTU0tRERbVF1ISDptbTpzcy5TU1NbWl0nKTtcbiAgICB9XG4gICAgaWYgKGlzRnVuY3Rpb24oRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcpKSB7XG4gICAgICAgIC8vIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbiBpcyB+NTB4IGZhc3RlciwgdXNlIGl0IHdoZW4gd2UgY2FuXG4gICAgICAgIHJldHVybiB0aGlzLnRvRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgfVxuICAgIHJldHVybiBmb3JtYXRNb21lbnQobSwgJ1lZWVktTU0tRERbVF1ISDptbTpzcy5TU1NbWl0nKTtcbn1cblxuLyoqXG4gKiBSZXR1cm4gYSBodW1hbiByZWFkYWJsZSByZXByZXNlbnRhdGlvbiBvZiBhIG1vbWVudCB0aGF0IGNhblxuICogYWxzbyBiZSBldmFsdWF0ZWQgdG8gZ2V0IGEgbmV3IG1vbWVudCB3aGljaCBpcyB0aGUgc2FtZVxuICpcbiAqIEBsaW5rIGh0dHBzOi8vbm9kZWpzLm9yZy9kaXN0L2xhdGVzdC9kb2NzL2FwaS91dGlsLmh0bWwjdXRpbF9jdXN0b21faW5zcGVjdF9mdW5jdGlvbl9vbl9vYmplY3RzXG4gKi9cbmZ1bmN0aW9uIGluc3BlY3QgKCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICAgICAgcmV0dXJuICdtb21lbnQuaW52YWxpZCgvKiAnICsgdGhpcy5faSArICcgKi8pJztcbiAgICB9XG4gICAgdmFyIGZ1bmMgPSAnbW9tZW50JztcbiAgICB2YXIgem9uZSA9ICcnO1xuICAgIGlmICghdGhpcy5pc0xvY2FsKCkpIHtcbiAgICAgICAgZnVuYyA9IHRoaXMudXRjT2Zmc2V0KCkgPT09IDAgPyAnbW9tZW50LnV0YycgOiAnbW9tZW50LnBhcnNlWm9uZSc7XG4gICAgICAgIHpvbmUgPSAnWic7XG4gICAgfVxuICAgIHZhciBwcmVmaXggPSAnWycgKyBmdW5jICsgJyhcIl0nO1xuICAgIHZhciB5ZWFyID0gKDAgPD0gdGhpcy55ZWFyKCkgJiYgdGhpcy55ZWFyKCkgPD0gOTk5OSkgPyAnWVlZWScgOiAnWVlZWVlZJztcbiAgICB2YXIgZGF0ZXRpbWUgPSAnLU1NLUREW1RdSEg6bW06c3MuU1NTJztcbiAgICB2YXIgc3VmZml4ID0gem9uZSArICdbXCIpXSc7XG5cbiAgICByZXR1cm4gdGhpcy5mb3JtYXQocHJlZml4ICsgeWVhciArIGRhdGV0aW1lICsgc3VmZml4KTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0IChpbnB1dFN0cmluZykge1xuICAgIGlmICghaW5wdXRTdHJpbmcpIHtcbiAgICAgICAgaW5wdXRTdHJpbmcgPSB0aGlzLmlzVXRjKCkgPyBob29rcy5kZWZhdWx0Rm9ybWF0VXRjIDogaG9va3MuZGVmYXVsdEZvcm1hdDtcbiAgICB9XG4gICAgdmFyIG91dHB1dCA9IGZvcm1hdE1vbWVudCh0aGlzLCBpbnB1dFN0cmluZyk7XG4gICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLnBvc3Rmb3JtYXQob3V0cHV0KTtcbn1cblxuZnVuY3Rpb24gZnJvbSAodGltZSwgd2l0aG91dFN1ZmZpeCkge1xuICAgIGlmICh0aGlzLmlzVmFsaWQoKSAmJlxuICAgICAgICAgICAgKChpc01vbWVudCh0aW1lKSAmJiB0aW1lLmlzVmFsaWQoKSkgfHxcbiAgICAgICAgICAgICBjcmVhdGVMb2NhbCh0aW1lKS5pc1ZhbGlkKCkpKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVEdXJhdGlvbih7dG86IHRoaXMsIGZyb206IHRpbWV9KS5sb2NhbGUodGhpcy5sb2NhbGUoKSkuaHVtYW5pemUoIXdpdGhvdXRTdWZmaXgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS5pbnZhbGlkRGF0ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZnJvbU5vdyAod2l0aG91dFN1ZmZpeCkge1xuICAgIHJldHVybiB0aGlzLmZyb20oY3JlYXRlTG9jYWwoKSwgd2l0aG91dFN1ZmZpeCk7XG59XG5cbmZ1bmN0aW9uIHRvICh0aW1lLCB3aXRob3V0U3VmZml4KSB7XG4gICAgaWYgKHRoaXMuaXNWYWxpZCgpICYmXG4gICAgICAgICAgICAoKGlzTW9tZW50KHRpbWUpICYmIHRpbWUuaXNWYWxpZCgpKSB8fFxuICAgICAgICAgICAgIGNyZWF0ZUxvY2FsKHRpbWUpLmlzVmFsaWQoKSkpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUR1cmF0aW9uKHtmcm9tOiB0aGlzLCB0bzogdGltZX0pLmxvY2FsZSh0aGlzLmxvY2FsZSgpKS5odW1hbml6ZSghd2l0aG91dFN1ZmZpeCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB0b05vdyAod2l0aG91dFN1ZmZpeCkge1xuICAgIHJldHVybiB0aGlzLnRvKGNyZWF0ZUxvY2FsKCksIHdpdGhvdXRTdWZmaXgpO1xufVxuXG4vLyBJZiBwYXNzZWQgYSBsb2NhbGUga2V5LCBpdCB3aWxsIHNldCB0aGUgbG9jYWxlIGZvciB0aGlzXG4vLyBpbnN0YW5jZS4gIE90aGVyd2lzZSwgaXQgd2lsbCByZXR1cm4gdGhlIGxvY2FsZSBjb25maWd1cmF0aW9uXG4vLyB2YXJpYWJsZXMgZm9yIHRoaXMgaW5zdGFuY2UuXG5mdW5jdGlvbiBsb2NhbGUgKGtleSkge1xuICAgIHZhciBuZXdMb2NhbGVEYXRhO1xuXG4gICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sb2NhbGUuX2FiYnI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbmV3TG9jYWxlRGF0YSA9IGdldExvY2FsZShrZXkpO1xuICAgICAgICBpZiAobmV3TG9jYWxlRGF0YSAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9sb2NhbGUgPSBuZXdMb2NhbGVEYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cblxudmFyIGxhbmcgPSBkZXByZWNhdGUoXG4gICAgJ21vbWVudCgpLmxhbmcoKSBpcyBkZXByZWNhdGVkLiBJbnN0ZWFkLCB1c2UgbW9tZW50KCkubG9jYWxlRGF0YSgpIHRvIGdldCB0aGUgbGFuZ3VhZ2UgY29uZmlndXJhdGlvbi4gVXNlIG1vbWVudCgpLmxvY2FsZSgpIHRvIGNoYW5nZSBsYW5ndWFnZXMuJyxcbiAgICBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlKGtleSk7XG4gICAgICAgIH1cbiAgICB9XG4pO1xuXG5mdW5jdGlvbiBsb2NhbGVEYXRhICgpIHtcbiAgICByZXR1cm4gdGhpcy5fbG9jYWxlO1xufVxuXG5mdW5jdGlvbiBzdGFydE9mICh1bml0cykge1xuICAgIHVuaXRzID0gbm9ybWFsaXplVW5pdHModW5pdHMpO1xuICAgIC8vIHRoZSBmb2xsb3dpbmcgc3dpdGNoIGludGVudGlvbmFsbHkgb21pdHMgYnJlYWsga2V5d29yZHNcbiAgICAvLyB0byB1dGlsaXplIGZhbGxpbmcgdGhyb3VnaCB0aGUgY2FzZXMuXG4gICAgc3dpdGNoICh1bml0cykge1xuICAgICAgICBjYXNlICd5ZWFyJzpcbiAgICAgICAgICAgIHRoaXMubW9udGgoMCk7XG4gICAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICAgIGNhc2UgJ3F1YXJ0ZXInOlxuICAgICAgICBjYXNlICdtb250aCc6XG4gICAgICAgICAgICB0aGlzLmRhdGUoMSk7XG4gICAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICAgIGNhc2UgJ3dlZWsnOlxuICAgICAgICBjYXNlICdpc29XZWVrJzpcbiAgICAgICAgY2FzZSAnZGF5JzpcbiAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICB0aGlzLmhvdXJzKDApO1xuICAgICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgICBjYXNlICdob3VyJzpcbiAgICAgICAgICAgIHRoaXMubWludXRlcygwKTtcbiAgICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgICAgY2FzZSAnbWludXRlJzpcbiAgICAgICAgICAgIHRoaXMuc2Vjb25kcygwKTtcbiAgICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgICAgY2FzZSAnc2Vjb25kJzpcbiAgICAgICAgICAgIHRoaXMubWlsbGlzZWNvbmRzKDApO1xuICAgIH1cblxuICAgIC8vIHdlZWtzIGFyZSBhIHNwZWNpYWwgY2FzZVxuICAgIGlmICh1bml0cyA9PT0gJ3dlZWsnKSB7XG4gICAgICAgIHRoaXMud2Vla2RheSgwKTtcbiAgICB9XG4gICAgaWYgKHVuaXRzID09PSAnaXNvV2VlaycpIHtcbiAgICAgICAgdGhpcy5pc29XZWVrZGF5KDEpO1xuICAgIH1cblxuICAgIC8vIHF1YXJ0ZXJzIGFyZSBhbHNvIHNwZWNpYWxcbiAgICBpZiAodW5pdHMgPT09ICdxdWFydGVyJykge1xuICAgICAgICB0aGlzLm1vbnRoKE1hdGguZmxvb3IodGhpcy5tb250aCgpIC8gMykgKiAzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbn1cblxuZnVuY3Rpb24gZW5kT2YgKHVuaXRzKSB7XG4gICAgdW5pdHMgPSBub3JtYWxpemVVbml0cyh1bml0cyk7XG4gICAgaWYgKHVuaXRzID09PSB1bmRlZmluZWQgfHwgdW5pdHMgPT09ICdtaWxsaXNlY29uZCcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gJ2RhdGUnIGlzIGFuIGFsaWFzIGZvciAnZGF5Jywgc28gaXQgc2hvdWxkIGJlIGNvbnNpZGVyZWQgYXMgc3VjaC5cbiAgICBpZiAodW5pdHMgPT09ICdkYXRlJykge1xuICAgICAgICB1bml0cyA9ICdkYXknO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnN0YXJ0T2YodW5pdHMpLmFkZCgxLCAodW5pdHMgPT09ICdpc29XZWVrJyA/ICd3ZWVrJyA6IHVuaXRzKSkuc3VidHJhY3QoMSwgJ21zJyk7XG59XG5cbmZ1bmN0aW9uIHZhbHVlT2YgKCkge1xuICAgIHJldHVybiB0aGlzLl9kLnZhbHVlT2YoKSAtICgodGhpcy5fb2Zmc2V0IHx8IDApICogNjAwMDApO1xufVxuXG5mdW5jdGlvbiB1bml4ICgpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcih0aGlzLnZhbHVlT2YoKSAvIDEwMDApO1xufVxuXG5mdW5jdGlvbiB0b0RhdGUgKCkge1xuICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnZhbHVlT2YoKSk7XG59XG5cbmZ1bmN0aW9uIHRvQXJyYXkgKCkge1xuICAgIHZhciBtID0gdGhpcztcbiAgICByZXR1cm4gW20ueWVhcigpLCBtLm1vbnRoKCksIG0uZGF0ZSgpLCBtLmhvdXIoKSwgbS5taW51dGUoKSwgbS5zZWNvbmQoKSwgbS5taWxsaXNlY29uZCgpXTtcbn1cblxuZnVuY3Rpb24gdG9PYmplY3QgKCkge1xuICAgIHZhciBtID0gdGhpcztcbiAgICByZXR1cm4ge1xuICAgICAgICB5ZWFyczogbS55ZWFyKCksXG4gICAgICAgIG1vbnRoczogbS5tb250aCgpLFxuICAgICAgICBkYXRlOiBtLmRhdGUoKSxcbiAgICAgICAgaG91cnM6IG0uaG91cnMoKSxcbiAgICAgICAgbWludXRlczogbS5taW51dGVzKCksXG4gICAgICAgIHNlY29uZHM6IG0uc2Vjb25kcygpLFxuICAgICAgICBtaWxsaXNlY29uZHM6IG0ubWlsbGlzZWNvbmRzKClcbiAgICB9O1xufVxuXG5mdW5jdGlvbiB0b0pTT04gKCkge1xuICAgIC8vIG5ldyBEYXRlKE5hTikudG9KU09OKCkgPT09IG51bGxcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkKCkgPyB0aGlzLnRvSVNPU3RyaW5nKCkgOiBudWxsO1xufVxuXG5mdW5jdGlvbiBpc1ZhbGlkJDIgKCkge1xuICAgIHJldHVybiBpc1ZhbGlkKHRoaXMpO1xufVxuXG5mdW5jdGlvbiBwYXJzaW5nRmxhZ3MgKCkge1xuICAgIHJldHVybiBleHRlbmQoe30sIGdldFBhcnNpbmdGbGFncyh0aGlzKSk7XG59XG5cbmZ1bmN0aW9uIGludmFsaWRBdCAoKSB7XG4gICAgcmV0dXJuIGdldFBhcnNpbmdGbGFncyh0aGlzKS5vdmVyZmxvdztcbn1cblxuZnVuY3Rpb24gY3JlYXRpb25EYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGlucHV0OiB0aGlzLl9pLFxuICAgICAgICBmb3JtYXQ6IHRoaXMuX2YsXG4gICAgICAgIGxvY2FsZTogdGhpcy5fbG9jYWxlLFxuICAgICAgICBpc1VUQzogdGhpcy5faXNVVEMsXG4gICAgICAgIHN0cmljdDogdGhpcy5fc3RyaWN0XG4gICAgfTtcbn1cblxuLy8gRk9STUFUVElOR1xuXG5hZGRGb3JtYXRUb2tlbigwLCBbJ2dnJywgMl0sIDAsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy53ZWVrWWVhcigpICUgMTAwO1xufSk7XG5cbmFkZEZvcm1hdFRva2VuKDAsIFsnR0cnLCAyXSwgMCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmlzb1dlZWtZZWFyKCkgJSAxMDA7XG59KTtcblxuZnVuY3Rpb24gYWRkV2Vla1llYXJGb3JtYXRUb2tlbiAodG9rZW4sIGdldHRlcikge1xuICAgIGFkZEZvcm1hdFRva2VuKDAsIFt0b2tlbiwgdG9rZW4ubGVuZ3RoXSwgMCwgZ2V0dGVyKTtcbn1cblxuYWRkV2Vla1llYXJGb3JtYXRUb2tlbignZ2dnZycsICAgICAnd2Vla1llYXInKTtcbmFkZFdlZWtZZWFyRm9ybWF0VG9rZW4oJ2dnZ2dnJywgICAgJ3dlZWtZZWFyJyk7XG5hZGRXZWVrWWVhckZvcm1hdFRva2VuKCdHR0dHJywgICdpc29XZWVrWWVhcicpO1xuYWRkV2Vla1llYXJGb3JtYXRUb2tlbignR0dHR0cnLCAnaXNvV2Vla1llYXInKTtcblxuLy8gQUxJQVNFU1xuXG5hZGRVbml0QWxpYXMoJ3dlZWtZZWFyJywgJ2dnJyk7XG5hZGRVbml0QWxpYXMoJ2lzb1dlZWtZZWFyJywgJ0dHJyk7XG5cbi8vIFBSSU9SSVRZXG5cbmFkZFVuaXRQcmlvcml0eSgnd2Vla1llYXInLCAxKTtcbmFkZFVuaXRQcmlvcml0eSgnaXNvV2Vla1llYXInLCAxKTtcblxuXG4vLyBQQVJTSU5HXG5cbmFkZFJlZ2V4VG9rZW4oJ0cnLCAgICAgIG1hdGNoU2lnbmVkKTtcbmFkZFJlZ2V4VG9rZW4oJ2cnLCAgICAgIG1hdGNoU2lnbmVkKTtcbmFkZFJlZ2V4VG9rZW4oJ0dHJywgICAgIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbmFkZFJlZ2V4VG9rZW4oJ2dnJywgICAgIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbmFkZFJlZ2V4VG9rZW4oJ0dHR0cnLCAgIG1hdGNoMXRvNCwgbWF0Y2g0KTtcbmFkZFJlZ2V4VG9rZW4oJ2dnZ2cnLCAgIG1hdGNoMXRvNCwgbWF0Y2g0KTtcbmFkZFJlZ2V4VG9rZW4oJ0dHR0dHJywgIG1hdGNoMXRvNiwgbWF0Y2g2KTtcbmFkZFJlZ2V4VG9rZW4oJ2dnZ2dnJywgIG1hdGNoMXRvNiwgbWF0Y2g2KTtcblxuYWRkV2Vla1BhcnNlVG9rZW4oWydnZ2dnJywgJ2dnZ2dnJywgJ0dHR0cnLCAnR0dHR0cnXSwgZnVuY3Rpb24gKGlucHV0LCB3ZWVrLCBjb25maWcsIHRva2VuKSB7XG4gICAgd2Vla1t0b2tlbi5zdWJzdHIoMCwgMildID0gdG9JbnQoaW5wdXQpO1xufSk7XG5cbmFkZFdlZWtQYXJzZVRva2VuKFsnZ2cnLCAnR0cnXSwgZnVuY3Rpb24gKGlucHV0LCB3ZWVrLCBjb25maWcsIHRva2VuKSB7XG4gICAgd2Vla1t0b2tlbl0gPSBob29rcy5wYXJzZVR3b0RpZ2l0WWVhcihpbnB1dCk7XG59KTtcblxuLy8gTU9NRU5UU1xuXG5mdW5jdGlvbiBnZXRTZXRXZWVrWWVhciAoaW5wdXQpIHtcbiAgICByZXR1cm4gZ2V0U2V0V2Vla1llYXJIZWxwZXIuY2FsbCh0aGlzLFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICB0aGlzLndlZWsoKSxcbiAgICAgICAgICAgIHRoaXMud2Vla2RheSgpLFxuICAgICAgICAgICAgdGhpcy5sb2NhbGVEYXRhKCkuX3dlZWsuZG93LFxuICAgICAgICAgICAgdGhpcy5sb2NhbGVEYXRhKCkuX3dlZWsuZG95KTtcbn1cblxuZnVuY3Rpb24gZ2V0U2V0SVNPV2Vla1llYXIgKGlucHV0KSB7XG4gICAgcmV0dXJuIGdldFNldFdlZWtZZWFySGVscGVyLmNhbGwodGhpcyxcbiAgICAgICAgICAgIGlucHV0LCB0aGlzLmlzb1dlZWsoKSwgdGhpcy5pc29XZWVrZGF5KCksIDEsIDQpO1xufVxuXG5mdW5jdGlvbiBnZXRJU09XZWVrc0luWWVhciAoKSB7XG4gICAgcmV0dXJuIHdlZWtzSW5ZZWFyKHRoaXMueWVhcigpLCAxLCA0KTtcbn1cblxuZnVuY3Rpb24gZ2V0V2Vla3NJblllYXIgKCkge1xuICAgIHZhciB3ZWVrSW5mbyA9IHRoaXMubG9jYWxlRGF0YSgpLl93ZWVrO1xuICAgIHJldHVybiB3ZWVrc0luWWVhcih0aGlzLnllYXIoKSwgd2Vla0luZm8uZG93LCB3ZWVrSW5mby5kb3kpO1xufVxuXG5mdW5jdGlvbiBnZXRTZXRXZWVrWWVhckhlbHBlcihpbnB1dCwgd2Vlaywgd2Vla2RheSwgZG93LCBkb3kpIHtcbiAgICB2YXIgd2Vla3NUYXJnZXQ7XG4gICAgaWYgKGlucHV0ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHdlZWtPZlllYXIodGhpcywgZG93LCBkb3kpLnllYXI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgd2Vla3NUYXJnZXQgPSB3ZWVrc0luWWVhcihpbnB1dCwgZG93LCBkb3kpO1xuICAgICAgICBpZiAod2VlayA+IHdlZWtzVGFyZ2V0KSB7XG4gICAgICAgICAgICB3ZWVrID0gd2Vla3NUYXJnZXQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNldFdlZWtBbGwuY2FsbCh0aGlzLCBpbnB1dCwgd2Vlaywgd2Vla2RheSwgZG93LCBkb3kpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2V0V2Vla0FsbCh3ZWVrWWVhciwgd2Vlaywgd2Vla2RheSwgZG93LCBkb3kpIHtcbiAgICB2YXIgZGF5T2ZZZWFyRGF0YSA9IGRheU9mWWVhckZyb21XZWVrcyh3ZWVrWWVhciwgd2Vlaywgd2Vla2RheSwgZG93LCBkb3kpLFxuICAgICAgICBkYXRlID0gY3JlYXRlVVRDRGF0ZShkYXlPZlllYXJEYXRhLnllYXIsIDAsIGRheU9mWWVhckRhdGEuZGF5T2ZZZWFyKTtcblxuICAgIHRoaXMueWVhcihkYXRlLmdldFVUQ0Z1bGxZZWFyKCkpO1xuICAgIHRoaXMubW9udGgoZGF0ZS5nZXRVVENNb250aCgpKTtcbiAgICB0aGlzLmRhdGUoZGF0ZS5nZXRVVENEYXRlKCkpO1xuICAgIHJldHVybiB0aGlzO1xufVxuXG4vLyBGT1JNQVRUSU5HXG5cbmFkZEZvcm1hdFRva2VuKCdRJywgMCwgJ1FvJywgJ3F1YXJ0ZXInKTtcblxuLy8gQUxJQVNFU1xuXG5hZGRVbml0QWxpYXMoJ3F1YXJ0ZXInLCAnUScpO1xuXG4vLyBQUklPUklUWVxuXG5hZGRVbml0UHJpb3JpdHkoJ3F1YXJ0ZXInLCA3KTtcblxuLy8gUEFSU0lOR1xuXG5hZGRSZWdleFRva2VuKCdRJywgbWF0Y2gxKTtcbmFkZFBhcnNlVG9rZW4oJ1EnLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5KSB7XG4gICAgYXJyYXlbTU9OVEhdID0gKHRvSW50KGlucHV0KSAtIDEpICogMztcbn0pO1xuXG4vLyBNT01FTlRTXG5cbmZ1bmN0aW9uIGdldFNldFF1YXJ0ZXIgKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0ID09IG51bGwgPyBNYXRoLmNlaWwoKHRoaXMubW9udGgoKSArIDEpIC8gMykgOiB0aGlzLm1vbnRoKChpbnB1dCAtIDEpICogMyArIHRoaXMubW9udGgoKSAlIDMpO1xufVxuXG4vLyBGT1JNQVRUSU5HXG5cbmFkZEZvcm1hdFRva2VuKCdEJywgWydERCcsIDJdLCAnRG8nLCAnZGF0ZScpO1xuXG4vLyBBTElBU0VTXG5cbmFkZFVuaXRBbGlhcygnZGF0ZScsICdEJyk7XG5cbi8vIFBSSU9ST0lUWVxuYWRkVW5pdFByaW9yaXR5KCdkYXRlJywgOSk7XG5cbi8vIFBBUlNJTkdcblxuYWRkUmVnZXhUb2tlbignRCcsICBtYXRjaDF0bzIpO1xuYWRkUmVnZXhUb2tlbignREQnLCBtYXRjaDF0bzIsIG1hdGNoMik7XG5hZGRSZWdleFRva2VuKCdEbycsIGZ1bmN0aW9uIChpc1N0cmljdCwgbG9jYWxlKSB7XG4gICAgLy8gVE9ETzogUmVtb3ZlIFwib3JkaW5hbFBhcnNlXCIgZmFsbGJhY2sgaW4gbmV4dCBtYWpvciByZWxlYXNlLlxuICAgIHJldHVybiBpc1N0cmljdCA/XG4gICAgICAobG9jYWxlLl9kYXlPZk1vbnRoT3JkaW5hbFBhcnNlIHx8IGxvY2FsZS5fb3JkaW5hbFBhcnNlKSA6XG4gICAgICBsb2NhbGUuX2RheU9mTW9udGhPcmRpbmFsUGFyc2VMZW5pZW50O1xufSk7XG5cbmFkZFBhcnNlVG9rZW4oWydEJywgJ0REJ10sIERBVEUpO1xuYWRkUGFyc2VUb2tlbignRG8nLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5KSB7XG4gICAgYXJyYXlbREFURV0gPSB0b0ludChpbnB1dC5tYXRjaChtYXRjaDF0bzIpWzBdLCAxMCk7XG59KTtcblxuLy8gTU9NRU5UU1xuXG52YXIgZ2V0U2V0RGF5T2ZNb250aCA9IG1ha2VHZXRTZXQoJ0RhdGUnLCB0cnVlKTtcblxuLy8gRk9STUFUVElOR1xuXG5hZGRGb3JtYXRUb2tlbignREREJywgWydEREREJywgM10sICdERERvJywgJ2RheU9mWWVhcicpO1xuXG4vLyBBTElBU0VTXG5cbmFkZFVuaXRBbGlhcygnZGF5T2ZZZWFyJywgJ0RERCcpO1xuXG4vLyBQUklPUklUWVxuYWRkVW5pdFByaW9yaXR5KCdkYXlPZlllYXInLCA0KTtcblxuLy8gUEFSU0lOR1xuXG5hZGRSZWdleFRva2VuKCdEREQnLCAgbWF0Y2gxdG8zKTtcbmFkZFJlZ2V4VG9rZW4oJ0REREQnLCBtYXRjaDMpO1xuYWRkUGFyc2VUb2tlbihbJ0RERCcsICdEREREJ10sIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICAgIGNvbmZpZy5fZGF5T2ZZZWFyID0gdG9JbnQoaW5wdXQpO1xufSk7XG5cbi8vIEhFTFBFUlNcblxuLy8gTU9NRU5UU1xuXG5mdW5jdGlvbiBnZXRTZXREYXlPZlllYXIgKGlucHV0KSB7XG4gICAgdmFyIGRheU9mWWVhciA9IE1hdGgucm91bmQoKHRoaXMuY2xvbmUoKS5zdGFydE9mKCdkYXknKSAtIHRoaXMuY2xvbmUoKS5zdGFydE9mKCd5ZWFyJykpIC8gODY0ZTUpICsgMTtcbiAgICByZXR1cm4gaW5wdXQgPT0gbnVsbCA/IGRheU9mWWVhciA6IHRoaXMuYWRkKChpbnB1dCAtIGRheU9mWWVhciksICdkJyk7XG59XG5cbi8vIEZPUk1BVFRJTkdcblxuYWRkRm9ybWF0VG9rZW4oJ20nLCBbJ21tJywgMl0sIDAsICdtaW51dGUnKTtcblxuLy8gQUxJQVNFU1xuXG5hZGRVbml0QWxpYXMoJ21pbnV0ZScsICdtJyk7XG5cbi8vIFBSSU9SSVRZXG5cbmFkZFVuaXRQcmlvcml0eSgnbWludXRlJywgMTQpO1xuXG4vLyBQQVJTSU5HXG5cbmFkZFJlZ2V4VG9rZW4oJ20nLCAgbWF0Y2gxdG8yKTtcbmFkZFJlZ2V4VG9rZW4oJ21tJywgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuYWRkUGFyc2VUb2tlbihbJ20nLCAnbW0nXSwgTUlOVVRFKTtcblxuLy8gTU9NRU5UU1xuXG52YXIgZ2V0U2V0TWludXRlID0gbWFrZUdldFNldCgnTWludXRlcycsIGZhbHNlKTtcblxuLy8gRk9STUFUVElOR1xuXG5hZGRGb3JtYXRUb2tlbigncycsIFsnc3MnLCAyXSwgMCwgJ3NlY29uZCcpO1xuXG4vLyBBTElBU0VTXG5cbmFkZFVuaXRBbGlhcygnc2Vjb25kJywgJ3MnKTtcblxuLy8gUFJJT1JJVFlcblxuYWRkVW5pdFByaW9yaXR5KCdzZWNvbmQnLCAxNSk7XG5cbi8vIFBBUlNJTkdcblxuYWRkUmVnZXhUb2tlbigncycsICBtYXRjaDF0bzIpO1xuYWRkUmVnZXhUb2tlbignc3MnLCBtYXRjaDF0bzIsIG1hdGNoMik7XG5hZGRQYXJzZVRva2VuKFsncycsICdzcyddLCBTRUNPTkQpO1xuXG4vLyBNT01FTlRTXG5cbnZhciBnZXRTZXRTZWNvbmQgPSBtYWtlR2V0U2V0KCdTZWNvbmRzJywgZmFsc2UpO1xuXG4vLyBGT1JNQVRUSU5HXG5cbmFkZEZvcm1hdFRva2VuKCdTJywgMCwgMCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB+fih0aGlzLm1pbGxpc2Vjb25kKCkgLyAxMDApO1xufSk7XG5cbmFkZEZvcm1hdFRva2VuKDAsIFsnU1MnLCAyXSwgMCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB+fih0aGlzLm1pbGxpc2Vjb25kKCkgLyAxMCk7XG59KTtcblxuYWRkRm9ybWF0VG9rZW4oMCwgWydTU1MnLCAzXSwgMCwgJ21pbGxpc2Vjb25kJyk7XG5hZGRGb3JtYXRUb2tlbigwLCBbJ1NTU1MnLCA0XSwgMCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLm1pbGxpc2Vjb25kKCkgKiAxMDtcbn0pO1xuYWRkRm9ybWF0VG9rZW4oMCwgWydTU1NTUycsIDVdLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWlsbGlzZWNvbmQoKSAqIDEwMDtcbn0pO1xuYWRkRm9ybWF0VG9rZW4oMCwgWydTU1NTU1MnLCA2XSwgMCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLm1pbGxpc2Vjb25kKCkgKiAxMDAwO1xufSk7XG5hZGRGb3JtYXRUb2tlbigwLCBbJ1NTU1NTU1MnLCA3XSwgMCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLm1pbGxpc2Vjb25kKCkgKiAxMDAwMDtcbn0pO1xuYWRkRm9ybWF0VG9rZW4oMCwgWydTU1NTU1NTUycsIDhdLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWlsbGlzZWNvbmQoKSAqIDEwMDAwMDtcbn0pO1xuYWRkRm9ybWF0VG9rZW4oMCwgWydTU1NTU1NTU1MnLCA5XSwgMCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLm1pbGxpc2Vjb25kKCkgKiAxMDAwMDAwO1xufSk7XG5cblxuLy8gQUxJQVNFU1xuXG5hZGRVbml0QWxpYXMoJ21pbGxpc2Vjb25kJywgJ21zJyk7XG5cbi8vIFBSSU9SSVRZXG5cbmFkZFVuaXRQcmlvcml0eSgnbWlsbGlzZWNvbmQnLCAxNik7XG5cbi8vIFBBUlNJTkdcblxuYWRkUmVnZXhUb2tlbignUycsICAgIG1hdGNoMXRvMywgbWF0Y2gxKTtcbmFkZFJlZ2V4VG9rZW4oJ1NTJywgICBtYXRjaDF0bzMsIG1hdGNoMik7XG5hZGRSZWdleFRva2VuKCdTU1MnLCAgbWF0Y2gxdG8zLCBtYXRjaDMpO1xuXG52YXIgdG9rZW47XG5mb3IgKHRva2VuID0gJ1NTU1MnOyB0b2tlbi5sZW5ndGggPD0gOTsgdG9rZW4gKz0gJ1MnKSB7XG4gICAgYWRkUmVnZXhUb2tlbih0b2tlbiwgbWF0Y2hVbnNpZ25lZCk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlTXMoaW5wdXQsIGFycmF5KSB7XG4gICAgYXJyYXlbTUlMTElTRUNPTkRdID0gdG9JbnQoKCcwLicgKyBpbnB1dCkgKiAxMDAwKTtcbn1cblxuZm9yICh0b2tlbiA9ICdTJzsgdG9rZW4ubGVuZ3RoIDw9IDk7IHRva2VuICs9ICdTJykge1xuICAgIGFkZFBhcnNlVG9rZW4odG9rZW4sIHBhcnNlTXMpO1xufVxuLy8gTU9NRU5UU1xuXG52YXIgZ2V0U2V0TWlsbGlzZWNvbmQgPSBtYWtlR2V0U2V0KCdNaWxsaXNlY29uZHMnLCBmYWxzZSk7XG5cbi8vIEZPUk1BVFRJTkdcblxuYWRkRm9ybWF0VG9rZW4oJ3onLCAgMCwgMCwgJ3pvbmVBYmJyJyk7XG5hZGRGb3JtYXRUb2tlbignenonLCAwLCAwLCAnem9uZU5hbWUnKTtcblxuLy8gTU9NRU5UU1xuXG5mdW5jdGlvbiBnZXRab25lQWJiciAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzVVRDID8gJ1VUQycgOiAnJztcbn1cblxuZnVuY3Rpb24gZ2V0Wm9uZU5hbWUgKCkge1xuICAgIHJldHVybiB0aGlzLl9pc1VUQyA/ICdDb29yZGluYXRlZCBVbml2ZXJzYWwgVGltZScgOiAnJztcbn1cblxudmFyIHByb3RvID0gTW9tZW50LnByb3RvdHlwZTtcblxucHJvdG8uYWRkICAgICAgICAgICAgICAgPSBhZGQ7XG5wcm90by5jYWxlbmRhciAgICAgICAgICA9IGNhbGVuZGFyJDE7XG5wcm90by5jbG9uZSAgICAgICAgICAgICA9IGNsb25lO1xucHJvdG8uZGlmZiAgICAgICAgICAgICAgPSBkaWZmO1xucHJvdG8uZW5kT2YgICAgICAgICAgICAgPSBlbmRPZjtcbnByb3RvLmZvcm1hdCAgICAgICAgICAgID0gZm9ybWF0O1xucHJvdG8uZnJvbSAgICAgICAgICAgICAgPSBmcm9tO1xucHJvdG8uZnJvbU5vdyAgICAgICAgICAgPSBmcm9tTm93O1xucHJvdG8udG8gICAgICAgICAgICAgICAgPSB0bztcbnByb3RvLnRvTm93ICAgICAgICAgICAgID0gdG9Ob3c7XG5wcm90by5nZXQgICAgICAgICAgICAgICA9IHN0cmluZ0dldDtcbnByb3RvLmludmFsaWRBdCAgICAgICAgID0gaW52YWxpZEF0O1xucHJvdG8uaXNBZnRlciAgICAgICAgICAgPSBpc0FmdGVyO1xucHJvdG8uaXNCZWZvcmUgICAgICAgICAgPSBpc0JlZm9yZTtcbnByb3RvLmlzQmV0d2VlbiAgICAgICAgID0gaXNCZXR3ZWVuO1xucHJvdG8uaXNTYW1lICAgICAgICAgICAgPSBpc1NhbWU7XG5wcm90by5pc1NhbWVPckFmdGVyICAgICA9IGlzU2FtZU9yQWZ0ZXI7XG5wcm90by5pc1NhbWVPckJlZm9yZSAgICA9IGlzU2FtZU9yQmVmb3JlO1xucHJvdG8uaXNWYWxpZCAgICAgICAgICAgPSBpc1ZhbGlkJDI7XG5wcm90by5sYW5nICAgICAgICAgICAgICA9IGxhbmc7XG5wcm90by5sb2NhbGUgICAgICAgICAgICA9IGxvY2FsZTtcbnByb3RvLmxvY2FsZURhdGEgICAgICAgID0gbG9jYWxlRGF0YTtcbnByb3RvLm1heCAgICAgICAgICAgICAgID0gcHJvdG90eXBlTWF4O1xucHJvdG8ubWluICAgICAgICAgICAgICAgPSBwcm90b3R5cGVNaW47XG5wcm90by5wYXJzaW5nRmxhZ3MgICAgICA9IHBhcnNpbmdGbGFncztcbnByb3RvLnNldCAgICAgICAgICAgICAgID0gc3RyaW5nU2V0O1xucHJvdG8uc3RhcnRPZiAgICAgICAgICAgPSBzdGFydE9mO1xucHJvdG8uc3VidHJhY3QgICAgICAgICAgPSBzdWJ0cmFjdDtcbnByb3RvLnRvQXJyYXkgICAgICAgICAgID0gdG9BcnJheTtcbnByb3RvLnRvT2JqZWN0ICAgICAgICAgID0gdG9PYmplY3Q7XG5wcm90by50b0RhdGUgICAgICAgICAgICA9IHRvRGF0ZTtcbnByb3RvLnRvSVNPU3RyaW5nICAgICAgID0gdG9JU09TdHJpbmc7XG5wcm90by5pbnNwZWN0ICAgICAgICAgICA9IGluc3BlY3Q7XG5wcm90by50b0pTT04gICAgICAgICAgICA9IHRvSlNPTjtcbnByb3RvLnRvU3RyaW5nICAgICAgICAgID0gdG9TdHJpbmc7XG5wcm90by51bml4ICAgICAgICAgICAgICA9IHVuaXg7XG5wcm90by52YWx1ZU9mICAgICAgICAgICA9IHZhbHVlT2Y7XG5wcm90by5jcmVhdGlvbkRhdGEgICAgICA9IGNyZWF0aW9uRGF0YTtcblxuLy8gWWVhclxucHJvdG8ueWVhciAgICAgICA9IGdldFNldFllYXI7XG5wcm90by5pc0xlYXBZZWFyID0gZ2V0SXNMZWFwWWVhcjtcblxuLy8gV2VlayBZZWFyXG5wcm90by53ZWVrWWVhciAgICA9IGdldFNldFdlZWtZZWFyO1xucHJvdG8uaXNvV2Vla1llYXIgPSBnZXRTZXRJU09XZWVrWWVhcjtcblxuLy8gUXVhcnRlclxucHJvdG8ucXVhcnRlciA9IHByb3RvLnF1YXJ0ZXJzID0gZ2V0U2V0UXVhcnRlcjtcblxuLy8gTW9udGhcbnByb3RvLm1vbnRoICAgICAgID0gZ2V0U2V0TW9udGg7XG5wcm90by5kYXlzSW5Nb250aCA9IGdldERheXNJbk1vbnRoO1xuXG4vLyBXZWVrXG5wcm90by53ZWVrICAgICAgICAgICA9IHByb3RvLndlZWtzICAgICAgICA9IGdldFNldFdlZWs7XG5wcm90by5pc29XZWVrICAgICAgICA9IHByb3RvLmlzb1dlZWtzICAgICA9IGdldFNldElTT1dlZWs7XG5wcm90by53ZWVrc0luWWVhciAgICA9IGdldFdlZWtzSW5ZZWFyO1xucHJvdG8uaXNvV2Vla3NJblllYXIgPSBnZXRJU09XZWVrc0luWWVhcjtcblxuLy8gRGF5XG5wcm90by5kYXRlICAgICAgID0gZ2V0U2V0RGF5T2ZNb250aDtcbnByb3RvLmRheSAgICAgICAgPSBwcm90by5kYXlzICAgICAgICAgICAgID0gZ2V0U2V0RGF5T2ZXZWVrO1xucHJvdG8ud2Vla2RheSAgICA9IGdldFNldExvY2FsZURheU9mV2VlaztcbnByb3RvLmlzb1dlZWtkYXkgPSBnZXRTZXRJU09EYXlPZldlZWs7XG5wcm90by5kYXlPZlllYXIgID0gZ2V0U2V0RGF5T2ZZZWFyO1xuXG4vLyBIb3VyXG5wcm90by5ob3VyID0gcHJvdG8uaG91cnMgPSBnZXRTZXRIb3VyO1xuXG4vLyBNaW51dGVcbnByb3RvLm1pbnV0ZSA9IHByb3RvLm1pbnV0ZXMgPSBnZXRTZXRNaW51dGU7XG5cbi8vIFNlY29uZFxucHJvdG8uc2Vjb25kID0gcHJvdG8uc2Vjb25kcyA9IGdldFNldFNlY29uZDtcblxuLy8gTWlsbGlzZWNvbmRcbnByb3RvLm1pbGxpc2Vjb25kID0gcHJvdG8ubWlsbGlzZWNvbmRzID0gZ2V0U2V0TWlsbGlzZWNvbmQ7XG5cbi8vIE9mZnNldFxucHJvdG8udXRjT2Zmc2V0ICAgICAgICAgICAgPSBnZXRTZXRPZmZzZXQ7XG5wcm90by51dGMgICAgICAgICAgICAgICAgICA9IHNldE9mZnNldFRvVVRDO1xucHJvdG8ubG9jYWwgICAgICAgICAgICAgICAgPSBzZXRPZmZzZXRUb0xvY2FsO1xucHJvdG8ucGFyc2Vab25lICAgICAgICAgICAgPSBzZXRPZmZzZXRUb1BhcnNlZE9mZnNldDtcbnByb3RvLmhhc0FsaWduZWRIb3VyT2Zmc2V0ID0gaGFzQWxpZ25lZEhvdXJPZmZzZXQ7XG5wcm90by5pc0RTVCAgICAgICAgICAgICAgICA9IGlzRGF5bGlnaHRTYXZpbmdUaW1lO1xucHJvdG8uaXNMb2NhbCAgICAgICAgICAgICAgPSBpc0xvY2FsO1xucHJvdG8uaXNVdGNPZmZzZXQgICAgICAgICAgPSBpc1V0Y09mZnNldDtcbnByb3RvLmlzVXRjICAgICAgICAgICAgICAgID0gaXNVdGM7XG5wcm90by5pc1VUQyAgICAgICAgICAgICAgICA9IGlzVXRjO1xuXG4vLyBUaW1lem9uZVxucHJvdG8uem9uZUFiYnIgPSBnZXRab25lQWJicjtcbnByb3RvLnpvbmVOYW1lID0gZ2V0Wm9uZU5hbWU7XG5cbi8vIERlcHJlY2F0aW9uc1xucHJvdG8uZGF0ZXMgID0gZGVwcmVjYXRlKCdkYXRlcyBhY2Nlc3NvciBpcyBkZXByZWNhdGVkLiBVc2UgZGF0ZSBpbnN0ZWFkLicsIGdldFNldERheU9mTW9udGgpO1xucHJvdG8ubW9udGhzID0gZGVwcmVjYXRlKCdtb250aHMgYWNjZXNzb3IgaXMgZGVwcmVjYXRlZC4gVXNlIG1vbnRoIGluc3RlYWQnLCBnZXRTZXRNb250aCk7XG5wcm90by55ZWFycyAgPSBkZXByZWNhdGUoJ3llYXJzIGFjY2Vzc29yIGlzIGRlcHJlY2F0ZWQuIFVzZSB5ZWFyIGluc3RlYWQnLCBnZXRTZXRZZWFyKTtcbnByb3RvLnpvbmUgICA9IGRlcHJlY2F0ZSgnbW9tZW50KCkuem9uZSBpcyBkZXByZWNhdGVkLCB1c2UgbW9tZW50KCkudXRjT2Zmc2V0IGluc3RlYWQuIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3Mvem9uZS8nLCBnZXRTZXRab25lKTtcbnByb3RvLmlzRFNUU2hpZnRlZCA9IGRlcHJlY2F0ZSgnaXNEU1RTaGlmdGVkIGlzIGRlcHJlY2F0ZWQuIFNlZSBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2RzdC1zaGlmdGVkLyBmb3IgbW9yZSBpbmZvcm1hdGlvbicsIGlzRGF5bGlnaHRTYXZpbmdUaW1lU2hpZnRlZCk7XG5cbmZ1bmN0aW9uIGNyZWF0ZVVuaXggKGlucHV0KSB7XG4gICAgcmV0dXJuIGNyZWF0ZUxvY2FsKGlucHV0ICogMTAwMCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUluWm9uZSAoKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUxvY2FsLmFwcGx5KG51bGwsIGFyZ3VtZW50cykucGFyc2Vab25lKCk7XG59XG5cbmZ1bmN0aW9uIHByZVBhcnNlUG9zdEZvcm1hdCAoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZztcbn1cblxudmFyIHByb3RvJDEgPSBMb2NhbGUucHJvdG90eXBlO1xuXG5wcm90byQxLmNhbGVuZGFyICAgICAgICA9IGNhbGVuZGFyO1xucHJvdG8kMS5sb25nRGF0ZUZvcm1hdCAgPSBsb25nRGF0ZUZvcm1hdDtcbnByb3RvJDEuaW52YWxpZERhdGUgICAgID0gaW52YWxpZERhdGU7XG5wcm90byQxLm9yZGluYWwgICAgICAgICA9IG9yZGluYWw7XG5wcm90byQxLnByZXBhcnNlICAgICAgICA9IHByZVBhcnNlUG9zdEZvcm1hdDtcbnByb3RvJDEucG9zdGZvcm1hdCAgICAgID0gcHJlUGFyc2VQb3N0Rm9ybWF0O1xucHJvdG8kMS5yZWxhdGl2ZVRpbWUgICAgPSByZWxhdGl2ZVRpbWU7XG5wcm90byQxLnBhc3RGdXR1cmUgICAgICA9IHBhc3RGdXR1cmU7XG5wcm90byQxLnNldCAgICAgICAgICAgICA9IHNldDtcblxuLy8gTW9udGhcbnByb3RvJDEubW9udGhzICAgICAgICAgICAgPSAgICAgICAgbG9jYWxlTW9udGhzO1xucHJvdG8kMS5tb250aHNTaG9ydCAgICAgICA9ICAgICAgICBsb2NhbGVNb250aHNTaG9ydDtcbnByb3RvJDEubW9udGhzUGFyc2UgICAgICAgPSAgICAgICAgbG9jYWxlTW9udGhzUGFyc2U7XG5wcm90byQxLm1vbnRoc1JlZ2V4ICAgICAgID0gbW9udGhzUmVnZXg7XG5wcm90byQxLm1vbnRoc1Nob3J0UmVnZXggID0gbW9udGhzU2hvcnRSZWdleDtcblxuLy8gV2Vla1xucHJvdG8kMS53ZWVrID0gbG9jYWxlV2VlaztcbnByb3RvJDEuZmlyc3REYXlPZlllYXIgPSBsb2NhbGVGaXJzdERheU9mWWVhcjtcbnByb3RvJDEuZmlyc3REYXlPZldlZWsgPSBsb2NhbGVGaXJzdERheU9mV2VlaztcblxuLy8gRGF5IG9mIFdlZWtcbnByb3RvJDEud2Vla2RheXMgICAgICAgPSAgICAgICAgbG9jYWxlV2Vla2RheXM7XG5wcm90byQxLndlZWtkYXlzTWluICAgID0gICAgICAgIGxvY2FsZVdlZWtkYXlzTWluO1xucHJvdG8kMS53ZWVrZGF5c1Nob3J0ICA9ICAgICAgICBsb2NhbGVXZWVrZGF5c1Nob3J0O1xucHJvdG8kMS53ZWVrZGF5c1BhcnNlICA9ICAgICAgICBsb2NhbGVXZWVrZGF5c1BhcnNlO1xuXG5wcm90byQxLndlZWtkYXlzUmVnZXggICAgICAgPSAgICAgICAgd2Vla2RheXNSZWdleDtcbnByb3RvJDEud2Vla2RheXNTaG9ydFJlZ2V4ICA9ICAgICAgICB3ZWVrZGF5c1Nob3J0UmVnZXg7XG5wcm90byQxLndlZWtkYXlzTWluUmVnZXggICAgPSAgICAgICAgd2Vla2RheXNNaW5SZWdleDtcblxuLy8gSG91cnNcbnByb3RvJDEuaXNQTSA9IGxvY2FsZUlzUE07XG5wcm90byQxLm1lcmlkaWVtID0gbG9jYWxlTWVyaWRpZW07XG5cbmZ1bmN0aW9uIGdldCQxIChmb3JtYXQsIGluZGV4LCBmaWVsZCwgc2V0dGVyKSB7XG4gICAgdmFyIGxvY2FsZSA9IGdldExvY2FsZSgpO1xuICAgIHZhciB1dGMgPSBjcmVhdGVVVEMoKS5zZXQoc2V0dGVyLCBpbmRleCk7XG4gICAgcmV0dXJuIGxvY2FsZVtmaWVsZF0odXRjLCBmb3JtYXQpO1xufVxuXG5mdW5jdGlvbiBsaXN0TW9udGhzSW1wbCAoZm9ybWF0LCBpbmRleCwgZmllbGQpIHtcbiAgICBpZiAoaXNOdW1iZXIoZm9ybWF0KSkge1xuICAgICAgICBpbmRleCA9IGZvcm1hdDtcbiAgICAgICAgZm9ybWF0ID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGZvcm1hdCA9IGZvcm1hdCB8fCAnJztcblxuICAgIGlmIChpbmRleCAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBnZXQkMShmb3JtYXQsIGluZGV4LCBmaWVsZCwgJ21vbnRoJyk7XG4gICAgfVxuXG4gICAgdmFyIGk7XG4gICAgdmFyIG91dCA9IFtdO1xuICAgIGZvciAoaSA9IDA7IGkgPCAxMjsgaSsrKSB7XG4gICAgICAgIG91dFtpXSA9IGdldCQxKGZvcm1hdCwgaSwgZmllbGQsICdtb250aCcpO1xuICAgIH1cbiAgICByZXR1cm4gb3V0O1xufVxuXG4vLyAoKVxuLy8gKDUpXG4vLyAoZm10LCA1KVxuLy8gKGZtdClcbi8vICh0cnVlKVxuLy8gKHRydWUsIDUpXG4vLyAodHJ1ZSwgZm10LCA1KVxuLy8gKHRydWUsIGZtdClcbmZ1bmN0aW9uIGxpc3RXZWVrZGF5c0ltcGwgKGxvY2FsZVNvcnRlZCwgZm9ybWF0LCBpbmRleCwgZmllbGQpIHtcbiAgICBpZiAodHlwZW9mIGxvY2FsZVNvcnRlZCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIGlmIChpc051bWJlcihmb3JtYXQpKSB7XG4gICAgICAgICAgICBpbmRleCA9IGZvcm1hdDtcbiAgICAgICAgICAgIGZvcm1hdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcm1hdCA9IGZvcm1hdCB8fCAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgICBmb3JtYXQgPSBsb2NhbGVTb3J0ZWQ7XG4gICAgICAgIGluZGV4ID0gZm9ybWF0O1xuICAgICAgICBsb2NhbGVTb3J0ZWQgPSBmYWxzZTtcblxuICAgICAgICBpZiAoaXNOdW1iZXIoZm9ybWF0KSkge1xuICAgICAgICAgICAgaW5kZXggPSBmb3JtYXQ7XG4gICAgICAgICAgICBmb3JtYXQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBmb3JtYXQgPSBmb3JtYXQgfHwgJyc7XG4gICAgfVxuXG4gICAgdmFyIGxvY2FsZSA9IGdldExvY2FsZSgpLFxuICAgICAgICBzaGlmdCA9IGxvY2FsZVNvcnRlZCA/IGxvY2FsZS5fd2Vlay5kb3cgOiAwO1xuXG4gICAgaWYgKGluZGV4ICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGdldCQxKGZvcm1hdCwgKGluZGV4ICsgc2hpZnQpICUgNywgZmllbGQsICdkYXknKTtcbiAgICB9XG5cbiAgICB2YXIgaTtcbiAgICB2YXIgb3V0ID0gW107XG4gICAgZm9yIChpID0gMDsgaSA8IDc7IGkrKykge1xuICAgICAgICBvdXRbaV0gPSBnZXQkMShmb3JtYXQsIChpICsgc2hpZnQpICUgNywgZmllbGQsICdkYXknKTtcbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbn1cblxuZnVuY3Rpb24gbGlzdE1vbnRocyAoZm9ybWF0LCBpbmRleCkge1xuICAgIHJldHVybiBsaXN0TW9udGhzSW1wbChmb3JtYXQsIGluZGV4LCAnbW9udGhzJyk7XG59XG5cbmZ1bmN0aW9uIGxpc3RNb250aHNTaG9ydCAoZm9ybWF0LCBpbmRleCkge1xuICAgIHJldHVybiBsaXN0TW9udGhzSW1wbChmb3JtYXQsIGluZGV4LCAnbW9udGhzU2hvcnQnKTtcbn1cblxuZnVuY3Rpb24gbGlzdFdlZWtkYXlzIChsb2NhbGVTb3J0ZWQsIGZvcm1hdCwgaW5kZXgpIHtcbiAgICByZXR1cm4gbGlzdFdlZWtkYXlzSW1wbChsb2NhbGVTb3J0ZWQsIGZvcm1hdCwgaW5kZXgsICd3ZWVrZGF5cycpO1xufVxuXG5mdW5jdGlvbiBsaXN0V2Vla2RheXNTaG9ydCAobG9jYWxlU29ydGVkLCBmb3JtYXQsIGluZGV4KSB7XG4gICAgcmV0dXJuIGxpc3RXZWVrZGF5c0ltcGwobG9jYWxlU29ydGVkLCBmb3JtYXQsIGluZGV4LCAnd2Vla2RheXNTaG9ydCcpO1xufVxuXG5mdW5jdGlvbiBsaXN0V2Vla2RheXNNaW4gKGxvY2FsZVNvcnRlZCwgZm9ybWF0LCBpbmRleCkge1xuICAgIHJldHVybiBsaXN0V2Vla2RheXNJbXBsKGxvY2FsZVNvcnRlZCwgZm9ybWF0LCBpbmRleCwgJ3dlZWtkYXlzTWluJyk7XG59XG5cbmdldFNldEdsb2JhbExvY2FsZSgnZW4nLCB7XG4gICAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KHRofHN0fG5kfHJkKS8sXG4gICAgb3JkaW5hbCA6IGZ1bmN0aW9uIChudW1iZXIpIHtcbiAgICAgICAgdmFyIGIgPSBudW1iZXIgJSAxMCxcbiAgICAgICAgICAgIG91dHB1dCA9ICh0b0ludChudW1iZXIgJSAxMDAgLyAxMCkgPT09IDEpID8gJ3RoJyA6XG4gICAgICAgICAgICAoYiA9PT0gMSkgPyAnc3QnIDpcbiAgICAgICAgICAgIChiID09PSAyKSA/ICduZCcgOlxuICAgICAgICAgICAgKGIgPT09IDMpID8gJ3JkJyA6ICd0aCc7XG4gICAgICAgIHJldHVybiBudW1iZXIgKyBvdXRwdXQ7XG4gICAgfVxufSk7XG5cbi8vIFNpZGUgZWZmZWN0IGltcG9ydHNcbmhvb2tzLmxhbmcgPSBkZXByZWNhdGUoJ21vbWVudC5sYW5nIGlzIGRlcHJlY2F0ZWQuIFVzZSBtb21lbnQubG9jYWxlIGluc3RlYWQuJywgZ2V0U2V0R2xvYmFsTG9jYWxlKTtcbmhvb2tzLmxhbmdEYXRhID0gZGVwcmVjYXRlKCdtb21lbnQubGFuZ0RhdGEgaXMgZGVwcmVjYXRlZC4gVXNlIG1vbWVudC5sb2NhbGVEYXRhIGluc3RlYWQuJywgZ2V0TG9jYWxlKTtcblxudmFyIG1hdGhBYnMgPSBNYXRoLmFicztcblxuZnVuY3Rpb24gYWJzICgpIHtcbiAgICB2YXIgZGF0YSAgICAgICAgICAgPSB0aGlzLl9kYXRhO1xuXG4gICAgdGhpcy5fbWlsbGlzZWNvbmRzID0gbWF0aEFicyh0aGlzLl9taWxsaXNlY29uZHMpO1xuICAgIHRoaXMuX2RheXMgICAgICAgICA9IG1hdGhBYnModGhpcy5fZGF5cyk7XG4gICAgdGhpcy5fbW9udGhzICAgICAgID0gbWF0aEFicyh0aGlzLl9tb250aHMpO1xuXG4gICAgZGF0YS5taWxsaXNlY29uZHMgID0gbWF0aEFicyhkYXRhLm1pbGxpc2Vjb25kcyk7XG4gICAgZGF0YS5zZWNvbmRzICAgICAgID0gbWF0aEFicyhkYXRhLnNlY29uZHMpO1xuICAgIGRhdGEubWludXRlcyAgICAgICA9IG1hdGhBYnMoZGF0YS5taW51dGVzKTtcbiAgICBkYXRhLmhvdXJzICAgICAgICAgPSBtYXRoQWJzKGRhdGEuaG91cnMpO1xuICAgIGRhdGEubW9udGhzICAgICAgICA9IG1hdGhBYnMoZGF0YS5tb250aHMpO1xuICAgIGRhdGEueWVhcnMgICAgICAgICA9IG1hdGhBYnMoZGF0YS55ZWFycyk7XG5cbiAgICByZXR1cm4gdGhpcztcbn1cblxuZnVuY3Rpb24gYWRkU3VidHJhY3QkMSAoZHVyYXRpb24sIGlucHV0LCB2YWx1ZSwgZGlyZWN0aW9uKSB7XG4gICAgdmFyIG90aGVyID0gY3JlYXRlRHVyYXRpb24oaW5wdXQsIHZhbHVlKTtcblxuICAgIGR1cmF0aW9uLl9taWxsaXNlY29uZHMgKz0gZGlyZWN0aW9uICogb3RoZXIuX21pbGxpc2Vjb25kcztcbiAgICBkdXJhdGlvbi5fZGF5cyAgICAgICAgICs9IGRpcmVjdGlvbiAqIG90aGVyLl9kYXlzO1xuICAgIGR1cmF0aW9uLl9tb250aHMgICAgICAgKz0gZGlyZWN0aW9uICogb3RoZXIuX21vbnRocztcblxuICAgIHJldHVybiBkdXJhdGlvbi5fYnViYmxlKCk7XG59XG5cbi8vIHN1cHBvcnRzIG9ubHkgMi4wLXN0eWxlIGFkZCgxLCAncycpIG9yIGFkZChkdXJhdGlvbilcbmZ1bmN0aW9uIGFkZCQxIChpbnB1dCwgdmFsdWUpIHtcbiAgICByZXR1cm4gYWRkU3VidHJhY3QkMSh0aGlzLCBpbnB1dCwgdmFsdWUsIDEpO1xufVxuXG4vLyBzdXBwb3J0cyBvbmx5IDIuMC1zdHlsZSBzdWJ0cmFjdCgxLCAncycpIG9yIHN1YnRyYWN0KGR1cmF0aW9uKVxuZnVuY3Rpb24gc3VidHJhY3QkMSAoaW5wdXQsIHZhbHVlKSB7XG4gICAgcmV0dXJuIGFkZFN1YnRyYWN0JDEodGhpcywgaW5wdXQsIHZhbHVlLCAtMSk7XG59XG5cbmZ1bmN0aW9uIGFic0NlaWwgKG51bWJlcikge1xuICAgIGlmIChudW1iZXIgPCAwKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKG51bWJlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIE1hdGguY2VpbChudW1iZXIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYnViYmxlICgpIHtcbiAgICB2YXIgbWlsbGlzZWNvbmRzID0gdGhpcy5fbWlsbGlzZWNvbmRzO1xuICAgIHZhciBkYXlzICAgICAgICAgPSB0aGlzLl9kYXlzO1xuICAgIHZhciBtb250aHMgICAgICAgPSB0aGlzLl9tb250aHM7XG4gICAgdmFyIGRhdGEgICAgICAgICA9IHRoaXMuX2RhdGE7XG4gICAgdmFyIHNlY29uZHMsIG1pbnV0ZXMsIGhvdXJzLCB5ZWFycywgbW9udGhzRnJvbURheXM7XG5cbiAgICAvLyBpZiB3ZSBoYXZlIGEgbWl4IG9mIHBvc2l0aXZlIGFuZCBuZWdhdGl2ZSB2YWx1ZXMsIGJ1YmJsZSBkb3duIGZpcnN0XG4gICAgLy8gY2hlY2s6IGh0dHBzOi8vZ2l0aHViLmNvbS9tb21lbnQvbW9tZW50L2lzc3Vlcy8yMTY2XG4gICAgaWYgKCEoKG1pbGxpc2Vjb25kcyA+PSAwICYmIGRheXMgPj0gMCAmJiBtb250aHMgPj0gMCkgfHxcbiAgICAgICAgICAgIChtaWxsaXNlY29uZHMgPD0gMCAmJiBkYXlzIDw9IDAgJiYgbW9udGhzIDw9IDApKSkge1xuICAgICAgICBtaWxsaXNlY29uZHMgKz0gYWJzQ2VpbChtb250aHNUb0RheXMobW9udGhzKSArIGRheXMpICogODY0ZTU7XG4gICAgICAgIGRheXMgPSAwO1xuICAgICAgICBtb250aHMgPSAwO1xuICAgIH1cblxuICAgIC8vIFRoZSBmb2xsb3dpbmcgY29kZSBidWJibGVzIHVwIHZhbHVlcywgc2VlIHRoZSB0ZXN0cyBmb3JcbiAgICAvLyBleGFtcGxlcyBvZiB3aGF0IHRoYXQgbWVhbnMuXG4gICAgZGF0YS5taWxsaXNlY29uZHMgPSBtaWxsaXNlY29uZHMgJSAxMDAwO1xuXG4gICAgc2Vjb25kcyAgICAgICAgICAgPSBhYnNGbG9vcihtaWxsaXNlY29uZHMgLyAxMDAwKTtcbiAgICBkYXRhLnNlY29uZHMgICAgICA9IHNlY29uZHMgJSA2MDtcblxuICAgIG1pbnV0ZXMgICAgICAgICAgID0gYWJzRmxvb3Ioc2Vjb25kcyAvIDYwKTtcbiAgICBkYXRhLm1pbnV0ZXMgICAgICA9IG1pbnV0ZXMgJSA2MDtcblxuICAgIGhvdXJzICAgICAgICAgICAgID0gYWJzRmxvb3IobWludXRlcyAvIDYwKTtcbiAgICBkYXRhLmhvdXJzICAgICAgICA9IGhvdXJzICUgMjQ7XG5cbiAgICBkYXlzICs9IGFic0Zsb29yKGhvdXJzIC8gMjQpO1xuXG4gICAgLy8gY29udmVydCBkYXlzIHRvIG1vbnRoc1xuICAgIG1vbnRoc0Zyb21EYXlzID0gYWJzRmxvb3IoZGF5c1RvTW9udGhzKGRheXMpKTtcbiAgICBtb250aHMgKz0gbW9udGhzRnJvbURheXM7XG4gICAgZGF5cyAtPSBhYnNDZWlsKG1vbnRoc1RvRGF5cyhtb250aHNGcm9tRGF5cykpO1xuXG4gICAgLy8gMTIgbW9udGhzIC0+IDEgeWVhclxuICAgIHllYXJzID0gYWJzRmxvb3IobW9udGhzIC8gMTIpO1xuICAgIG1vbnRocyAlPSAxMjtcblxuICAgIGRhdGEuZGF5cyAgID0gZGF5cztcbiAgICBkYXRhLm1vbnRocyA9IG1vbnRocztcbiAgICBkYXRhLnllYXJzICA9IHllYXJzO1xuXG4gICAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIGRheXNUb01vbnRocyAoZGF5cykge1xuICAgIC8vIDQwMCB5ZWFycyBoYXZlIDE0NjA5NyBkYXlzICh0YWtpbmcgaW50byBhY2NvdW50IGxlYXAgeWVhciBydWxlcylcbiAgICAvLyA0MDAgeWVhcnMgaGF2ZSAxMiBtb250aHMgPT09IDQ4MDBcbiAgICByZXR1cm4gZGF5cyAqIDQ4MDAgLyAxNDYwOTc7XG59XG5cbmZ1bmN0aW9uIG1vbnRoc1RvRGF5cyAobW9udGhzKSB7XG4gICAgLy8gdGhlIHJldmVyc2Ugb2YgZGF5c1RvTW9udGhzXG4gICAgcmV0dXJuIG1vbnRocyAqIDE0NjA5NyAvIDQ4MDA7XG59XG5cbmZ1bmN0aW9uIGFzICh1bml0cykge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICAgICAgcmV0dXJuIE5hTjtcbiAgICB9XG4gICAgdmFyIGRheXM7XG4gICAgdmFyIG1vbnRocztcbiAgICB2YXIgbWlsbGlzZWNvbmRzID0gdGhpcy5fbWlsbGlzZWNvbmRzO1xuXG4gICAgdW5pdHMgPSBub3JtYWxpemVVbml0cyh1bml0cyk7XG5cbiAgICBpZiAodW5pdHMgPT09ICdtb250aCcgfHwgdW5pdHMgPT09ICd5ZWFyJykge1xuICAgICAgICBkYXlzICAgPSB0aGlzLl9kYXlzICAgKyBtaWxsaXNlY29uZHMgLyA4NjRlNTtcbiAgICAgICAgbW9udGhzID0gdGhpcy5fbW9udGhzICsgZGF5c1RvTW9udGhzKGRheXMpO1xuICAgICAgICByZXR1cm4gdW5pdHMgPT09ICdtb250aCcgPyBtb250aHMgOiBtb250aHMgLyAxMjtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBoYW5kbGUgbWlsbGlzZWNvbmRzIHNlcGFyYXRlbHkgYmVjYXVzZSBvZiBmbG9hdGluZyBwb2ludCBtYXRoIGVycm9ycyAoaXNzdWUgIzE4NjcpXG4gICAgICAgIGRheXMgPSB0aGlzLl9kYXlzICsgTWF0aC5yb3VuZChtb250aHNUb0RheXModGhpcy5fbW9udGhzKSk7XG4gICAgICAgIHN3aXRjaCAodW5pdHMpIHtcbiAgICAgICAgICAgIGNhc2UgJ3dlZWsnICAgOiByZXR1cm4gZGF5cyAvIDcgICAgICsgbWlsbGlzZWNvbmRzIC8gNjA0OGU1O1xuICAgICAgICAgICAgY2FzZSAnZGF5JyAgICA6IHJldHVybiBkYXlzICAgICAgICAgKyBtaWxsaXNlY29uZHMgLyA4NjRlNTtcbiAgICAgICAgICAgIGNhc2UgJ2hvdXInICAgOiByZXR1cm4gZGF5cyAqIDI0ICAgICsgbWlsbGlzZWNvbmRzIC8gMzZlNTtcbiAgICAgICAgICAgIGNhc2UgJ21pbnV0ZScgOiByZXR1cm4gZGF5cyAqIDE0NDAgICsgbWlsbGlzZWNvbmRzIC8gNmU0O1xuICAgICAgICAgICAgY2FzZSAnc2Vjb25kJyA6IHJldHVybiBkYXlzICogODY0MDAgKyBtaWxsaXNlY29uZHMgLyAxMDAwO1xuICAgICAgICAgICAgLy8gTWF0aC5mbG9vciBwcmV2ZW50cyBmbG9hdGluZyBwb2ludCBtYXRoIGVycm9ycyBoZXJlXG4gICAgICAgICAgICBjYXNlICdtaWxsaXNlY29uZCc6IHJldHVybiBNYXRoLmZsb29yKGRheXMgKiA4NjRlNSkgKyBtaWxsaXNlY29uZHM7XG4gICAgICAgICAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gdW5pdCAnICsgdW5pdHMpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBUT0RPOiBVc2UgdGhpcy5hcygnbXMnKT9cbmZ1bmN0aW9uIHZhbHVlT2YkMSAoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQoKSkge1xuICAgICAgICByZXR1cm4gTmFOO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLl9taWxsaXNlY29uZHMgK1xuICAgICAgICB0aGlzLl9kYXlzICogODY0ZTUgK1xuICAgICAgICAodGhpcy5fbW9udGhzICUgMTIpICogMjU5MmU2ICtcbiAgICAgICAgdG9JbnQodGhpcy5fbW9udGhzIC8gMTIpICogMzE1MzZlNlxuICAgICk7XG59XG5cbmZ1bmN0aW9uIG1ha2VBcyAoYWxpYXMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcyhhbGlhcyk7XG4gICAgfTtcbn1cblxudmFyIGFzTWlsbGlzZWNvbmRzID0gbWFrZUFzKCdtcycpO1xudmFyIGFzU2Vjb25kcyAgICAgID0gbWFrZUFzKCdzJyk7XG52YXIgYXNNaW51dGVzICAgICAgPSBtYWtlQXMoJ20nKTtcbnZhciBhc0hvdXJzICAgICAgICA9IG1ha2VBcygnaCcpO1xudmFyIGFzRGF5cyAgICAgICAgID0gbWFrZUFzKCdkJyk7XG52YXIgYXNXZWVrcyAgICAgICAgPSBtYWtlQXMoJ3cnKTtcbnZhciBhc01vbnRocyAgICAgICA9IG1ha2VBcygnTScpO1xudmFyIGFzWWVhcnMgICAgICAgID0gbWFrZUFzKCd5Jyk7XG5cbmZ1bmN0aW9uIGdldCQyICh1bml0cykge1xuICAgIHVuaXRzID0gbm9ybWFsaXplVW5pdHModW5pdHMpO1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQoKSA/IHRoaXNbdW5pdHMgKyAncyddKCkgOiBOYU47XG59XG5cbmZ1bmN0aW9uIG1ha2VHZXR0ZXIobmFtZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQoKSA/IHRoaXMuX2RhdGFbbmFtZV0gOiBOYU47XG4gICAgfTtcbn1cblxudmFyIG1pbGxpc2Vjb25kcyA9IG1ha2VHZXR0ZXIoJ21pbGxpc2Vjb25kcycpO1xudmFyIHNlY29uZHMgICAgICA9IG1ha2VHZXR0ZXIoJ3NlY29uZHMnKTtcbnZhciBtaW51dGVzICAgICAgPSBtYWtlR2V0dGVyKCdtaW51dGVzJyk7XG52YXIgaG91cnMgICAgICAgID0gbWFrZUdldHRlcignaG91cnMnKTtcbnZhciBkYXlzICAgICAgICAgPSBtYWtlR2V0dGVyKCdkYXlzJyk7XG52YXIgbW9udGhzICAgICAgID0gbWFrZUdldHRlcignbW9udGhzJyk7XG52YXIgeWVhcnMgICAgICAgID0gbWFrZUdldHRlcigneWVhcnMnKTtcblxuZnVuY3Rpb24gd2Vla3MgKCkge1xuICAgIHJldHVybiBhYnNGbG9vcih0aGlzLmRheXMoKSAvIDcpO1xufVxuXG52YXIgcm91bmQgPSBNYXRoLnJvdW5kO1xudmFyIHRocmVzaG9sZHMgPSB7XG4gICAgc3M6IDQ0LCAgICAgICAgIC8vIGEgZmV3IHNlY29uZHMgdG8gc2Vjb25kc1xuICAgIHMgOiA0NSwgICAgICAgICAvLyBzZWNvbmRzIHRvIG1pbnV0ZVxuICAgIG0gOiA0NSwgICAgICAgICAvLyBtaW51dGVzIHRvIGhvdXJcbiAgICBoIDogMjIsICAgICAgICAgLy8gaG91cnMgdG8gZGF5XG4gICAgZCA6IDI2LCAgICAgICAgIC8vIGRheXMgdG8gbW9udGhcbiAgICBNIDogMTEgICAgICAgICAgLy8gbW9udGhzIHRvIHllYXJcbn07XG5cbi8vIGhlbHBlciBmdW5jdGlvbiBmb3IgbW9tZW50LmZuLmZyb20sIG1vbWVudC5mbi5mcm9tTm93LCBhbmQgbW9tZW50LmR1cmF0aW9uLmZuLmh1bWFuaXplXG5mdW5jdGlvbiBzdWJzdGl0dXRlVGltZUFnbyhzdHJpbmcsIG51bWJlciwgd2l0aG91dFN1ZmZpeCwgaXNGdXR1cmUsIGxvY2FsZSkge1xuICAgIHJldHVybiBsb2NhbGUucmVsYXRpdmVUaW1lKG51bWJlciB8fCAxLCAhIXdpdGhvdXRTdWZmaXgsIHN0cmluZywgaXNGdXR1cmUpO1xufVxuXG5mdW5jdGlvbiByZWxhdGl2ZVRpbWUkMSAocG9zTmVnRHVyYXRpb24sIHdpdGhvdXRTdWZmaXgsIGxvY2FsZSkge1xuICAgIHZhciBkdXJhdGlvbiA9IGNyZWF0ZUR1cmF0aW9uKHBvc05lZ0R1cmF0aW9uKS5hYnMoKTtcbiAgICB2YXIgc2Vjb25kcyAgPSByb3VuZChkdXJhdGlvbi5hcygncycpKTtcbiAgICB2YXIgbWludXRlcyAgPSByb3VuZChkdXJhdGlvbi5hcygnbScpKTtcbiAgICB2YXIgaG91cnMgICAgPSByb3VuZChkdXJhdGlvbi5hcygnaCcpKTtcbiAgICB2YXIgZGF5cyAgICAgPSByb3VuZChkdXJhdGlvbi5hcygnZCcpKTtcbiAgICB2YXIgbW9udGhzICAgPSByb3VuZChkdXJhdGlvbi5hcygnTScpKTtcbiAgICB2YXIgeWVhcnMgICAgPSByb3VuZChkdXJhdGlvbi5hcygneScpKTtcblxuICAgIHZhciBhID0gc2Vjb25kcyA8PSB0aHJlc2hvbGRzLnNzICYmIFsncycsIHNlY29uZHNdICB8fFxuICAgICAgICAgICAgc2Vjb25kcyA8IHRocmVzaG9sZHMucyAgICYmIFsnc3MnLCBzZWNvbmRzXSB8fFxuICAgICAgICAgICAgbWludXRlcyA8PSAxICAgICAgICAgICAgICYmIFsnbSddICAgICAgICAgICB8fFxuICAgICAgICAgICAgbWludXRlcyA8IHRocmVzaG9sZHMubSAgICYmIFsnbW0nLCBtaW51dGVzXSB8fFxuICAgICAgICAgICAgaG91cnMgICA8PSAxICAgICAgICAgICAgICYmIFsnaCddICAgICAgICAgICB8fFxuICAgICAgICAgICAgaG91cnMgICA8IHRocmVzaG9sZHMuaCAgICYmIFsnaGgnLCBob3Vyc10gICB8fFxuICAgICAgICAgICAgZGF5cyAgICA8PSAxICAgICAgICAgICAgICYmIFsnZCddICAgICAgICAgICB8fFxuICAgICAgICAgICAgZGF5cyAgICA8IHRocmVzaG9sZHMuZCAgICYmIFsnZGQnLCBkYXlzXSAgICB8fFxuICAgICAgICAgICAgbW9udGhzICA8PSAxICAgICAgICAgICAgICYmIFsnTSddICAgICAgICAgICB8fFxuICAgICAgICAgICAgbW9udGhzICA8IHRocmVzaG9sZHMuTSAgICYmIFsnTU0nLCBtb250aHNdICB8fFxuICAgICAgICAgICAgeWVhcnMgICA8PSAxICAgICAgICAgICAgICYmIFsneSddICAgICAgICAgICB8fCBbJ3l5JywgeWVhcnNdO1xuXG4gICAgYVsyXSA9IHdpdGhvdXRTdWZmaXg7XG4gICAgYVszXSA9ICtwb3NOZWdEdXJhdGlvbiA+IDA7XG4gICAgYVs0XSA9IGxvY2FsZTtcbiAgICByZXR1cm4gc3Vic3RpdHV0ZVRpbWVBZ28uYXBwbHkobnVsbCwgYSk7XG59XG5cbi8vIFRoaXMgZnVuY3Rpb24gYWxsb3dzIHlvdSB0byBzZXQgdGhlIHJvdW5kaW5nIGZ1bmN0aW9uIGZvciByZWxhdGl2ZSB0aW1lIHN0cmluZ3NcbmZ1bmN0aW9uIGdldFNldFJlbGF0aXZlVGltZVJvdW5kaW5nIChyb3VuZGluZ0Z1bmN0aW9uKSB7XG4gICAgaWYgKHJvdW5kaW5nRnVuY3Rpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gcm91bmQ7XG4gICAgfVxuICAgIGlmICh0eXBlb2Yocm91bmRpbmdGdW5jdGlvbikgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcm91bmQgPSByb3VuZGluZ0Z1bmN0aW9uO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vLyBUaGlzIGZ1bmN0aW9uIGFsbG93cyB5b3UgdG8gc2V0IGEgdGhyZXNob2xkIGZvciByZWxhdGl2ZSB0aW1lIHN0cmluZ3NcbmZ1bmN0aW9uIGdldFNldFJlbGF0aXZlVGltZVRocmVzaG9sZCAodGhyZXNob2xkLCBsaW1pdCkge1xuICAgIGlmICh0aHJlc2hvbGRzW3RocmVzaG9sZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChsaW1pdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0aHJlc2hvbGRzW3RocmVzaG9sZF07XG4gICAgfVxuICAgIHRocmVzaG9sZHNbdGhyZXNob2xkXSA9IGxpbWl0O1xuICAgIGlmICh0aHJlc2hvbGQgPT09ICdzJykge1xuICAgICAgICB0aHJlc2hvbGRzLnNzID0gbGltaXQgLSAxO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaHVtYW5pemUgKHdpdGhTdWZmaXgpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS5pbnZhbGlkRGF0ZSgpO1xuICAgIH1cblxuICAgIHZhciBsb2NhbGUgPSB0aGlzLmxvY2FsZURhdGEoKTtcbiAgICB2YXIgb3V0cHV0ID0gcmVsYXRpdmVUaW1lJDEodGhpcywgIXdpdGhTdWZmaXgsIGxvY2FsZSk7XG5cbiAgICBpZiAod2l0aFN1ZmZpeCkge1xuICAgICAgICBvdXRwdXQgPSBsb2NhbGUucGFzdEZ1dHVyZSgrdGhpcywgb3V0cHV0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbG9jYWxlLnBvc3Rmb3JtYXQob3V0cHV0KTtcbn1cblxudmFyIGFicyQxID0gTWF0aC5hYnM7XG5cbmZ1bmN0aW9uIHRvSVNPU3RyaW5nJDEoKSB7XG4gICAgLy8gZm9yIElTTyBzdHJpbmdzIHdlIGRvIG5vdCB1c2UgdGhlIG5vcm1hbCBidWJibGluZyBydWxlczpcbiAgICAvLyAgKiBtaWxsaXNlY29uZHMgYnViYmxlIHVwIHVudGlsIHRoZXkgYmVjb21lIGhvdXJzXG4gICAgLy8gICogZGF5cyBkbyBub3QgYnViYmxlIGF0IGFsbFxuICAgIC8vICAqIG1vbnRocyBidWJibGUgdXAgdW50aWwgdGhleSBiZWNvbWUgeWVhcnNcbiAgICAvLyBUaGlzIGlzIGJlY2F1c2UgdGhlcmUgaXMgbm8gY29udGV4dC1mcmVlIGNvbnZlcnNpb24gYmV0d2VlbiBob3VycyBhbmQgZGF5c1xuICAgIC8vICh0aGluayBvZiBjbG9jayBjaGFuZ2VzKVxuICAgIC8vIGFuZCBhbHNvIG5vdCBiZXR3ZWVuIGRheXMgYW5kIG1vbnRocyAoMjgtMzEgZGF5cyBwZXIgbW9udGgpXG4gICAgaWYgKCF0aGlzLmlzVmFsaWQoKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKTtcbiAgICB9XG5cbiAgICB2YXIgc2Vjb25kcyA9IGFicyQxKHRoaXMuX21pbGxpc2Vjb25kcykgLyAxMDAwO1xuICAgIHZhciBkYXlzICAgICAgICAgPSBhYnMkMSh0aGlzLl9kYXlzKTtcbiAgICB2YXIgbW9udGhzICAgICAgID0gYWJzJDEodGhpcy5fbW9udGhzKTtcbiAgICB2YXIgbWludXRlcywgaG91cnMsIHllYXJzO1xuXG4gICAgLy8gMzYwMCBzZWNvbmRzIC0+IDYwIG1pbnV0ZXMgLT4gMSBob3VyXG4gICAgbWludXRlcyAgICAgICAgICAgPSBhYnNGbG9vcihzZWNvbmRzIC8gNjApO1xuICAgIGhvdXJzICAgICAgICAgICAgID0gYWJzRmxvb3IobWludXRlcyAvIDYwKTtcbiAgICBzZWNvbmRzICU9IDYwO1xuICAgIG1pbnV0ZXMgJT0gNjA7XG5cbiAgICAvLyAxMiBtb250aHMgLT4gMSB5ZWFyXG4gICAgeWVhcnMgID0gYWJzRmxvb3IobW9udGhzIC8gMTIpO1xuICAgIG1vbnRocyAlPSAxMjtcblxuXG4gICAgLy8gaW5zcGlyZWQgYnkgaHR0cHM6Ly9naXRodWIuY29tL2RvcmRpbGxlL21vbWVudC1pc29kdXJhdGlvbi9ibG9iL21hc3Rlci9tb21lbnQuaXNvZHVyYXRpb24uanNcbiAgICB2YXIgWSA9IHllYXJzO1xuICAgIHZhciBNID0gbW9udGhzO1xuICAgIHZhciBEID0gZGF5cztcbiAgICB2YXIgaCA9IGhvdXJzO1xuICAgIHZhciBtID0gbWludXRlcztcbiAgICB2YXIgcyA9IHNlY29uZHM7XG4gICAgdmFyIHRvdGFsID0gdGhpcy5hc1NlY29uZHMoKTtcblxuICAgIGlmICghdG90YWwpIHtcbiAgICAgICAgLy8gdGhpcyBpcyB0aGUgc2FtZSBhcyBDIydzIChOb2RhKSBhbmQgcHl0aG9uIChpc29kYXRlKS4uLlxuICAgICAgICAvLyBidXQgbm90IG90aGVyIEpTIChnb29nLmRhdGUpXG4gICAgICAgIHJldHVybiAnUDBEJztcbiAgICB9XG5cbiAgICByZXR1cm4gKHRvdGFsIDwgMCA/ICctJyA6ICcnKSArXG4gICAgICAgICdQJyArXG4gICAgICAgIChZID8gWSArICdZJyA6ICcnKSArXG4gICAgICAgIChNID8gTSArICdNJyA6ICcnKSArXG4gICAgICAgIChEID8gRCArICdEJyA6ICcnKSArXG4gICAgICAgICgoaCB8fCBtIHx8IHMpID8gJ1QnIDogJycpICtcbiAgICAgICAgKGggPyBoICsgJ0gnIDogJycpICtcbiAgICAgICAgKG0gPyBtICsgJ00nIDogJycpICtcbiAgICAgICAgKHMgPyBzICsgJ1MnIDogJycpO1xufVxuXG52YXIgcHJvdG8kMiA9IER1cmF0aW9uLnByb3RvdHlwZTtcblxucHJvdG8kMi5pc1ZhbGlkICAgICAgICA9IGlzVmFsaWQkMTtcbnByb3RvJDIuYWJzICAgICAgICAgICAgPSBhYnM7XG5wcm90byQyLmFkZCAgICAgICAgICAgID0gYWRkJDE7XG5wcm90byQyLnN1YnRyYWN0ICAgICAgID0gc3VidHJhY3QkMTtcbnByb3RvJDIuYXMgICAgICAgICAgICAgPSBhcztcbnByb3RvJDIuYXNNaWxsaXNlY29uZHMgPSBhc01pbGxpc2Vjb25kcztcbnByb3RvJDIuYXNTZWNvbmRzICAgICAgPSBhc1NlY29uZHM7XG5wcm90byQyLmFzTWludXRlcyAgICAgID0gYXNNaW51dGVzO1xucHJvdG8kMi5hc0hvdXJzICAgICAgICA9IGFzSG91cnM7XG5wcm90byQyLmFzRGF5cyAgICAgICAgID0gYXNEYXlzO1xucHJvdG8kMi5hc1dlZWtzICAgICAgICA9IGFzV2Vla3M7XG5wcm90byQyLmFzTW9udGhzICAgICAgID0gYXNNb250aHM7XG5wcm90byQyLmFzWWVhcnMgICAgICAgID0gYXNZZWFycztcbnByb3RvJDIudmFsdWVPZiAgICAgICAgPSB2YWx1ZU9mJDE7XG5wcm90byQyLl9idWJibGUgICAgICAgID0gYnViYmxlO1xucHJvdG8kMi5nZXQgICAgICAgICAgICA9IGdldCQyO1xucHJvdG8kMi5taWxsaXNlY29uZHMgICA9IG1pbGxpc2Vjb25kcztcbnByb3RvJDIuc2Vjb25kcyAgICAgICAgPSBzZWNvbmRzO1xucHJvdG8kMi5taW51dGVzICAgICAgICA9IG1pbnV0ZXM7XG5wcm90byQyLmhvdXJzICAgICAgICAgID0gaG91cnM7XG5wcm90byQyLmRheXMgICAgICAgICAgID0gZGF5cztcbnByb3RvJDIud2Vla3MgICAgICAgICAgPSB3ZWVrcztcbnByb3RvJDIubW9udGhzICAgICAgICAgPSBtb250aHM7XG5wcm90byQyLnllYXJzICAgICAgICAgID0geWVhcnM7XG5wcm90byQyLmh1bWFuaXplICAgICAgID0gaHVtYW5pemU7XG5wcm90byQyLnRvSVNPU3RyaW5nICAgID0gdG9JU09TdHJpbmckMTtcbnByb3RvJDIudG9TdHJpbmcgICAgICAgPSB0b0lTT1N0cmluZyQxO1xucHJvdG8kMi50b0pTT04gICAgICAgICA9IHRvSVNPU3RyaW5nJDE7XG5wcm90byQyLmxvY2FsZSAgICAgICAgID0gbG9jYWxlO1xucHJvdG8kMi5sb2NhbGVEYXRhICAgICA9IGxvY2FsZURhdGE7XG5cbi8vIERlcHJlY2F0aW9uc1xucHJvdG8kMi50b0lzb1N0cmluZyA9IGRlcHJlY2F0ZSgndG9Jc29TdHJpbmcoKSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIHRvSVNPU3RyaW5nKCkgaW5zdGVhZCAobm90aWNlIHRoZSBjYXBpdGFscyknLCB0b0lTT1N0cmluZyQxKTtcbnByb3RvJDIubGFuZyA9IGxhbmc7XG5cbi8vIFNpZGUgZWZmZWN0IGltcG9ydHNcblxuLy8gRk9STUFUVElOR1xuXG5hZGRGb3JtYXRUb2tlbignWCcsIDAsIDAsICd1bml4Jyk7XG5hZGRGb3JtYXRUb2tlbigneCcsIDAsIDAsICd2YWx1ZU9mJyk7XG5cbi8vIFBBUlNJTkdcblxuYWRkUmVnZXhUb2tlbigneCcsIG1hdGNoU2lnbmVkKTtcbmFkZFJlZ2V4VG9rZW4oJ1gnLCBtYXRjaFRpbWVzdGFtcCk7XG5hZGRQYXJzZVRva2VuKCdYJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gICAgY29uZmlnLl9kID0gbmV3IERhdGUocGFyc2VGbG9hdChpbnB1dCwgMTApICogMTAwMCk7XG59KTtcbmFkZFBhcnNlVG9rZW4oJ3gnLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgICBjb25maWcuX2QgPSBuZXcgRGF0ZSh0b0ludChpbnB1dCkpO1xufSk7XG5cbi8vIFNpZGUgZWZmZWN0IGltcG9ydHNcblxuXG5ob29rcy52ZXJzaW9uID0gJzIuMTguMSc7XG5cbnNldEhvb2tDYWxsYmFjayhjcmVhdGVMb2NhbCk7XG5cbmhvb2tzLmZuICAgICAgICAgICAgICAgICAgICA9IHByb3RvO1xuaG9va3MubWluICAgICAgICAgICAgICAgICAgID0gbWluO1xuaG9va3MubWF4ICAgICAgICAgICAgICAgICAgID0gbWF4O1xuaG9va3Mubm93ICAgICAgICAgICAgICAgICAgID0gbm93O1xuaG9va3MudXRjICAgICAgICAgICAgICAgICAgID0gY3JlYXRlVVRDO1xuaG9va3MudW5peCAgICAgICAgICAgICAgICAgID0gY3JlYXRlVW5peDtcbmhvb2tzLm1vbnRocyAgICAgICAgICAgICAgICA9IGxpc3RNb250aHM7XG5ob29rcy5pc0RhdGUgICAgICAgICAgICAgICAgPSBpc0RhdGU7XG5ob29rcy5sb2NhbGUgICAgICAgICAgICAgICAgPSBnZXRTZXRHbG9iYWxMb2NhbGU7XG5ob29rcy5pbnZhbGlkICAgICAgICAgICAgICAgPSBjcmVhdGVJbnZhbGlkO1xuaG9va3MuZHVyYXRpb24gICAgICAgICAgICAgID0gY3JlYXRlRHVyYXRpb247XG5ob29rcy5pc01vbWVudCAgICAgICAgICAgICAgPSBpc01vbWVudDtcbmhvb2tzLndlZWtkYXlzICAgICAgICAgICAgICA9IGxpc3RXZWVrZGF5cztcbmhvb2tzLnBhcnNlWm9uZSAgICAgICAgICAgICA9IGNyZWF0ZUluWm9uZTtcbmhvb2tzLmxvY2FsZURhdGEgICAgICAgICAgICA9IGdldExvY2FsZTtcbmhvb2tzLmlzRHVyYXRpb24gICAgICAgICAgICA9IGlzRHVyYXRpb247XG5ob29rcy5tb250aHNTaG9ydCAgICAgICAgICAgPSBsaXN0TW9udGhzU2hvcnQ7XG5ob29rcy53ZWVrZGF5c01pbiAgICAgICAgICAgPSBsaXN0V2Vla2RheXNNaW47XG5ob29rcy5kZWZpbmVMb2NhbGUgICAgICAgICAgPSBkZWZpbmVMb2NhbGU7XG5ob29rcy51cGRhdGVMb2NhbGUgICAgICAgICAgPSB1cGRhdGVMb2NhbGU7XG5ob29rcy5sb2NhbGVzICAgICAgICAgICAgICAgPSBsaXN0TG9jYWxlcztcbmhvb2tzLndlZWtkYXlzU2hvcnQgICAgICAgICA9IGxpc3RXZWVrZGF5c1Nob3J0O1xuaG9va3Mubm9ybWFsaXplVW5pdHMgICAgICAgID0gbm9ybWFsaXplVW5pdHM7XG5ob29rcy5yZWxhdGl2ZVRpbWVSb3VuZGluZyA9IGdldFNldFJlbGF0aXZlVGltZVJvdW5kaW5nO1xuaG9va3MucmVsYXRpdmVUaW1lVGhyZXNob2xkID0gZ2V0U2V0UmVsYXRpdmVUaW1lVGhyZXNob2xkO1xuaG9va3MuY2FsZW5kYXJGb3JtYXQgICAgICAgID0gZ2V0Q2FsZW5kYXJGb3JtYXQ7XG5ob29rcy5wcm90b3R5cGUgICAgICAgICAgICAgPSBwcm90bztcblxucmV0dXJuIGhvb2tzO1xuXG59KSkpO1xuIiwiLypcbm9iamVjdC1hc3NpZ25cbihjKSBTaW5kcmUgU29yaHVzXG5AbGljZW5zZSBNSVRcbiovXG5cbid1c2Ugc3RyaWN0Jztcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG52YXIgZ2V0T3duUHJvcGVydHlTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgcHJvcElzRW51bWVyYWJsZSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG5cbmZ1bmN0aW9uIHRvT2JqZWN0KHZhbCkge1xuXHRpZiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LmFzc2lnbiBjYW5ub3QgYmUgY2FsbGVkIHdpdGggbnVsbCBvciB1bmRlZmluZWQnKTtcblx0fVxuXG5cdHJldHVybiBPYmplY3QodmFsKTtcbn1cblxuZnVuY3Rpb24gc2hvdWxkVXNlTmF0aXZlKCkge1xuXHR0cnkge1xuXHRcdGlmICghT2JqZWN0LmFzc2lnbikge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIERldGVjdCBidWdneSBwcm9wZXJ0eSBlbnVtZXJhdGlvbiBvcmRlciBpbiBvbGRlciBWOCB2ZXJzaW9ucy5cblxuXHRcdC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTQxMThcblx0XHR2YXIgdGVzdDEgPSBuZXcgU3RyaW5nKCdhYmMnKTsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3LXdyYXBwZXJzXG5cdFx0dGVzdDFbNV0gPSAnZGUnO1xuXHRcdGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0ZXN0MSlbMF0gPT09ICc1Jykge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMwNTZcblx0XHR2YXIgdGVzdDIgPSB7fTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHtcblx0XHRcdHRlc3QyWydfJyArIFN0cmluZy5mcm9tQ2hhckNvZGUoaSldID0gaTtcblx0XHR9XG5cdFx0dmFyIG9yZGVyMiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRlc3QyKS5tYXAoZnVuY3Rpb24gKG4pIHtcblx0XHRcdHJldHVybiB0ZXN0MltuXTtcblx0XHR9KTtcblx0XHRpZiAob3JkZXIyLmpvaW4oJycpICE9PSAnMDEyMzQ1Njc4OScpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zMDU2XG5cdFx0dmFyIHRlc3QzID0ge307XG5cdFx0J2FiY2RlZmdoaWprbG1ub3BxcnN0Jy5zcGxpdCgnJykuZm9yRWFjaChmdW5jdGlvbiAobGV0dGVyKSB7XG5cdFx0XHR0ZXN0M1tsZXR0ZXJdID0gbGV0dGVyO1xuXHRcdH0pO1xuXHRcdGlmIChPYmplY3Qua2V5cyhPYmplY3QuYXNzaWduKHt9LCB0ZXN0MykpLmpvaW4oJycpICE9PVxuXHRcdFx0XHQnYWJjZGVmZ2hpamtsbW5vcHFyc3QnKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRydWU7XG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdC8vIFdlIGRvbid0IGV4cGVjdCBhbnkgb2YgdGhlIGFib3ZlIHRvIHRocm93LCBidXQgYmV0dGVyIHRvIGJlIHNhZmUuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2hvdWxkVXNlTmF0aXZlKCkgPyBPYmplY3QuYXNzaWduIDogZnVuY3Rpb24gKHRhcmdldCwgc291cmNlKSB7XG5cdHZhciBmcm9tO1xuXHR2YXIgdG8gPSB0b09iamVjdCh0YXJnZXQpO1xuXHR2YXIgc3ltYm9scztcblxuXHRmb3IgKHZhciBzID0gMTsgcyA8IGFyZ3VtZW50cy5sZW5ndGg7IHMrKykge1xuXHRcdGZyb20gPSBPYmplY3QoYXJndW1lbnRzW3NdKTtcblxuXHRcdGZvciAodmFyIGtleSBpbiBmcm9tKSB7XG5cdFx0XHRpZiAoaGFzT3duUHJvcGVydHkuY2FsbChmcm9tLCBrZXkpKSB7XG5cdFx0XHRcdHRvW2tleV0gPSBmcm9tW2tleV07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGdldE93blByb3BlcnR5U3ltYm9scykge1xuXHRcdFx0c3ltYm9scyA9IGdldE93blByb3BlcnR5U3ltYm9scyhmcm9tKTtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3ltYm9scy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAocHJvcElzRW51bWVyYWJsZS5jYWxsKGZyb20sIHN5bWJvbHNbaV0pKSB7XG5cdFx0XHRcdFx0dG9bc3ltYm9sc1tpXV0gPSBmcm9tW3N5bWJvbHNbaV1dO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHRvO1xufTtcbiIsIi8qIVxuICogUGlrYWRheVxuICpcbiAqIENvcHlyaWdodCDCqSAyMDE0IERhdmlkIEJ1c2hlbGwgfCBCU0QgJiBNSVQgbGljZW5zZSB8IGh0dHBzOi8vZ2l0aHViLmNvbS9kYnVzaGVsbC9QaWthZGF5XG4gKi9cblxuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KVxue1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBtb21lbnQ7XG4gICAgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAvLyBDb21tb25KUyBtb2R1bGVcbiAgICAgICAgLy8gTG9hZCBtb21lbnQuanMgYXMgYW4gb3B0aW9uYWwgZGVwZW5kZW5jeVxuICAgICAgICB0cnkgeyBtb21lbnQgPSByZXF1aXJlKCdtb21lbnQnKTsgfSBjYXRjaCAoZSkge31cbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KG1vbWVudCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgICBkZWZpbmUoZnVuY3Rpb24gKHJlcSlcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gTG9hZCBtb21lbnQuanMgYXMgYW4gb3B0aW9uYWwgZGVwZW5kZW5jeVxuICAgICAgICAgICAgdmFyIGlkID0gJ21vbWVudCc7XG4gICAgICAgICAgICB0cnkgeyBtb21lbnQgPSByZXEoaWQpOyB9IGNhdGNoIChlKSB7fVxuICAgICAgICAgICAgcmV0dXJuIGZhY3RvcnkobW9tZW50KTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcm9vdC5QaWthZGF5ID0gZmFjdG9yeShyb290Lm1vbWVudCk7XG4gICAgfVxufSh0aGlzLCBmdW5jdGlvbiAobW9tZW50KVxue1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8qKlxuICAgICAqIGZlYXR1cmUgZGV0ZWN0aW9uIGFuZCBoZWxwZXIgZnVuY3Rpb25zXG4gICAgICovXG4gICAgdmFyIGhhc01vbWVudCA9IHR5cGVvZiBtb21lbnQgPT09ICdmdW5jdGlvbicsXG5cbiAgICBoYXNFdmVudExpc3RlbmVycyA9ICEhd2luZG93LmFkZEV2ZW50TGlzdGVuZXIsXG5cbiAgICBkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudCxcblxuICAgIHN0byA9IHdpbmRvdy5zZXRUaW1lb3V0LFxuXG4gICAgYWRkRXZlbnQgPSBmdW5jdGlvbihlbCwgZSwgY2FsbGJhY2ssIGNhcHR1cmUpXG4gICAge1xuICAgICAgICBpZiAoaGFzRXZlbnRMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoZSwgY2FsbGJhY2ssICEhY2FwdHVyZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbC5hdHRhY2hFdmVudCgnb24nICsgZSwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHJlbW92ZUV2ZW50ID0gZnVuY3Rpb24oZWwsIGUsIGNhbGxiYWNrLCBjYXB0dXJlKVxuICAgIHtcbiAgICAgICAgaWYgKGhhc0V2ZW50TGlzdGVuZXJzKSB7XG4gICAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGUsIGNhbGxiYWNrLCAhIWNhcHR1cmUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWwuZGV0YWNoRXZlbnQoJ29uJyArIGUsIGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICB0cmltID0gZnVuY3Rpb24oc3RyKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHN0ci50cmltID8gc3RyLnRyaW0oKSA6IHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCcnKTtcbiAgICB9LFxuXG4gICAgaGFzQ2xhc3MgPSBmdW5jdGlvbihlbCwgY24pXG4gICAge1xuICAgICAgICByZXR1cm4gKCcgJyArIGVsLmNsYXNzTmFtZSArICcgJykuaW5kZXhPZignICcgKyBjbiArICcgJykgIT09IC0xO1xuICAgIH0sXG5cbiAgICBhZGRDbGFzcyA9IGZ1bmN0aW9uKGVsLCBjbilcbiAgICB7XG4gICAgICAgIGlmICghaGFzQ2xhc3MoZWwsIGNuKSkge1xuICAgICAgICAgICAgZWwuY2xhc3NOYW1lID0gKGVsLmNsYXNzTmFtZSA9PT0gJycpID8gY24gOiBlbC5jbGFzc05hbWUgKyAnICcgKyBjbjtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICByZW1vdmVDbGFzcyA9IGZ1bmN0aW9uKGVsLCBjbilcbiAgICB7XG4gICAgICAgIGVsLmNsYXNzTmFtZSA9IHRyaW0oKCcgJyArIGVsLmNsYXNzTmFtZSArICcgJykucmVwbGFjZSgnICcgKyBjbiArICcgJywgJyAnKSk7XG4gICAgfSxcblxuICAgIGlzQXJyYXkgPSBmdW5jdGlvbihvYmopXG4gICAge1xuICAgICAgICByZXR1cm4gKC9BcnJheS8pLnRlc3QoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikpO1xuICAgIH0sXG5cbiAgICBpc0RhdGUgPSBmdW5jdGlvbihvYmopXG4gICAge1xuICAgICAgICByZXR1cm4gKC9EYXRlLykudGVzdChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSkgJiYgIWlzTmFOKG9iai5nZXRUaW1lKCkpO1xuICAgIH0sXG5cbiAgICBpc1dlZWtlbmQgPSBmdW5jdGlvbihkYXRlKVxuICAgIHtcbiAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF5KCk7XG4gICAgICAgIHJldHVybiBkYXkgPT09IDAgfHwgZGF5ID09PSA2O1xuICAgIH0sXG5cbiAgICBpc0xlYXBZZWFyID0gZnVuY3Rpb24oeWVhcilcbiAgICB7XG4gICAgICAgIC8vIHNvbHV0aW9uIGJ5IE1hdHRpIFZpcmtrdW5lbjogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNDg4MTk1MVxuICAgICAgICByZXR1cm4geWVhciAlIDQgPT09IDAgJiYgeWVhciAlIDEwMCAhPT0gMCB8fCB5ZWFyICUgNDAwID09PSAwO1xuICAgIH0sXG5cbiAgICBnZXREYXlzSW5Nb250aCA9IGZ1bmN0aW9uKHllYXIsIG1vbnRoKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIFszMSwgaXNMZWFwWWVhcih5ZWFyKSA/IDI5IDogMjgsIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXVttb250aF07XG4gICAgfSxcblxuICAgIHNldFRvU3RhcnRPZkRheSA9IGZ1bmN0aW9uKGRhdGUpXG4gICAge1xuICAgICAgICBpZiAoaXNEYXRlKGRhdGUpKSBkYXRlLnNldEhvdXJzKDAsMCwwLDApO1xuICAgIH0sXG5cbiAgICBjb21wYXJlRGF0ZXMgPSBmdW5jdGlvbihhLGIpXG4gICAge1xuICAgICAgICAvLyB3ZWFrIGRhdGUgY29tcGFyaXNvbiAodXNlIHNldFRvU3RhcnRPZkRheShkYXRlKSB0byBlbnN1cmUgY29ycmVjdCByZXN1bHQpXG4gICAgICAgIHJldHVybiBhLmdldFRpbWUoKSA9PT0gYi5nZXRUaW1lKCk7XG4gICAgfSxcblxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKHRvLCBmcm9tLCBvdmVyd3JpdGUpXG4gICAge1xuICAgICAgICB2YXIgcHJvcCwgaGFzUHJvcDtcbiAgICAgICAgZm9yIChwcm9wIGluIGZyb20pIHtcbiAgICAgICAgICAgIGhhc1Byb3AgPSB0b1twcm9wXSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKGhhc1Byb3AgJiYgdHlwZW9mIGZyb21bcHJvcF0gPT09ICdvYmplY3QnICYmIGZyb21bcHJvcF0gIT09IG51bGwgJiYgZnJvbVtwcm9wXS5ub2RlTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzRGF0ZShmcm9tW3Byb3BdKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3ZlcndyaXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b1twcm9wXSA9IG5ldyBEYXRlKGZyb21bcHJvcF0uZ2V0VGltZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0FycmF5KGZyb21bcHJvcF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdmVyd3JpdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvW3Byb3BdID0gZnJvbVtwcm9wXS5zbGljZSgwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRvW3Byb3BdID0gZXh0ZW5kKHt9LCBmcm9tW3Byb3BdLCBvdmVyd3JpdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3ZlcndyaXRlIHx8ICFoYXNQcm9wKSB7XG4gICAgICAgICAgICAgICAgdG9bcHJvcF0gPSBmcm9tW3Byb3BdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0bztcbiAgICB9LFxuXG4gICAgZmlyZUV2ZW50ID0gZnVuY3Rpb24oZWwsIGV2ZW50TmFtZSwgZGF0YSlcbiAgICB7XG4gICAgICAgIHZhciBldjtcblxuICAgICAgICBpZiAoZG9jdW1lbnQuY3JlYXRlRXZlbnQpIHtcbiAgICAgICAgICAgIGV2ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0hUTUxFdmVudHMnKTtcbiAgICAgICAgICAgIGV2LmluaXRFdmVudChldmVudE5hbWUsIHRydWUsIGZhbHNlKTtcbiAgICAgICAgICAgIGV2ID0gZXh0ZW5kKGV2LCBkYXRhKTtcbiAgICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQoZXYpO1xuICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KSB7XG4gICAgICAgICAgICBldiA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7XG4gICAgICAgICAgICBldiA9IGV4dGVuZChldiwgZGF0YSk7XG4gICAgICAgICAgICBlbC5maXJlRXZlbnQoJ29uJyArIGV2ZW50TmFtZSwgZXYpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGFkanVzdENhbGVuZGFyID0gZnVuY3Rpb24oY2FsZW5kYXIpIHtcbiAgICAgICAgaWYgKGNhbGVuZGFyLm1vbnRoIDwgMCkge1xuICAgICAgICAgICAgY2FsZW5kYXIueWVhciAtPSBNYXRoLmNlaWwoTWF0aC5hYnMoY2FsZW5kYXIubW9udGgpLzEyKTtcbiAgICAgICAgICAgIGNhbGVuZGFyLm1vbnRoICs9IDEyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjYWxlbmRhci5tb250aCA+IDExKSB7XG4gICAgICAgICAgICBjYWxlbmRhci55ZWFyICs9IE1hdGguZmxvb3IoTWF0aC5hYnMoY2FsZW5kYXIubW9udGgpLzEyKTtcbiAgICAgICAgICAgIGNhbGVuZGFyLm1vbnRoIC09IDEyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWxlbmRhcjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogZGVmYXVsdHMgYW5kIGxvY2FsaXNhdGlvblxuICAgICAqL1xuICAgIGRlZmF1bHRzID0ge1xuXG4gICAgICAgIC8vIGJpbmQgdGhlIHBpY2tlciB0byBhIGZvcm0gZmllbGRcbiAgICAgICAgZmllbGQ6IG51bGwsXG5cbiAgICAgICAgLy8gYXV0b21hdGljYWxseSBzaG93L2hpZGUgdGhlIHBpY2tlciBvbiBgZmllbGRgIGZvY3VzIChkZWZhdWx0IGB0cnVlYCBpZiBgZmllbGRgIGlzIHNldClcbiAgICAgICAgYm91bmQ6IHVuZGVmaW5lZCxcblxuICAgICAgICAvLyBwb3NpdGlvbiBvZiB0aGUgZGF0ZXBpY2tlciwgcmVsYXRpdmUgdG8gdGhlIGZpZWxkIChkZWZhdWx0IHRvIGJvdHRvbSAmIGxlZnQpXG4gICAgICAgIC8vICgnYm90dG9tJyAmICdsZWZ0JyBrZXl3b3JkcyBhcmUgbm90IHVzZWQsICd0b3AnICYgJ3JpZ2h0JyBhcmUgbW9kaWZpZXIgb24gdGhlIGJvdHRvbS9sZWZ0IHBvc2l0aW9uKVxuICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbSBsZWZ0JyxcblxuICAgICAgICAvLyBhdXRvbWF0aWNhbGx5IGZpdCBpbiB0aGUgdmlld3BvcnQgZXZlbiBpZiBpdCBtZWFucyByZXBvc2l0aW9uaW5nIGZyb20gdGhlIHBvc2l0aW9uIG9wdGlvblxuICAgICAgICByZXBvc2l0aW9uOiB0cnVlLFxuXG4gICAgICAgIC8vIHRoZSBkZWZhdWx0IG91dHB1dCBmb3JtYXQgZm9yIGAudG9TdHJpbmcoKWAgYW5kIGBmaWVsZGAgdmFsdWVcbiAgICAgICAgZm9ybWF0OiAnWVlZWS1NTS1ERCcsXG5cbiAgICAgICAgLy8gdGhlIHRvU3RyaW5nIGZ1bmN0aW9uIHdoaWNoIGdldHMgcGFzc2VkIGEgY3VycmVudCBkYXRlIG9iamVjdCBhbmQgZm9ybWF0XG4gICAgICAgIC8vIGFuZCByZXR1cm5zIGEgc3RyaW5nXG4gICAgICAgIHRvU3RyaW5nOiBudWxsLFxuXG4gICAgICAgIC8vIHVzZWQgdG8gY3JlYXRlIGRhdGUgb2JqZWN0IGZyb20gY3VycmVudCBpbnB1dCBzdHJpbmdcbiAgICAgICAgcGFyc2U6IG51bGwsXG5cbiAgICAgICAgLy8gdGhlIGluaXRpYWwgZGF0ZSB0byB2aWV3IHdoZW4gZmlyc3Qgb3BlbmVkXG4gICAgICAgIGRlZmF1bHREYXRlOiBudWxsLFxuXG4gICAgICAgIC8vIG1ha2UgdGhlIGBkZWZhdWx0RGF0ZWAgdGhlIGluaXRpYWwgc2VsZWN0ZWQgdmFsdWVcbiAgICAgICAgc2V0RGVmYXVsdERhdGU6IGZhbHNlLFxuXG4gICAgICAgIC8vIGZpcnN0IGRheSBvZiB3ZWVrICgwOiBTdW5kYXksIDE6IE1vbmRheSBldGMpXG4gICAgICAgIGZpcnN0RGF5OiAwLFxuXG4gICAgICAgIC8vIHRoZSBkZWZhdWx0IGZsYWcgZm9yIG1vbWVudCdzIHN0cmljdCBkYXRlIHBhcnNpbmdcbiAgICAgICAgZm9ybWF0U3RyaWN0OiBmYWxzZSxcblxuICAgICAgICAvLyB0aGUgbWluaW11bS9lYXJsaWVzdCBkYXRlIHRoYXQgY2FuIGJlIHNlbGVjdGVkXG4gICAgICAgIG1pbkRhdGU6IG51bGwsXG4gICAgICAgIC8vIHRoZSBtYXhpbXVtL2xhdGVzdCBkYXRlIHRoYXQgY2FuIGJlIHNlbGVjdGVkXG4gICAgICAgIG1heERhdGU6IG51bGwsXG5cbiAgICAgICAgLy8gbnVtYmVyIG9mIHllYXJzIGVpdGhlciBzaWRlLCBvciBhcnJheSBvZiB1cHBlci9sb3dlciByYW5nZVxuICAgICAgICB5ZWFyUmFuZ2U6IDEwLFxuXG4gICAgICAgIC8vIHNob3cgd2VlayBudW1iZXJzIGF0IGhlYWQgb2Ygcm93XG4gICAgICAgIHNob3dXZWVrTnVtYmVyOiBmYWxzZSxcblxuICAgICAgICAvLyBXZWVrIHBpY2tlciBtb2RlXG4gICAgICAgIHBpY2tXaG9sZVdlZWs6IGZhbHNlLFxuXG4gICAgICAgIC8vIHVzZWQgaW50ZXJuYWxseSAoZG9uJ3QgY29uZmlnIG91dHNpZGUpXG4gICAgICAgIG1pblllYXI6IDAsXG4gICAgICAgIG1heFllYXI6IDk5OTksXG4gICAgICAgIG1pbk1vbnRoOiB1bmRlZmluZWQsXG4gICAgICAgIG1heE1vbnRoOiB1bmRlZmluZWQsXG5cbiAgICAgICAgc3RhcnRSYW5nZTogbnVsbCxcbiAgICAgICAgZW5kUmFuZ2U6IG51bGwsXG5cbiAgICAgICAgaXNSVEw6IGZhbHNlLFxuXG4gICAgICAgIC8vIEFkZGl0aW9uYWwgdGV4dCB0byBhcHBlbmQgdG8gdGhlIHllYXIgaW4gdGhlIGNhbGVuZGFyIHRpdGxlXG4gICAgICAgIHllYXJTdWZmaXg6ICcnLFxuXG4gICAgICAgIC8vIFJlbmRlciB0aGUgbW9udGggYWZ0ZXIgeWVhciBpbiB0aGUgY2FsZW5kYXIgdGl0bGVcbiAgICAgICAgc2hvd01vbnRoQWZ0ZXJZZWFyOiBmYWxzZSxcblxuICAgICAgICAvLyBSZW5kZXIgZGF5cyBvZiB0aGUgY2FsZW5kYXIgZ3JpZCB0aGF0IGZhbGwgaW4gdGhlIG5leHQgb3IgcHJldmlvdXMgbW9udGhcbiAgICAgICAgc2hvd0RheXNJbk5leHRBbmRQcmV2aW91c01vbnRoczogZmFsc2UsXG5cbiAgICAgICAgLy8gQWxsb3dzIHVzZXIgdG8gc2VsZWN0IGRheXMgdGhhdCBmYWxsIGluIHRoZSBuZXh0IG9yIHByZXZpb3VzIG1vbnRoXG4gICAgICAgIGVuYWJsZVNlbGVjdGlvbkRheXNJbk5leHRBbmRQcmV2aW91c01vbnRoczogZmFsc2UsXG5cbiAgICAgICAgLy8gaG93IG1hbnkgbW9udGhzIGFyZSB2aXNpYmxlXG4gICAgICAgIG51bWJlck9mTW9udGhzOiAxLFxuXG4gICAgICAgIC8vIHdoZW4gbnVtYmVyT2ZNb250aHMgaXMgdXNlZCwgdGhpcyB3aWxsIGhlbHAgeW91IHRvIGNob29zZSB3aGVyZSB0aGUgbWFpbiBjYWxlbmRhciB3aWxsIGJlIChkZWZhdWx0IGBsZWZ0YCwgY2FuIGJlIHNldCB0byBgcmlnaHRgKVxuICAgICAgICAvLyBvbmx5IHVzZWQgZm9yIHRoZSBmaXJzdCBkaXNwbGF5IG9yIHdoZW4gYSBzZWxlY3RlZCBkYXRlIGlzIG5vdCB2aXNpYmxlXG4gICAgICAgIG1haW5DYWxlbmRhcjogJ2xlZnQnLFxuXG4gICAgICAgIC8vIFNwZWNpZnkgYSBET00gZWxlbWVudCB0byByZW5kZXIgdGhlIGNhbGVuZGFyIGluXG4gICAgICAgIGNvbnRhaW5lcjogdW5kZWZpbmVkLFxuXG4gICAgICAgIC8vIEJsdXIgZmllbGQgd2hlbiBkYXRlIGlzIHNlbGVjdGVkXG4gICAgICAgIGJsdXJGaWVsZE9uU2VsZWN0IDogdHJ1ZSxcblxuICAgICAgICAvLyBpbnRlcm5hdGlvbmFsaXphdGlvblxuICAgICAgICBpMThuOiB7XG4gICAgICAgICAgICBwcmV2aW91c01vbnRoIDogJ1ByZXZpb3VzIE1vbnRoJyxcbiAgICAgICAgICAgIG5leHRNb250aCAgICAgOiAnTmV4dCBNb250aCcsXG4gICAgICAgICAgICBtb250aHMgICAgICAgIDogWydKYW51YXJ5JywnRmVicnVhcnknLCdNYXJjaCcsJ0FwcmlsJywnTWF5JywnSnVuZScsJ0p1bHknLCdBdWd1c3QnLCdTZXB0ZW1iZXInLCdPY3RvYmVyJywnTm92ZW1iZXInLCdEZWNlbWJlciddLFxuICAgICAgICAgICAgd2Vla2RheXMgICAgICA6IFsnU3VuZGF5JywnTW9uZGF5JywnVHVlc2RheScsJ1dlZG5lc2RheScsJ1RodXJzZGF5JywnRnJpZGF5JywnU2F0dXJkYXknXSxcbiAgICAgICAgICAgIHdlZWtkYXlzU2hvcnQgOiBbJ1N1bicsJ01vbicsJ1R1ZScsJ1dlZCcsJ1RodScsJ0ZyaScsJ1NhdCddXG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gVGhlbWUgQ2xhc3NuYW1lXG4gICAgICAgIHRoZW1lOiBudWxsLFxuXG4gICAgICAgIC8vIGV2ZW50cyBhcnJheVxuICAgICAgICBldmVudHM6IFtdLFxuXG4gICAgICAgIC8vIGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAgICAgIG9uU2VsZWN0OiBudWxsLFxuICAgICAgICBvbk9wZW46IG51bGwsXG4gICAgICAgIG9uQ2xvc2U6IG51bGwsXG4gICAgICAgIG9uRHJhdzogbnVsbFxuICAgIH0sXG5cblxuICAgIC8qKlxuICAgICAqIHRlbXBsYXRpbmcgZnVuY3Rpb25zIHRvIGFic3RyYWN0IEhUTUwgcmVuZGVyaW5nXG4gICAgICovXG4gICAgcmVuZGVyRGF5TmFtZSA9IGZ1bmN0aW9uKG9wdHMsIGRheSwgYWJicilcbiAgICB7XG4gICAgICAgIGRheSArPSBvcHRzLmZpcnN0RGF5O1xuICAgICAgICB3aGlsZSAoZGF5ID49IDcpIHtcbiAgICAgICAgICAgIGRheSAtPSA3O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhYmJyID8gb3B0cy5pMThuLndlZWtkYXlzU2hvcnRbZGF5XSA6IG9wdHMuaTE4bi53ZWVrZGF5c1tkYXldO1xuICAgIH0sXG5cbiAgICByZW5kZXJEYXkgPSBmdW5jdGlvbihvcHRzKVxuICAgIHtcbiAgICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgICB2YXIgYXJpYVNlbGVjdGVkID0gJ2ZhbHNlJztcbiAgICAgICAgaWYgKG9wdHMuaXNFbXB0eSkge1xuICAgICAgICAgICAgaWYgKG9wdHMuc2hvd0RheXNJbk5leHRBbmRQcmV2aW91c01vbnRocykge1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKCdpcy1vdXRzaWRlLWN1cnJlbnQtbW9udGgnKTtcblxuICAgICAgICAgICAgICAgIGlmKCFvcHRzLmVuYWJsZVNlbGVjdGlvbkRheXNJbk5leHRBbmRQcmV2aW91c01vbnRocykge1xuICAgICAgICAgICAgICAgICAgICBhcnIucHVzaCgnaXMtc2VsZWN0aW9uLWRpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAnPHRkIGNsYXNzPVwiaXMtZW1wdHlcIj48L3RkPic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMuaXNEaXNhYmxlZCkge1xuICAgICAgICAgICAgYXJyLnB1c2goJ2lzLWRpc2FibGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMuaXNUb2RheSkge1xuICAgICAgICAgICAgYXJyLnB1c2goJ2lzLXRvZGF5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMuaXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgYXJyLnB1c2goJ2lzLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICBhcmlhU2VsZWN0ZWQgPSAndHJ1ZSc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMuaGFzRXZlbnQpIHtcbiAgICAgICAgICAgIGFyci5wdXNoKCdoYXMtZXZlbnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5pc0luUmFuZ2UpIHtcbiAgICAgICAgICAgIGFyci5wdXNoKCdpcy1pbnJhbmdlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMuaXNTdGFydFJhbmdlKSB7XG4gICAgICAgICAgICBhcnIucHVzaCgnaXMtc3RhcnRyYW5nZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLmlzRW5kUmFuZ2UpIHtcbiAgICAgICAgICAgIGFyci5wdXNoKCdpcy1lbmRyYW5nZScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnPHRkIGRhdGEtZGF5PVwiJyArIG9wdHMuZGF5ICsgJ1wiIGNsYXNzPVwiJyArIGFyci5qb2luKCcgJykgKyAnXCIgYXJpYS1zZWxlY3RlZD1cIicgKyBhcmlhU2VsZWN0ZWQgKyAnXCI+JyArXG4gICAgICAgICAgICAgICAgICc8YnV0dG9uIGNsYXNzPVwicGlrYS1idXR0b24gcGlrYS1kYXlcIiB0eXBlPVwiYnV0dG9uXCIgJyArXG4gICAgICAgICAgICAgICAgICAgICdkYXRhLXBpa2EteWVhcj1cIicgKyBvcHRzLnllYXIgKyAnXCIgZGF0YS1waWthLW1vbnRoPVwiJyArIG9wdHMubW9udGggKyAnXCIgZGF0YS1waWthLWRheT1cIicgKyBvcHRzLmRheSArICdcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMuZGF5ICtcbiAgICAgICAgICAgICAgICAgJzwvYnV0dG9uPicgK1xuICAgICAgICAgICAgICAgJzwvdGQ+JztcbiAgICB9LFxuXG4gICAgcmVuZGVyV2VlayA9IGZ1bmN0aW9uIChkLCBtLCB5KSB7XG4gICAgICAgIC8vIExpZnRlZCBmcm9tIGh0dHA6Ly9qYXZhc2NyaXB0LmFib3V0LmNvbS9saWJyYXJ5L2Jsd2Vla3llYXIuaHRtLCBsaWdodGx5IG1vZGlmaWVkLlxuICAgICAgICB2YXIgb25lamFuID0gbmV3IERhdGUoeSwgMCwgMSksXG4gICAgICAgICAgICB3ZWVrTnVtID0gTWF0aC5jZWlsKCgoKG5ldyBEYXRlKHksIG0sIGQpIC0gb25lamFuKSAvIDg2NDAwMDAwKSArIG9uZWphbi5nZXREYXkoKSsxKS83KTtcbiAgICAgICAgcmV0dXJuICc8dGQgY2xhc3M9XCJwaWthLXdlZWtcIj4nICsgd2Vla051bSArICc8L3RkPic7XG4gICAgfSxcblxuICAgIHJlbmRlclJvdyA9IGZ1bmN0aW9uKGRheXMsIGlzUlRMLCBwaWNrV2hvbGVXZWVrLCBpc1Jvd1NlbGVjdGVkKVxuICAgIHtcbiAgICAgICAgcmV0dXJuICc8dHIgY2xhc3M9XCJwaWthLXJvdycgKyAocGlja1dob2xlV2VlayA/ICcgcGljay13aG9sZS13ZWVrJyA6ICcnKSArIChpc1Jvd1NlbGVjdGVkID8gJyBpcy1zZWxlY3RlZCcgOiAnJykgKyAnXCI+JyArIChpc1JUTCA/IGRheXMucmV2ZXJzZSgpIDogZGF5cykuam9pbignJykgKyAnPC90cj4nO1xuICAgIH0sXG5cbiAgICByZW5kZXJCb2R5ID0gZnVuY3Rpb24ocm93cylcbiAgICB7XG4gICAgICAgIHJldHVybiAnPHRib2R5PicgKyByb3dzLmpvaW4oJycpICsgJzwvdGJvZHk+JztcbiAgICB9LFxuXG4gICAgcmVuZGVySGVhZCA9IGZ1bmN0aW9uKG9wdHMpXG4gICAge1xuICAgICAgICB2YXIgaSwgYXJyID0gW107XG4gICAgICAgIGlmIChvcHRzLnNob3dXZWVrTnVtYmVyKSB7XG4gICAgICAgICAgICBhcnIucHVzaCgnPHRoPjwvdGg+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IDc7IGkrKykge1xuICAgICAgICAgICAgYXJyLnB1c2goJzx0aCBzY29wZT1cImNvbFwiPjxhYmJyIHRpdGxlPVwiJyArIHJlbmRlckRheU5hbWUob3B0cywgaSkgKyAnXCI+JyArIHJlbmRlckRheU5hbWUob3B0cywgaSwgdHJ1ZSkgKyAnPC9hYmJyPjwvdGg+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICc8dGhlYWQ+PHRyPicgKyAob3B0cy5pc1JUTCA/IGFyci5yZXZlcnNlKCkgOiBhcnIpLmpvaW4oJycpICsgJzwvdHI+PC90aGVhZD4nO1xuICAgIH0sXG5cbiAgICByZW5kZXJUaXRsZSA9IGZ1bmN0aW9uKGluc3RhbmNlLCBjLCB5ZWFyLCBtb250aCwgcmVmWWVhciwgcmFuZElkKVxuICAgIHtcbiAgICAgICAgdmFyIGksIGosIGFycixcbiAgICAgICAgICAgIG9wdHMgPSBpbnN0YW5jZS5fbyxcbiAgICAgICAgICAgIGlzTWluWWVhciA9IHllYXIgPT09IG9wdHMubWluWWVhcixcbiAgICAgICAgICAgIGlzTWF4WWVhciA9IHllYXIgPT09IG9wdHMubWF4WWVhcixcbiAgICAgICAgICAgIGh0bWwgPSAnPGRpdiBpZD1cIicgKyByYW5kSWQgKyAnXCIgY2xhc3M9XCJwaWthLXRpdGxlXCIgcm9sZT1cImhlYWRpbmdcIiBhcmlhLWxpdmU9XCJhc3NlcnRpdmVcIj4nLFxuICAgICAgICAgICAgbW9udGhIdG1sLFxuICAgICAgICAgICAgeWVhckh0bWwsXG4gICAgICAgICAgICBwcmV2ID0gdHJ1ZSxcbiAgICAgICAgICAgIG5leHQgPSB0cnVlO1xuXG4gICAgICAgIGZvciAoYXJyID0gW10sIGkgPSAwOyBpIDwgMTI7IGkrKykge1xuICAgICAgICAgICAgYXJyLnB1c2goJzxvcHRpb24gdmFsdWU9XCInICsgKHllYXIgPT09IHJlZlllYXIgPyBpIC0gYyA6IDEyICsgaSAtIGMpICsgJ1wiJyArXG4gICAgICAgICAgICAgICAgKGkgPT09IG1vbnRoID8gJyBzZWxlY3RlZD1cInNlbGVjdGVkXCInOiAnJykgK1xuICAgICAgICAgICAgICAgICgoaXNNaW5ZZWFyICYmIGkgPCBvcHRzLm1pbk1vbnRoKSB8fCAoaXNNYXhZZWFyICYmIGkgPiBvcHRzLm1heE1vbnRoKSA/ICdkaXNhYmxlZD1cImRpc2FibGVkXCInIDogJycpICsgJz4nICtcbiAgICAgICAgICAgICAgICBvcHRzLmkxOG4ubW9udGhzW2ldICsgJzwvb3B0aW9uPicpO1xuICAgICAgICB9XG5cbiAgICAgICAgbW9udGhIdG1sID0gJzxkaXYgY2xhc3M9XCJwaWthLWxhYmVsXCI+JyArIG9wdHMuaTE4bi5tb250aHNbbW9udGhdICsgJzxzZWxlY3QgY2xhc3M9XCJwaWthLXNlbGVjdCBwaWthLXNlbGVjdC1tb250aFwiIHRhYmluZGV4PVwiLTFcIj4nICsgYXJyLmpvaW4oJycpICsgJzwvc2VsZWN0PjwvZGl2Pic7XG5cbiAgICAgICAgaWYgKGlzQXJyYXkob3B0cy55ZWFyUmFuZ2UpKSB7XG4gICAgICAgICAgICBpID0gb3B0cy55ZWFyUmFuZ2VbMF07XG4gICAgICAgICAgICBqID0gb3B0cy55ZWFyUmFuZ2VbMV0gKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaSA9IHllYXIgLSBvcHRzLnllYXJSYW5nZTtcbiAgICAgICAgICAgIGogPSAxICsgeWVhciArIG9wdHMueWVhclJhbmdlO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChhcnIgPSBbXTsgaSA8IGogJiYgaSA8PSBvcHRzLm1heFllYXI7IGkrKykge1xuICAgICAgICAgICAgaWYgKGkgPj0gb3B0cy5taW5ZZWFyKSB7XG4gICAgICAgICAgICAgICAgYXJyLnB1c2goJzxvcHRpb24gdmFsdWU9XCInICsgaSArICdcIicgKyAoaSA9PT0geWVhciA/ICcgc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiJzogJycpICsgJz4nICsgKGkpICsgJzwvb3B0aW9uPicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHllYXJIdG1sID0gJzxkaXYgY2xhc3M9XCJwaWthLWxhYmVsXCI+JyArIHllYXIgKyBvcHRzLnllYXJTdWZmaXggKyAnPHNlbGVjdCBjbGFzcz1cInBpa2Etc2VsZWN0IHBpa2Etc2VsZWN0LXllYXJcIiB0YWJpbmRleD1cIi0xXCI+JyArIGFyci5qb2luKCcnKSArICc8L3NlbGVjdD48L2Rpdj4nO1xuXG4gICAgICAgIGlmIChvcHRzLnNob3dNb250aEFmdGVyWWVhcikge1xuICAgICAgICAgICAgaHRtbCArPSB5ZWFySHRtbCArIG1vbnRoSHRtbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGh0bWwgKz0gbW9udGhIdG1sICsgeWVhckh0bWw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNNaW5ZZWFyICYmIChtb250aCA9PT0gMCB8fCBvcHRzLm1pbk1vbnRoID49IG1vbnRoKSkge1xuICAgICAgICAgICAgcHJldiA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzTWF4WWVhciAmJiAobW9udGggPT09IDExIHx8IG9wdHMubWF4TW9udGggPD0gbW9udGgpKSB7XG4gICAgICAgICAgICBuZXh0ID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYyA9PT0gMCkge1xuICAgICAgICAgICAgaHRtbCArPSAnPGJ1dHRvbiBjbGFzcz1cInBpa2EtcHJldicgKyAocHJldiA/ICcnIDogJyBpcy1kaXNhYmxlZCcpICsgJ1wiIHR5cGU9XCJidXR0b25cIj4nICsgb3B0cy5pMThuLnByZXZpb3VzTW9udGggKyAnPC9idXR0b24+JztcbiAgICAgICAgfVxuICAgICAgICBpZiAoYyA9PT0gKGluc3RhbmNlLl9vLm51bWJlck9mTW9udGhzIC0gMSkgKSB7XG4gICAgICAgICAgICBodG1sICs9ICc8YnV0dG9uIGNsYXNzPVwicGlrYS1uZXh0JyArIChuZXh0ID8gJycgOiAnIGlzLWRpc2FibGVkJykgKyAnXCIgdHlwZT1cImJ1dHRvblwiPicgKyBvcHRzLmkxOG4ubmV4dE1vbnRoICsgJzwvYnV0dG9uPic7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaHRtbCArPSAnPC9kaXY+JztcbiAgICB9LFxuXG4gICAgcmVuZGVyVGFibGUgPSBmdW5jdGlvbihvcHRzLCBkYXRhLCByYW5kSWQpXG4gICAge1xuICAgICAgICByZXR1cm4gJzx0YWJsZSBjZWxscGFkZGluZz1cIjBcIiBjZWxsc3BhY2luZz1cIjBcIiBjbGFzcz1cInBpa2EtdGFibGVcIiByb2xlPVwiZ3JpZFwiIGFyaWEtbGFiZWxsZWRieT1cIicgKyByYW5kSWQgKyAnXCI+JyArIHJlbmRlckhlYWQob3B0cykgKyByZW5kZXJCb2R5KGRhdGEpICsgJzwvdGFibGU+JztcbiAgICB9LFxuXG5cbiAgICAvKipcbiAgICAgKiBQaWthZGF5IGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgUGlrYWRheSA9IGZ1bmN0aW9uKG9wdGlvbnMpXG4gICAge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBvcHRzID0gc2VsZi5jb25maWcob3B0aW9ucyk7XG5cbiAgICAgICAgc2VsZi5fb25Nb3VzZURvd24gPSBmdW5jdGlvbihlKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIXNlbGYuX3YpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xuICAgICAgICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghaGFzQ2xhc3ModGFyZ2V0LCAnaXMtZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgICAgIGlmIChoYXNDbGFzcyh0YXJnZXQsICdwaWthLWJ1dHRvbicpICYmICFoYXNDbGFzcyh0YXJnZXQsICdpcy1lbXB0eScpICYmICFoYXNDbGFzcyh0YXJnZXQucGFyZW50Tm9kZSwgJ2lzLWRpc2FibGVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXREYXRlKG5ldyBEYXRlKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGlrYS15ZWFyJyksIHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGlrYS1tb250aCcpLCB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXBpa2EtZGF5JykpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMuYm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0byhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5ibHVyRmllbGRPblNlbGVjdCAmJiBvcHRzLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMuZmllbGQuYmx1cigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaGFzQ2xhc3ModGFyZ2V0LCAncGlrYS1wcmV2JykpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wcmV2TW9udGgoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaGFzQ2xhc3ModGFyZ2V0LCAncGlrYS1uZXh0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5uZXh0TW9udGgoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWhhc0NsYXNzKHRhcmdldCwgJ3Bpa2Etc2VsZWN0JykpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIHRvdWNoIGV2ZW50IHByZXZlbnQgbW91c2UgZXZlbnRzIGVtdWxhdGlvblxuICAgICAgICAgICAgICAgIGlmIChlLnByZXZlbnREZWZhdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYuX2MgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGYuX29uQ2hhbmdlID0gZnVuY3Rpb24oZSlcbiAgICAgICAge1xuICAgICAgICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhc0NsYXNzKHRhcmdldCwgJ3Bpa2Etc2VsZWN0LW1vbnRoJykpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmdvdG9Nb250aCh0YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGFzQ2xhc3ModGFyZ2V0LCAncGlrYS1zZWxlY3QteWVhcicpKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5nb3RvWWVhcih0YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGYuX29uS2V5Q2hhbmdlID0gZnVuY3Rpb24oZSlcbiAgICAgICAge1xuICAgICAgICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xuXG4gICAgICAgICAgICBpZiAoc2VsZi5pc1Zpc2libGUoKSkge1xuXG4gICAgICAgICAgICAgICAgc3dpdGNoKGUua2V5Q29kZSl7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5maWVsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMuZmllbGQuYmx1cigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzc6XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFkanVzdERhdGUoJ3N1YnRyYWN0JywgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzODpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYWRqdXN0RGF0ZSgnc3VidHJhY3QnLCA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM5OlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGp1c3REYXRlKCdhZGQnLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGp1c3REYXRlKCdhZGQnLCA3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLl9vbklucHV0Q2hhbmdlID0gZnVuY3Rpb24oZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGRhdGU7XG5cbiAgICAgICAgICAgIGlmIChlLmZpcmVkQnkgPT09IHNlbGYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0cy5wYXJzZSkge1xuICAgICAgICAgICAgICAgIGRhdGUgPSBvcHRzLnBhcnNlKG9wdHMuZmllbGQudmFsdWUsIG9wdHMuZm9ybWF0KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaGFzTW9tZW50KSB7XG4gICAgICAgICAgICAgICAgZGF0ZSA9IG1vbWVudChvcHRzLmZpZWxkLnZhbHVlLCBvcHRzLmZvcm1hdCwgb3B0cy5mb3JtYXRTdHJpY3QpO1xuICAgICAgICAgICAgICAgIGRhdGUgPSAoZGF0ZSAmJiBkYXRlLmlzVmFsaWQoKSkgPyBkYXRlLnRvRGF0ZSgpIDogbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZShEYXRlLnBhcnNlKG9wdHMuZmllbGQudmFsdWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0RhdGUoZGF0ZSkpIHtcbiAgICAgICAgICAgICAgc2VsZi5zZXREYXRlKGRhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFzZWxmLl92KSB7XG4gICAgICAgICAgICAgICAgc2VsZi5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5fb25JbnB1dEZvY3VzID0gZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICBzZWxmLnNob3coKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLl9vbklucHV0Q2xpY2sgPSBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHNlbGYuc2hvdygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGYuX29uSW5wdXRCbHVyID0gZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBJRSBhbGxvd3MgcGlrYSBkaXYgdG8gZ2FpbiBmb2N1czsgY2F0Y2ggYmx1ciB0aGUgaW5wdXQgZmllbGRcbiAgICAgICAgICAgIHZhciBwRWwgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGlmIChoYXNDbGFzcyhwRWwsICdwaWthLXNpbmdsZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoKHBFbCA9IHBFbC5wYXJlbnROb2RlKSk7XG5cbiAgICAgICAgICAgIGlmICghc2VsZi5fYykge1xuICAgICAgICAgICAgICAgIHNlbGYuX2IgPSBzdG8oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH0sIDUwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlbGYuX2MgPSBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLl9vbkNsaWNrID0gZnVuY3Rpb24oZSlcbiAgICAgICAge1xuICAgICAgICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudCxcbiAgICAgICAgICAgICAgICBwRWwgPSB0YXJnZXQ7XG4gICAgICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaGFzRXZlbnRMaXN0ZW5lcnMgJiYgaGFzQ2xhc3ModGFyZ2V0LCAncGlrYS1zZWxlY3QnKSkge1xuICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0Lm9uY2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoJ29uY2hhbmdlJywgJ3JldHVybjsnKTtcbiAgICAgICAgICAgICAgICAgICAgYWRkRXZlbnQodGFyZ2V0LCAnY2hhbmdlJywgc2VsZi5fb25DaGFuZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzQ2xhc3MocEVsLCAncGlrYS1zaW5nbGUnKSB8fCBwRWwgPT09IG9wdHMudHJpZ2dlcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKChwRWwgPSBwRWwucGFyZW50Tm9kZSkpO1xuICAgICAgICAgICAgaWYgKHNlbGYuX3YgJiYgdGFyZ2V0ICE9PSBvcHRzLnRyaWdnZXIgJiYgcEVsICE9PSBvcHRzLnRyaWdnZXIpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHNlbGYuZWwuY2xhc3NOYW1lID0gJ3Bpa2Etc2luZ2xlJyArIChvcHRzLmlzUlRMID8gJyBpcy1ydGwnIDogJycpICsgKG9wdHMudGhlbWUgPyAnICcgKyBvcHRzLnRoZW1lIDogJycpO1xuXG4gICAgICAgIGFkZEV2ZW50KHNlbGYuZWwsICdtb3VzZWRvd24nLCBzZWxmLl9vbk1vdXNlRG93biwgdHJ1ZSk7XG4gICAgICAgIGFkZEV2ZW50KHNlbGYuZWwsICd0b3VjaGVuZCcsIHNlbGYuX29uTW91c2VEb3duLCB0cnVlKTtcbiAgICAgICAgYWRkRXZlbnQoc2VsZi5lbCwgJ2NoYW5nZScsIHNlbGYuX29uQ2hhbmdlKTtcbiAgICAgICAgYWRkRXZlbnQoZG9jdW1lbnQsICdrZXlkb3duJywgc2VsZi5fb25LZXlDaGFuZ2UpO1xuXG4gICAgICAgIGlmIChvcHRzLmZpZWxkKSB7XG4gICAgICAgICAgICBpZiAob3B0cy5jb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICBvcHRzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxmLmVsKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0cy5ib3VuZCkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2VsZi5lbCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG9wdHMuZmllbGQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2VsZi5lbCwgb3B0cy5maWVsZC5uZXh0U2libGluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhZGRFdmVudChvcHRzLmZpZWxkLCAnY2hhbmdlJywgc2VsZi5fb25JbnB1dENoYW5nZSk7XG5cbiAgICAgICAgICAgIGlmICghb3B0cy5kZWZhdWx0RGF0ZSkge1xuICAgICAgICAgICAgICAgIGlmIChoYXNNb21lbnQgJiYgb3B0cy5maWVsZC52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBvcHRzLmRlZmF1bHREYXRlID0gbW9tZW50KG9wdHMuZmllbGQudmFsdWUsIG9wdHMuZm9ybWF0KS50b0RhdGUoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvcHRzLmRlZmF1bHREYXRlID0gbmV3IERhdGUoRGF0ZS5wYXJzZShvcHRzLmZpZWxkLnZhbHVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9wdHMuc2V0RGVmYXVsdERhdGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRlZkRhdGUgPSBvcHRzLmRlZmF1bHREYXRlO1xuXG4gICAgICAgIGlmIChpc0RhdGUoZGVmRGF0ZSkpIHtcbiAgICAgICAgICAgIGlmIChvcHRzLnNldERlZmF1bHREYXRlKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5zZXREYXRlKGRlZkRhdGUsIHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxmLmdvdG9EYXRlKGRlZkRhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5nb3RvRGF0ZShuZXcgRGF0ZSgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRzLmJvdW5kKSB7XG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgIHNlbGYuZWwuY2xhc3NOYW1lICs9ICcgaXMtYm91bmQnO1xuICAgICAgICAgICAgYWRkRXZlbnQob3B0cy50cmlnZ2VyLCAnY2xpY2snLCBzZWxmLl9vbklucHV0Q2xpY2spO1xuICAgICAgICAgICAgYWRkRXZlbnQob3B0cy50cmlnZ2VyLCAnZm9jdXMnLCBzZWxmLl9vbklucHV0Rm9jdXMpO1xuICAgICAgICAgICAgYWRkRXZlbnQob3B0cy50cmlnZ2VyLCAnYmx1cicsIHNlbGYuX29uSW5wdXRCbHVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogcHVibGljIFBpa2FkYXkgQVBJXG4gICAgICovXG4gICAgUGlrYWRheS5wcm90b3R5cGUgPSB7XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogY29uZmlndXJlIGZ1bmN0aW9uYWxpdHlcbiAgICAgICAgICovXG4gICAgICAgIGNvbmZpZzogZnVuY3Rpb24ob3B0aW9ucylcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9vKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbyA9IGV4dGVuZCh7fSwgZGVmYXVsdHMsIHRydWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgb3B0cyA9IGV4dGVuZCh0aGlzLl9vLCBvcHRpb25zLCB0cnVlKTtcblxuICAgICAgICAgICAgb3B0cy5pc1JUTCA9ICEhb3B0cy5pc1JUTDtcblxuICAgICAgICAgICAgb3B0cy5maWVsZCA9IChvcHRzLmZpZWxkICYmIG9wdHMuZmllbGQubm9kZU5hbWUpID8gb3B0cy5maWVsZCA6IG51bGw7XG5cbiAgICAgICAgICAgIG9wdHMudGhlbWUgPSAodHlwZW9mIG9wdHMudGhlbWUpID09PSAnc3RyaW5nJyAmJiBvcHRzLnRoZW1lID8gb3B0cy50aGVtZSA6IG51bGw7XG5cbiAgICAgICAgICAgIG9wdHMuYm91bmQgPSAhIShvcHRzLmJvdW5kICE9PSB1bmRlZmluZWQgPyBvcHRzLmZpZWxkICYmIG9wdHMuYm91bmQgOiBvcHRzLmZpZWxkKTtcblxuICAgICAgICAgICAgb3B0cy50cmlnZ2VyID0gKG9wdHMudHJpZ2dlciAmJiBvcHRzLnRyaWdnZXIubm9kZU5hbWUpID8gb3B0cy50cmlnZ2VyIDogb3B0cy5maWVsZDtcblxuICAgICAgICAgICAgb3B0cy5kaXNhYmxlV2Vla2VuZHMgPSAhIW9wdHMuZGlzYWJsZVdlZWtlbmRzO1xuXG4gICAgICAgICAgICBvcHRzLmRpc2FibGVEYXlGbiA9ICh0eXBlb2Ygb3B0cy5kaXNhYmxlRGF5Rm4pID09PSAnZnVuY3Rpb24nID8gb3B0cy5kaXNhYmxlRGF5Rm4gOiBudWxsO1xuXG4gICAgICAgICAgICB2YXIgbm9tID0gcGFyc2VJbnQob3B0cy5udW1iZXJPZk1vbnRocywgMTApIHx8IDE7XG4gICAgICAgICAgICBvcHRzLm51bWJlck9mTW9udGhzID0gbm9tID4gNCA/IDQgOiBub207XG5cbiAgICAgICAgICAgIGlmICghaXNEYXRlKG9wdHMubWluRGF0ZSkpIHtcbiAgICAgICAgICAgICAgICBvcHRzLm1pbkRhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNEYXRlKG9wdHMubWF4RGF0ZSkpIHtcbiAgICAgICAgICAgICAgICBvcHRzLm1heERhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgob3B0cy5taW5EYXRlICYmIG9wdHMubWF4RGF0ZSkgJiYgb3B0cy5tYXhEYXRlIDwgb3B0cy5taW5EYXRlKSB7XG4gICAgICAgICAgICAgICAgb3B0cy5tYXhEYXRlID0gb3B0cy5taW5EYXRlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0cy5taW5EYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRNaW5EYXRlKG9wdHMubWluRGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0cy5tYXhEYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRNYXhEYXRlKG9wdHMubWF4RGF0ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc0FycmF5KG9wdHMueWVhclJhbmdlKSkge1xuICAgICAgICAgICAgICAgIHZhciBmYWxsYmFjayA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSAtIDEwO1xuICAgICAgICAgICAgICAgIG9wdHMueWVhclJhbmdlWzBdID0gcGFyc2VJbnQob3B0cy55ZWFyUmFuZ2VbMF0sIDEwKSB8fCBmYWxsYmFjaztcbiAgICAgICAgICAgICAgICBvcHRzLnllYXJSYW5nZVsxXSA9IHBhcnNlSW50KG9wdHMueWVhclJhbmdlWzFdLCAxMCkgfHwgZmFsbGJhY2s7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG9wdHMueWVhclJhbmdlID0gTWF0aC5hYnMocGFyc2VJbnQob3B0cy55ZWFyUmFuZ2UsIDEwKSkgfHwgZGVmYXVsdHMueWVhclJhbmdlO1xuICAgICAgICAgICAgICAgIGlmIChvcHRzLnllYXJSYW5nZSA+IDEwMCkge1xuICAgICAgICAgICAgICAgICAgICBvcHRzLnllYXJSYW5nZSA9IDEwMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBvcHRzO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZXR1cm4gYSBmb3JtYXR0ZWQgc3RyaW5nIG9mIHRoZSBjdXJyZW50IHNlbGVjdGlvbiAodXNpbmcgTW9tZW50LmpzIGlmIGF2YWlsYWJsZSlcbiAgICAgICAgICovXG4gICAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbihmb3JtYXQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGZvcm1hdCA9IGZvcm1hdCB8fCB0aGlzLl9vLmZvcm1hdDtcbiAgICAgICAgICAgIGlmICghaXNEYXRlKHRoaXMuX2QpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuX28udG9TdHJpbmcpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX28udG9TdHJpbmcodGhpcy5fZCwgZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYXNNb21lbnQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG1vbWVudCh0aGlzLl9kKS5mb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kLnRvRGF0ZVN0cmluZygpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZXR1cm4gYSBNb21lbnQuanMgb2JqZWN0IG9mIHRoZSBjdXJyZW50IHNlbGVjdGlvbiAoaWYgYXZhaWxhYmxlKVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0TW9tZW50OiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBoYXNNb21lbnQgPyBtb21lbnQodGhpcy5fZCkgOiBudWxsO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBzZXQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIGZyb20gYSBNb21lbnQuanMgb2JqZWN0IChpZiBhdmFpbGFibGUpXG4gICAgICAgICAqL1xuICAgICAgICBzZXRNb21lbnQ6IGZ1bmN0aW9uKGRhdGUsIHByZXZlbnRPblNlbGVjdClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKGhhc01vbWVudCAmJiBtb21lbnQuaXNNb21lbnQoZGF0ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldERhdGUoZGF0ZS50b0RhdGUoKSwgcHJldmVudE9uU2VsZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogcmV0dXJuIGEgRGF0ZSBvYmplY3Qgb2YgdGhlIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBnZXREYXRlOiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBpc0RhdGUodGhpcy5fZCkgPyBuZXcgRGF0ZSh0aGlzLl9kLmdldFRpbWUoKSkgOiBudWxsO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBzZXQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBzZXREYXRlOiBmdW5jdGlvbihkYXRlLCBwcmV2ZW50T25TZWxlY3QpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghZGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2QgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX28uZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fby5maWVsZC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBmaXJlRXZlbnQodGhpcy5fby5maWVsZCwgJ2NoYW5nZScsIHsgZmlyZWRCeTogdGhpcyB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kcmF3KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRhdGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKERhdGUucGFyc2UoZGF0ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc0RhdGUoZGF0ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBtaW4gPSB0aGlzLl9vLm1pbkRhdGUsXG4gICAgICAgICAgICAgICAgbWF4ID0gdGhpcy5fby5tYXhEYXRlO1xuXG4gICAgICAgICAgICBpZiAoaXNEYXRlKG1pbikgJiYgZGF0ZSA8IG1pbikge1xuICAgICAgICAgICAgICAgIGRhdGUgPSBtaW47XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzRGF0ZShtYXgpICYmIGRhdGUgPiBtYXgpIHtcbiAgICAgICAgICAgICAgICBkYXRlID0gbWF4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9kID0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkpO1xuICAgICAgICAgICAgc2V0VG9TdGFydE9mRGF5KHRoaXMuX2QpO1xuICAgICAgICAgICAgdGhpcy5nb3RvRGF0ZSh0aGlzLl9kKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX28uZmllbGQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vLmZpZWxkLnZhbHVlID0gdGhpcy50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGZpcmVFdmVudCh0aGlzLl9vLmZpZWxkLCAnY2hhbmdlJywgeyBmaXJlZEJ5OiB0aGlzIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFwcmV2ZW50T25TZWxlY3QgJiYgdHlwZW9mIHRoaXMuX28ub25TZWxlY3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vLm9uU2VsZWN0LmNhbGwodGhpcywgdGhpcy5nZXREYXRlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjaGFuZ2UgdmlldyB0byBhIHNwZWNpZmljIGRhdGVcbiAgICAgICAgICovXG4gICAgICAgIGdvdG9EYXRlOiBmdW5jdGlvbihkYXRlKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgbmV3Q2FsZW5kYXIgPSB0cnVlO1xuXG4gICAgICAgICAgICBpZiAoIWlzRGF0ZShkYXRlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuY2FsZW5kYXJzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpcnN0VmlzaWJsZURhdGUgPSBuZXcgRGF0ZSh0aGlzLmNhbGVuZGFyc1swXS55ZWFyLCB0aGlzLmNhbGVuZGFyc1swXS5tb250aCwgMSksXG4gICAgICAgICAgICAgICAgICAgIGxhc3RWaXNpYmxlRGF0ZSA9IG5ldyBEYXRlKHRoaXMuY2FsZW5kYXJzW3RoaXMuY2FsZW5kYXJzLmxlbmd0aC0xXS55ZWFyLCB0aGlzLmNhbGVuZGFyc1t0aGlzLmNhbGVuZGFycy5sZW5ndGgtMV0ubW9udGgsIDEpLFxuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlRGF0ZSA9IGRhdGUuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgZW5kIG9mIHRoZSBtb250aFxuICAgICAgICAgICAgICAgIGxhc3RWaXNpYmxlRGF0ZS5zZXRNb250aChsYXN0VmlzaWJsZURhdGUuZ2V0TW9udGgoKSsxKTtcbiAgICAgICAgICAgICAgICBsYXN0VmlzaWJsZURhdGUuc2V0RGF0ZShsYXN0VmlzaWJsZURhdGUuZ2V0RGF0ZSgpLTEpO1xuICAgICAgICAgICAgICAgIG5ld0NhbGVuZGFyID0gKHZpc2libGVEYXRlIDwgZmlyc3RWaXNpYmxlRGF0ZS5nZXRUaW1lKCkgfHwgbGFzdFZpc2libGVEYXRlLmdldFRpbWUoKSA8IHZpc2libGVEYXRlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG5ld0NhbGVuZGFyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWxlbmRhcnMgPSBbe1xuICAgICAgICAgICAgICAgICAgICBtb250aDogZGF0ZS5nZXRNb250aCgpLFxuICAgICAgICAgICAgICAgICAgICB5ZWFyOiBkYXRlLmdldEZ1bGxZZWFyKClcbiAgICAgICAgICAgICAgICB9XTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fby5tYWluQ2FsZW5kYXIgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxlbmRhcnNbMF0ubW9udGggKz0gMSAtIHRoaXMuX28ubnVtYmVyT2ZNb250aHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmFkanVzdENhbGVuZGFycygpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGFkanVzdERhdGU6IGZ1bmN0aW9uKHNpZ24sIGRheXMpIHtcblxuICAgICAgICAgICAgdmFyIGRheSA9IHRoaXMuZ2V0RGF0ZSgpIHx8IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICB2YXIgZGlmZmVyZW5jZSA9IHBhcnNlSW50KGRheXMpKjI0KjYwKjYwKjEwMDA7XG5cbiAgICAgICAgICAgIHZhciBuZXdEYXk7XG5cbiAgICAgICAgICAgIGlmIChzaWduID09PSAnYWRkJykge1xuICAgICAgICAgICAgICAgIG5ld0RheSA9IG5ldyBEYXRlKGRheS52YWx1ZU9mKCkgKyBkaWZmZXJlbmNlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2lnbiA9PT0gJ3N1YnRyYWN0Jykge1xuICAgICAgICAgICAgICAgIG5ld0RheSA9IG5ldyBEYXRlKGRheS52YWx1ZU9mKCkgLSBkaWZmZXJlbmNlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5zZXREYXRlKG5ld0RheSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYWRqdXN0Q2FsZW5kYXJzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJzWzBdID0gYWRqdXN0Q2FsZW5kYXIodGhpcy5jYWxlbmRhcnNbMF0pO1xuICAgICAgICAgICAgZm9yICh2YXIgYyA9IDE7IGMgPCB0aGlzLl9vLm51bWJlck9mTW9udGhzOyBjKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGVuZGFyc1tjXSA9IGFkanVzdENhbGVuZGFyKHtcbiAgICAgICAgICAgICAgICAgICAgbW9udGg6IHRoaXMuY2FsZW5kYXJzWzBdLm1vbnRoICsgYyxcbiAgICAgICAgICAgICAgICAgICAgeWVhcjogdGhpcy5jYWxlbmRhcnNbMF0ueWVhclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kcmF3KCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ290b1RvZGF5OiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuZ290b0RhdGUobmV3IERhdGUoKSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNoYW5nZSB2aWV3IHRvIGEgc3BlY2lmaWMgbW9udGggKHplcm8taW5kZXgsIGUuZy4gMDogSmFudWFyeSlcbiAgICAgICAgICovXG4gICAgICAgIGdvdG9Nb250aDogZnVuY3Rpb24obW9udGgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghaXNOYU4obW9udGgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWxlbmRhcnNbMF0ubW9udGggPSBwYXJzZUludChtb250aCwgMTApO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRqdXN0Q2FsZW5kYXJzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgbmV4dE1vbnRoOiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJzWzBdLm1vbnRoKys7XG4gICAgICAgICAgICB0aGlzLmFkanVzdENhbGVuZGFycygpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHByZXZNb250aDogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmNhbGVuZGFyc1swXS5tb250aC0tO1xuICAgICAgICAgICAgdGhpcy5hZGp1c3RDYWxlbmRhcnMoKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY2hhbmdlIHZpZXcgdG8gYSBzcGVjaWZpYyBmdWxsIHllYXIgKGUuZy4gXCIyMDEyXCIpXG4gICAgICAgICAqL1xuICAgICAgICBnb3RvWWVhcjogZnVuY3Rpb24oeWVhcilcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKCFpc05hTih5ZWFyKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJzWzBdLnllYXIgPSBwYXJzZUludCh5ZWFyLCAxMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGp1c3RDYWxlbmRhcnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY2hhbmdlIHRoZSBtaW5EYXRlXG4gICAgICAgICAqL1xuICAgICAgICBzZXRNaW5EYXRlOiBmdW5jdGlvbih2YWx1ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgaWYodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgc2V0VG9TdGFydE9mRGF5KHZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vLm1pbkRhdGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vLm1pblllYXIgID0gdmFsdWUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vLm1pbk1vbnRoID0gdmFsdWUuZ2V0TW9udGgoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fby5taW5EYXRlID0gZGVmYXVsdHMubWluRGF0ZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vLm1pblllYXIgID0gZGVmYXVsdHMubWluWWVhcjtcbiAgICAgICAgICAgICAgICB0aGlzLl9vLm1pbk1vbnRoID0gZGVmYXVsdHMubWluTW9udGg7XG4gICAgICAgICAgICAgICAgdGhpcy5fby5zdGFydFJhbmdlID0gZGVmYXVsdHMuc3RhcnRSYW5nZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5kcmF3KCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNoYW5nZSB0aGUgbWF4RGF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgc2V0TWF4RGF0ZTogZnVuY3Rpb24odmFsdWUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIHNldFRvU3RhcnRPZkRheSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fby5tYXhEYXRlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5fby5tYXhZZWFyID0gdmFsdWUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vLm1heE1vbnRoID0gdmFsdWUuZ2V0TW9udGgoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fby5tYXhEYXRlID0gZGVmYXVsdHMubWF4RGF0ZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vLm1heFllYXIgPSBkZWZhdWx0cy5tYXhZZWFyO1xuICAgICAgICAgICAgICAgIHRoaXMuX28ubWF4TW9udGggPSBkZWZhdWx0cy5tYXhNb250aDtcbiAgICAgICAgICAgICAgICB0aGlzLl9vLmVuZFJhbmdlID0gZGVmYXVsdHMuZW5kUmFuZ2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuZHJhdygpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldFN0YXJ0UmFuZ2U6IGZ1bmN0aW9uKHZhbHVlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9vLnN0YXJ0UmFuZ2UgPSB2YWx1ZTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXRFbmRSYW5nZTogZnVuY3Rpb24odmFsdWUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX28uZW5kUmFuZ2UgPSB2YWx1ZTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogcmVmcmVzaCB0aGUgSFRNTFxuICAgICAgICAgKi9cbiAgICAgICAgZHJhdzogZnVuY3Rpb24oZm9yY2UpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fdiAmJiAhZm9yY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb3B0cyA9IHRoaXMuX28sXG4gICAgICAgICAgICAgICAgbWluWWVhciA9IG9wdHMubWluWWVhcixcbiAgICAgICAgICAgICAgICBtYXhZZWFyID0gb3B0cy5tYXhZZWFyLFxuICAgICAgICAgICAgICAgIG1pbk1vbnRoID0gb3B0cy5taW5Nb250aCxcbiAgICAgICAgICAgICAgICBtYXhNb250aCA9IG9wdHMubWF4TW9udGgsXG4gICAgICAgICAgICAgICAgaHRtbCA9ICcnLFxuICAgICAgICAgICAgICAgIHJhbmRJZDtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX3kgPD0gbWluWWVhcikge1xuICAgICAgICAgICAgICAgIHRoaXMuX3kgPSBtaW5ZZWFyO1xuICAgICAgICAgICAgICAgIGlmICghaXNOYU4obWluTW9udGgpICYmIHRoaXMuX20gPCBtaW5Nb250aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tID0gbWluTW9udGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuX3kgPj0gbWF4WWVhcikge1xuICAgICAgICAgICAgICAgIHRoaXMuX3kgPSBtYXhZZWFyO1xuICAgICAgICAgICAgICAgIGlmICghaXNOYU4obWF4TW9udGgpICYmIHRoaXMuX20gPiBtYXhNb250aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tID0gbWF4TW9udGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByYW5kSWQgPSAncGlrYS10aXRsZS0nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikucmVwbGFjZSgvW15hLXpdKy9nLCAnJykuc3Vic3RyKDAsIDIpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IG9wdHMubnVtYmVyT2ZNb250aHM7IGMrKykge1xuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJwaWthLWxlbmRhclwiPicgKyByZW5kZXJUaXRsZSh0aGlzLCBjLCB0aGlzLmNhbGVuZGFyc1tjXS55ZWFyLCB0aGlzLmNhbGVuZGFyc1tjXS5tb250aCwgdGhpcy5jYWxlbmRhcnNbMF0ueWVhciwgcmFuZElkKSArIHRoaXMucmVuZGVyKHRoaXMuY2FsZW5kYXJzW2NdLnllYXIsIHRoaXMuY2FsZW5kYXJzW2NdLm1vbnRoLCByYW5kSWQpICsgJzwvZGl2Pic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuZWwuaW5uZXJIVE1MID0gaHRtbDtcblxuICAgICAgICAgICAgaWYgKG9wdHMuYm91bmQpIHtcbiAgICAgICAgICAgICAgICBpZihvcHRzLmZpZWxkLnR5cGUgIT09ICdoaWRkZW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0byhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMudHJpZ2dlci5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICB9LCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5fby5vbkRyYXcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vLm9uRHJhdyh0aGlzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdHMuYm91bmQpIHtcbiAgICAgICAgICAgICAgICAvLyBsZXQgdGhlIHNjcmVlbiByZWFkZXIgdXNlciBrbm93IHRvIHVzZSBhcnJvdyBrZXlzXG4gICAgICAgICAgICAgICAgb3B0cy5maWVsZC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnVXNlIHRoZSBhcnJvdyBrZXlzIHRvIHBpY2sgYSBkYXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgYWRqdXN0UG9zaXRpb246IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGZpZWxkLCBwRWwsIHdpZHRoLCBoZWlnaHQsIHZpZXdwb3J0V2lkdGgsIHZpZXdwb3J0SGVpZ2h0LCBzY3JvbGxUb3AsIGxlZnQsIHRvcCwgY2xpZW50UmVjdDtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX28uY29udGFpbmVyKSByZXR1cm47XG5cbiAgICAgICAgICAgIHRoaXMuZWwuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuXG4gICAgICAgICAgICBmaWVsZCA9IHRoaXMuX28udHJpZ2dlcjtcbiAgICAgICAgICAgIHBFbCA9IGZpZWxkO1xuICAgICAgICAgICAgd2lkdGggPSB0aGlzLmVsLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgaGVpZ2h0ID0gdGhpcy5lbC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICB2aWV3cG9ydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xuICAgICAgICAgICAgdmlld3BvcnRIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgIHNjcm9sbFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGZpZWxkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGNsaWVudFJlY3QgPSBmaWVsZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICBsZWZ0ID0gY2xpZW50UmVjdC5sZWZ0ICsgd2luZG93LnBhZ2VYT2Zmc2V0O1xuICAgICAgICAgICAgICAgIHRvcCA9IGNsaWVudFJlY3QuYm90dG9tICsgd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZWZ0ID0gcEVsLm9mZnNldExlZnQ7XG4gICAgICAgICAgICAgICAgdG9wICA9IHBFbC5vZmZzZXRUb3AgKyBwRWwub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgIHdoaWxlKChwRWwgPSBwRWwub2Zmc2V0UGFyZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0ICs9IHBFbC5vZmZzZXRMZWZ0O1xuICAgICAgICAgICAgICAgICAgICB0b3AgICs9IHBFbC5vZmZzZXRUb3A7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBkZWZhdWx0IHBvc2l0aW9uIGlzIGJvdHRvbSAmIGxlZnRcbiAgICAgICAgICAgIGlmICgodGhpcy5fby5yZXBvc2l0aW9uICYmIGxlZnQgKyB3aWR0aCA+IHZpZXdwb3J0V2lkdGgpIHx8XG4gICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vLnBvc2l0aW9uLmluZGV4T2YoJ3JpZ2h0JykgPiAtMSAmJlxuICAgICAgICAgICAgICAgICAgICBsZWZ0IC0gd2lkdGggKyBmaWVsZC5vZmZzZXRXaWR0aCA+IDBcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBsZWZ0ID0gbGVmdCAtIHdpZHRoICsgZmllbGQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKHRoaXMuX28ucmVwb3NpdGlvbiAmJiB0b3AgKyBoZWlnaHQgPiB2aWV3cG9ydEhlaWdodCArIHNjcm9sbFRvcCkgfHxcbiAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX28ucG9zaXRpb24uaW5kZXhPZigndG9wJykgPiAtMSAmJlxuICAgICAgICAgICAgICAgICAgICB0b3AgLSBoZWlnaHQgLSBmaWVsZC5vZmZzZXRIZWlnaHQgPiAwXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdG9wID0gdG9wIC0gaGVpZ2h0IC0gZmllbGQub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmVsLnN0eWxlLmxlZnQgPSBsZWZ0ICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMuZWwuc3R5bGUudG9wID0gdG9wICsgJ3B4JztcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogcmVuZGVyIEhUTUwgZm9yIGEgcGFydGljdWxhciBtb250aFxuICAgICAgICAgKi9cbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbih5ZWFyLCBtb250aCwgcmFuZElkKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgb3B0cyAgID0gdGhpcy5fbyxcbiAgICAgICAgICAgICAgICBub3cgICAgPSBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgIGRheXMgICA9IGdldERheXNJbk1vbnRoKHllYXIsIG1vbnRoKSxcbiAgICAgICAgICAgICAgICBiZWZvcmUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgMSkuZ2V0RGF5KCksXG4gICAgICAgICAgICAgICAgZGF0YSAgID0gW10sXG4gICAgICAgICAgICAgICAgcm93ICAgID0gW107XG4gICAgICAgICAgICBzZXRUb1N0YXJ0T2ZEYXkobm93KTtcbiAgICAgICAgICAgIGlmIChvcHRzLmZpcnN0RGF5ID4gMCkge1xuICAgICAgICAgICAgICAgIGJlZm9yZSAtPSBvcHRzLmZpcnN0RGF5O1xuICAgICAgICAgICAgICAgIGlmIChiZWZvcmUgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZSArPSA3O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwcmV2aW91c01vbnRoID0gbW9udGggPT09IDAgPyAxMSA6IG1vbnRoIC0gMSxcbiAgICAgICAgICAgICAgICBuZXh0TW9udGggPSBtb250aCA9PT0gMTEgPyAwIDogbW9udGggKyAxLFxuICAgICAgICAgICAgICAgIHllYXJPZlByZXZpb3VzTW9udGggPSBtb250aCA9PT0gMCA/IHllYXIgLSAxIDogeWVhcixcbiAgICAgICAgICAgICAgICB5ZWFyT2ZOZXh0TW9udGggPSBtb250aCA9PT0gMTEgPyB5ZWFyICsgMSA6IHllYXIsXG4gICAgICAgICAgICAgICAgZGF5c0luUHJldmlvdXNNb250aCA9IGdldERheXNJbk1vbnRoKHllYXJPZlByZXZpb3VzTW9udGgsIHByZXZpb3VzTW9udGgpO1xuICAgICAgICAgICAgdmFyIGNlbGxzID0gZGF5cyArIGJlZm9yZSxcbiAgICAgICAgICAgICAgICBhZnRlciA9IGNlbGxzO1xuICAgICAgICAgICAgd2hpbGUoYWZ0ZXIgPiA3KSB7XG4gICAgICAgICAgICAgICAgYWZ0ZXIgLT0gNztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNlbGxzICs9IDcgLSBhZnRlcjtcbiAgICAgICAgICAgIHZhciBpc1dlZWtTZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIHIgPSAwOyBpIDwgY2VsbHM7IGkrKylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF5ID0gbmV3IERhdGUoeWVhciwgbW9udGgsIDEgKyAoaSAtIGJlZm9yZSkpLFxuICAgICAgICAgICAgICAgICAgICBpc1NlbGVjdGVkID0gaXNEYXRlKHRoaXMuX2QpID8gY29tcGFyZURhdGVzKGRheSwgdGhpcy5fZCkgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNUb2RheSA9IGNvbXBhcmVEYXRlcyhkYXksIG5vdyksXG4gICAgICAgICAgICAgICAgICAgIGhhc0V2ZW50ID0gb3B0cy5ldmVudHMuaW5kZXhPZihkYXkudG9EYXRlU3RyaW5nKCkpICE9PSAtMSA/IHRydWUgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNFbXB0eSA9IGkgPCBiZWZvcmUgfHwgaSA+PSAoZGF5cyArIGJlZm9yZSksXG4gICAgICAgICAgICAgICAgICAgIGRheU51bWJlciA9IDEgKyAoaSAtIGJlZm9yZSksXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoTnVtYmVyID0gbW9udGgsXG4gICAgICAgICAgICAgICAgICAgIHllYXJOdW1iZXIgPSB5ZWFyLFxuICAgICAgICAgICAgICAgICAgICBpc1N0YXJ0UmFuZ2UgPSBvcHRzLnN0YXJ0UmFuZ2UgJiYgY29tcGFyZURhdGVzKG9wdHMuc3RhcnRSYW5nZSwgZGF5KSxcbiAgICAgICAgICAgICAgICAgICAgaXNFbmRSYW5nZSA9IG9wdHMuZW5kUmFuZ2UgJiYgY29tcGFyZURhdGVzKG9wdHMuZW5kUmFuZ2UsIGRheSksXG4gICAgICAgICAgICAgICAgICAgIGlzSW5SYW5nZSA9IG9wdHMuc3RhcnRSYW5nZSAmJiBvcHRzLmVuZFJhbmdlICYmIG9wdHMuc3RhcnRSYW5nZSA8IGRheSAmJiBkYXkgPCBvcHRzLmVuZFJhbmdlLFxuICAgICAgICAgICAgICAgICAgICBpc0Rpc2FibGVkID0gKG9wdHMubWluRGF0ZSAmJiBkYXkgPCBvcHRzLm1pbkRhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAob3B0cy5tYXhEYXRlICYmIGRheSA+IG9wdHMubWF4RGF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvcHRzLmRpc2FibGVXZWVrZW5kcyAmJiBpc1dlZWtlbmQoZGF5KSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvcHRzLmRpc2FibGVEYXlGbiAmJiBvcHRzLmRpc2FibGVEYXlGbihkYXkpKTtcblxuICAgICAgICAgICAgICAgIGlmIChpc0VtcHR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpIDwgYmVmb3JlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXlOdW1iZXIgPSBkYXlzSW5QcmV2aW91c01vbnRoICsgZGF5TnVtYmVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhOdW1iZXIgPSBwcmV2aW91c01vbnRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgeWVhck51bWJlciA9IHllYXJPZlByZXZpb3VzTW9udGg7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXlOdW1iZXIgPSBkYXlOdW1iZXIgLSBkYXlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhOdW1iZXIgPSBuZXh0TW9udGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB5ZWFyTnVtYmVyID0geWVhck9mTmV4dE1vbnRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGRheUNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRheTogZGF5TnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9udGg6IG1vbnRoTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgeWVhcjogeWVhck51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0V2ZW50OiBoYXNFdmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWQ6IGlzU2VsZWN0ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1RvZGF5OiBpc1RvZGF5LFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNEaXNhYmxlZDogaXNEaXNhYmxlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRW1wdHk6IGlzRW1wdHksXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1N0YXJ0UmFuZ2U6IGlzU3RhcnRSYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRW5kUmFuZ2U6IGlzRW5kUmFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0luUmFuZ2U6IGlzSW5SYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dEYXlzSW5OZXh0QW5kUHJldmlvdXNNb250aHM6IG9wdHMuc2hvd0RheXNJbk5leHRBbmRQcmV2aW91c01vbnRocyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZVNlbGVjdGlvbkRheXNJbk5leHRBbmRQcmV2aW91c01vbnRoczogb3B0cy5lbmFibGVTZWxlY3Rpb25EYXlzSW5OZXh0QW5kUHJldmlvdXNNb250aHNcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGlmIChvcHRzLnBpY2tXaG9sZVdlZWsgJiYgaXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBpc1dlZWtTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcm93LnB1c2gocmVuZGVyRGF5KGRheUNvbmZpZykpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCsrciA9PT0gNykge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5zaG93V2Vla051bWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93LnVuc2hpZnQocmVuZGVyV2VlayhpIC0gYmVmb3JlLCBtb250aCwgeWVhcikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaChyZW5kZXJSb3cocm93LCBvcHRzLmlzUlRMLCBvcHRzLnBpY2tXaG9sZVdlZWssIGlzV2Vla1NlbGVjdGVkKSk7XG4gICAgICAgICAgICAgICAgICAgIHJvdyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICByID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaXNXZWVrU2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVuZGVyVGFibGUob3B0cywgZGF0YSwgcmFuZElkKTtcbiAgICAgICAgfSxcblxuICAgICAgICBpc1Zpc2libGU6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Y7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2hvdzogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNWaXNpYmxlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl92ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXcoKTtcbiAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCAnaXMtaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX28uYm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkRXZlbnQoZG9jdW1lbnQsICdjbGljaycsIHRoaXMuX29uQ2xpY2spO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkanVzdFBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5fby5vbk9wZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fby5vbk9wZW4uY2FsbCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgaGlkZTogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgdiA9IHRoaXMuX3Y7XG4gICAgICAgICAgICBpZiAodiAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fby5ib3VuZCkge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVFdmVudChkb2N1bWVudCwgJ2NsaWNrJywgdGhpcy5fb25DbGljayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZWwuc3R5bGUucG9zaXRpb24gPSAnc3RhdGljJzsgLy8gcmVzZXRcbiAgICAgICAgICAgICAgICB0aGlzLmVsLnN0eWxlLmxlZnQgPSAnYXV0byc7XG4gICAgICAgICAgICAgICAgdGhpcy5lbC5zdHlsZS50b3AgPSAnYXV0byc7XG4gICAgICAgICAgICAgICAgYWRkQ2xhc3ModGhpcy5lbCwgJ2lzLWhpZGRlbicpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3YgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAodiAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB0aGlzLl9vLm9uQ2xvc2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fby5vbkNsb3NlLmNhbGwodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHQU1FIE9WRVJcbiAgICAgICAgICovXG4gICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICByZW1vdmVFdmVudCh0aGlzLmVsLCAnbW91c2Vkb3duJywgdGhpcy5fb25Nb3VzZURvd24sIHRydWUpO1xuICAgICAgICAgICAgcmVtb3ZlRXZlbnQodGhpcy5lbCwgJ3RvdWNoZW5kJywgdGhpcy5fb25Nb3VzZURvd24sIHRydWUpO1xuICAgICAgICAgICAgcmVtb3ZlRXZlbnQodGhpcy5lbCwgJ2NoYW5nZScsIHRoaXMuX29uQ2hhbmdlKTtcbiAgICAgICAgICAgIHJlbW92ZUV2ZW50KGRvY3VtZW50LCAna2V5ZG93bicsIHRoaXMuX29uS2V5Q2hhbmdlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9vLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlRXZlbnQodGhpcy5fby5maWVsZCwgJ2NoYW5nZScsIHRoaXMuX29uSW5wdXRDaGFuZ2UpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vLmJvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUV2ZW50KHRoaXMuX28udHJpZ2dlciwgJ2NsaWNrJywgdGhpcy5fb25JbnB1dENsaWNrKTtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRXZlbnQodGhpcy5fby50cmlnZ2VyLCAnZm9jdXMnLCB0aGlzLl9vbklucHV0Rm9jdXMpO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVFdmVudCh0aGlzLl9vLnRyaWdnZXIsICdibHVyJywgdGhpcy5fb25JbnB1dEJsdXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVsLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICByZXR1cm4gUGlrYWRheTtcblxufSkpO1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIHN0cmljdFVyaUVuY29kZSA9IHJlcXVpcmUoJ3N0cmljdC11cmktZW5jb2RlJyk7XG52YXIgb2JqZWN0QXNzaWduID0gcmVxdWlyZSgnb2JqZWN0LWFzc2lnbicpO1xudmFyIGRlY29kZUNvbXBvbmVudCA9IHJlcXVpcmUoJ2RlY29kZS11cmktY29tcG9uZW50Jyk7XG5cbmZ1bmN0aW9uIGVuY29kZXJGb3JBcnJheUZvcm1hdChvcHRzKSB7XG5cdHN3aXRjaCAob3B0cy5hcnJheUZvcm1hdCkge1xuXHRcdGNhc2UgJ2luZGV4Jzpcblx0XHRcdHJldHVybiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgaW5kZXgpIHtcblx0XHRcdFx0cmV0dXJuIHZhbHVlID09PSBudWxsID8gW1xuXHRcdFx0XHRcdGVuY29kZShrZXksIG9wdHMpLFxuXHRcdFx0XHRcdCdbJyxcblx0XHRcdFx0XHRpbmRleCxcblx0XHRcdFx0XHQnXSdcblx0XHRcdFx0XS5qb2luKCcnKSA6IFtcblx0XHRcdFx0XHRlbmNvZGUoa2V5LCBvcHRzKSxcblx0XHRcdFx0XHQnWycsXG5cdFx0XHRcdFx0ZW5jb2RlKGluZGV4LCBvcHRzKSxcblx0XHRcdFx0XHQnXT0nLFxuXHRcdFx0XHRcdGVuY29kZSh2YWx1ZSwgb3B0cylcblx0XHRcdFx0XS5qb2luKCcnKTtcblx0XHRcdH07XG5cblx0XHRjYXNlICdicmFja2V0Jzpcblx0XHRcdHJldHVybiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHRcdFx0XHRyZXR1cm4gdmFsdWUgPT09IG51bGwgPyBlbmNvZGUoa2V5LCBvcHRzKSA6IFtcblx0XHRcdFx0XHRlbmNvZGUoa2V5LCBvcHRzKSxcblx0XHRcdFx0XHQnW109Jyxcblx0XHRcdFx0XHRlbmNvZGUodmFsdWUsIG9wdHMpXG5cdFx0XHRcdF0uam9pbignJyk7XG5cdFx0XHR9O1xuXG5cdFx0ZGVmYXVsdDpcblx0XHRcdHJldHVybiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHRcdFx0XHRyZXR1cm4gdmFsdWUgPT09IG51bGwgPyBlbmNvZGUoa2V5LCBvcHRzKSA6IFtcblx0XHRcdFx0XHRlbmNvZGUoa2V5LCBvcHRzKSxcblx0XHRcdFx0XHQnPScsXG5cdFx0XHRcdFx0ZW5jb2RlKHZhbHVlLCBvcHRzKVxuXHRcdFx0XHRdLmpvaW4oJycpO1xuXHRcdFx0fTtcblx0fVxufVxuXG5mdW5jdGlvbiBwYXJzZXJGb3JBcnJheUZvcm1hdChvcHRzKSB7XG5cdHZhciByZXN1bHQ7XG5cblx0c3dpdGNoIChvcHRzLmFycmF5Rm9ybWF0KSB7XG5cdFx0Y2FzZSAnaW5kZXgnOlxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uIChrZXksIHZhbHVlLCBhY2N1bXVsYXRvcikge1xuXHRcdFx0XHRyZXN1bHQgPSAvXFxbKFxcZCopXFxdJC8uZXhlYyhrZXkpO1xuXG5cdFx0XHRcdGtleSA9IGtleS5yZXBsYWNlKC9cXFtcXGQqXFxdJC8sICcnKTtcblxuXHRcdFx0XHRpZiAoIXJlc3VsdCkge1xuXHRcdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSB2YWx1ZTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoYWNjdW11bGF0b3Jba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IHt9O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XVtyZXN1bHRbMV1dID0gdmFsdWU7XG5cdFx0XHR9O1xuXG5cdFx0Y2FzZSAnYnJhY2tldCc6XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24gKGtleSwgdmFsdWUsIGFjY3VtdWxhdG9yKSB7XG5cdFx0XHRcdHJlc3VsdCA9IC8oXFxbXFxdKSQvLmV4ZWMoa2V5KTtcblx0XHRcdFx0a2V5ID0ga2V5LnJlcGxhY2UoL1xcW1xcXSQvLCAnJyk7XG5cblx0XHRcdFx0aWYgKCFyZXN1bHQpIHtcblx0XHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0gdmFsdWU7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGFjY3VtdWxhdG9yW2tleV0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSBbdmFsdWVdO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSBbXS5jb25jYXQoYWNjdW11bGF0b3Jba2V5XSwgdmFsdWUpO1xuXHRcdFx0fTtcblxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24gKGtleSwgdmFsdWUsIGFjY3VtdWxhdG9yKSB7XG5cdFx0XHRcdGlmIChhY2N1bXVsYXRvcltrZXldID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0gdmFsdWU7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IFtdLmNvbmNhdChhY2N1bXVsYXRvcltrZXldLCB2YWx1ZSk7XG5cdFx0XHR9O1xuXHR9XG59XG5cbmZ1bmN0aW9uIGVuY29kZSh2YWx1ZSwgb3B0cykge1xuXHRpZiAob3B0cy5lbmNvZGUpIHtcblx0XHRyZXR1cm4gb3B0cy5zdHJpY3QgPyBzdHJpY3RVcmlFbmNvZGUodmFsdWUpIDogZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcblx0fVxuXG5cdHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24ga2V5c1NvcnRlcihpbnB1dCkge1xuXHRpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0XHRyZXR1cm4gaW5wdXQuc29ydCgpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcpIHtcblx0XHRyZXR1cm4ga2V5c1NvcnRlcihPYmplY3Qua2V5cyhpbnB1dCkpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcblx0XHRcdHJldHVybiBOdW1iZXIoYSkgLSBOdW1iZXIoYik7XG5cdFx0fSkubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRcdHJldHVybiBpbnB1dFtrZXldO1xuXHRcdH0pO1xuXHR9XG5cblx0cmV0dXJuIGlucHV0O1xufVxuXG5leHBvcnRzLmV4dHJhY3QgPSBmdW5jdGlvbiAoc3RyKSB7XG5cdHJldHVybiBzdHIuc3BsaXQoJz8nKVsxXSB8fCAnJztcbn07XG5cbmV4cG9ydHMucGFyc2UgPSBmdW5jdGlvbiAoc3RyLCBvcHRzKSB7XG5cdG9wdHMgPSBvYmplY3RBc3NpZ24oe2FycmF5Rm9ybWF0OiAnbm9uZSd9LCBvcHRzKTtcblxuXHR2YXIgZm9ybWF0dGVyID0gcGFyc2VyRm9yQXJyYXlGb3JtYXQob3B0cyk7XG5cblx0Ly8gQ3JlYXRlIGFuIG9iamVjdCB3aXRoIG5vIHByb3RvdHlwZVxuXHQvLyBodHRwczovL2dpdGh1Yi5jb20vc2luZHJlc29yaHVzL3F1ZXJ5LXN0cmluZy9pc3N1ZXMvNDdcblx0dmFyIHJldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cblx0aWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKSB7XG5cdFx0cmV0dXJuIHJldDtcblx0fVxuXG5cdHN0ciA9IHN0ci50cmltKCkucmVwbGFjZSgvXihcXD98I3wmKS8sICcnKTtcblxuXHRpZiAoIXN0cikge1xuXHRcdHJldHVybiByZXQ7XG5cdH1cblxuXHRzdHIuc3BsaXQoJyYnKS5mb3JFYWNoKGZ1bmN0aW9uIChwYXJhbSkge1xuXHRcdHZhciBwYXJ0cyA9IHBhcmFtLnJlcGxhY2UoL1xcKy9nLCAnICcpLnNwbGl0KCc9Jyk7XG5cdFx0Ly8gRmlyZWZveCAocHJlIDQwKSBkZWNvZGVzIGAlM0RgIHRvIGA9YFxuXHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zaW5kcmVzb3JodXMvcXVlcnktc3RyaW5nL3B1bGwvMzdcblx0XHR2YXIga2V5ID0gcGFydHMuc2hpZnQoKTtcblx0XHR2YXIgdmFsID0gcGFydHMubGVuZ3RoID4gMCA/IHBhcnRzLmpvaW4oJz0nKSA6IHVuZGVmaW5lZDtcblxuXHRcdC8vIG1pc3NpbmcgYD1gIHNob3VsZCBiZSBgbnVsbGA6XG5cdFx0Ly8gaHR0cDovL3czLm9yZy9UUi8yMDEyL1dELXVybC0yMDEyMDUyNC8jY29sbGVjdC11cmwtcGFyYW1ldGVyc1xuXHRcdHZhbCA9IHZhbCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGRlY29kZUNvbXBvbmVudCh2YWwpO1xuXG5cdFx0Zm9ybWF0dGVyKGRlY29kZUNvbXBvbmVudChrZXkpLCB2YWwsIHJldCk7XG5cdH0pO1xuXG5cdHJldHVybiBPYmplY3Qua2V5cyhyZXQpLnNvcnQoKS5yZWR1Y2UoZnVuY3Rpb24gKHJlc3VsdCwga2V5KSB7XG5cdFx0dmFyIHZhbCA9IHJldFtrZXldO1xuXHRcdGlmIChCb29sZWFuKHZhbCkgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkodmFsKSkge1xuXHRcdFx0Ly8gU29ydCBvYmplY3Qga2V5cywgbm90IHZhbHVlc1xuXHRcdFx0cmVzdWx0W2tleV0gPSBrZXlzU29ydGVyKHZhbCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlc3VsdFtrZXldID0gdmFsO1xuXHRcdH1cblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH0sIE9iamVjdC5jcmVhdGUobnVsbCkpO1xufTtcblxuZXhwb3J0cy5zdHJpbmdpZnkgPSBmdW5jdGlvbiAob2JqLCBvcHRzKSB7XG5cdHZhciBkZWZhdWx0cyA9IHtcblx0XHRlbmNvZGU6IHRydWUsXG5cdFx0c3RyaWN0OiB0cnVlLFxuXHRcdGFycmF5Rm9ybWF0OiAnbm9uZSdcblx0fTtcblxuXHRvcHRzID0gb2JqZWN0QXNzaWduKGRlZmF1bHRzLCBvcHRzKTtcblxuXHR2YXIgZm9ybWF0dGVyID0gZW5jb2RlckZvckFycmF5Rm9ybWF0KG9wdHMpO1xuXG5cdHJldHVybiBvYmogPyBPYmplY3Qua2V5cyhvYmopLnNvcnQoKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHRcdHZhciB2YWwgPSBvYmpba2V5XTtcblxuXHRcdGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0cmV0dXJuICcnO1xuXHRcdH1cblxuXHRcdGlmICh2YWwgPT09IG51bGwpIHtcblx0XHRcdHJldHVybiBlbmNvZGUoa2V5LCBvcHRzKTtcblx0XHR9XG5cblx0XHRpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG5cdFx0XHR2YXIgcmVzdWx0ID0gW107XG5cblx0XHRcdHZhbC5zbGljZSgpLmZvckVhY2goZnVuY3Rpb24gKHZhbDIpIHtcblx0XHRcdFx0aWYgKHZhbDIgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJlc3VsdC5wdXNoKGZvcm1hdHRlcihrZXksIHZhbDIsIHJlc3VsdC5sZW5ndGgpKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gcmVzdWx0LmpvaW4oJyYnKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZW5jb2RlKGtleSwgb3B0cykgKyAnPScgKyBlbmNvZGUodmFsLCBvcHRzKTtcblx0fSkuZmlsdGVyKGZ1bmN0aW9uICh4KSB7XG5cdFx0cmV0dXJuIHgubGVuZ3RoID4gMDtcblx0fSkuam9pbignJicpIDogJyc7XG59O1xuIiwiLyoqIVxuICogU29ydGFibGVcbiAqIEBhdXRob3JcdFJ1YmFYYSAgIDx0cmFzaEBydWJheGEub3JnPlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuKGZ1bmN0aW9uIHNvcnRhYmxlTW9kdWxlKGZhY3RvcnkpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0ZGVmaW5lKGZhY3RvcnkpO1xuXHR9XG5cdGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgIT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHR9XG5cdGVsc2Uge1xuXHRcdC8qIGpzaGludCBzdWI6dHJ1ZSAqL1xuXHRcdHdpbmRvd1tcIlNvcnRhYmxlXCJdID0gZmFjdG9yeSgpO1xuXHR9XG59KShmdW5jdGlvbiBzb3J0YWJsZUZhY3RvcnkoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGlmICh0eXBlb2Ygd2luZG93ID09IFwidW5kZWZpbmVkXCIgfHwgIXdpbmRvdy5kb2N1bWVudCkge1xuXHRcdHJldHVybiBmdW5jdGlvbiBzb3J0YWJsZUVycm9yKCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiU29ydGFibGUuanMgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50XCIpO1xuXHRcdH07XG5cdH1cblxuXHR2YXIgZHJhZ0VsLFxuXHRcdHBhcmVudEVsLFxuXHRcdGdob3N0RWwsXG5cdFx0Y2xvbmVFbCxcblx0XHRyb290RWwsXG5cdFx0bmV4dEVsLFxuXHRcdGxhc3REb3duRWwsXG5cblx0XHRzY3JvbGxFbCxcblx0XHRzY3JvbGxQYXJlbnRFbCxcblx0XHRzY3JvbGxDdXN0b21GbixcblxuXHRcdGxhc3RFbCxcblx0XHRsYXN0Q1NTLFxuXHRcdGxhc3RQYXJlbnRDU1MsXG5cblx0XHRvbGRJbmRleCxcblx0XHRuZXdJbmRleCxcblxuXHRcdGFjdGl2ZUdyb3VwLFxuXHRcdHB1dFNvcnRhYmxlLFxuXG5cdFx0YXV0b1Njcm9sbCA9IHt9LFxuXG5cdFx0dGFwRXZ0LFxuXHRcdHRvdWNoRXZ0LFxuXG5cdFx0bW92ZWQsXG5cblx0XHQvKiogQGNvbnN0ICovXG5cdFx0Ul9TUEFDRSA9IC9cXHMrL2csXG5cdFx0Ul9GTE9BVCA9IC9sZWZ0fHJpZ2h0fGlubGluZS8sXG5cblx0XHRleHBhbmRvID0gJ1NvcnRhYmxlJyArIChuZXcgRGF0ZSkuZ2V0VGltZSgpLFxuXG5cdFx0d2luID0gd2luZG93LFxuXHRcdGRvY3VtZW50ID0gd2luLmRvY3VtZW50LFxuXHRcdHBhcnNlSW50ID0gd2luLnBhcnNlSW50LFxuXG5cdFx0JCA9IHdpbi5qUXVlcnkgfHwgd2luLlplcHRvLFxuXHRcdFBvbHltZXIgPSB3aW4uUG9seW1lcixcblxuXHRcdGNhcHR1cmVNb2RlID0gZmFsc2UsXG5cblx0XHRzdXBwb3J0RHJhZ2dhYmxlID0gISEoJ2RyYWdnYWJsZScgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpLFxuXHRcdHN1cHBvcnRDc3NQb2ludGVyRXZlbnRzID0gKGZ1bmN0aW9uIChlbCkge1xuXHRcdFx0Ly8gZmFsc2Ugd2hlbiBJRTExXG5cdFx0XHRpZiAoISFuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9UcmlkZW50LipydlsgOl0/MTFcXC4vKSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3gnKTtcblx0XHRcdGVsLnN0eWxlLmNzc1RleHQgPSAncG9pbnRlci1ldmVudHM6YXV0byc7XG5cdFx0XHRyZXR1cm4gZWwuc3R5bGUucG9pbnRlckV2ZW50cyA9PT0gJ2F1dG8nO1xuXHRcdH0pKCksXG5cblx0XHRfc2lsZW50ID0gZmFsc2UsXG5cblx0XHRhYnMgPSBNYXRoLmFicyxcblx0XHRtaW4gPSBNYXRoLm1pbixcblxuXHRcdHNhdmVkSW5wdXRDaGVja2VkID0gW10sXG5cdFx0dG91Y2hEcmFnT3Zlckxpc3RlbmVycyA9IFtdLFxuXG5cdFx0X2F1dG9TY3JvbGwgPSBfdGhyb3R0bGUoZnVuY3Rpb24gKC8qKkV2ZW50Ki9ldnQsIC8qKk9iamVjdCovb3B0aW9ucywgLyoqSFRNTEVsZW1lbnQqL3Jvb3RFbCkge1xuXHRcdFx0Ly8gQnVnOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD01MDU1MjFcblx0XHRcdGlmIChyb290RWwgJiYgb3B0aW9ucy5zY3JvbGwpIHtcblx0XHRcdFx0dmFyIF90aGlzID0gcm9vdEVsW2V4cGFuZG9dLFxuXHRcdFx0XHRcdGVsLFxuXHRcdFx0XHRcdHJlY3QsXG5cdFx0XHRcdFx0c2VucyA9IG9wdGlvbnMuc2Nyb2xsU2Vuc2l0aXZpdHksXG5cdFx0XHRcdFx0c3BlZWQgPSBvcHRpb25zLnNjcm9sbFNwZWVkLFxuXG5cdFx0XHRcdFx0eCA9IGV2dC5jbGllbnRYLFxuXHRcdFx0XHRcdHkgPSBldnQuY2xpZW50WSxcblxuXHRcdFx0XHRcdHdpbldpZHRoID0gd2luZG93LmlubmVyV2lkdGgsXG5cdFx0XHRcdFx0d2luSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0LFxuXG5cdFx0XHRcdFx0dngsXG5cdFx0XHRcdFx0dnksXG5cblx0XHRcdFx0XHRzY3JvbGxPZmZzZXRYLFxuXHRcdFx0XHRcdHNjcm9sbE9mZnNldFlcblx0XHRcdFx0O1xuXG5cdFx0XHRcdC8vIERlbGVjdCBzY3JvbGxFbFxuXHRcdFx0XHRpZiAoc2Nyb2xsUGFyZW50RWwgIT09IHJvb3RFbCkge1xuXHRcdFx0XHRcdHNjcm9sbEVsID0gb3B0aW9ucy5zY3JvbGw7XG5cdFx0XHRcdFx0c2Nyb2xsUGFyZW50RWwgPSByb290RWw7XG5cdFx0XHRcdFx0c2Nyb2xsQ3VzdG9tRm4gPSBvcHRpb25zLnNjcm9sbEZuO1xuXG5cdFx0XHRcdFx0aWYgKHNjcm9sbEVsID09PSB0cnVlKSB7XG5cdFx0XHRcdFx0XHRzY3JvbGxFbCA9IHJvb3RFbDtcblxuXHRcdFx0XHRcdFx0ZG8ge1xuXHRcdFx0XHRcdFx0XHRpZiAoKHNjcm9sbEVsLm9mZnNldFdpZHRoIDwgc2Nyb2xsRWwuc2Nyb2xsV2lkdGgpIHx8XG5cdFx0XHRcdFx0XHRcdFx0KHNjcm9sbEVsLm9mZnNldEhlaWdodCA8IHNjcm9sbEVsLnNjcm9sbEhlaWdodClcblx0XHRcdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0LyoganNoaW50IGJvc3M6dHJ1ZSAqL1xuXHRcdFx0XHRcdFx0fSB3aGlsZSAoc2Nyb2xsRWwgPSBzY3JvbGxFbC5wYXJlbnROb2RlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoc2Nyb2xsRWwpIHtcblx0XHRcdFx0XHRlbCA9IHNjcm9sbEVsO1xuXHRcdFx0XHRcdHJlY3QgPSBzY3JvbGxFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHRcdFx0XHR2eCA9IChhYnMocmVjdC5yaWdodCAtIHgpIDw9IHNlbnMpIC0gKGFicyhyZWN0LmxlZnQgLSB4KSA8PSBzZW5zKTtcblx0XHRcdFx0XHR2eSA9IChhYnMocmVjdC5ib3R0b20gLSB5KSA8PSBzZW5zKSAtIChhYnMocmVjdC50b3AgLSB5KSA8PSBzZW5zKTtcblx0XHRcdFx0fVxuXG5cblx0XHRcdFx0aWYgKCEodnggfHwgdnkpKSB7XG5cdFx0XHRcdFx0dnggPSAod2luV2lkdGggLSB4IDw9IHNlbnMpIC0gKHggPD0gc2Vucyk7XG5cdFx0XHRcdFx0dnkgPSAod2luSGVpZ2h0IC0geSA8PSBzZW5zKSAtICh5IDw9IHNlbnMpO1xuXG5cdFx0XHRcdFx0LyoganNoaW50IGV4cHI6dHJ1ZSAqL1xuXHRcdFx0XHRcdCh2eCB8fCB2eSkgJiYgKGVsID0gd2luKTtcblx0XHRcdFx0fVxuXG5cblx0XHRcdFx0aWYgKGF1dG9TY3JvbGwudnggIT09IHZ4IHx8IGF1dG9TY3JvbGwudnkgIT09IHZ5IHx8IGF1dG9TY3JvbGwuZWwgIT09IGVsKSB7XG5cdFx0XHRcdFx0YXV0b1Njcm9sbC5lbCA9IGVsO1xuXHRcdFx0XHRcdGF1dG9TY3JvbGwudnggPSB2eDtcblx0XHRcdFx0XHRhdXRvU2Nyb2xsLnZ5ID0gdnk7XG5cblx0XHRcdFx0XHRjbGVhckludGVydmFsKGF1dG9TY3JvbGwucGlkKTtcblxuXHRcdFx0XHRcdGlmIChlbCkge1xuXHRcdFx0XHRcdFx0YXV0b1Njcm9sbC5waWQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdHNjcm9sbE9mZnNldFkgPSB2eSA/IHZ5ICogc3BlZWQgOiAwO1xuXHRcdFx0XHRcdFx0XHRzY3JvbGxPZmZzZXRYID0gdnggPyB2eCAqIHNwZWVkIDogMDtcblxuXHRcdFx0XHRcdFx0XHRpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mKHNjcm9sbEN1c3RvbUZuKSkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBzY3JvbGxDdXN0b21Gbi5jYWxsKF90aGlzLCBzY3JvbGxPZmZzZXRYLCBzY3JvbGxPZmZzZXRZLCBldnQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0aWYgKGVsID09PSB3aW4pIHtcblx0XHRcdFx0XHRcdFx0XHR3aW4uc2Nyb2xsVG8od2luLnBhZ2VYT2Zmc2V0ICsgc2Nyb2xsT2Zmc2V0WCwgd2luLnBhZ2VZT2Zmc2V0ICsgc2Nyb2xsT2Zmc2V0WSk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0ZWwuc2Nyb2xsVG9wICs9IHNjcm9sbE9mZnNldFk7XG5cdFx0XHRcdFx0XHRcdFx0ZWwuc2Nyb2xsTGVmdCArPSBzY3JvbGxPZmZzZXRYO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LCAyNCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSwgMzApLFxuXG5cdFx0X3ByZXBhcmVHcm91cCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdFx0XHRmdW5jdGlvbiB0b0ZuKHZhbHVlLCBwdWxsKSB7XG5cdFx0XHRcdGlmICh2YWx1ZSA9PT0gdm9pZCAwIHx8IHZhbHVlID09PSB0cnVlKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBncm91cC5uYW1lO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24gKHRvLCBmcm9tKSB7XG5cdFx0XHRcdFx0XHR2YXIgZnJvbUdyb3VwID0gZnJvbS5vcHRpb25zLmdyb3VwLm5hbWU7XG5cblx0XHRcdFx0XHRcdHJldHVybiBwdWxsXG5cdFx0XHRcdFx0XHRcdD8gdmFsdWVcblx0XHRcdFx0XHRcdFx0OiB2YWx1ZSAmJiAodmFsdWUuam9pblxuXHRcdFx0XHRcdFx0XHRcdD8gdmFsdWUuaW5kZXhPZihmcm9tR3JvdXApID4gLTFcblx0XHRcdFx0XHRcdFx0XHQ6IChmcm9tR3JvdXAgPT0gdmFsdWUpXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHR2YXIgZ3JvdXAgPSB7fTtcblx0XHRcdHZhciBvcmlnaW5hbEdyb3VwID0gb3B0aW9ucy5ncm91cDtcblxuXHRcdFx0aWYgKCFvcmlnaW5hbEdyb3VwIHx8IHR5cGVvZiBvcmlnaW5hbEdyb3VwICE9ICdvYmplY3QnKSB7XG5cdFx0XHRcdG9yaWdpbmFsR3JvdXAgPSB7bmFtZTogb3JpZ2luYWxHcm91cH07XG5cdFx0XHR9XG5cblx0XHRcdGdyb3VwLm5hbWUgPSBvcmlnaW5hbEdyb3VwLm5hbWU7XG5cdFx0XHRncm91cC5jaGVja1B1bGwgPSB0b0ZuKG9yaWdpbmFsR3JvdXAucHVsbCwgdHJ1ZSk7XG5cdFx0XHRncm91cC5jaGVja1B1dCA9IHRvRm4ob3JpZ2luYWxHcm91cC5wdXQpO1xuXHRcdFx0Z3JvdXAucmV2ZXJ0Q2xvbmUgPSBvcmlnaW5hbEdyb3VwLnJldmVydENsb25lO1xuXG5cdFx0XHRvcHRpb25zLmdyb3VwID0gZ3JvdXA7XG5cdFx0fVxuXHQ7XG5cblxuXHQvKipcblx0ICogQGNsYXNzICBTb3J0YWJsZVxuXHQgKiBAcGFyYW0gIHtIVE1MRWxlbWVudH0gIGVsXG5cdCAqIEBwYXJhbSAge09iamVjdH0gICAgICAgW29wdGlvbnNdXG5cdCAqL1xuXHRmdW5jdGlvbiBTb3J0YWJsZShlbCwgb3B0aW9ucykge1xuXHRcdGlmICghKGVsICYmIGVsLm5vZGVUeXBlICYmIGVsLm5vZGVUeXBlID09PSAxKSkge1xuXHRcdFx0dGhyb3cgJ1NvcnRhYmxlOiBgZWxgIG11c3QgYmUgSFRNTEVsZW1lbnQsIGFuZCBub3QgJyArIHt9LnRvU3RyaW5nLmNhbGwoZWwpO1xuXHRcdH1cblxuXHRcdHRoaXMuZWwgPSBlbDsgLy8gcm9vdCBlbGVtZW50XG5cdFx0dGhpcy5vcHRpb25zID0gb3B0aW9ucyA9IF9leHRlbmQoe30sIG9wdGlvbnMpO1xuXG5cblx0XHQvLyBFeHBvcnQgaW5zdGFuY2Vcblx0XHRlbFtleHBhbmRvXSA9IHRoaXM7XG5cblx0XHQvLyBEZWZhdWx0IG9wdGlvbnNcblx0XHR2YXIgZGVmYXVsdHMgPSB7XG5cdFx0XHRncm91cDogTWF0aC5yYW5kb20oKSxcblx0XHRcdHNvcnQ6IHRydWUsXG5cdFx0XHRkaXNhYmxlZDogZmFsc2UsXG5cdFx0XHRzdG9yZTogbnVsbCxcblx0XHRcdGhhbmRsZTogbnVsbCxcblx0XHRcdHNjcm9sbDogdHJ1ZSxcblx0XHRcdHNjcm9sbFNlbnNpdGl2aXR5OiAzMCxcblx0XHRcdHNjcm9sbFNwZWVkOiAxMCxcblx0XHRcdGRyYWdnYWJsZTogL1t1b11sL2kudGVzdChlbC5ub2RlTmFtZSkgPyAnbGknIDogJz4qJyxcblx0XHRcdGdob3N0Q2xhc3M6ICdzb3J0YWJsZS1naG9zdCcsXG5cdFx0XHRjaG9zZW5DbGFzczogJ3NvcnRhYmxlLWNob3NlbicsXG5cdFx0XHRkcmFnQ2xhc3M6ICdzb3J0YWJsZS1kcmFnJyxcblx0XHRcdGlnbm9yZTogJ2EsIGltZycsXG5cdFx0XHRmaWx0ZXI6IG51bGwsXG5cdFx0XHRwcmV2ZW50T25GaWx0ZXI6IHRydWUsXG5cdFx0XHRhbmltYXRpb246IDAsXG5cdFx0XHRzZXREYXRhOiBmdW5jdGlvbiAoZGF0YVRyYW5zZmVyLCBkcmFnRWwpIHtcblx0XHRcdFx0ZGF0YVRyYW5zZmVyLnNldERhdGEoJ1RleHQnLCBkcmFnRWwudGV4dENvbnRlbnQpO1xuXHRcdFx0fSxcblx0XHRcdGRyb3BCdWJibGU6IGZhbHNlLFxuXHRcdFx0ZHJhZ292ZXJCdWJibGU6IGZhbHNlLFxuXHRcdFx0ZGF0YUlkQXR0cjogJ2RhdGEtaWQnLFxuXHRcdFx0ZGVsYXk6IDAsXG5cdFx0XHRmb3JjZUZhbGxiYWNrOiBmYWxzZSxcblx0XHRcdGZhbGxiYWNrQ2xhc3M6ICdzb3J0YWJsZS1mYWxsYmFjaycsXG5cdFx0XHRmYWxsYmFja09uQm9keTogZmFsc2UsXG5cdFx0XHRmYWxsYmFja1RvbGVyYW5jZTogMCxcblx0XHRcdGZhbGxiYWNrT2Zmc2V0OiB7eDogMCwgeTogMH1cblx0XHR9O1xuXG5cblx0XHQvLyBTZXQgZGVmYXVsdCBvcHRpb25zXG5cdFx0Zm9yICh2YXIgbmFtZSBpbiBkZWZhdWx0cykge1xuXHRcdFx0IShuYW1lIGluIG9wdGlvbnMpICYmIChvcHRpb25zW25hbWVdID0gZGVmYXVsdHNbbmFtZV0pO1xuXHRcdH1cblxuXHRcdF9wcmVwYXJlR3JvdXAob3B0aW9ucyk7XG5cblx0XHQvLyBCaW5kIGFsbCBwcml2YXRlIG1ldGhvZHNcblx0XHRmb3IgKHZhciBmbiBpbiB0aGlzKSB7XG5cdFx0XHRpZiAoZm4uY2hhckF0KDApID09PSAnXycgJiYgdHlwZW9mIHRoaXNbZm5dID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdHRoaXNbZm5dID0gdGhpc1tmbl0uYmluZCh0aGlzKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBTZXR1cCBkcmFnIG1vZGVcblx0XHR0aGlzLm5hdGl2ZURyYWdnYWJsZSA9IG9wdGlvbnMuZm9yY2VGYWxsYmFjayA/IGZhbHNlIDogc3VwcG9ydERyYWdnYWJsZTtcblxuXHRcdC8vIEJpbmQgZXZlbnRzXG5cdFx0X29uKGVsLCAnbW91c2Vkb3duJywgdGhpcy5fb25UYXBTdGFydCk7XG5cdFx0X29uKGVsLCAndG91Y2hzdGFydCcsIHRoaXMuX29uVGFwU3RhcnQpO1xuXHRcdF9vbihlbCwgJ3BvaW50ZXJkb3duJywgdGhpcy5fb25UYXBTdGFydCk7XG5cblx0XHRpZiAodGhpcy5uYXRpdmVEcmFnZ2FibGUpIHtcblx0XHRcdF9vbihlbCwgJ2RyYWdvdmVyJywgdGhpcyk7XG5cdFx0XHRfb24oZWwsICdkcmFnZW50ZXInLCB0aGlzKTtcblx0XHR9XG5cblx0XHR0b3VjaERyYWdPdmVyTGlzdGVuZXJzLnB1c2godGhpcy5fb25EcmFnT3Zlcik7XG5cblx0XHQvLyBSZXN0b3JlIHNvcnRpbmdcblx0XHRvcHRpb25zLnN0b3JlICYmIHRoaXMuc29ydChvcHRpb25zLnN0b3JlLmdldCh0aGlzKSk7XG5cdH1cblxuXG5cdFNvcnRhYmxlLnByb3RvdHlwZSA9IC8qKiBAbGVuZHMgU29ydGFibGUucHJvdG90eXBlICovIHtcblx0XHRjb25zdHJ1Y3RvcjogU29ydGFibGUsXG5cblx0XHRfb25UYXBTdGFydDogZnVuY3Rpb24gKC8qKiBFdmVudHxUb3VjaEV2ZW50ICovZXZ0KSB7XG5cdFx0XHR2YXIgX3RoaXMgPSB0aGlzLFxuXHRcdFx0XHRlbCA9IHRoaXMuZWwsXG5cdFx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG5cdFx0XHRcdHByZXZlbnRPbkZpbHRlciA9IG9wdGlvbnMucHJldmVudE9uRmlsdGVyLFxuXHRcdFx0XHR0eXBlID0gZXZ0LnR5cGUsXG5cdFx0XHRcdHRvdWNoID0gZXZ0LnRvdWNoZXMgJiYgZXZ0LnRvdWNoZXNbMF0sXG5cdFx0XHRcdHRhcmdldCA9ICh0b3VjaCB8fCBldnQpLnRhcmdldCxcblx0XHRcdFx0b3JpZ2luYWxUYXJnZXQgPSBldnQudGFyZ2V0LnNoYWRvd1Jvb3QgJiYgKGV2dC5wYXRoICYmIGV2dC5wYXRoWzBdKSB8fCB0YXJnZXQsXG5cdFx0XHRcdGZpbHRlciA9IG9wdGlvbnMuZmlsdGVyLFxuXHRcdFx0XHRzdGFydEluZGV4O1xuXG5cdFx0XHRfc2F2ZUlucHV0Q2hlY2tlZFN0YXRlKGVsKTtcblxuXG5cdFx0XHQvLyBEb24ndCB0cmlnZ2VyIHN0YXJ0IGV2ZW50IHdoZW4gYW4gZWxlbWVudCBpcyBiZWVuIGRyYWdnZWQsIG90aGVyd2lzZSB0aGUgZXZ0Lm9sZGluZGV4IGFsd2F5cyB3cm9uZyB3aGVuIHNldCBvcHRpb24uZ3JvdXAuXG5cdFx0XHRpZiAoZHJhZ0VsKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKC9tb3VzZWRvd258cG9pbnRlcmRvd24vLnRlc3QodHlwZSkgJiYgZXZ0LmJ1dHRvbiAhPT0gMCB8fCBvcHRpb25zLmRpc2FibGVkKSB7XG5cdFx0XHRcdHJldHVybjsgLy8gb25seSBsZWZ0IGJ1dHRvbiBvciBlbmFibGVkXG5cdFx0XHR9XG5cblxuXHRcdFx0dGFyZ2V0ID0gX2Nsb3Nlc3QodGFyZ2V0LCBvcHRpb25zLmRyYWdnYWJsZSwgZWwpO1xuXG5cdFx0XHRpZiAoIXRhcmdldCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmIChsYXN0RG93bkVsID09PSB0YXJnZXQpIHtcblx0XHRcdFx0Ly8gSWdub3JpbmcgZHVwbGljYXRlIGBkb3duYFxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRyYWdnZWQgZWxlbWVudCB3aXRoaW4gaXRzIHBhcmVudFxuXHRcdFx0c3RhcnRJbmRleCA9IF9pbmRleCh0YXJnZXQsIG9wdGlvbnMuZHJhZ2dhYmxlKTtcblxuXHRcdFx0Ly8gQ2hlY2sgZmlsdGVyXG5cdFx0XHRpZiAodHlwZW9mIGZpbHRlciA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRpZiAoZmlsdGVyLmNhbGwodGhpcywgZXZ0LCB0YXJnZXQsIHRoaXMpKSB7XG5cdFx0XHRcdFx0X2Rpc3BhdGNoRXZlbnQoX3RoaXMsIG9yaWdpbmFsVGFyZ2V0LCAnZmlsdGVyJywgdGFyZ2V0LCBlbCwgc3RhcnRJbmRleCk7XG5cdFx0XHRcdFx0cHJldmVudE9uRmlsdGVyICYmIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdHJldHVybjsgLy8gY2FuY2VsIGRuZFxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChmaWx0ZXIpIHtcblx0XHRcdFx0ZmlsdGVyID0gZmlsdGVyLnNwbGl0KCcsJykuc29tZShmdW5jdGlvbiAoY3JpdGVyaWEpIHtcblx0XHRcdFx0XHRjcml0ZXJpYSA9IF9jbG9zZXN0KG9yaWdpbmFsVGFyZ2V0LCBjcml0ZXJpYS50cmltKCksIGVsKTtcblxuXHRcdFx0XHRcdGlmIChjcml0ZXJpYSkge1xuXHRcdFx0XHRcdFx0X2Rpc3BhdGNoRXZlbnQoX3RoaXMsIGNyaXRlcmlhLCAnZmlsdGVyJywgdGFyZ2V0LCBlbCwgc3RhcnRJbmRleCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGlmIChmaWx0ZXIpIHtcblx0XHRcdFx0XHRwcmV2ZW50T25GaWx0ZXIgJiYgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0cmV0dXJuOyAvLyBjYW5jZWwgZG5kXG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKG9wdGlvbnMuaGFuZGxlICYmICFfY2xvc2VzdChvcmlnaW5hbFRhcmdldCwgb3B0aW9ucy5oYW5kbGUsIGVsKSkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFByZXBhcmUgYGRyYWdzdGFydGBcblx0XHRcdHRoaXMuX3ByZXBhcmVEcmFnU3RhcnQoZXZ0LCB0b3VjaCwgdGFyZ2V0LCBzdGFydEluZGV4KTtcblx0XHR9LFxuXG5cdFx0X3ByZXBhcmVEcmFnU3RhcnQ6IGZ1bmN0aW9uICgvKiogRXZlbnQgKi9ldnQsIC8qKiBUb3VjaCAqL3RvdWNoLCAvKiogSFRNTEVsZW1lbnQgKi90YXJnZXQsIC8qKiBOdW1iZXIgKi9zdGFydEluZGV4KSB7XG5cdFx0XHR2YXIgX3RoaXMgPSB0aGlzLFxuXHRcdFx0XHRlbCA9IF90aGlzLmVsLFxuXHRcdFx0XHRvcHRpb25zID0gX3RoaXMub3B0aW9ucyxcblx0XHRcdFx0b3duZXJEb2N1bWVudCA9IGVsLm93bmVyRG9jdW1lbnQsXG5cdFx0XHRcdGRyYWdTdGFydEZuO1xuXG5cdFx0XHRpZiAodGFyZ2V0ICYmICFkcmFnRWwgJiYgKHRhcmdldC5wYXJlbnROb2RlID09PSBlbCkpIHtcblx0XHRcdFx0dGFwRXZ0ID0gZXZ0O1xuXG5cdFx0XHRcdHJvb3RFbCA9IGVsO1xuXHRcdFx0XHRkcmFnRWwgPSB0YXJnZXQ7XG5cdFx0XHRcdHBhcmVudEVsID0gZHJhZ0VsLnBhcmVudE5vZGU7XG5cdFx0XHRcdG5leHRFbCA9IGRyYWdFbC5uZXh0U2libGluZztcblx0XHRcdFx0bGFzdERvd25FbCA9IHRhcmdldDtcblx0XHRcdFx0YWN0aXZlR3JvdXAgPSBvcHRpb25zLmdyb3VwO1xuXHRcdFx0XHRvbGRJbmRleCA9IHN0YXJ0SW5kZXg7XG5cblx0XHRcdFx0dGhpcy5fbGFzdFggPSAodG91Y2ggfHwgZXZ0KS5jbGllbnRYO1xuXHRcdFx0XHR0aGlzLl9sYXN0WSA9ICh0b3VjaCB8fCBldnQpLmNsaWVudFk7XG5cblx0XHRcdFx0ZHJhZ0VsLnN0eWxlWyd3aWxsLWNoYW5nZSddID0gJ3RyYW5zZm9ybSc7XG5cblx0XHRcdFx0ZHJhZ1N0YXJ0Rm4gPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0Ly8gRGVsYXllZCBkcmFnIGhhcyBiZWVuIHRyaWdnZXJlZFxuXHRcdFx0XHRcdC8vIHdlIGNhbiByZS1lbmFibGUgdGhlIGV2ZW50czogdG91Y2htb3ZlL21vdXNlbW92ZVxuXHRcdFx0XHRcdF90aGlzLl9kaXNhYmxlRGVsYXllZERyYWcoKTtcblxuXHRcdFx0XHRcdC8vIE1ha2UgdGhlIGVsZW1lbnQgZHJhZ2dhYmxlXG5cdFx0XHRcdFx0ZHJhZ0VsLmRyYWdnYWJsZSA9IF90aGlzLm5hdGl2ZURyYWdnYWJsZTtcblxuXHRcdFx0XHRcdC8vIENob3NlbiBpdGVtXG5cdFx0XHRcdFx0X3RvZ2dsZUNsYXNzKGRyYWdFbCwgb3B0aW9ucy5jaG9zZW5DbGFzcywgdHJ1ZSk7XG5cblx0XHRcdFx0XHQvLyBCaW5kIHRoZSBldmVudHM6IGRyYWdzdGFydC9kcmFnZW5kXG5cdFx0XHRcdFx0X3RoaXMuX3RyaWdnZXJEcmFnU3RhcnQoZXZ0LCB0b3VjaCk7XG5cblx0XHRcdFx0XHQvLyBEcmFnIHN0YXJ0IGV2ZW50XG5cdFx0XHRcdFx0X2Rpc3BhdGNoRXZlbnQoX3RoaXMsIHJvb3RFbCwgJ2Nob29zZScsIGRyYWdFbCwgcm9vdEVsLCBvbGRJbmRleCk7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Ly8gRGlzYWJsZSBcImRyYWdnYWJsZVwiXG5cdFx0XHRcdG9wdGlvbnMuaWdub3JlLnNwbGl0KCcsJykuZm9yRWFjaChmdW5jdGlvbiAoY3JpdGVyaWEpIHtcblx0XHRcdFx0XHRfZmluZChkcmFnRWwsIGNyaXRlcmlhLnRyaW0oKSwgX2Rpc2FibGVEcmFnZ2FibGUpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRfb24ob3duZXJEb2N1bWVudCwgJ21vdXNldXAnLCBfdGhpcy5fb25Ecm9wKTtcblx0XHRcdFx0X29uKG93bmVyRG9jdW1lbnQsICd0b3VjaGVuZCcsIF90aGlzLl9vbkRyb3ApO1xuXHRcdFx0XHRfb24ob3duZXJEb2N1bWVudCwgJ3RvdWNoY2FuY2VsJywgX3RoaXMuX29uRHJvcCk7XG5cdFx0XHRcdF9vbihvd25lckRvY3VtZW50LCAncG9pbnRlcmNhbmNlbCcsIF90aGlzLl9vbkRyb3ApO1xuXHRcdFx0XHRfb24ob3duZXJEb2N1bWVudCwgJ3NlbGVjdHN0YXJ0JywgX3RoaXMpO1xuXG5cdFx0XHRcdGlmIChvcHRpb25zLmRlbGF5KSB7XG5cdFx0XHRcdFx0Ly8gSWYgdGhlIHVzZXIgbW92ZXMgdGhlIHBvaW50ZXIgb3IgbGV0IGdvIHRoZSBjbGljayBvciB0b3VjaFxuXHRcdFx0XHRcdC8vIGJlZm9yZSB0aGUgZGVsYXkgaGFzIGJlZW4gcmVhY2hlZDpcblx0XHRcdFx0XHQvLyBkaXNhYmxlIHRoZSBkZWxheWVkIGRyYWdcblx0XHRcdFx0XHRfb24ob3duZXJEb2N1bWVudCwgJ21vdXNldXAnLCBfdGhpcy5fZGlzYWJsZURlbGF5ZWREcmFnKTtcblx0XHRcdFx0XHRfb24ob3duZXJEb2N1bWVudCwgJ3RvdWNoZW5kJywgX3RoaXMuX2Rpc2FibGVEZWxheWVkRHJhZyk7XG5cdFx0XHRcdFx0X29uKG93bmVyRG9jdW1lbnQsICd0b3VjaGNhbmNlbCcsIF90aGlzLl9kaXNhYmxlRGVsYXllZERyYWcpO1xuXHRcdFx0XHRcdF9vbihvd25lckRvY3VtZW50LCAnbW91c2Vtb3ZlJywgX3RoaXMuX2Rpc2FibGVEZWxheWVkRHJhZyk7XG5cdFx0XHRcdFx0X29uKG93bmVyRG9jdW1lbnQsICd0b3VjaG1vdmUnLCBfdGhpcy5fZGlzYWJsZURlbGF5ZWREcmFnKTtcblx0XHRcdFx0XHRfb24ob3duZXJEb2N1bWVudCwgJ3BvaW50ZXJtb3ZlJywgX3RoaXMuX2Rpc2FibGVEZWxheWVkRHJhZyk7XG5cblx0XHRcdFx0XHRfdGhpcy5fZHJhZ1N0YXJ0VGltZXIgPSBzZXRUaW1lb3V0KGRyYWdTdGFydEZuLCBvcHRpb25zLmRlbGF5KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkcmFnU3RhcnRGbigpO1xuXHRcdFx0XHR9XG5cblxuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRfZGlzYWJsZURlbGF5ZWREcmFnOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgb3duZXJEb2N1bWVudCA9IHRoaXMuZWwub3duZXJEb2N1bWVudDtcblxuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMuX2RyYWdTdGFydFRpbWVyKTtcblx0XHRcdF9vZmYob3duZXJEb2N1bWVudCwgJ21vdXNldXAnLCB0aGlzLl9kaXNhYmxlRGVsYXllZERyYWcpO1xuXHRcdFx0X29mZihvd25lckRvY3VtZW50LCAndG91Y2hlbmQnLCB0aGlzLl9kaXNhYmxlRGVsYXllZERyYWcpO1xuXHRcdFx0X29mZihvd25lckRvY3VtZW50LCAndG91Y2hjYW5jZWwnLCB0aGlzLl9kaXNhYmxlRGVsYXllZERyYWcpO1xuXHRcdFx0X29mZihvd25lckRvY3VtZW50LCAnbW91c2Vtb3ZlJywgdGhpcy5fZGlzYWJsZURlbGF5ZWREcmFnKTtcblx0XHRcdF9vZmYob3duZXJEb2N1bWVudCwgJ3RvdWNobW92ZScsIHRoaXMuX2Rpc2FibGVEZWxheWVkRHJhZyk7XG5cdFx0XHRfb2ZmKG93bmVyRG9jdW1lbnQsICdwb2ludGVybW92ZScsIHRoaXMuX2Rpc2FibGVEZWxheWVkRHJhZyk7XG5cdFx0fSxcblxuXHRcdF90cmlnZ2VyRHJhZ1N0YXJ0OiBmdW5jdGlvbiAoLyoqIEV2ZW50ICovZXZ0LCAvKiogVG91Y2ggKi90b3VjaCkge1xuXHRcdFx0dG91Y2ggPSB0b3VjaCB8fCAoZXZ0LnBvaW50ZXJUeXBlID09ICd0b3VjaCcgPyBldnQgOiBudWxsKTtcblxuXHRcdFx0aWYgKHRvdWNoKSB7XG5cdFx0XHRcdC8vIFRvdWNoIGRldmljZSBzdXBwb3J0XG5cdFx0XHRcdHRhcEV2dCA9IHtcblx0XHRcdFx0XHR0YXJnZXQ6IGRyYWdFbCxcblx0XHRcdFx0XHRjbGllbnRYOiB0b3VjaC5jbGllbnRYLFxuXHRcdFx0XHRcdGNsaWVudFk6IHRvdWNoLmNsaWVudFlcblx0XHRcdFx0fTtcblxuXHRcdFx0XHR0aGlzLl9vbkRyYWdTdGFydCh0YXBFdnQsICd0b3VjaCcpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoIXRoaXMubmF0aXZlRHJhZ2dhYmxlKSB7XG5cdFx0XHRcdHRoaXMuX29uRHJhZ1N0YXJ0KHRhcEV2dCwgdHJ1ZSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0X29uKGRyYWdFbCwgJ2RyYWdlbmQnLCB0aGlzKTtcblx0XHRcdFx0X29uKHJvb3RFbCwgJ2RyYWdzdGFydCcsIHRoaXMuX29uRHJhZ1N0YXJ0KTtcblx0XHRcdH1cblxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0aWYgKGRvY3VtZW50LnNlbGVjdGlvbikge1xuXHRcdFx0XHRcdC8vIFRpbWVvdXQgbmVjY2Vzc2FyeSBmb3IgSUU5XG5cdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRkb2N1bWVudC5zZWxlY3Rpb24uZW1wdHkoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR3aW5kb3cuZ2V0U2VsZWN0aW9uKCkucmVtb3ZlQWxsUmFuZ2VzKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRfZHJhZ1N0YXJ0ZWQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmIChyb290RWwgJiYgZHJhZ0VsKSB7XG5cdFx0XHRcdHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXG5cdFx0XHRcdC8vIEFwcGx5IGVmZmVjdFxuXHRcdFx0XHRfdG9nZ2xlQ2xhc3MoZHJhZ0VsLCBvcHRpb25zLmdob3N0Q2xhc3MsIHRydWUpO1xuXHRcdFx0XHRfdG9nZ2xlQ2xhc3MoZHJhZ0VsLCBvcHRpb25zLmRyYWdDbGFzcywgZmFsc2UpO1xuXG5cdFx0XHRcdFNvcnRhYmxlLmFjdGl2ZSA9IHRoaXM7XG5cblx0XHRcdFx0Ly8gRHJhZyBzdGFydCBldmVudFxuXHRcdFx0XHRfZGlzcGF0Y2hFdmVudCh0aGlzLCByb290RWwsICdzdGFydCcsIGRyYWdFbCwgcm9vdEVsLCBvbGRJbmRleCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLl9udWxsaW5nKCk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdF9lbXVsYXRlRHJhZ092ZXI6IGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmICh0b3VjaEV2dCkge1xuXHRcdFx0XHRpZiAodGhpcy5fbGFzdFggPT09IHRvdWNoRXZ0LmNsaWVudFggJiYgdGhpcy5fbGFzdFkgPT09IHRvdWNoRXZ0LmNsaWVudFkpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLl9sYXN0WCA9IHRvdWNoRXZ0LmNsaWVudFg7XG5cdFx0XHRcdHRoaXMuX2xhc3RZID0gdG91Y2hFdnQuY2xpZW50WTtcblxuXHRcdFx0XHRpZiAoIXN1cHBvcnRDc3NQb2ludGVyRXZlbnRzKSB7XG5cdFx0XHRcdFx0X2NzcyhnaG9zdEVsLCAnZGlzcGxheScsICdub25lJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCh0b3VjaEV2dC5jbGllbnRYLCB0b3VjaEV2dC5jbGllbnRZKSxcblx0XHRcdFx0XHRwYXJlbnQgPSB0YXJnZXQsXG5cdFx0XHRcdFx0aSA9IHRvdWNoRHJhZ092ZXJMaXN0ZW5lcnMubGVuZ3RoO1xuXG5cdFx0XHRcdGlmIChwYXJlbnQpIHtcblx0XHRcdFx0XHRkbyB7XG5cdFx0XHRcdFx0XHRpZiAocGFyZW50W2V4cGFuZG9dKSB7XG5cdFx0XHRcdFx0XHRcdHdoaWxlIChpLS0pIHtcblx0XHRcdFx0XHRcdFx0XHR0b3VjaERyYWdPdmVyTGlzdGVuZXJzW2ldKHtcblx0XHRcdFx0XHRcdFx0XHRcdGNsaWVudFg6IHRvdWNoRXZ0LmNsaWVudFgsXG5cdFx0XHRcdFx0XHRcdFx0XHRjbGllbnRZOiB0b3VjaEV2dC5jbGllbnRZLFxuXHRcdFx0XHRcdFx0XHRcdFx0dGFyZ2V0OiB0YXJnZXQsXG5cdFx0XHRcdFx0XHRcdFx0XHRyb290RWw6IHBhcmVudFxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHRhcmdldCA9IHBhcmVudDsgLy8gc3RvcmUgbGFzdCBlbGVtZW50XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8qIGpzaGludCBib3NzOnRydWUgKi9cblx0XHRcdFx0XHR3aGlsZSAocGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGUpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCFzdXBwb3J0Q3NzUG9pbnRlckV2ZW50cykge1xuXHRcdFx0XHRcdF9jc3MoZ2hvc3RFbCwgJ2Rpc3BsYXknLCAnJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXG5cblx0XHRfb25Ub3VjaE1vdmU6IGZ1bmN0aW9uICgvKipUb3VjaEV2ZW50Ki9ldnQpIHtcblx0XHRcdGlmICh0YXBFdnQpIHtcblx0XHRcdFx0dmFyXHRvcHRpb25zID0gdGhpcy5vcHRpb25zLFxuXHRcdFx0XHRcdGZhbGxiYWNrVG9sZXJhbmNlID0gb3B0aW9ucy5mYWxsYmFja1RvbGVyYW5jZSxcblx0XHRcdFx0XHRmYWxsYmFja09mZnNldCA9IG9wdGlvbnMuZmFsbGJhY2tPZmZzZXQsXG5cdFx0XHRcdFx0dG91Y2ggPSBldnQudG91Y2hlcyA/IGV2dC50b3VjaGVzWzBdIDogZXZ0LFxuXHRcdFx0XHRcdGR4ID0gKHRvdWNoLmNsaWVudFggLSB0YXBFdnQuY2xpZW50WCkgKyBmYWxsYmFja09mZnNldC54LFxuXHRcdFx0XHRcdGR5ID0gKHRvdWNoLmNsaWVudFkgLSB0YXBFdnQuY2xpZW50WSkgKyBmYWxsYmFja09mZnNldC55LFxuXHRcdFx0XHRcdHRyYW5zbGF0ZTNkID0gZXZ0LnRvdWNoZXMgPyAndHJhbnNsYXRlM2QoJyArIGR4ICsgJ3B4LCcgKyBkeSArICdweCwwKScgOiAndHJhbnNsYXRlKCcgKyBkeCArICdweCwnICsgZHkgKyAncHgpJztcblxuXHRcdFx0XHQvLyBvbmx5IHNldCB0aGUgc3RhdHVzIHRvIGRyYWdnaW5nLCB3aGVuIHdlIGFyZSBhY3R1YWxseSBkcmFnZ2luZ1xuXHRcdFx0XHRpZiAoIVNvcnRhYmxlLmFjdGl2ZSkge1xuXHRcdFx0XHRcdGlmIChmYWxsYmFja1RvbGVyYW5jZSAmJlxuXHRcdFx0XHRcdFx0bWluKGFicyh0b3VjaC5jbGllbnRYIC0gdGhpcy5fbGFzdFgpLCBhYnModG91Y2guY2xpZW50WSAtIHRoaXMuX2xhc3RZKSkgPCBmYWxsYmFja1RvbGVyYW5jZVxuXHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHRoaXMuX2RyYWdTdGFydGVkKCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBhcyB3ZWxsIGFzIGNyZWF0aW5nIHRoZSBnaG9zdCBlbGVtZW50IG9uIHRoZSBkb2N1bWVudCBib2R5XG5cdFx0XHRcdHRoaXMuX2FwcGVuZEdob3N0KCk7XG5cblx0XHRcdFx0bW92ZWQgPSB0cnVlO1xuXHRcdFx0XHR0b3VjaEV2dCA9IHRvdWNoO1xuXG5cdFx0XHRcdF9jc3MoZ2hvc3RFbCwgJ3dlYmtpdFRyYW5zZm9ybScsIHRyYW5zbGF0ZTNkKTtcblx0XHRcdFx0X2NzcyhnaG9zdEVsLCAnbW96VHJhbnNmb3JtJywgdHJhbnNsYXRlM2QpO1xuXHRcdFx0XHRfY3NzKGdob3N0RWwsICdtc1RyYW5zZm9ybScsIHRyYW5zbGF0ZTNkKTtcblx0XHRcdFx0X2NzcyhnaG9zdEVsLCAndHJhbnNmb3JtJywgdHJhbnNsYXRlM2QpO1xuXG5cdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRfYXBwZW5kR2hvc3Q6IGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmICghZ2hvc3RFbCkge1xuXHRcdFx0XHR2YXIgcmVjdCA9IGRyYWdFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcblx0XHRcdFx0XHRjc3MgPSBfY3NzKGRyYWdFbCksXG5cdFx0XHRcdFx0b3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcblx0XHRcdFx0XHRnaG9zdFJlY3Q7XG5cblx0XHRcdFx0Z2hvc3RFbCA9IGRyYWdFbC5jbG9uZU5vZGUodHJ1ZSk7XG5cblx0XHRcdFx0X3RvZ2dsZUNsYXNzKGdob3N0RWwsIG9wdGlvbnMuZ2hvc3RDbGFzcywgZmFsc2UpO1xuXHRcdFx0XHRfdG9nZ2xlQ2xhc3MoZ2hvc3RFbCwgb3B0aW9ucy5mYWxsYmFja0NsYXNzLCB0cnVlKTtcblx0XHRcdFx0X3RvZ2dsZUNsYXNzKGdob3N0RWwsIG9wdGlvbnMuZHJhZ0NsYXNzLCB0cnVlKTtcblxuXHRcdFx0XHRfY3NzKGdob3N0RWwsICd0b3AnLCByZWN0LnRvcCAtIHBhcnNlSW50KGNzcy5tYXJnaW5Ub3AsIDEwKSk7XG5cdFx0XHRcdF9jc3MoZ2hvc3RFbCwgJ2xlZnQnLCByZWN0LmxlZnQgLSBwYXJzZUludChjc3MubWFyZ2luTGVmdCwgMTApKTtcblx0XHRcdFx0X2NzcyhnaG9zdEVsLCAnd2lkdGgnLCByZWN0LndpZHRoKTtcblx0XHRcdFx0X2NzcyhnaG9zdEVsLCAnaGVpZ2h0JywgcmVjdC5oZWlnaHQpO1xuXHRcdFx0XHRfY3NzKGdob3N0RWwsICdvcGFjaXR5JywgJzAuOCcpO1xuXHRcdFx0XHRfY3NzKGdob3N0RWwsICdwb3NpdGlvbicsICdmaXhlZCcpO1xuXHRcdFx0XHRfY3NzKGdob3N0RWwsICd6SW5kZXgnLCAnMTAwMDAwJyk7XG5cdFx0XHRcdF9jc3MoZ2hvc3RFbCwgJ3BvaW50ZXJFdmVudHMnLCAnbm9uZScpO1xuXG5cdFx0XHRcdG9wdGlvbnMuZmFsbGJhY2tPbkJvZHkgJiYgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChnaG9zdEVsKSB8fCByb290RWwuYXBwZW5kQ2hpbGQoZ2hvc3RFbCk7XG5cblx0XHRcdFx0Ly8gRml4aW5nIGRpbWVuc2lvbnMuXG5cdFx0XHRcdGdob3N0UmVjdCA9IGdob3N0RWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0XHRcdF9jc3MoZ2hvc3RFbCwgJ3dpZHRoJywgcmVjdC53aWR0aCAqIDIgLSBnaG9zdFJlY3Qud2lkdGgpO1xuXHRcdFx0XHRfY3NzKGdob3N0RWwsICdoZWlnaHQnLCByZWN0LmhlaWdodCAqIDIgLSBnaG9zdFJlY3QuaGVpZ2h0KTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0X29uRHJhZ1N0YXJ0OiBmdW5jdGlvbiAoLyoqRXZlbnQqL2V2dCwgLyoqYm9vbGVhbiovdXNlRmFsbGJhY2spIHtcblx0XHRcdHZhciBkYXRhVHJhbnNmZXIgPSBldnQuZGF0YVRyYW5zZmVyLFxuXHRcdFx0XHRvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXG5cdFx0XHR0aGlzLl9vZmZVcEV2ZW50cygpO1xuXG5cdFx0XHRpZiAoYWN0aXZlR3JvdXAuY2hlY2tQdWxsKHRoaXMsIHRoaXMsIGRyYWdFbCwgZXZ0KSkge1xuXHRcdFx0XHRjbG9uZUVsID0gX2Nsb25lKGRyYWdFbCk7XG5cblx0XHRcdFx0Y2xvbmVFbC5kcmFnZ2FibGUgPSBmYWxzZTtcblx0XHRcdFx0Y2xvbmVFbC5zdHlsZVsnd2lsbC1jaGFuZ2UnXSA9ICcnO1xuXG5cdFx0XHRcdF9jc3MoY2xvbmVFbCwgJ2Rpc3BsYXknLCAnbm9uZScpO1xuXHRcdFx0XHRfdG9nZ2xlQ2xhc3MoY2xvbmVFbCwgdGhpcy5vcHRpb25zLmNob3NlbkNsYXNzLCBmYWxzZSk7XG5cblx0XHRcdFx0cm9vdEVsLmluc2VydEJlZm9yZShjbG9uZUVsLCBkcmFnRWwpO1xuXHRcdFx0XHRfZGlzcGF0Y2hFdmVudCh0aGlzLCByb290RWwsICdjbG9uZScsIGRyYWdFbCk7XG5cdFx0XHR9XG5cblx0XHRcdF90b2dnbGVDbGFzcyhkcmFnRWwsIG9wdGlvbnMuZHJhZ0NsYXNzLCB0cnVlKTtcblxuXHRcdFx0aWYgKHVzZUZhbGxiYWNrKSB7XG5cdFx0XHRcdGlmICh1c2VGYWxsYmFjayA9PT0gJ3RvdWNoJykge1xuXHRcdFx0XHRcdC8vIEJpbmQgdG91Y2ggZXZlbnRzXG5cdFx0XHRcdFx0X29uKGRvY3VtZW50LCAndG91Y2htb3ZlJywgdGhpcy5fb25Ub3VjaE1vdmUpO1xuXHRcdFx0XHRcdF9vbihkb2N1bWVudCwgJ3RvdWNoZW5kJywgdGhpcy5fb25Ecm9wKTtcblx0XHRcdFx0XHRfb24oZG9jdW1lbnQsICd0b3VjaGNhbmNlbCcsIHRoaXMuX29uRHJvcCk7XG5cdFx0XHRcdFx0X29uKGRvY3VtZW50LCAncG9pbnRlcm1vdmUnLCB0aGlzLl9vblRvdWNoTW92ZSk7XG5cdFx0XHRcdFx0X29uKGRvY3VtZW50LCAncG9pbnRlcnVwJywgdGhpcy5fb25Ecm9wKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBPbGQgYnJ3b3NlclxuXHRcdFx0XHRcdF9vbihkb2N1bWVudCwgJ21vdXNlbW92ZScsIHRoaXMuX29uVG91Y2hNb3ZlKTtcblx0XHRcdFx0XHRfb24oZG9jdW1lbnQsICdtb3VzZXVwJywgdGhpcy5fb25Ecm9wKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMuX2xvb3BJZCA9IHNldEludGVydmFsKHRoaXMuX2VtdWxhdGVEcmFnT3ZlciwgNTApO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGlmIChkYXRhVHJhbnNmZXIpIHtcblx0XHRcdFx0XHRkYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9ICdtb3ZlJztcblx0XHRcdFx0XHRvcHRpb25zLnNldERhdGEgJiYgb3B0aW9ucy5zZXREYXRhLmNhbGwodGhpcywgZGF0YVRyYW5zZmVyLCBkcmFnRWwpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0X29uKGRvY3VtZW50LCAnZHJvcCcsIHRoaXMpO1xuXHRcdFx0XHRzZXRUaW1lb3V0KHRoaXMuX2RyYWdTdGFydGVkLCAwKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0X29uRHJhZ092ZXI6IGZ1bmN0aW9uICgvKipFdmVudCovZXZ0KSB7XG5cdFx0XHR2YXIgZWwgPSB0aGlzLmVsLFxuXHRcdFx0XHR0YXJnZXQsXG5cdFx0XHRcdGRyYWdSZWN0LFxuXHRcdFx0XHR0YXJnZXRSZWN0LFxuXHRcdFx0XHRyZXZlcnQsXG5cdFx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG5cdFx0XHRcdGdyb3VwID0gb3B0aW9ucy5ncm91cCxcblx0XHRcdFx0YWN0aXZlU29ydGFibGUgPSBTb3J0YWJsZS5hY3RpdmUsXG5cdFx0XHRcdGlzT3duZXIgPSAoYWN0aXZlR3JvdXAgPT09IGdyb3VwKSxcblx0XHRcdFx0aXNNb3ZpbmdCZXR3ZWVuU29ydGFibGUgPSBmYWxzZSxcblx0XHRcdFx0Y2FuU29ydCA9IG9wdGlvbnMuc29ydDtcblxuXHRcdFx0aWYgKGV2dC5wcmV2ZW50RGVmYXVsdCAhPT0gdm9pZCAwKSB7XG5cdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHQhb3B0aW9ucy5kcmFnb3ZlckJ1YmJsZSAmJiBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChkcmFnRWwuYW5pbWF0ZWQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRtb3ZlZCA9IHRydWU7XG5cblx0XHRcdGlmIChhY3RpdmVTb3J0YWJsZSAmJiAhb3B0aW9ucy5kaXNhYmxlZCAmJlxuXHRcdFx0XHQoaXNPd25lclxuXHRcdFx0XHRcdD8gY2FuU29ydCB8fCAocmV2ZXJ0ID0gIXJvb3RFbC5jb250YWlucyhkcmFnRWwpKSAvLyBSZXZlcnRpbmcgaXRlbSBpbnRvIHRoZSBvcmlnaW5hbCBsaXN0XG5cdFx0XHRcdFx0OiAoXG5cdFx0XHRcdFx0XHRwdXRTb3J0YWJsZSA9PT0gdGhpcyB8fFxuXHRcdFx0XHRcdFx0KFxuXHRcdFx0XHRcdFx0XHQoYWN0aXZlU29ydGFibGUubGFzdFB1bGxNb2RlID0gYWN0aXZlR3JvdXAuY2hlY2tQdWxsKHRoaXMsIGFjdGl2ZVNvcnRhYmxlLCBkcmFnRWwsIGV2dCkpICYmXG5cdFx0XHRcdFx0XHRcdGdyb3VwLmNoZWNrUHV0KHRoaXMsIGFjdGl2ZVNvcnRhYmxlLCBkcmFnRWwsIGV2dClcblx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHQpXG5cdFx0XHRcdCkgJiZcblx0XHRcdFx0KGV2dC5yb290RWwgPT09IHZvaWQgMCB8fCBldnQucm9vdEVsID09PSB0aGlzLmVsKSAvLyB0b3VjaCBmYWxsYmFja1xuXHRcdFx0KSB7XG5cdFx0XHRcdC8vIFNtYXJ0IGF1dG8tc2Nyb2xsaW5nXG5cdFx0XHRcdF9hdXRvU2Nyb2xsKGV2dCwgb3B0aW9ucywgdGhpcy5lbCk7XG5cblx0XHRcdFx0aWYgKF9zaWxlbnQpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0YXJnZXQgPSBfY2xvc2VzdChldnQudGFyZ2V0LCBvcHRpb25zLmRyYWdnYWJsZSwgZWwpO1xuXHRcdFx0XHRkcmFnUmVjdCA9IGRyYWdFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuXHRcdFx0XHRpZiAocHV0U29ydGFibGUgIT09IHRoaXMpIHtcblx0XHRcdFx0XHRwdXRTb3J0YWJsZSA9IHRoaXM7XG5cdFx0XHRcdFx0aXNNb3ZpbmdCZXR3ZWVuU29ydGFibGUgPSB0cnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHJldmVydCkge1xuXHRcdFx0XHRcdF9jbG9uZUhpZGUoYWN0aXZlU29ydGFibGUsIHRydWUpO1xuXHRcdFx0XHRcdHBhcmVudEVsID0gcm9vdEVsOyAvLyBhY3R1YWxpemF0aW9uXG5cblx0XHRcdFx0XHRpZiAoY2xvbmVFbCB8fCBuZXh0RWwpIHtcblx0XHRcdFx0XHRcdHJvb3RFbC5pbnNlcnRCZWZvcmUoZHJhZ0VsLCBjbG9uZUVsIHx8IG5leHRFbCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgaWYgKCFjYW5Tb3J0KSB7XG5cdFx0XHRcdFx0XHRyb290RWwuYXBwZW5kQ2hpbGQoZHJhZ0VsKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXG5cdFx0XHRcdGlmICgoZWwuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB8fCAoZWwuY2hpbGRyZW5bMF0gPT09IGdob3N0RWwpIHx8XG5cdFx0XHRcdFx0KGVsID09PSBldnQudGFyZ2V0KSAmJiAoX2dob3N0SXNMYXN0KGVsLCBldnQpKVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHQvL2Fzc2lnbiB0YXJnZXQgb25seSBpZiBjb25kaXRpb24gaXMgdHJ1ZVxuXHRcdFx0XHRcdGlmIChlbC5jaGlsZHJlbi5sZW5ndGggIT09IDAgJiYgZWwuY2hpbGRyZW5bMF0gIT09IGdob3N0RWwgJiYgZWwgPT09IGV2dC50YXJnZXQpIHtcblx0XHRcdFx0XHRcdHRhcmdldCA9IGVsLmxhc3RFbGVtZW50Q2hpbGQ7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKHRhcmdldCkge1xuXHRcdFx0XHRcdFx0aWYgKHRhcmdldC5hbmltYXRlZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHRhcmdldFJlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0X2Nsb25lSGlkZShhY3RpdmVTb3J0YWJsZSwgaXNPd25lcik7XG5cblx0XHRcdFx0XHRpZiAoX29uTW92ZShyb290RWwsIGVsLCBkcmFnRWwsIGRyYWdSZWN0LCB0YXJnZXQsIHRhcmdldFJlY3QsIGV2dCkgIT09IGZhbHNlKSB7XG5cdFx0XHRcdFx0XHRpZiAoIWRyYWdFbC5jb250YWlucyhlbCkpIHtcblx0XHRcdFx0XHRcdFx0ZWwuYXBwZW5kQ2hpbGQoZHJhZ0VsKTtcblx0XHRcdFx0XHRcdFx0cGFyZW50RWwgPSBlbDsgLy8gYWN0dWFsaXphdGlvblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR0aGlzLl9hbmltYXRlKGRyYWdSZWN0LCBkcmFnRWwpO1xuXHRcdFx0XHRcdFx0dGFyZ2V0ICYmIHRoaXMuX2FuaW1hdGUodGFyZ2V0UmVjdCwgdGFyZ2V0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSBpZiAodGFyZ2V0ICYmICF0YXJnZXQuYW5pbWF0ZWQgJiYgdGFyZ2V0ICE9PSBkcmFnRWwgJiYgKHRhcmdldC5wYXJlbnROb2RlW2V4cGFuZG9dICE9PSB2b2lkIDApKSB7XG5cdFx0XHRcdFx0aWYgKGxhc3RFbCAhPT0gdGFyZ2V0KSB7XG5cdFx0XHRcdFx0XHRsYXN0RWwgPSB0YXJnZXQ7XG5cdFx0XHRcdFx0XHRsYXN0Q1NTID0gX2Nzcyh0YXJnZXQpO1xuXHRcdFx0XHRcdFx0bGFzdFBhcmVudENTUyA9IF9jc3ModGFyZ2V0LnBhcmVudE5vZGUpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHRhcmdldFJlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cblx0XHRcdFx0XHR2YXIgd2lkdGggPSB0YXJnZXRSZWN0LnJpZ2h0IC0gdGFyZ2V0UmVjdC5sZWZ0LFxuXHRcdFx0XHRcdFx0aGVpZ2h0ID0gdGFyZ2V0UmVjdC5ib3R0b20gLSB0YXJnZXRSZWN0LnRvcCxcblx0XHRcdFx0XHRcdGZsb2F0aW5nID0gUl9GTE9BVC50ZXN0KGxhc3RDU1MuY3NzRmxvYXQgKyBsYXN0Q1NTLmRpc3BsYXkpXG5cdFx0XHRcdFx0XHRcdHx8IChsYXN0UGFyZW50Q1NTLmRpc3BsYXkgPT0gJ2ZsZXgnICYmIGxhc3RQYXJlbnRDU1NbJ2ZsZXgtZGlyZWN0aW9uJ10uaW5kZXhPZigncm93JykgPT09IDApLFxuXHRcdFx0XHRcdFx0aXNXaWRlID0gKHRhcmdldC5vZmZzZXRXaWR0aCA+IGRyYWdFbC5vZmZzZXRXaWR0aCksXG5cdFx0XHRcdFx0XHRpc0xvbmcgPSAodGFyZ2V0Lm9mZnNldEhlaWdodCA+IGRyYWdFbC5vZmZzZXRIZWlnaHQpLFxuXHRcdFx0XHRcdFx0aGFsZndheSA9IChmbG9hdGluZyA/IChldnQuY2xpZW50WCAtIHRhcmdldFJlY3QubGVmdCkgLyB3aWR0aCA6IChldnQuY2xpZW50WSAtIHRhcmdldFJlY3QudG9wKSAvIGhlaWdodCkgPiAwLjUsXG5cdFx0XHRcdFx0XHRuZXh0U2libGluZyA9IHRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcsXG5cdFx0XHRcdFx0XHRhZnRlciA9IGZhbHNlXG5cdFx0XHRcdFx0O1xuXG5cdFx0XHRcdFx0aWYgKGZsb2F0aW5nKSB7XG5cdFx0XHRcdFx0XHR2YXIgZWxUb3AgPSBkcmFnRWwub2Zmc2V0VG9wLFxuXHRcdFx0XHRcdFx0XHR0Z1RvcCA9IHRhcmdldC5vZmZzZXRUb3A7XG5cblx0XHRcdFx0XHRcdGlmIChlbFRvcCA9PT0gdGdUb3ApIHtcblx0XHRcdFx0XHRcdFx0YWZ0ZXIgPSAodGFyZ2V0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcgPT09IGRyYWdFbCkgJiYgIWlzV2lkZSB8fCBoYWxmd2F5ICYmIGlzV2lkZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2UgaWYgKHRhcmdldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nID09PSBkcmFnRWwgfHwgZHJhZ0VsLnByZXZpb3VzRWxlbWVudFNpYmxpbmcgPT09IHRhcmdldCkge1xuXHRcdFx0XHRcdFx0XHRhZnRlciA9IChldnQuY2xpZW50WSAtIHRhcmdldFJlY3QudG9wKSAvIGhlaWdodCA+IDAuNTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGFmdGVyID0gdGdUb3AgPiBlbFRvcDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIWlzTW92aW5nQmV0d2VlblNvcnRhYmxlKSB7XG5cdFx0XHRcdFx0XHRhZnRlciA9IChuZXh0U2libGluZyAhPT0gZHJhZ0VsKSAmJiAhaXNMb25nIHx8IGhhbGZ3YXkgJiYgaXNMb25nO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHZhciBtb3ZlVmVjdG9yID0gX29uTW92ZShyb290RWwsIGVsLCBkcmFnRWwsIGRyYWdSZWN0LCB0YXJnZXQsIHRhcmdldFJlY3QsIGV2dCwgYWZ0ZXIpO1xuXG5cdFx0XHRcdFx0aWYgKG1vdmVWZWN0b3IgIT09IGZhbHNlKSB7XG5cdFx0XHRcdFx0XHRpZiAobW92ZVZlY3RvciA9PT0gMSB8fCBtb3ZlVmVjdG9yID09PSAtMSkge1xuXHRcdFx0XHRcdFx0XHRhZnRlciA9IChtb3ZlVmVjdG9yID09PSAxKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0X3NpbGVudCA9IHRydWU7XG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KF91bnNpbGVudCwgMzApO1xuXG5cdFx0XHRcdFx0XHRfY2xvbmVIaWRlKGFjdGl2ZVNvcnRhYmxlLCBpc093bmVyKTtcblxuXHRcdFx0XHRcdFx0aWYgKCFkcmFnRWwuY29udGFpbnMoZWwpKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChhZnRlciAmJiAhbmV4dFNpYmxpbmcpIHtcblx0XHRcdFx0XHRcdFx0XHRlbC5hcHBlbmRDaGlsZChkcmFnRWwpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHRhcmdldC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkcmFnRWwsIGFmdGVyID8gbmV4dFNpYmxpbmcgOiB0YXJnZXQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHBhcmVudEVsID0gZHJhZ0VsLnBhcmVudE5vZGU7IC8vIGFjdHVhbGl6YXRpb25cblxuXHRcdFx0XHRcdFx0dGhpcy5fYW5pbWF0ZShkcmFnUmVjdCwgZHJhZ0VsKTtcblx0XHRcdFx0XHRcdHRoaXMuX2FuaW1hdGUodGFyZ2V0UmVjdCwgdGFyZ2V0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0X2FuaW1hdGU6IGZ1bmN0aW9uIChwcmV2UmVjdCwgdGFyZ2V0KSB7XG5cdFx0XHR2YXIgbXMgPSB0aGlzLm9wdGlvbnMuYW5pbWF0aW9uO1xuXG5cdFx0XHRpZiAobXMpIHtcblx0XHRcdFx0dmFyIGN1cnJlbnRSZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG5cdFx0XHRcdGlmIChwcmV2UmVjdC5ub2RlVHlwZSA9PT0gMSkge1xuXHRcdFx0XHRcdHByZXZSZWN0ID0gcHJldlJlY3QuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRfY3NzKHRhcmdldCwgJ3RyYW5zaXRpb24nLCAnbm9uZScpO1xuXHRcdFx0XHRfY3NzKHRhcmdldCwgJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUzZCgnXG5cdFx0XHRcdFx0KyAocHJldlJlY3QubGVmdCAtIGN1cnJlbnRSZWN0LmxlZnQpICsgJ3B4LCdcblx0XHRcdFx0XHQrIChwcmV2UmVjdC50b3AgLSBjdXJyZW50UmVjdC50b3ApICsgJ3B4LDApJ1xuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdHRhcmdldC5vZmZzZXRXaWR0aDsgLy8gcmVwYWludFxuXG5cdFx0XHRcdF9jc3ModGFyZ2V0LCAndHJhbnNpdGlvbicsICdhbGwgJyArIG1zICsgJ21zJyk7XG5cdFx0XHRcdF9jc3ModGFyZ2V0LCAndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZTNkKDAsMCwwKScpO1xuXG5cdFx0XHRcdGNsZWFyVGltZW91dCh0YXJnZXQuYW5pbWF0ZWQpO1xuXHRcdFx0XHR0YXJnZXQuYW5pbWF0ZWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRfY3NzKHRhcmdldCwgJ3RyYW5zaXRpb24nLCAnJyk7XG5cdFx0XHRcdFx0X2Nzcyh0YXJnZXQsICd0cmFuc2Zvcm0nLCAnJyk7XG5cdFx0XHRcdFx0dGFyZ2V0LmFuaW1hdGVkID0gZmFsc2U7XG5cdFx0XHRcdH0sIG1zKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0X29mZlVwRXZlbnRzOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgb3duZXJEb2N1bWVudCA9IHRoaXMuZWwub3duZXJEb2N1bWVudDtcblxuXHRcdFx0X29mZihkb2N1bWVudCwgJ3RvdWNobW92ZScsIHRoaXMuX29uVG91Y2hNb3ZlKTtcblx0XHRcdF9vZmYoZG9jdW1lbnQsICdwb2ludGVybW92ZScsIHRoaXMuX29uVG91Y2hNb3ZlKTtcblx0XHRcdF9vZmYob3duZXJEb2N1bWVudCwgJ21vdXNldXAnLCB0aGlzLl9vbkRyb3ApO1xuXHRcdFx0X29mZihvd25lckRvY3VtZW50LCAndG91Y2hlbmQnLCB0aGlzLl9vbkRyb3ApO1xuXHRcdFx0X29mZihvd25lckRvY3VtZW50LCAncG9pbnRlcnVwJywgdGhpcy5fb25Ecm9wKTtcblx0XHRcdF9vZmYob3duZXJEb2N1bWVudCwgJ3RvdWNoY2FuY2VsJywgdGhpcy5fb25Ecm9wKTtcblx0XHRcdF9vZmYob3duZXJEb2N1bWVudCwgJ3BvaW50ZXJjYW5jZWwnLCB0aGlzLl9vbkRyb3ApO1xuXHRcdFx0X29mZihvd25lckRvY3VtZW50LCAnc2VsZWN0c3RhcnQnLCB0aGlzKTtcblx0XHR9LFxuXG5cdFx0X29uRHJvcDogZnVuY3Rpb24gKC8qKkV2ZW50Ki9ldnQpIHtcblx0XHRcdHZhciBlbCA9IHRoaXMuZWwsXG5cdFx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cblx0XHRcdGNsZWFySW50ZXJ2YWwodGhpcy5fbG9vcElkKTtcblx0XHRcdGNsZWFySW50ZXJ2YWwoYXV0b1Njcm9sbC5waWQpO1xuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMuX2RyYWdTdGFydFRpbWVyKTtcblxuXHRcdFx0Ly8gVW5iaW5kIGV2ZW50c1xuXHRcdFx0X29mZihkb2N1bWVudCwgJ21vdXNlbW92ZScsIHRoaXMuX29uVG91Y2hNb3ZlKTtcblxuXHRcdFx0aWYgKHRoaXMubmF0aXZlRHJhZ2dhYmxlKSB7XG5cdFx0XHRcdF9vZmYoZG9jdW1lbnQsICdkcm9wJywgdGhpcyk7XG5cdFx0XHRcdF9vZmYoZWwsICdkcmFnc3RhcnQnLCB0aGlzLl9vbkRyYWdTdGFydCk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuX29mZlVwRXZlbnRzKCk7XG5cblx0XHRcdGlmIChldnQpIHtcblx0XHRcdFx0aWYgKG1vdmVkKSB7XG5cdFx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0IW9wdGlvbnMuZHJvcEJ1YmJsZSAmJiBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRnaG9zdEVsICYmIGdob3N0RWwucGFyZW50Tm9kZSAmJiBnaG9zdEVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZ2hvc3RFbCk7XG5cblx0XHRcdFx0aWYgKHJvb3RFbCA9PT0gcGFyZW50RWwgfHwgU29ydGFibGUuYWN0aXZlLmxhc3RQdWxsTW9kZSAhPT0gJ2Nsb25lJykge1xuXHRcdFx0XHRcdC8vIFJlbW92ZSBjbG9uZVxuXHRcdFx0XHRcdGNsb25lRWwgJiYgY2xvbmVFbC5wYXJlbnROb2RlICYmIGNsb25lRWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjbG9uZUVsKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChkcmFnRWwpIHtcblx0XHRcdFx0XHRpZiAodGhpcy5uYXRpdmVEcmFnZ2FibGUpIHtcblx0XHRcdFx0XHRcdF9vZmYoZHJhZ0VsLCAnZHJhZ2VuZCcsIHRoaXMpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdF9kaXNhYmxlRHJhZ2dhYmxlKGRyYWdFbCk7XG5cdFx0XHRcdFx0ZHJhZ0VsLnN0eWxlWyd3aWxsLWNoYW5nZSddID0gJyc7XG5cblx0XHRcdFx0XHQvLyBSZW1vdmUgY2xhc3Mnc1xuXHRcdFx0XHRcdF90b2dnbGVDbGFzcyhkcmFnRWwsIHRoaXMub3B0aW9ucy5naG9zdENsYXNzLCBmYWxzZSk7XG5cdFx0XHRcdFx0X3RvZ2dsZUNsYXNzKGRyYWdFbCwgdGhpcy5vcHRpb25zLmNob3NlbkNsYXNzLCBmYWxzZSk7XG5cblx0XHRcdFx0XHQvLyBEcmFnIHN0b3AgZXZlbnRcblx0XHRcdFx0XHRfZGlzcGF0Y2hFdmVudCh0aGlzLCByb290RWwsICd1bmNob29zZScsIGRyYWdFbCwgcm9vdEVsLCBvbGRJbmRleCk7XG5cblx0XHRcdFx0XHRpZiAocm9vdEVsICE9PSBwYXJlbnRFbCkge1xuXHRcdFx0XHRcdFx0bmV3SW5kZXggPSBfaW5kZXgoZHJhZ0VsLCBvcHRpb25zLmRyYWdnYWJsZSk7XG5cblx0XHRcdFx0XHRcdGlmIChuZXdJbmRleCA+PSAwKSB7XG5cdFx0XHRcdFx0XHRcdC8vIEFkZCBldmVudFxuXHRcdFx0XHRcdFx0XHRfZGlzcGF0Y2hFdmVudChudWxsLCBwYXJlbnRFbCwgJ2FkZCcsIGRyYWdFbCwgcm9vdEVsLCBvbGRJbmRleCwgbmV3SW5kZXgpO1xuXG5cdFx0XHRcdFx0XHRcdC8vIFJlbW92ZSBldmVudFxuXHRcdFx0XHRcdFx0XHRfZGlzcGF0Y2hFdmVudCh0aGlzLCByb290RWwsICdyZW1vdmUnLCBkcmFnRWwsIHJvb3RFbCwgb2xkSW5kZXgsIG5ld0luZGV4KTtcblxuXHRcdFx0XHRcdFx0XHQvLyBkcmFnIGZyb20gb25lIGxpc3QgYW5kIGRyb3AgaW50byBhbm90aGVyXG5cdFx0XHRcdFx0XHRcdF9kaXNwYXRjaEV2ZW50KG51bGwsIHBhcmVudEVsLCAnc29ydCcsIGRyYWdFbCwgcm9vdEVsLCBvbGRJbmRleCwgbmV3SW5kZXgpO1xuXHRcdFx0XHRcdFx0XHRfZGlzcGF0Y2hFdmVudCh0aGlzLCByb290RWwsICdzb3J0JywgZHJhZ0VsLCByb290RWwsIG9sZEluZGV4LCBuZXdJbmRleCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0aWYgKGRyYWdFbC5uZXh0U2libGluZyAhPT0gbmV4dEVsKSB7XG5cdFx0XHRcdFx0XHRcdC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRyYWdnZWQgZWxlbWVudCB3aXRoaW4gaXRzIHBhcmVudFxuXHRcdFx0XHRcdFx0XHRuZXdJbmRleCA9IF9pbmRleChkcmFnRWwsIG9wdGlvbnMuZHJhZ2dhYmxlKTtcblxuXHRcdFx0XHRcdFx0XHRpZiAobmV3SW5kZXggPj0gMCkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIGRyYWcgJiBkcm9wIHdpdGhpbiB0aGUgc2FtZSBsaXN0XG5cdFx0XHRcdFx0XHRcdFx0X2Rpc3BhdGNoRXZlbnQodGhpcywgcm9vdEVsLCAndXBkYXRlJywgZHJhZ0VsLCByb290RWwsIG9sZEluZGV4LCBuZXdJbmRleCk7XG5cdFx0XHRcdFx0XHRcdFx0X2Rpc3BhdGNoRXZlbnQodGhpcywgcm9vdEVsLCAnc29ydCcsIGRyYWdFbCwgcm9vdEVsLCBvbGRJbmRleCwgbmV3SW5kZXgpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKFNvcnRhYmxlLmFjdGl2ZSkge1xuXHRcdFx0XHRcdFx0LyoganNoaW50IGVxbnVsbDp0cnVlICovXG5cdFx0XHRcdFx0XHRpZiAobmV3SW5kZXggPT0gbnVsbCB8fCBuZXdJbmRleCA9PT0gLTEpIHtcblx0XHRcdFx0XHRcdFx0bmV3SW5kZXggPSBvbGRJbmRleDtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0X2Rpc3BhdGNoRXZlbnQodGhpcywgcm9vdEVsLCAnZW5kJywgZHJhZ0VsLCByb290RWwsIG9sZEluZGV4LCBuZXdJbmRleCk7XG5cblx0XHRcdFx0XHRcdC8vIFNhdmUgc29ydGluZ1xuXHRcdFx0XHRcdFx0dGhpcy5zYXZlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0dGhpcy5fbnVsbGluZygpO1xuXHRcdH0sXG5cblx0XHRfbnVsbGluZzogZnVuY3Rpb24oKSB7XG5cdFx0XHRyb290RWwgPVxuXHRcdFx0ZHJhZ0VsID1cblx0XHRcdHBhcmVudEVsID1cblx0XHRcdGdob3N0RWwgPVxuXHRcdFx0bmV4dEVsID1cblx0XHRcdGNsb25lRWwgPVxuXHRcdFx0bGFzdERvd25FbCA9XG5cblx0XHRcdHNjcm9sbEVsID1cblx0XHRcdHNjcm9sbFBhcmVudEVsID1cblxuXHRcdFx0dGFwRXZ0ID1cblx0XHRcdHRvdWNoRXZ0ID1cblxuXHRcdFx0bW92ZWQgPVxuXHRcdFx0bmV3SW5kZXggPVxuXG5cdFx0XHRsYXN0RWwgPVxuXHRcdFx0bGFzdENTUyA9XG5cblx0XHRcdHB1dFNvcnRhYmxlID1cblx0XHRcdGFjdGl2ZUdyb3VwID1cblx0XHRcdFNvcnRhYmxlLmFjdGl2ZSA9IG51bGw7XG5cblx0XHRcdHNhdmVkSW5wdXRDaGVja2VkLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG5cdFx0XHRcdGVsLmNoZWNrZWQgPSB0cnVlO1xuXHRcdFx0fSk7XG5cdFx0XHRzYXZlZElucHV0Q2hlY2tlZC5sZW5ndGggPSAwO1xuXHRcdH0sXG5cblx0XHRoYW5kbGVFdmVudDogZnVuY3Rpb24gKC8qKkV2ZW50Ki9ldnQpIHtcblx0XHRcdHN3aXRjaCAoZXZ0LnR5cGUpIHtcblx0XHRcdFx0Y2FzZSAnZHJvcCc6XG5cdFx0XHRcdGNhc2UgJ2RyYWdlbmQnOlxuXHRcdFx0XHRcdHRoaXMuX29uRHJvcChldnQpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ2RyYWdvdmVyJzpcblx0XHRcdFx0Y2FzZSAnZHJhZ2VudGVyJzpcblx0XHRcdFx0XHRpZiAoZHJhZ0VsKSB7XG5cdFx0XHRcdFx0XHR0aGlzLl9vbkRyYWdPdmVyKGV2dCk7XG5cdFx0XHRcdFx0XHRfZ2xvYmFsRHJhZ092ZXIoZXZ0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnc2VsZWN0c3RhcnQnOlxuXHRcdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH0sXG5cblxuXHRcdC8qKlxuXHRcdCAqIFNlcmlhbGl6ZXMgdGhlIGl0ZW0gaW50byBhbiBhcnJheSBvZiBzdHJpbmcuXG5cdFx0ICogQHJldHVybnMge1N0cmluZ1tdfVxuXHRcdCAqL1xuXHRcdHRvQXJyYXk6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBvcmRlciA9IFtdLFxuXHRcdFx0XHRlbCxcblx0XHRcdFx0Y2hpbGRyZW4gPSB0aGlzLmVsLmNoaWxkcmVuLFxuXHRcdFx0XHRpID0gMCxcblx0XHRcdFx0biA9IGNoaWxkcmVuLmxlbmd0aCxcblx0XHRcdFx0b3B0aW9ucyA9IHRoaXMub3B0aW9ucztcblxuXHRcdFx0Zm9yICg7IGkgPCBuOyBpKyspIHtcblx0XHRcdFx0ZWwgPSBjaGlsZHJlbltpXTtcblx0XHRcdFx0aWYgKF9jbG9zZXN0KGVsLCBvcHRpb25zLmRyYWdnYWJsZSwgdGhpcy5lbCkpIHtcblx0XHRcdFx0XHRvcmRlci5wdXNoKGVsLmdldEF0dHJpYnV0ZShvcHRpb25zLmRhdGFJZEF0dHIpIHx8IF9nZW5lcmF0ZUlkKGVsKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG9yZGVyO1xuXHRcdH0sXG5cblxuXHRcdC8qKlxuXHRcdCAqIFNvcnRzIHRoZSBlbGVtZW50cyBhY2NvcmRpbmcgdG8gdGhlIGFycmF5LlxuXHRcdCAqIEBwYXJhbSAge1N0cmluZ1tdfSAgb3JkZXIgIG9yZGVyIG9mIHRoZSBpdGVtc1xuXHRcdCAqL1xuXHRcdHNvcnQ6IGZ1bmN0aW9uIChvcmRlcikge1xuXHRcdFx0dmFyIGl0ZW1zID0ge30sIHJvb3RFbCA9IHRoaXMuZWw7XG5cblx0XHRcdHRoaXMudG9BcnJheSgpLmZvckVhY2goZnVuY3Rpb24gKGlkLCBpKSB7XG5cdFx0XHRcdHZhciBlbCA9IHJvb3RFbC5jaGlsZHJlbltpXTtcblxuXHRcdFx0XHRpZiAoX2Nsb3Nlc3QoZWwsIHRoaXMub3B0aW9ucy5kcmFnZ2FibGUsIHJvb3RFbCkpIHtcblx0XHRcdFx0XHRpdGVtc1tpZF0gPSBlbDtcblx0XHRcdFx0fVxuXHRcdFx0fSwgdGhpcyk7XG5cblx0XHRcdG9yZGVyLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG5cdFx0XHRcdGlmIChpdGVtc1tpZF0pIHtcblx0XHRcdFx0XHRyb290RWwucmVtb3ZlQ2hpbGQoaXRlbXNbaWRdKTtcblx0XHRcdFx0XHRyb290RWwuYXBwZW5kQ2hpbGQoaXRlbXNbaWRdKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXG5cdFx0LyoqXG5cdFx0ICogU2F2ZSB0aGUgY3VycmVudCBzb3J0aW5nXG5cdFx0ICovXG5cdFx0c2F2ZTogZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIHN0b3JlID0gdGhpcy5vcHRpb25zLnN0b3JlO1xuXHRcdFx0c3RvcmUgJiYgc3RvcmUuc2V0KHRoaXMpO1xuXHRcdH0sXG5cblxuXHRcdC8qKlxuXHRcdCAqIEZvciBlYWNoIGVsZW1lbnQgaW4gdGhlIHNldCwgZ2V0IHRoZSBmaXJzdCBlbGVtZW50IHRoYXQgbWF0Y2hlcyB0aGUgc2VsZWN0b3IgYnkgdGVzdGluZyB0aGUgZWxlbWVudCBpdHNlbGYgYW5kIHRyYXZlcnNpbmcgdXAgdGhyb3VnaCBpdHMgYW5jZXN0b3JzIGluIHRoZSBET00gdHJlZS5cblx0XHQgKiBAcGFyYW0gICB7SFRNTEVsZW1lbnR9ICBlbFxuXHRcdCAqIEBwYXJhbSAgIHtTdHJpbmd9ICAgICAgIFtzZWxlY3Rvcl0gIGRlZmF1bHQ6IGBvcHRpb25zLmRyYWdnYWJsZWBcblx0XHQgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR8bnVsbH1cblx0XHQgKi9cblx0XHRjbG9zZXN0OiBmdW5jdGlvbiAoZWwsIHNlbGVjdG9yKSB7XG5cdFx0XHRyZXR1cm4gX2Nsb3Nlc3QoZWwsIHNlbGVjdG9yIHx8IHRoaXMub3B0aW9ucy5kcmFnZ2FibGUsIHRoaXMuZWwpO1xuXHRcdH0sXG5cblxuXHRcdC8qKlxuXHRcdCAqIFNldC9nZXQgb3B0aW9uXG5cdFx0ICogQHBhcmFtICAge3N0cmluZ30gbmFtZVxuXHRcdCAqIEBwYXJhbSAgIHsqfSAgICAgIFt2YWx1ZV1cblx0XHQgKiBAcmV0dXJucyB7Kn1cblx0XHQgKi9cblx0XHRvcHRpb246IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuXHRcdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cblx0XHRcdGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG5cdFx0XHRcdHJldHVybiBvcHRpb25zW25hbWVdO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0b3B0aW9uc1tuYW1lXSA9IHZhbHVlO1xuXG5cdFx0XHRcdGlmIChuYW1lID09PSAnZ3JvdXAnKSB7XG5cdFx0XHRcdFx0X3ByZXBhcmVHcm91cChvcHRpb25zKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cblxuXHRcdC8qKlxuXHRcdCAqIERlc3Ryb3lcblx0XHQgKi9cblx0XHRkZXN0cm95OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgZWwgPSB0aGlzLmVsO1xuXG5cdFx0XHRlbFtleHBhbmRvXSA9IG51bGw7XG5cblx0XHRcdF9vZmYoZWwsICdtb3VzZWRvd24nLCB0aGlzLl9vblRhcFN0YXJ0KTtcblx0XHRcdF9vZmYoZWwsICd0b3VjaHN0YXJ0JywgdGhpcy5fb25UYXBTdGFydCk7XG5cdFx0XHRfb2ZmKGVsLCAncG9pbnRlcmRvd24nLCB0aGlzLl9vblRhcFN0YXJ0KTtcblxuXHRcdFx0aWYgKHRoaXMubmF0aXZlRHJhZ2dhYmxlKSB7XG5cdFx0XHRcdF9vZmYoZWwsICdkcmFnb3ZlcicsIHRoaXMpO1xuXHRcdFx0XHRfb2ZmKGVsLCAnZHJhZ2VudGVyJywgdGhpcyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJlbW92ZSBkcmFnZ2FibGUgYXR0cmlidXRlc1xuXHRcdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlbC5xdWVyeVNlbGVjdG9yQWxsKCdbZHJhZ2dhYmxlXScpLCBmdW5jdGlvbiAoZWwpIHtcblx0XHRcdFx0ZWwucmVtb3ZlQXR0cmlidXRlKCdkcmFnZ2FibGUnKTtcblx0XHRcdH0pO1xuXG5cdFx0XHR0b3VjaERyYWdPdmVyTGlzdGVuZXJzLnNwbGljZSh0b3VjaERyYWdPdmVyTGlzdGVuZXJzLmluZGV4T2YodGhpcy5fb25EcmFnT3ZlciksIDEpO1xuXG5cdFx0XHR0aGlzLl9vbkRyb3AoKTtcblxuXHRcdFx0dGhpcy5lbCA9IGVsID0gbnVsbDtcblx0XHR9XG5cdH07XG5cblxuXHRmdW5jdGlvbiBfY2xvbmVIaWRlKHNvcnRhYmxlLCBzdGF0ZSkge1xuXHRcdGlmIChzb3J0YWJsZS5sYXN0UHVsbE1vZGUgIT09ICdjbG9uZScpIHtcblx0XHRcdHN0YXRlID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRpZiAoY2xvbmVFbCAmJiAoY2xvbmVFbC5zdGF0ZSAhPT0gc3RhdGUpKSB7XG5cdFx0XHRfY3NzKGNsb25lRWwsICdkaXNwbGF5Jywgc3RhdGUgPyAnbm9uZScgOiAnJyk7XG5cblx0XHRcdGlmICghc3RhdGUpIHtcblx0XHRcdFx0aWYgKGNsb25lRWwuc3RhdGUpIHtcblx0XHRcdFx0XHRpZiAoc29ydGFibGUub3B0aW9ucy5ncm91cC5yZXZlcnRDbG9uZSkge1xuXHRcdFx0XHRcdFx0cm9vdEVsLmluc2VydEJlZm9yZShjbG9uZUVsLCBuZXh0RWwpO1xuXHRcdFx0XHRcdFx0c29ydGFibGUuX2FuaW1hdGUoZHJhZ0VsLCBjbG9uZUVsKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cm9vdEVsLmluc2VydEJlZm9yZShjbG9uZUVsLCBkcmFnRWwpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRjbG9uZUVsLnN0YXRlID0gc3RhdGU7XG5cdFx0fVxuXHR9XG5cblxuXHRmdW5jdGlvbiBfY2xvc2VzdCgvKipIVE1MRWxlbWVudCovZWwsIC8qKlN0cmluZyovc2VsZWN0b3IsIC8qKkhUTUxFbGVtZW50Ki9jdHgpIHtcblx0XHRpZiAoZWwpIHtcblx0XHRcdGN0eCA9IGN0eCB8fCBkb2N1bWVudDtcblxuXHRcdFx0ZG8ge1xuXHRcdFx0XHRpZiAoKHNlbGVjdG9yID09PSAnPionICYmIGVsLnBhcmVudE5vZGUgPT09IGN0eCkgfHwgX21hdGNoZXMoZWwsIHNlbGVjdG9yKSkge1xuXHRcdFx0XHRcdHJldHVybiBlbDtcblx0XHRcdFx0fVxuXHRcdFx0XHQvKiBqc2hpbnQgYm9zczp0cnVlICovXG5cdFx0XHR9IHdoaWxlIChlbCA9IF9nZXRQYXJlbnRPckhvc3QoZWwpKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cblx0ZnVuY3Rpb24gX2dldFBhcmVudE9ySG9zdChlbCkge1xuXHRcdHZhciBwYXJlbnQgPSBlbC5ob3N0O1xuXG5cdFx0cmV0dXJuIChwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlKSA/IHBhcmVudCA6IGVsLnBhcmVudE5vZGU7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIF9nbG9iYWxEcmFnT3ZlcigvKipFdmVudCovZXZ0KSB7XG5cdFx0aWYgKGV2dC5kYXRhVHJhbnNmZXIpIHtcblx0XHRcdGV2dC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdtb3ZlJztcblx0XHR9XG5cdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIF9vbihlbCwgZXZlbnQsIGZuKSB7XG5cdFx0ZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgZm4sIGNhcHR1cmVNb2RlKTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gX29mZihlbCwgZXZlbnQsIGZuKSB7XG5cdFx0ZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgZm4sIGNhcHR1cmVNb2RlKTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gX3RvZ2dsZUNsYXNzKGVsLCBuYW1lLCBzdGF0ZSkge1xuXHRcdGlmIChlbCkge1xuXHRcdFx0aWYgKGVsLmNsYXNzTGlzdCkge1xuXHRcdFx0XHRlbC5jbGFzc0xpc3Rbc3RhdGUgPyAnYWRkJyA6ICdyZW1vdmUnXShuYW1lKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHR2YXIgY2xhc3NOYW1lID0gKCcgJyArIGVsLmNsYXNzTmFtZSArICcgJykucmVwbGFjZShSX1NQQUNFLCAnICcpLnJlcGxhY2UoJyAnICsgbmFtZSArICcgJywgJyAnKTtcblx0XHRcdFx0ZWwuY2xhc3NOYW1lID0gKGNsYXNzTmFtZSArIChzdGF0ZSA/ICcgJyArIG5hbWUgOiAnJykpLnJlcGxhY2UoUl9TUEFDRSwgJyAnKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXG5cdGZ1bmN0aW9uIF9jc3MoZWwsIHByb3AsIHZhbCkge1xuXHRcdHZhciBzdHlsZSA9IGVsICYmIGVsLnN0eWxlO1xuXG5cdFx0aWYgKHN0eWxlKSB7XG5cdFx0XHRpZiAodmFsID09PSB2b2lkIDApIHtcblx0XHRcdFx0aWYgKGRvY3VtZW50LmRlZmF1bHRWaWV3ICYmIGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUpIHtcblx0XHRcdFx0XHR2YWwgPSBkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGVsLCAnJyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSBpZiAoZWwuY3VycmVudFN0eWxlKSB7XG5cdFx0XHRcdFx0dmFsID0gZWwuY3VycmVudFN0eWxlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHByb3AgPT09IHZvaWQgMCA/IHZhbCA6IHZhbFtwcm9wXTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRpZiAoIShwcm9wIGluIHN0eWxlKSkge1xuXHRcdFx0XHRcdHByb3AgPSAnLXdlYmtpdC0nICsgcHJvcDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHN0eWxlW3Byb3BdID0gdmFsICsgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnID8gJycgOiAncHgnKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXG5cdGZ1bmN0aW9uIF9maW5kKGN0eCwgdGFnTmFtZSwgaXRlcmF0b3IpIHtcblx0XHRpZiAoY3R4KSB7XG5cdFx0XHR2YXIgbGlzdCA9IGN0eC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWdOYW1lKSwgaSA9IDAsIG4gPSBsaXN0Lmxlbmd0aDtcblxuXHRcdFx0aWYgKGl0ZXJhdG9yKSB7XG5cdFx0XHRcdGZvciAoOyBpIDwgbjsgaSsrKSB7XG5cdFx0XHRcdFx0aXRlcmF0b3IobGlzdFtpXSwgaSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGxpc3Q7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIFtdO1xuXHR9XG5cblxuXG5cdGZ1bmN0aW9uIF9kaXNwYXRjaEV2ZW50KHNvcnRhYmxlLCByb290RWwsIG5hbWUsIHRhcmdldEVsLCBmcm9tRWwsIHN0YXJ0SW5kZXgsIG5ld0luZGV4KSB7XG5cdFx0c29ydGFibGUgPSAoc29ydGFibGUgfHwgcm9vdEVsW2V4cGFuZG9dKTtcblxuXHRcdHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKSxcblx0XHRcdG9wdGlvbnMgPSBzb3J0YWJsZS5vcHRpb25zLFxuXHRcdFx0b25OYW1lID0gJ29uJyArIG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnN1YnN0cigxKTtcblxuXHRcdGV2dC5pbml0RXZlbnQobmFtZSwgdHJ1ZSwgdHJ1ZSk7XG5cblx0XHRldnQudG8gPSByb290RWw7XG5cdFx0ZXZ0LmZyb20gPSBmcm9tRWwgfHwgcm9vdEVsO1xuXHRcdGV2dC5pdGVtID0gdGFyZ2V0RWwgfHwgcm9vdEVsO1xuXHRcdGV2dC5jbG9uZSA9IGNsb25lRWw7XG5cblx0XHRldnQub2xkSW5kZXggPSBzdGFydEluZGV4O1xuXHRcdGV2dC5uZXdJbmRleCA9IG5ld0luZGV4O1xuXG5cdFx0cm9vdEVsLmRpc3BhdGNoRXZlbnQoZXZ0KTtcblxuXHRcdGlmIChvcHRpb25zW29uTmFtZV0pIHtcblx0XHRcdG9wdGlvbnNbb25OYW1lXS5jYWxsKHNvcnRhYmxlLCBldnQpO1xuXHRcdH1cblx0fVxuXG5cblx0ZnVuY3Rpb24gX29uTW92ZShmcm9tRWwsIHRvRWwsIGRyYWdFbCwgZHJhZ1JlY3QsIHRhcmdldEVsLCB0YXJnZXRSZWN0LCBvcmlnaW5hbEV2dCwgd2lsbEluc2VydEFmdGVyKSB7XG5cdFx0dmFyIGV2dCxcblx0XHRcdHNvcnRhYmxlID0gZnJvbUVsW2V4cGFuZG9dLFxuXHRcdFx0b25Nb3ZlRm4gPSBzb3J0YWJsZS5vcHRpb25zLm9uTW92ZSxcblx0XHRcdHJldFZhbDtcblxuXHRcdGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuXHRcdGV2dC5pbml0RXZlbnQoJ21vdmUnLCB0cnVlLCB0cnVlKTtcblxuXHRcdGV2dC50byA9IHRvRWw7XG5cdFx0ZXZ0LmZyb20gPSBmcm9tRWw7XG5cdFx0ZXZ0LmRyYWdnZWQgPSBkcmFnRWw7XG5cdFx0ZXZ0LmRyYWdnZWRSZWN0ID0gZHJhZ1JlY3Q7XG5cdFx0ZXZ0LnJlbGF0ZWQgPSB0YXJnZXRFbCB8fCB0b0VsO1xuXHRcdGV2dC5yZWxhdGVkUmVjdCA9IHRhcmdldFJlY3QgfHwgdG9FbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHRldnQud2lsbEluc2VydEFmdGVyID0gd2lsbEluc2VydEFmdGVyO1xuXG5cdFx0ZnJvbUVsLmRpc3BhdGNoRXZlbnQoZXZ0KTtcblxuXHRcdGlmIChvbk1vdmVGbikge1xuXHRcdFx0cmV0VmFsID0gb25Nb3ZlRm4uY2FsbChzb3J0YWJsZSwgZXZ0LCBvcmlnaW5hbEV2dCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJldFZhbDtcblx0fVxuXG5cblx0ZnVuY3Rpb24gX2Rpc2FibGVEcmFnZ2FibGUoZWwpIHtcblx0XHRlbC5kcmFnZ2FibGUgPSBmYWxzZTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gX3Vuc2lsZW50KCkge1xuXHRcdF9zaWxlbnQgPSBmYWxzZTtcblx0fVxuXG5cblx0LyoqIEByZXR1cm5zIHtIVE1MRWxlbWVudHxmYWxzZX0gKi9cblx0ZnVuY3Rpb24gX2dob3N0SXNMYXN0KGVsLCBldnQpIHtcblx0XHR2YXIgbGFzdEVsID0gZWwubGFzdEVsZW1lbnRDaGlsZCxcblx0XHRcdHJlY3QgPSBsYXN0RWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cblx0XHQvLyA1IOKAlCBtaW4gZGVsdGFcblx0XHQvLyBhYnMg4oCUINC90LXQu9GM0LfRjyDQtNC+0LHQsNCy0LvRj9GC0YwsINCwINGC0L4g0LPQu9GO0LrQuCDQv9GA0Lgg0L3QsNCy0LXQtNC10L3QuNC4INGB0LLQtdGA0YXRg1xuXHRcdHJldHVybiAoZXZ0LmNsaWVudFkgLSAocmVjdC50b3AgKyByZWN0LmhlaWdodCkgPiA1KSB8fFxuXHRcdFx0KGV2dC5jbGllbnRYIC0gKHJlY3QubGVmdCArIHJlY3Qud2lkdGgpID4gNSk7XG5cdH1cblxuXG5cdC8qKlxuXHQgKiBHZW5lcmF0ZSBpZFxuXHQgKiBAcGFyYW0gICB7SFRNTEVsZW1lbnR9IGVsXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9XG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBfZ2VuZXJhdGVJZChlbCkge1xuXHRcdHZhciBzdHIgPSBlbC50YWdOYW1lICsgZWwuY2xhc3NOYW1lICsgZWwuc3JjICsgZWwuaHJlZiArIGVsLnRleHRDb250ZW50LFxuXHRcdFx0aSA9IHN0ci5sZW5ndGgsXG5cdFx0XHRzdW0gPSAwO1xuXG5cdFx0d2hpbGUgKGktLSkge1xuXHRcdFx0c3VtICs9IHN0ci5jaGFyQ29kZUF0KGkpO1xuXHRcdH1cblxuXHRcdHJldHVybiBzdW0udG9TdHJpbmcoMzYpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIGluZGV4IG9mIGFuIGVsZW1lbnQgd2l0aGluIGl0cyBwYXJlbnQgZm9yIGEgc2VsZWN0ZWQgc2V0IG9mXG5cdCAqIGVsZW1lbnRzXG5cdCAqIEBwYXJhbSAge0hUTUxFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0gIHtzZWxlY3Rvcn0gc2VsZWN0b3Jcblx0ICogQHJldHVybiB7bnVtYmVyfVxuXHQgKi9cblx0ZnVuY3Rpb24gX2luZGV4KGVsLCBzZWxlY3Rvcikge1xuXHRcdHZhciBpbmRleCA9IDA7XG5cblx0XHRpZiAoIWVsIHx8ICFlbC5wYXJlbnROb2RlKSB7XG5cdFx0XHRyZXR1cm4gLTE7XG5cdFx0fVxuXG5cdFx0d2hpbGUgKGVsICYmIChlbCA9IGVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmcpKSB7XG5cdFx0XHRpZiAoKGVsLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgIT09ICdURU1QTEFURScpICYmIChzZWxlY3RvciA9PT0gJz4qJyB8fCBfbWF0Y2hlcyhlbCwgc2VsZWN0b3IpKSkge1xuXHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBpbmRleDtcblx0fVxuXG5cdGZ1bmN0aW9uIF9tYXRjaGVzKC8qKkhUTUxFbGVtZW50Ki9lbCwgLyoqU3RyaW5nKi9zZWxlY3Rvcikge1xuXHRcdGlmIChlbCkge1xuXHRcdFx0c2VsZWN0b3IgPSBzZWxlY3Rvci5zcGxpdCgnLicpO1xuXG5cdFx0XHR2YXIgdGFnID0gc2VsZWN0b3Iuc2hpZnQoKS50b1VwcGVyQ2FzZSgpLFxuXHRcdFx0XHRyZSA9IG5ldyBSZWdFeHAoJ1xcXFxzKCcgKyBzZWxlY3Rvci5qb2luKCd8JykgKyAnKSg/PVxcXFxzKScsICdnJyk7XG5cblx0XHRcdHJldHVybiAoXG5cdFx0XHRcdCh0YWcgPT09ICcnIHx8IGVsLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT0gdGFnKSAmJlxuXHRcdFx0XHQoIXNlbGVjdG9yLmxlbmd0aCB8fCAoKCcgJyArIGVsLmNsYXNzTmFtZSArICcgJykubWF0Y2gocmUpIHx8IFtdKS5sZW5ndGggPT0gc2VsZWN0b3IubGVuZ3RoKVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBfdGhyb3R0bGUoY2FsbGJhY2ssIG1zKSB7XG5cdFx0dmFyIGFyZ3MsIF90aGlzO1xuXG5cdFx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmIChhcmdzID09PSB2b2lkIDApIHtcblx0XHRcdFx0YXJncyA9IGFyZ3VtZW50cztcblx0XHRcdFx0X3RoaXMgPSB0aGlzO1xuXG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2suY2FsbChfdGhpcywgYXJnc1swXSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrLmFwcGx5KF90aGlzLCBhcmdzKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRhcmdzID0gdm9pZCAwO1xuXHRcdFx0XHR9LCBtcyk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdGZ1bmN0aW9uIF9leHRlbmQoZHN0LCBzcmMpIHtcblx0XHRpZiAoZHN0ICYmIHNyYykge1xuXHRcdFx0Zm9yICh2YXIga2V5IGluIHNyYykge1xuXHRcdFx0XHRpZiAoc3JjLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0XHRcdFx0XHRkc3Rba2V5XSA9IHNyY1trZXldO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRzdDtcblx0fVxuXG5cdGZ1bmN0aW9uIF9jbG9uZShlbCkge1xuXHRcdHJldHVybiAkXG5cdFx0XHQ/ICQoZWwpLmNsb25lKHRydWUpWzBdXG5cdFx0XHQ6IChQb2x5bWVyICYmIFBvbHltZXIuZG9tXG5cdFx0XHRcdD8gUG9seW1lci5kb20oZWwpLmNsb25lTm9kZSh0cnVlKVxuXHRcdFx0XHQ6IGVsLmNsb25lTm9kZSh0cnVlKVxuXHRcdFx0KTtcblx0fVxuXG5cdGZ1bmN0aW9uIF9zYXZlSW5wdXRDaGVja2VkU3RhdGUocm9vdCkge1xuXHRcdHZhciBpbnB1dHMgPSByb290LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpO1xuXHRcdHZhciBpZHggPSBpbnB1dHMubGVuZ3RoO1xuXG5cdFx0d2hpbGUgKGlkeC0tKSB7XG5cdFx0XHR2YXIgZWwgPSBpbnB1dHNbaWR4XTtcblx0XHRcdGVsLmNoZWNrZWQgJiYgc2F2ZWRJbnB1dENoZWNrZWQucHVzaChlbCk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gRml4ZWQgIzk3MzogXG5cdF9vbihkb2N1bWVudCwgJ3RvdWNobW92ZScsIGZ1bmN0aW9uIChldnQpIHtcblx0XHRpZiAoU29ydGFibGUuYWN0aXZlKSB7XG5cdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHR9XG5cdH0pO1xuXG5cdHRyeSB7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBudWxsLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdwYXNzaXZlJywge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGNhcHR1cmVNb2RlID0ge1xuXHRcdFx0XHRcdGNhcHR1cmU6IGZhbHNlLFxuXHRcdFx0XHRcdHBhc3NpdmU6IGZhbHNlXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fSkpO1xuXHR9IGNhdGNoIChlcnIpIHt9XG5cblx0Ly8gRXhwb3J0IHV0aWxzXG5cdFNvcnRhYmxlLnV0aWxzID0ge1xuXHRcdG9uOiBfb24sXG5cdFx0b2ZmOiBfb2ZmLFxuXHRcdGNzczogX2Nzcyxcblx0XHRmaW5kOiBfZmluZCxcblx0XHRpczogZnVuY3Rpb24gKGVsLCBzZWxlY3Rvcikge1xuXHRcdFx0cmV0dXJuICEhX2Nsb3Nlc3QoZWwsIHNlbGVjdG9yLCBlbCk7XG5cdFx0fSxcblx0XHRleHRlbmQ6IF9leHRlbmQsXG5cdFx0dGhyb3R0bGU6IF90aHJvdHRsZSxcblx0XHRjbG9zZXN0OiBfY2xvc2VzdCxcblx0XHR0b2dnbGVDbGFzczogX3RvZ2dsZUNsYXNzLFxuXHRcdGNsb25lOiBfY2xvbmUsXG5cdFx0aW5kZXg6IF9pbmRleFxuXHR9O1xuXG5cblx0LyoqXG5cdCAqIENyZWF0ZSBzb3J0YWJsZSBpbnN0YW5jZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAgZWxcblx0ICogQHBhcmFtIHtPYmplY3R9ICAgICAgW29wdGlvbnNdXG5cdCAqL1xuXHRTb3J0YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoZWwsIG9wdGlvbnMpIHtcblx0XHRyZXR1cm4gbmV3IFNvcnRhYmxlKGVsLCBvcHRpb25zKTtcblx0fTtcblxuXG5cdC8vIEV4cG9ydFxuXHRTb3J0YWJsZS52ZXJzaW9uID0gJzEuNi4xJztcblx0cmV0dXJuIFNvcnRhYmxlO1xufSk7XG4iLCIndXNlIHN0cmljdCc7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChzdHIpIHtcblx0cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHIpLnJlcGxhY2UoL1shJygpKl0vZywgZnVuY3Rpb24gKGMpIHtcblx0XHRyZXR1cm4gJyUnICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xuXHR9KTtcbn07XG4iLCJjb25zdCB7IHdyYXAsIGluaXQgfSA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG5mdW5jdGlvbiBnZXRDb2RlKCkge1xuICByZXR1cm4gYDxkaXYgY2xhc3M9XCJjZWxsXCI+PHAgY2xhc3M9XCJkZXNjXCI+UG9waXM8L3A+PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2VsbFwiPjx0ZXh0YXJlYSBjbGFzcz1cImluIG5hbWUgdGV4dFwiPjwvdGV4dGFyZWE+PC9kaXY+YDtcbn1cblxuZnVuY3Rpb24gYXNzZW1ibGUoKSB7XG4gIGNvbnN0IGJsb2NrID0gd3JhcCgnYmlndGV4dCcsIGdldENvZGUoKSk7XG4gIGluaXQoYmxvY2spO1xuICByZXR1cm4gYmxvY2s7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7IGFzc2VtYmxlIH07XG4iLCJjb25zdCB7IHdyYXAsIGluaXQgfSA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuY29uc3QgeyByZWFkLCB3cml0ZSB9ID0gcmVxdWlyZSgnLi8uLi9maWVsZHMvZmllbGRzJyk7XG5cbmZ1bmN0aW9uIHVwZGF0ZShlbCkge1xuICBjb25zdCByb3dzID0gW10uc2xpY2UuY2FsbChlbC5xdWVyeVNlbGVjdG9yQWxsKCcucm93JykpO1xuICBjb25zdCB0b3RhbCA9IHJvd3MucmVkdWNlKChhY2MsIHJvdykgPT4ge1xuICAgIGNvbnN0IHVuaXRzID0gcmVhZChyb3cucXVlcnlTZWxlY3RvcignLnVuaXRzJykpO1xuICAgIHJldHVybiBhY2MgKyB1bml0cztcbiAgfSwgMCk7XG4gIHdyaXRlKGVsLnF1ZXJ5U2VsZWN0b3IoJy50b3RhbCcpLCB0b3RhbCk7XG4gIGhpZGVFbXB0eShlbC5xdWVyeVNlbGVjdG9yQWxsKCcuY291bnRsaXN0LWl0ZW0nKSk7XG59XG5cbmZ1bmN0aW9uIGhpZGVFbXB0eShpdGVtcykge1xuICBsZXQgbGFzdEVtcHR5ID0gZmFsc2U7XG4gIFtdLnNsaWNlLmNhbGwoaXRlbXMpLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICBjb25zdCB2YWx1ZXMgPSBpdGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0Jyk7XG4gICAgY29uc3QgZW1wdHkgPSB2YWx1ZXNbMF0udmFsdWUgPT09ICcnICYmIHZhbHVlc1sxXS52YWx1ZSA9PT0gJyc7XG4gICAgaWYgKGxhc3RFbXB0eSAmJiBlbXB0eSkge1xuICAgICAgaXRlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH0gZWxzZSB7XG4gICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgfVxuICAgIGxhc3RFbXB0eSA9IGVtcHR5O1xuICB9KTtcbn1cblxuY29uc3QgaGVhZGVyID0gYDxkaXYgY2xhc3M9XCJjZWxsXCI+PGRpdiBjbGFzcz1cImNvdW50bGlzdC1oZWFkZXIgZ3JpZC14XCI+XG4gICAgPGRpdiBjbGFzcz1cImNlbGwgbWVkaXVtLTEwXCI+PHAgY2xhc3M9XCJkZXNjXCI+UG9sb8W+a2E8L3A+PC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImNlbGwgbWVkaXVtLTJcIj48cCBjbGFzcz1cImRlc2NcIj5Qb8SNZXQ8L3A+PC9kaXY+XG4gIDwvZGl2PjwvZGl2PmA7XG5jb25zdCByb3cgPSBgPGRpdiBjbGFzcz1cInJvdyBncmlkLXggY291bnRsaXN0LWl0ZW1cIj5cbiAgICA8ZGl2IGNsYXNzPVwiY2VsbCBtZWRpdW0tMTBcIj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImluIHRleHRcIj48L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiY2VsbCBtZWRpdW0tMlwiPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiaW4gbnVtYmVyIHVuaXRzXCI+PC9kaXY+XG4gIDwvZGl2PmA7XG5jb25zdCB0b3RhbHMgPSBgPGRpdiBjbGFzcz1cInRvdGFscyBncmlkLXhcIj5cbiAgICA8ZGl2IGNsYXNzPVwiY2VsbCBtZWRpdW0tMTBcIj48cCBjbGFzcz1cImRlc2NcIj5DZWxrZW08L3A+PC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImNlbGwgbWVkaXVtLTJcIj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cIm91dCBuYW1lIG51bWJlciB0b3RhbFwiPjwvZGl2PlxuICA8L2Rpdj5gO1xuXG5mdW5jdGlvbiBhc3NlbWJsZSgpIHtcbiAgY29uc3QgYmxvY2sgPSB3cmFwKCdjb3VudGxpc3QnLCBgJHtoZWFkZXJ9IDxkaXYgY2xhc3M9XCJjZWxsXCI+JHtyb3cucmVwZWF0KDEwKX0gJHt0b3RhbHN9PC9kaXY+YCk7XG4gIGluaXQoYmxvY2ssIHVwZGF0ZSk7XG4gIHJldHVybiBibG9jaztcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgYXNzZW1ibGUsIHVwZGF0ZSB9O1xuIiwiY29uc3QgeyB3cmFwLCBpbml0IH0gPSByZXF1aXJlKCcuL3V0aWwnKTtcblxuZnVuY3Rpb24gZ2V0Q29kZSgpIHtcbiAgcmV0dXJuIGA8ZGl2IGNsYXNzPVwiY2VsbCBtZWRpdW0tM1wiPlxuICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImluIG5hbWUgZGF0ZVwiPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2VsbCBtZWRpdW0tOVwiPlxuICAgICAgICA8cCBjbGFzcz1cImRlc2NcIj5Qb3BpczwvcD5cbiAgICAgIDwvZGl2PmA7XG59XG5cbmZ1bmN0aW9uIGFzc2VtYmxlKCkge1xuICBjb25zdCBibG9jayA9IHdyYXAoJ2RhdGVpbnB1dCcsIGdldENvZGUoKSk7XG4gIGluaXQoYmxvY2spO1xuICByZXR1cm4gYmxvY2s7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7IGFzc2VtYmxlIH07XG4iLCJjb25zdCB7IHdyYXAsIGluaXQgfSA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG5mdW5jdGlvbiBnZXRDb2RlKCkge1xuICBjb25zdCB0b2RvID0gYDxkaXYgY2xhc3M9XCJncmlkLXggdG9kb1wiPlxuICAgIDxkaXYgY2xhc3M9XCJjZWxsIHNtYWxsLTFcIj48L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiY2VsbCBzbWFsbC0xMVwiPlxuICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWdyb3VwXCI+XG4gICAgICAgIDxsYWJlbCBjbGFzcz1cImlucHV0LWdyb3VwLWxhYmVsXCI+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNsYXNzPVwiaW4gY2hlY2tib3hcIj48L2xhYmVsPlxuICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImlucHV0LWdyb3VwLWZpZWxkIGluIHRleHRcIj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5gO1xuXG4gIHJldHVybiBgPGRpdiBjbGFzcz1cImNlbGwgbWVkaXVtLTNcIj5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJvdXQgZm9ybXVsYSBkYXRlXCI+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS05XCI+XG4gICAgICAgIDxwIGNsYXNzPVwiZGVzY1wiPlBvcGlzPC9wPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2VsbFwiPlxuICAgICAgICAke3RvZG8ucmVwZWF0KDEwKX1cbiAgICAgIDwvZGl2PmA7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZShlbCkge1xuICBoaWRlRW1wdHkoZWwucXVlcnlTZWxlY3RvckFsbCgnLnRvZG8nKSk7XG59XG5cbmZ1bmN0aW9uIGhpZGVFbXB0eShpdGVtcykge1xuICBsZXQgbGFzdEVtcHR5ID0gZmFsc2U7XG4gIFtdLnNsaWNlLmNhbGwoaXRlbXMpLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICBjb25zdCBlbXB0eSA9IGl0ZW0ucXVlcnlTZWxlY3RvcignW3R5cGU9XCJ0ZXh0XCJdJykudmFsdWUgPT09ICcnO1xuICAgIGlmIChsYXN0RW1wdHkgJiYgZW1wdHkpIHtcbiAgICAgIGl0ZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9IGVsc2Uge1xuICAgICAgaXRlbS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIH1cbiAgICBsYXN0RW1wdHkgPSBlbXB0eTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFzc2VtYmxlKCkge1xuICBjb25zdCBibG9jayA9IHdyYXAoJ2RhdGVvdXRwdXQnLCBnZXRDb2RlKCkpO1xuICBpbml0KGJsb2NrLCB1cGRhdGUpO1xuICByZXR1cm4gYmxvY2s7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7IGFzc2VtYmxlIH07XG4iLCJjb25zdCB7IHdyYXAsIGluaXQgfSA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG5mdW5jdGlvbiBnZXRDb2RlKCkge1xuICByZXR1cm4gYDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS02XCI+XG4gICAgICA8cCBjbGFzcz1cImRlc2NcIj5Qb3BpczwvcD5cbiAgICAgIDx0ZXh0YXJlYSBjbGFzcz1cImluIG5hbWUgdGV4dFwiPjwvdGV4dGFyZWE+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImNlbGwgbWVkaXVtLTZcIj5cbiAgICAgIDxwIGNsYXNzPVwiZGVzY1wiPlBvcGlzPC9wPlxuICAgICAgPHRleHRhcmVhIGNsYXNzPVwiaW4gbmFtZSB0ZXh0XCI+PC90ZXh0YXJlYT5cbiAgICA8L2Rpdj5gO1xufVxuXG5mdW5jdGlvbiBhc3NlbWJsZSgpIHtcbiAgY29uc3QgYmxvY2sgPSB3cmFwKCdkb3VibGV0ZXh0JywgZ2V0Q29kZSgpKTtcbiAgaW5pdChibG9jayk7XG4gIHJldHVybiBibG9jaztcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgYXNzZW1ibGUgfTtcbiIsImNvbnN0IHsgd3JhcCwgaW5pdCB9ID0gcmVxdWlyZSgnLi91dGlsJyk7XG5cbmZ1bmN0aW9uIGdldENvZGUoKSB7XG4gIHJldHVybiAnPGRpdiBjbGFzcz1cImNlbGxcIj48cCBzdHlsZT1cImhlaWdodDogMXJlbVwiPiZuYnNwOzwvcD48L2Rpdj4nO1xufVxuXG5mdW5jdGlvbiBhc3NlbWJsZSgpIHtcbiAgY29uc3QgYmxvY2sgPSB3cmFwKCdmaW5hbCcsIGdldENvZGUoKSk7XG4gIGluaXQoYmxvY2spO1xuICByZXR1cm4gYmxvY2s7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7IGFzc2VtYmxlIH07XG4iLCJjb25zdCB7IHdyYXAsIGluaXQgfSA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG5mdW5jdGlvbiBnZXRDb2RlKCkge1xuICByZXR1cm4gYFxuICAgIDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS02IGNhcmQtaW5mb1wiPlxuICAgICAgPGg0IGNsYXNzPVwiZGVzYyBjYXJkLW5hbWVcIj5OYWRwaXMga2FydHk8L2g0PlxuICAgICAgPHAgY2xhc3M9XCJkZXNjXCI+S3LDoXRjZSBwb3BpxaF0ZSwgayDEjWVtdSBzZSB0YXRvIGthcnRhIGhvZMOtLjwvcD5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiY2VsbCBtZWRpdW0tNiBjYXJkLWluZm9cIj5cbiAgICAgIDxoND5BdXRvci9rYSBrYXJ0eTwvaDQ+XG4gICAgICA8cCBjbGFzcz1cImRlc2NcIj5KbcOpbm8gUMWZw61qbWVuw60sIGptZW5vLnByaWptZW5pQGVtYWlsLmN6PC9wPlxuICAgICAgPGg0PkxpY2VuY2UgKHByYXZpZGxhIHBybyBzZMOtbGVuw60pPC9oND5cbiAgICAgIDxwIGNsYXNzPVwiZGVzY1wiPlpkZSBrcsOhdGNlIHBvcGnFoXRlLCB6ZGEga2FydHUgc2TDrWzDrXRlIHZvbG7Em1xuICAgICAgbmVibyB6ZGEgxb7DoWTDoXRlIG8gZG9kcsW+ZW7DrSBuxJtqYWvDvWNoIHByYXZpZGVsIChuYXDFmS4gcG9uZWNow6Fuw61cbiAgICAgIGtvbnRha3R1IG5hIHDFr3ZvZG7DrWhvIGF1dG9yYSBhdHAuIE3Fr8W+ZXRlXG4gICAgICB1csSNaXQgaSBrb25rcsOpdG7DrSBsaWNlbmNpIChuYXDFmcOta2xhZCBDcmVhdGl2ZSBDb21tb25zKS48L3A+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImNlbGxcIj5cbiAgICAgIDxwPjxsYWJlbCBjbGFzcz1cImRlc2NcIj5Ow6F6ZXYgYWt0aXZpdHk8L2xhYmVsPlxuICAgICAgICA8aW5wdXQgbmFtZT1cIl9hY3Rpdml0eS1uYW1lXCIgdHlwZT1cInRleHRcIiBjbGFzcz1cImluIHRleHRcIj5cbiAgICAgIDwvbGFiZWw+PC9wPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS02XCI+XG4gICAgICA8cD48bGFiZWw+XG4gICAgICAgIEPDrWwgYWt0aXZpdHkgdiBqZWRuw6kgdsSbdMSbPGJyPlxuICAgICAgICA8dGV4dGFyZWEgY2xhc3M9XCJpbiB0ZXh0XCI+PC90ZXh0YXJlYT5cbiAgICAgIDwvbGFiZWw+PC9wPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS02XCI+XG4gICAgICA8cD48bGFiZWw+XG4gICAgICAgIFBvem7DoW1reTxicj5cbiAgICAgICAgPHRleHRhcmVhIGNsYXNzPVwiaW4gdGV4dFwiPjwvdGV4dGFyZWE+XG4gICAgICA8L2xhYmVsPjwvcD5cbiAgICA8L2Rpdj5gO1xufVxuXG5mdW5jdGlvbiBhc3NlbWJsZSgpIHtcbiAgY29uc3QgYmxvY2sgPSB3cmFwKCdoZWFkZXInLCBnZXRDb2RlKCkpO1xuICBpbml0KGJsb2NrKTtcbiAgcmV0dXJuIGJsb2NrO1xufVxuXG5cbm1vZHVsZS5leHBvcnRzID0geyBhc3NlbWJsZSB9O1xuIiwiY29uc3QgeyB3cmFwLCBpbml0IH0gPSByZXF1aXJlKCcuL3V0aWwnKTtcbmNvbnN0IHsgcmVhZCB9ID0gcmVxdWlyZSgnLi8uLi9maWVsZHMvZmllbGRzJyk7XG5cbmZ1bmN0aW9uIHVwZGF0ZShlbCkge1xuICBpZiAocmVhZChlbC5xdWVyeVNlbGVjdG9yKCcuYm9vbCcpKSkge1xuICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3RydWUnKTtcbiAgfSBlbHNlIHtcbiAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCd0cnVlJyk7XG4gIH1cbn1cblxuY29uc3QgY29kZSA9IGBcbjxkaXYgY2xhc3M9XCJjZWxsIGlzLXRydWVcIj5cbiAgPHAgY2xhc3M9XCJpY29uXCI+PGkgY2xhc3M9XCJmYSBmYS1jaGVja1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48L3A+XG4gIDxwIGNsYXNzPVwiZGVzY1wiPlRleHQsIHBva3VkIGplIHBvZG3DrW5rYSBzcGxuxJtuYTwvcD5cbjwvZGl2PlxuPGRpdiBjbGFzcz1cImNlbGwgaXMtZmFsc2VcIj5cbiAgPHAgY2xhc3M9XCJpY29uXCI+PGkgY2xhc3M9XCJmYSBmYS10aW1lc1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48L3A+XG4gIDxwIGNsYXNzPVwiZGVzY1wiPlRleHQsIHBva3VkIHBvZG3DrW5rYSBuZW7DrSBzcGxuxJtuYTwvcD5cbjwvZGl2PlxuPGRpdiBjbGFzcz1cImNlbGwgaGlkZS1pbi1maWxsLW1vZGVcIj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cIm91dCBuYW1lIGZvcm11bGEgYm9vbFwiPjwvZGl2PmA7XG5cbmZ1bmN0aW9uIGFzc2VtYmxlKCkge1xuICBjb25zdCBibG9jayA9IHdyYXAoJ2luZGljYXRvcicsIGAke2NvZGV9YCk7XG4gIGluaXQoYmxvY2ssIHVwZGF0ZSk7XG4gIHJldHVybiBibG9jaztcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgYXNzZW1ibGUsIHVwZGF0ZSB9O1xuIiwiY29uc3QgeyB3cmFwLCBpbml0IH0gPSByZXF1aXJlKCcuL3V0aWwnKTtcblxuZnVuY3Rpb24gZ2V0Q29kZSgpIHtcbiAgcmV0dXJuICc8ZGl2IGNsYXNzPVwiY2VsbFwiPjxwIGNsYXNzPVwiZGVzY1wiPlRleHQgcG96bsOhbWt5PC9wPjwvZGl2Pic7XG59XG5cbmZ1bmN0aW9uIGFzc2VtYmxlKCkge1xuICBjb25zdCBibG9jayA9IHdyYXAoJ25vdGUnLCBnZXRDb2RlKCkpO1xuICBpbml0KGJsb2NrKTtcbiAgcmV0dXJuIGJsb2NrO1xufVxuXG5cbm1vZHVsZS5leHBvcnRzID0geyBhc3NlbWJsZSB9O1xuIiwiY29uc3QgeyB3cmFwLCBpbml0IH0gPSByZXF1aXJlKCcuL3V0aWwnKTtcblxuZnVuY3Rpb24gZ2V0Q29kZSgpIHtcbiAgcmV0dXJuIGA8ZGl2IGNsYXNzPVwiY2VsbCBtZWRpdW0tM1wiPlxuICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiaW4gbmFtZSBudW1iZXJcIj5cbiAgPC9kaXY+XG4gIDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS05XCI+XG4gICAgPHAgY2xhc3M9XCJkZXNjXCI+UG9waXMgxI3DrXNlbG7DqSBob2Rub3R5PC9wPlxuICA8L2Rpdj5cbiAgYDtcbn1cblxuZnVuY3Rpb24gYXNzZW1ibGUoKSB7XG4gIGNvbnN0IGJsb2NrID0gd3JhcCgnbnVtYmVyJywgZ2V0Q29kZSgpKTtcbiAgaW5pdChibG9jayk7XG4gIHJldHVybiBibG9jaztcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgYXNzZW1ibGUgfTtcbiIsImNvbnN0IHsgd3JhcCwgaW5pdCB9ID0gcmVxdWlyZSgnLi91dGlsJyk7XG5jb25zdCB7IHJlYWQsIHdyaXRlIH0gPSByZXF1aXJlKCcuLy4uL2ZpZWxkcy9maWVsZHMnKTtcblxuZnVuY3Rpb24gdXBkYXRlKGVsKSB7XG4gIGNvbnN0IHJvd3MgPSBbXS5zbGljZS5jYWxsKGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5yb3cnKSk7XG4gIGNvbnN0IHRvdGFsID0gcm93cy5yZWR1Y2UoKGFjYywgcm93KSA9PiB7XG4gICAgY29uc3QgcHJpY2UgPSByZWFkKHJvdy5xdWVyeVNlbGVjdG9yKCcucHJpY2UnKSk7XG4gICAgY29uc3QgdW5pdHMgPSByZWFkKHJvdy5xdWVyeVNlbGVjdG9yKCcudW5pdHMnKSk7XG4gICAgd3JpdGUocm93LnF1ZXJ5U2VsZWN0b3IoJy5zdWJ0b3RhbCcpLCBwcmljZSAqIHVuaXRzKTtcbiAgICByZXR1cm4gYWNjICsgKHByaWNlICogdW5pdHMpO1xuICB9LCAwKTtcbiAgd3JpdGUoZWwucXVlcnlTZWxlY3RvcignLnRvdGFsJyksIHRvdGFsKTtcbiAgaGlkZUVtcHR5KGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcmljZWxpc3QtaXRlbScpKTtcbn1cblxuZnVuY3Rpb24gaGlkZUVtcHR5KGl0ZW1zKSB7XG4gIGxldCBsYXN0RW1wdHkgPSBmYWxzZTtcbiAgW10uc2xpY2UuY2FsbChpdGVtcykuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgIGNvbnN0IHZhbHVlcyA9IGl0ZW0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKTtcbiAgICBjb25zdCBlbXB0eSA9IHZhbHVlc1swXS52YWx1ZSA9PT0gJycgJiYgdmFsdWVzWzFdLnZhbHVlID09PSAnJyAmJiB2YWx1ZXNbMl0udmFsdWUgPT09ICcnO1xuICAgIGlmIChsYXN0RW1wdHkgJiYgZW1wdHkpIHtcbiAgICAgIGl0ZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9IGVsc2Uge1xuICAgICAgaXRlbS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIH1cbiAgICBsYXN0RW1wdHkgPSBlbXB0eTtcbiAgfSk7XG59XG5jb25zdCBoZWFkZXIgPSBgPGRpdiBjbGFzcz1cImNlbGxcIj48ZGl2IGNsYXNzPVwicHJpY2VsaXN0LWhlYWRlciBncmlkLXhcIj5cbiAgICA8ZGl2IGNsYXNzPVwiY2VsbCBtZWRpdW0tNlwiPjxwIGNsYXNzPVwiZGVzY1wiPlBvbG/FvmthPC9wPjwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS0yXCI+PHAgY2xhc3M9XCJkZXNjXCI+Q2VuYTwvcD48L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiY2VsbCBtZWRpdW0tMlwiPjxwIGNsYXNzPVwiZGVzY1wiPlBvxI1ldDwvcD48L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiY2VsbCBtZWRpdW0tMlwiPjxwIGNsYXNzPVwiZGVzY1wiPkNlbGtlbTwvcD48L2Rpdj5cbiAgPC9kaXY+PC9kaXY+YDtcbmNvbnN0IHJvdyA9IGA8ZGl2IGNsYXNzPVwicm93IGdyaWQteCBwcmljZWxpc3QtaXRlbVwiPlxuICAgIDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS02XCI+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJpbiB0ZXh0XCI+PC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImNlbGwgbWVkaXVtLTJcIj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImluIG51bWJlciBwcmljZVwiPjwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS0yXCI+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJpbiBudW1iZXIgdW5pdHNcIj48L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiY2VsbCBtZWRpdW0tMlwiPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwib3V0IG51bWJlciBzdWJ0b3RhbFwiPjwvZGl2PlxuICA8L2Rpdj5gO1xuY29uc3QgdG90YWxzID0gYDxkaXYgY2xhc3M9XCJ0b3RhbHMgZ3JpZC14XCI+XG4gICAgPGRpdiBjbGFzcz1cImNlbGwgbWVkaXVtLTZcIj48cCBjbGFzcz1cImRlc2NcIj5DZWxrZW08L3A+PC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImNlbGwgbWVkaXVtLTZcIj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cIm91dCBuYW1lIG51bWJlciB0b3RhbFwiPjwvZGl2PlxuICA8L2Rpdj5gO1xuXG5mdW5jdGlvbiBhc3NlbWJsZSgpIHtcbiAgY29uc3QgYmxvY2sgPSB3cmFwKCdwcmljZWxpc3QnLCBgJHtoZWFkZXJ9IDxkaXYgY2xhc3M9XCJjZWxsXCI+JHtyb3cucmVwZWF0KDEwKX0gJHt0b3RhbHN9PC9kaXY+YCk7XG4gIGluaXQoYmxvY2ssIHVwZGF0ZSk7XG4gIHJldHVybiBibG9jaztcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgYXNzZW1ibGUsIHVwZGF0ZSB9O1xuIiwiY29uc3QgeyB3cmFwIH0gPSByZXF1aXJlKCcuL3V0aWwnKTtcblxuZnVuY3Rpb24gYXNzZW1ibGUoKSB7XG4gIHJldHVybiB3cmFwKCdzZXBhcmF0b3InLCAnPGRpdiBjbGFzcz1cImNlbGxcIj48aHI+PC9kaXY+Jyk7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7IGFzc2VtYmxlIH07XG4iLCJjb25zdCB7IHdyYXAsIGluaXQgfSA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG5mdW5jdGlvbiBnZXRDb2RlKCkge1xuICByZXR1cm4gYFxuICAgIDxkaXYgY2xhc3M9XCJjZWxsXCI+XG4gICAgICA8aDQgY2xhc3M9XCJkZXNjIGNhcmQtbmFtZVwiPk1leml0aXR1bGVrPC9oND5cbiAgICA8L2Rpdj5gO1xufVxuXG5mdW5jdGlvbiBhc3NlbWJsZSgpIHtcbiAgY29uc3QgYmxvY2sgPSB3cmFwKCdzdWJoZWFkJywgZ2V0Q29kZSgpKTtcbiAgaW5pdChibG9jayk7XG4gIHJldHVybiBibG9jaztcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgYXNzZW1ibGUgfTtcbiIsImNvbnN0IHsgd3JhcCwgaW5pdCB9ID0gcmVxdWlyZSgnLi91dGlsJyk7XG5cbmZ1bmN0aW9uIGdldENvZGUoKSB7XG4gIHJldHVybiBgPGRpdiBjbGFzcz1cImNlbGwgbWVkaXVtLTZcIj5cbiAgICA8cCBjbGFzcz1cImRlc2NcIj5Qb3BpczwvcD5cbiAgPC9kaXY+XG4gIDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS02XCI+XG4gICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJvdXQgbmFtZSBmb3JtdWxhIG51bWJlclwiPlxuICA8L2Rpdj5gO1xufVxuXG5mdW5jdGlvbiBhc3NlbWJsZSgpIHtcbiAgY29uc3QgYmxvY2sgPSB3cmFwKCdzdW0nLCBnZXRDb2RlKCkpO1xuICBpbml0KGJsb2NrKTtcbiAgcmV0dXJuIGJsb2NrO1xufVxuXG5cbm1vZHVsZS5leHBvcnRzID0geyBhc3NlbWJsZSB9O1xuIiwiY29uc3QgeyBhbGxBcnJheSB9ID0gcmVxdWlyZSgnLi8uLi91dGlsLmpzJyk7XG5jb25zdCBmaWVsZHMgPSByZXF1aXJlKCcuLy4uL2ZpZWxkcy9maWVsZHMnKTtcbmNvbnN0IGF1dG9zaXplID0gcmVxdWlyZSgnYXV0b3NpemUnKTtcblxuY29uc3QgYmlndGV4dCA9IHJlcXVpcmUoJy4vX2JpZ3RleHQnKTtcbmNvbnN0IGNvdW50bGlzdCA9IHJlcXVpcmUoJy4vX2NvdW50bGlzdCcpO1xuY29uc3QgZGF0ZWlucHV0ID0gcmVxdWlyZSgnLi9fZGF0ZWlucHV0Jyk7XG5jb25zdCBkYXRlb3V0cHV0ID0gcmVxdWlyZSgnLi9fZGF0ZW91dHB1dCcpO1xuY29uc3QgZG91YmxldGV4dCA9IHJlcXVpcmUoJy4vX2RvdWJsZXRleHQnKTtcbmNvbnN0IGZpbmFsID0gcmVxdWlyZSgnLi9fZmluYWwnKTtcbmNvbnN0IGhlYWRlciA9IHJlcXVpcmUoJy4vX2hlYWRlcicpO1xuY29uc3QgaW5kaWNhdG9yID0gcmVxdWlyZSgnLi9faW5kaWNhdG9yJyk7XG5jb25zdCBwcmljZWxpc3QgPSByZXF1aXJlKCcuL19wcmljZWxpc3QnKTtcbmNvbnN0IG5vdGUgPSByZXF1aXJlKCcuL19ub3RlJyk7XG5jb25zdCBudW1iZXIgPSByZXF1aXJlKCcuL19udW1iZXInKTtcbmNvbnN0IHNlcGFyYXRvciA9IHJlcXVpcmUoJy4vX3NlcGFyYXRvcicpO1xuY29uc3Qgc3ViaGVhZCA9IHJlcXVpcmUoJy4vX3N1YmhlYWQnKTtcbmNvbnN0IHN1bSA9IHJlcXVpcmUoJy4vX3N1bScpO1xuXG5jb25zdCBhbGwgPSB7XG4gIGJpZ3RleHQsXG4gIGNvdW50bGlzdCxcbiAgZGF0ZWlucHV0LFxuICBkYXRlb3V0cHV0LFxuICBkb3VibGV0ZXh0LFxuICBmaW5hbCxcbiAgaGVhZGVyLFxuICBpbmRpY2F0b3IsXG4gIHByaWNlbGlzdCxcbiAgbm90ZSxcbiAgbnVtYmVyLFxuICBzZXBhcmF0b3IsXG4gIHN1YmhlYWQsXG4gIHN1bSxcbn07XG5cbmNvbnN0IG5hdiA9IHtcbiAgdGV4dDogW1xuICAgICdiaWd0ZXh0JyxcbiAgICAnZG91YmxldGV4dCcsXG4gICAgJy0tLScsXG4gICAgJ251bWJlcicsXG4gICAgJ3N1bScsXG4gICAgJy0tLScsXG4gICAgJ2RhdGVpbnB1dCcsXG4gICAgJ2RhdGVvdXRwdXQnLFxuICBdLFxuICBsaXN0OiBbXG4gICAgJ2NvdW50bGlzdCcsXG4gICAgJ3ByaWNlbGlzdCcsXG4gIF0sXG4gIGNvbnRleHQ6IFtcbiAgICAnc3ViaGVhZCcsXG4gICAgJ25vdGUnLFxuICAgICdpbmRpY2F0b3InLFxuICAgICdzZXBhcmF0b3InLFxuICBdLFxufTtcblxuZnVuY3Rpb24gY3JlYXRlKHR5cGUsIGRhdGEpIHtcbiAgY29uc3QgYmxvY2sgPSBhbGxbdHlwZV0uYXNzZW1ibGUoKTtcbiAgaWYgKGRhdGEpIGZpbGwoYmxvY2ssIGRhdGEpO1xuICBpZiAoYWxsW3R5cGVdLnVwZGF0ZSkgYWxsW3R5cGVdLnVwZGF0ZShibG9jayk7XG4gIGF1dG9zaXplKGJsb2NrLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJykpO1xuICByZXR1cm4gYmxvY2s7XG59XG5cbmZ1bmN0aW9uIHBvbGwod3JhcHBlcikge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IHdyYXBwZXIuZGF0YXNldC50eXBlLFxuICAgIGRhdGE6IHtcbiAgICAgIGlucHV0czogcG9sbEZpZWxkVHlwZSh3cmFwcGVyLCAnLmluJyksXG4gICAgICBkZXNjcmlwdGlvbnM6IHBvbGxGaWVsZFR5cGUod3JhcHBlciwgJy5kZXNjJyksXG4gICAgICBuYW1lczogcG9sbE5hbWVzKHdyYXBwZXIpLFxuICAgICAgZm9ybXVsYXM6IHBvbGxGb3JtdWxhcyh3cmFwcGVyKSxcbiAgICB9LFxuICB9O1xufVxuXG5mdW5jdGlvbiBwb2xsRmllbGRUeXBlKHdyYXBwZXIsIGZpZWxkTmFtZSkge1xuICByZXR1cm4gYWxsQXJyYXkod3JhcHBlciwgZmllbGROYW1lKS5tYXAoZWwgPT4gZmllbGRzLnJlYWQoZWwpKTtcbn1cblxuZnVuY3Rpb24gcG9sbE5hbWVzKHdyYXBwZXIpIHtcbiAgcmV0dXJuIGFsbEFycmF5KHdyYXBwZXIsICcubmFtZS1zZXR0ZXInKS5tYXAoZWwgPT4gZWwudmFsdWUpO1xufVxuXG5mdW5jdGlvbiBwb2xsRm9ybXVsYXMod3JhcHBlcikge1xuICByZXR1cm4gYWxsQXJyYXkod3JhcHBlciwgJy5mb3JtdWxhLXNldHRlcicpLm1hcChlbCA9PiBlbC52YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIGZpbGwod3JhcHBlciwgZGF0YSkge1xuICBmaWxsRmllbGRUeXBlKHdyYXBwZXIsICcuaW4nLCBkYXRhLmlucHV0cyk7XG4gIGZpbGxGaWVsZFR5cGUod3JhcHBlciwgJy5kZXNjJywgZGF0YS5kZXNjcmlwdGlvbnMpO1xuICBmaWxsTmFtZXMod3JhcHBlciwgZGF0YS5uYW1lcyk7XG4gIGZpbGxGb3JtdWxhcyh3cmFwcGVyLCBkYXRhLmZvcm11bGFzKTtcbn1cblxuZnVuY3Rpb24gZmlsbEZpZWxkVHlwZSh3cmFwcGVyLCBmaWVsZE5hbWUsIGRhdGEpIHtcbiAgaWYgKGRhdGEpIHtcbiAgICBhbGxBcnJheSh3cmFwcGVyLCBmaWVsZE5hbWUpLmZvckVhY2goKGVsLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKGRhdGFbaW5kZXhdKSBmaWVsZHMud3JpdGUoZWwsIGRhdGFbaW5kZXhdKTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaWxsTmFtZXMod3JhcHBlciwgZGF0YSkge1xuICBpZiAoZGF0YSkge1xuICAgIGFsbEFycmF5KHdyYXBwZXIsICcubmFtZS1zZXR0ZXInKS5mb3JFYWNoKChlbCwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChkYXRhW2luZGV4XSkge1xuICAgICAgICBlbC52YWx1ZSA9IGRhdGFbaW5kZXhdO1xuICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmlsbEZvcm11bGFzKHdyYXBwZXIsIGRhdGEpIHtcbiAgaWYgKGRhdGEpIHtcbiAgICBhbGxBcnJheSh3cmFwcGVyLCAnLmZvcm11bGEtc2V0dGVyJykuZm9yRWFjaCgoZWwsIGluZGV4KSA9PiB7XG4gICAgICBpZiAoZGF0YVtpbmRleF0pIHtcbiAgICAgICAgZWwudmFsdWUgPSBkYXRhW2luZGV4XTtcbiAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2lucHV0JykpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZSxcbiAgcG9sbCxcbiAgZmlsbCxcbiAgYWxsLFxuICBuYXYsXG59O1xuIiwiY29uc3QgeyBhbGxBcnJheSwgdXBkYXRlQ2FyZEdlbnRseSB9ID0gcmVxdWlyZSgnLi8uLi91dGlsLmpzJyk7XG5jb25zdCBmaWVsZHMgPSByZXF1aXJlKCcuLy4uL2ZpZWxkcy9maWVsZHMnKTtcbmNvbnN0IHQgPSByZXF1aXJlKCcuLy4uL3RyYW5zbGF0b3InKS50cmFuc2xhdGU7XG5cbmZ1bmN0aW9uIHdyYXAodHlwZSwgaHRtbCkge1xuICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XG4gIHdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnZ3JpZC14Jyk7XG4gIHdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnZ3JpZC1tYXJnaW4teCcpO1xuICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2Jsb2NrJyk7XG4gIHdyYXBwZXIuZGF0YXNldC50eXBlID0gdHlwZTtcbiAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKGBibG9jay0ke3R5cGV9YCk7XG4gIHdyYXBwZXIuaW5uZXJIVE1MID0gaHRtbDtcbiAgY29uc3QgdG9vbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcbiAgdG9vbHMuY2xhc3NMaXN0LmFkZCgnY2VsbCcpO1xuICB0b29scy5jbGFzc0xpc3QuYWRkKCdibG9jay10b29scycpO1xuICB0b29scy5pbm5lckhUTUwgPSBgXG4gICAgPGRpdiBjbGFzcz1cImV4dGVybmFsLXRvb2xzXCI+XG4gICAgICA8YSBjbGFzcz1cImFkZC1ibG9jayB0b29sXCI+PGkgY2xhc3M9XCJmYSBmYS1wbHVzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjwvYT5cbiAgICAgIDwhLS0gPGEgY2xhc3M9XCJzd2FwLWJsb2NrcyB0b29sXCI+PGkgY2xhc3M9XCJmYSBmYS1hcnJvdy11cFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48aSBjbGFzcz1cImZhIGZhLWFycm93LWRvd25cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PC9hPiAtLT5cbiAgICA8L2Rpdj5cbiAgICA8cCBjbGFzcz1cImludGVybmFsLXRvb2xzXCI+XG4gICAgICA8c3BhbiBjbGFzcz1cImJsb2NrSGFuZGxlXCI+XG4gICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtYmFyc1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICAgICAgJHt0KCdibG9ja3MnLCB0eXBlKX1cbiAgICAgIDwvc3Bhbj5cbiAgICAgIDxhIGNsYXNzPVwicmVtb3ZlLWJsb2NrIHRvb2xcIj5cbiAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS10aW1lc1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICAgIDwvYT5cbiAgICA8L3A+YDtcbiAgd3JhcHBlci5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyYmVnaW4nLCB0b29scyk7XG4gIHJldHVybiB3cmFwcGVyO1xufVxuXG5mdW5jdGlvbiBpbml0KHdyYXBwZXIsIHVwZGF0ZSkge1xuICBPYmplY3Qua2V5cyhmaWVsZHMuYWxsKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBhbGxBcnJheSh3cmFwcGVyLCBgLiR7a2V5fWApLmZvckVhY2goZWwgPT4gZmllbGRzLmFsbFtrZXldLmluaXQoZWwpKTtcbiAgfSk7XG4gIHdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignZXh0ZXJuYWxVcGRhdGUnLCAoKSA9PiB7XG4gICAgaWYgKHVwZGF0ZSkgdXBkYXRlKHdyYXBwZXIpO1xuICB9KTtcbiAgYWxsQXJyYXkod3JhcHBlciwgJy5pbicpLmZvckVhY2goZWwgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgaWYgKHVwZGF0ZSkgdXBkYXRlKHdyYXBwZXIpO1xuICAgIHVwZGF0ZUNhcmRHZW50bHkoKTtcbiAgfSkpO1xufVxuXG5cbm1vZHVsZS5leHBvcnRzID0geyB3cmFwLCBpbml0IH07XG4iLCJjb25zdCB7IGFjdGl2YXRlIH0gPSByZXF1aXJlKCcuL3V0aWwnKTtcblxuZnVuY3Rpb24gaW5pdChlbCkge1xuICBhY3RpdmF0ZShlbCwgJ2Jvb2wnKTtcbn1cblxuZnVuY3Rpb24gcmVhZChlbCkge1xuICByZXR1cm4gZWwudmFsdWUgPT09ICd0cnVlJztcbn1cblxuZnVuY3Rpb24gd3JpdGUoZWwsIHZhbCkge1xuICBlbC52YWx1ZSA9IHZhbDtcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgaW5pdCwgcmVhZCwgd3JpdGUgfTtcbiIsImNvbnN0IHsgYWN0aXZhdGUgfSA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG5mdW5jdGlvbiBpbml0KGVsKSB7XG4gIGFjdGl2YXRlKGVsLCAnY2hlY2tib3gnKTtcbn1cblxuZnVuY3Rpb24gcmVhZChlbCkge1xuICByZXR1cm4gZWwuY2hlY2tlZDtcbn1cblxuZnVuY3Rpb24gd3JpdGUoZWwsIHZhbCkge1xuICBlbC5jaGVja2VkID0gdmFsO1xufVxuXG5cbm1vZHVsZS5leHBvcnRzID0geyBpbml0LCByZWFkLCB3cml0ZSB9O1xuIiwiY29uc3QgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG5jb25zdCBQaWthZGF5ID0gcmVxdWlyZSgncGlrYWRheScpO1xuXG5jb25zdCB7IGFjdGl2YXRlIH0gPSByZXF1aXJlKCcuL3V0aWwnKTtcbmNvbnN0IHQgPSByZXF1aXJlKCcuLy4uL3RyYW5zbGF0b3InKS50cmFuc2xhdGU7XG5cbmZ1bmN0aW9uIGluaXQoZWwpIHtcbiAgYWN0aXZhdGUoZWwsICdkYXRlJyk7XG4gIGRlY29yYXRlKGVsKTtcbn1cblxuZnVuY3Rpb24gZGVjb3JhdGUoZWwpIHtcbiAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnaW4nKSkge1xuICAgIG5ldyBQaWthZGF5KHtcbiAgICAgIGZpZWxkOiBlbCxcbiAgICAgIGZvcm1hdDogdCgnZGF0ZUZvcm1hdCcpLFxuICAgICAgZmlyc3REYXk6IDEsXG4gICAgICBvblNlbGVjdDogKCkgPT4gZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2lucHV0JykpLFxuICAgICAgaTE4bjogdCgncGlrYWRheU5hbWVzJyksXG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVhZChlbCkge1xuICByZXR1cm4gbW9tZW50KGVsLnZhbHVlLCB0KCdkYXRlRm9ybWF0JykpO1xufVxuXG5mdW5jdGlvbiB3cml0ZShlbCwgdmFsKSB7XG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIGVsLnZhbHVlID0gbW9tZW50KHZhbCkuZm9ybWF0KHQoJ2RhdGVGb3JtYXQnKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcgJiYgdmFsLmZvcm1hdCA9PT0gbW9tZW50LnByb3RvdHlwZS5mb3JtYXQpIHtcbiAgICBlbC52YWx1ZSA9IHZhbC5mb3JtYXQodCgnZGF0ZUZvcm1hdCcpKTtcbiAgfVxufVxuXG5cbm1vZHVsZS5leHBvcnRzID0geyBpbml0LCByZWFkLCB3cml0ZSB9O1xuIiwiZnVuY3Rpb24gaW5pdChlbCkge1xuICBlbC5kYXRhc2V0LmZpZWxkTmFtZSA9ICdkZXNjJztcbn1cblxuZnVuY3Rpb24gcmVhZChlbCkge1xuICByZXR1cm4gZWwuaW5uZXJIVE1MO1xufVxuXG5mdW5jdGlvbiB3cml0ZShlbCwgdmFsKSB7XG4gIGVsLmlubmVySFRNTCA9IHZhbDtcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgaW5pdCwgcmVhZCwgd3JpdGUgfTtcbiIsImNvbnN0IHsgYWN0aXZhdGUgfSA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG5mdW5jdGlvbiBpbml0KGVsKSB7XG4gIGVsLmRhdGFzZXQuaXNGbG9hdCA9IGVsLmNsYXNzTGlzdC5jb250YWlucygnZmxvYXQnKSA/ICd0cnVlJyA6ICdmYWxzZSc7XG4gIGFjdGl2YXRlKGVsLCAnbnVtYmVyJyk7XG59XG5cbmZ1bmN0aW9uIHJlYWQoZWwpIHtcbiAgcmV0dXJuIHBhcnNlTnVtYmVyKGVsLCBlbC52YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlKGVsLCB2YWwpIHtcbiAgZWwudmFsdWUgPSBwYXJzZU51bWJlcihlbCwgdmFsKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VOdW1iZXIoZWwsIHZhbCkge1xuICBjb25zdCBudW1lcmljID0gZWwuZGF0YXNldC5pc0Zsb2F0ID09PSAndHJ1ZSdcbiAgICA/IHBhcnNlRmxvYXQodmFsLCAxMClcbiAgICA6IHBhcnNlSW50KHZhbCwgMTApO1xuICByZXR1cm4gTnVtYmVyLmlzTmFOKG51bWVyaWMpID8gMCA6IG51bWVyaWM7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7IGluaXQsIHJlYWQsIHdyaXRlIH07XG4iLCJjb25zdCB7IGFjdGl2YXRlIH0gPSByZXF1aXJlKCcuL3V0aWwnKTtcblxuZnVuY3Rpb24gaW5pdChlbCkge1xuICBhY3RpdmF0ZShlbCwgJ3RleHQnKTtcbn1cblxuZnVuY3Rpb24gcmVhZChlbCkge1xuICByZXR1cm4gZWwudmFsdWU7XG59XG5cbmZ1bmN0aW9uIHdyaXRlKGVsLCB2YWwpIHtcbiAgZWwudmFsdWUgPSB2YWw7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7IGluaXQsIHJlYWQsIHdyaXRlIH07XG4iLCJjb25zdCBib29sID0gcmVxdWlyZSgnLi9fYm9vbCcpO1xuY29uc3QgZGF0ZSA9IHJlcXVpcmUoJy4vX2RhdGUnKTtcbmNvbnN0IGRlc2MgPSByZXF1aXJlKCcuL19kZXNjJyk7XG5jb25zdCBudW1iZXIgPSByZXF1aXJlKCcuL19udW1iZXInKTtcbmNvbnN0IHRleHQgPSByZXF1aXJlKCcuL190ZXh0Jyk7XG5jb25zdCBjaGVja2JveCA9IHJlcXVpcmUoJy4vX2NoZWNrYm94Jyk7XG5cbmNvbnN0IGFsbCA9IHtcbiAgYm9vbCxcbiAgZGF0ZSxcbiAgZGVzYyxcbiAgbnVtYmVyLFxuICB0ZXh0LFxuICBjaGVja2JveCxcbn07XG5cbmZ1bmN0aW9uIHJlYWQoYWN0aXZlRmllbGQpIHtcbiAgcmV0dXJuIGFsbFthY3RpdmVGaWVsZC5kYXRhc2V0LmZpZWxkTmFtZV0ucmVhZChhY3RpdmVGaWVsZCk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlKGFjdGl2ZUZpZWxkLCB2YWwpIHtcbiAgYWxsW2FjdGl2ZUZpZWxkLmRhdGFzZXQuZmllbGROYW1lXS53cml0ZShhY3RpdmVGaWVsZCwgdmFsKTtcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgcmVhZCwgd3JpdGUsIGFsbCB9O1xuIiwiZnVuY3Rpb24gYWN0aXZhdGUoZWwsIGZpZWxkTmFtZSkge1xuICBjb25zdCB3cmFwcGVyID0gY2VsKCdESVYnLCBbJ2tleS13cmFwcGVyJywgJ2lucHV0LWdyb3VwJ10pO1xuXG4gIC8vIHdyYXBwZXIuYXBwZW5kQ2hpbGQodHlwZSk7XG4gIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ25hbWUnKSkge1xuICAgIGNvbnN0IGxhYmVsID0gY2VsKCdTUEFOJywgWydpbnB1dC1ncm91cC1sYWJlbCddLCAnPGkgY2xhc3M9XCJmYSBmYS10YWdcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+Jyk7XG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgY29uc3QgbmFtZSA9IGNlbCgnSU5QVVQnLCBbJ25hbWUtc2V0dGVyJywgJ2lucHV0LWdyb3VwLWZpZWxkJ10pO1xuICAgIG5hbWUuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiBuYW1lSW5wdXQoZWwsIG5hbWUudmFsdWUpKTtcbiAgICBuYW1lLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCAnbsOhemV2Jyk7XG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChuYW1lKTtcbiAgfVxuICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdvdXQnKSkge1xuICAgIGVsLnNldEF0dHJpYnV0ZSgncmVhZG9ubHknLCAncmVhZG9ubHknKTtcbiAgfVxuICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdmb3JtdWxhJykpIHtcbiAgICBjb25zdCBsYWJlbCA9IGNlbCgnU1BBTicsIFsnaW5wdXQtZ3JvdXAtbGFiZWwnXSwgJyZmbm9mOycpO1xuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgIGNvbnN0IGZvcm11bGEgPSBjZWwoJ0lOUFVUJywgWydmb3JtdWxhLXNldHRlcicsICdpbnB1dC1ncm91cC1maWVsZCddKTtcbiAgICBmb3JtdWxhLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gYXBwZW5kRm9ybXVsYShlbCwgZm9ybXVsYS52YWx1ZSkpO1xuICAgIGZvcm11bGEuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsICd2em9yZWMnKTtcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGZvcm11bGEpO1xuICAgIGVsLnNldEF0dHJpYnV0ZSgncmVhZG9ubHknLCAncmVhZG9ubHknKTtcbiAgfVxuICBlbC5kYXRhc2V0LmZpZWxkTmFtZSA9IGZpZWxkTmFtZTtcbiAgZWwuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmVuZCcsIHdyYXBwZXIpO1xufVxuXG5mdW5jdGlvbiBjZWwobmFtZSwgY2xhc3NOYW1lcywgaHRtbCkge1xuICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSk7XG4gIGlmIChjbGFzc05hbWVzKSBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY2xhc3NOYW1lcy5qb2luKCcgJykpO1xuICBpZiAoaHRtbCkgZWwuaW5uZXJIVE1MID0gaHRtbDtcbiAgcmV0dXJuIGVsO1xufVxuXG5mdW5jdGlvbiBuYW1lSW5wdXQoZWwsIG5hbWUpIHtcbiAgZWwuc2V0QXR0cmlidXRlKCduYW1lJywgbmFtZSk7XG59XG5cbmZ1bmN0aW9uIGFwcGVuZEZvcm11bGEoZWwsIGZvcm11bGEpIHtcbiAgZWwuZGF0YXNldC5mb3JtdWxhID0gZm9ybXVsYTtcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgYWN0aXZhdGUgfTtcbiIsImNvbnN0IHVpID0gcmVxdWlyZSgnLi91aScpO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICBydW4oKTtcbn0pO1xuXG5mdW5jdGlvbiBydW4oKSB7XG4gIHVpLmluaXQoKTtcbn1cbiIsImxldCBjdXJyZW50SWQ7XG5cbmZ1bmN0aW9uIHNhdmUoZGF0YSwgdGVtcGxhdGVOYW1lLCBjYXJkTmFtZSkge1xuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgaWYgKCFjdXJyZW50SWQpIGN1cnJlbnRJZCA9IGBjYXJkJHtub3d9YDtcblxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjdXJyZW50SWQsIEpTT04uc3RyaW5naWZ5KHtcbiAgICBpZDogY3VycmVudElkLFxuICAgIHRlbXBsYXRlTmFtZSxcbiAgICBjYXJkTmFtZSxcbiAgICBtdGltZTogbm93LFxuICAgIGNhcmQ6IGRhdGEsXG4gIH0pKTtcbn1cblxuZnVuY3Rpb24gbG9hZChpZCkge1xuICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShpZCkpO1xufVxuXG5mdW5jdGlvbiBvcGVuKGlkKSB7XG4gIGN1cnJlbnRJZCA9IGlkO1xuICByZXR1cm4gbG9hZChpZCk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlKCkge1xuICBjdXJyZW50SWQgPSBudWxsO1xufVxuXG5mdW5jdGlvbiByZW1vdmUoaWQpIHtcbiAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oaWQpO1xufVxuXG5mdW5jdGlvbiBsaXN0KCkge1xuICByZXR1cm4gT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKVxuICAgIC5maWx0ZXIoa2V5ID0+IGtleS5tYXRjaCgvXmNhcmRcXGQrJC8pKVxuICAgIC5tYXAoa2V5ID0+IGxvYWQoa2V5KSlcbiAgICAuc29ydCgoYSwgYikgPT4gYi5tdGltZSAtIGEubXRpbWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc2F2ZSxcbiAgbG9hZCxcbiAgb3BlbixcbiAgY2xvc2UsXG4gIHJlbW92ZSxcbiAgbGlzdCxcbn07XG4iLCJjb25zdCBmaWxlU2F2ZXIgPSByZXF1aXJlKCdmaWxlLXNhdmVyJyk7XG5jb25zdCBsenMgPSByZXF1aXJlKCdsei1zdHJpbmcnKTtcblxuZnVuY3Rpb24gd3JhcEV4cG9ydCh0aXRsZSwgZGF0YSkge1xuICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gIGNvbnN0IGVuY29kZWRKc29uID0gbHpzLmNvbXByZXNzVG9FbmNvZGVkVVJJQ29tcG9uZW50KGpzb24pO1xuICBjb25zdCB1cmwgPSAnaHR0cHM6Ly9qYW4tbWFydGluZWsuZ2l0aHViLmlvL3BsYW5jYXJkcy8nO1xuICByZXR1cm4gYDwhRE9DVFlQRSBodG1sPlxuICA8aHRtbD5cbiAgPGhlYWQ+XG4gICAgPG1ldGEgY2hhcnNldD1cInV0Zi04XCI+XG4gICAgPHRpdGxlPlVsb8W+ZW7DoSBrYXJ0YSBcIiR7dGl0bGV9XCI8L3RpdGxlPlxuXG4gICAgPHN0eWxlPlxuICAgICAgYm9keSwgaHRtbCB7XG4gICAgICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgICAgfVxuICAgICAgaDEsIGgyLCBwIHtcbiAgICAgICAgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG4gICAgICB9XG4gICAgICBoMSwgaDIgeyBtYXJnaW46IDJyZW0gMCAwLjVyZW07IH1cbiAgICAgIHAgeyBtYXJnaW46IDAgMCAxcmVtOyB9XG4gICAgICAud3JhcHBlciB7XG4gICAgICAgIG1hcmdpbjogMTAwcHggYXV0bztcbiAgICAgICAgbWF4LXdpZHRoOiA0NTBweDtcbiAgICAgIH1cbiAgICAgIC5ib3gge1xuICAgICAgICBwYWRkaW5nOiAycmVtO1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjYWFhO1xuICAgICAgICBiYWNrZ3JvdW5kOiAjZmFmYWZhO1xuICAgICAgfVxuICAgIDwvc3R5bGU+XG4gIDwvaGVhZD5cbiAgPGJvZHk+XG4gICAgPGRpdiBjbGFzcz1cIndyYXBwZXJcIj5cbiAgICAgIDxoMT4ke3RpdGxlfTwvaDE+XG4gICAgICA8cD5VbG/FvmVuw6Ega2FydGEgeiBhcGxpa2FjZSDigJ5QbMOhbm92YWPDrSBrYXJ0eeKAnC48L3A+XG4gICAgICA8ZGl2IGNsYXNzPVwiYm94XCI+XG4gICAgICAgIDxwPlxuICAgICAgICAgIE9ic2FoIGthcnR5IG3Fr8W+ZXRlIG90ZXbFmcOtdCBhIHVwcmF2b3ZhdFxuICAgICAgICAgIDxhIGhyZWY9XCIke3VybH0/ZW50cnk9c2F2ZWRDYXJkXCI+bmEgd2VidSBQbMOhbm92YWPDrWNoIGthcmV0PC9hPi5cbiAgICAgICAgPC9wPlxuXG4gICAgICAgIDxkaXYgaWQ9XCJxdWlja0xpbmtcIj5cbiAgICAgICAgICA8aDI+UnljaGzDvSBvZGthejwvaDI+XG5cbiAgICAgICAgICA8cD5TIHRyb2Nob3UgxaF0xJtzdMOtIHN0YcSNw61cbiAgICAgICAgICA8YSBocmVmPVwiJHt1cmx9P2NhcmRqc29uPSR7ZW5jb2RlZEpzb259XCI+a2xpa25vdXRcbiAgICAgICAgICBuYSBvZGthejwvYT4uIE5lbsOtIG5pY23DqW7EmyBmdW5rxI1uw60gdsW+ZHkg4oCUIHrDoWxlxb7DrVxuICAgICAgICAgIHRvIG5hIHByb2hsw63FvmXEjWkgYSBtbm/FvnN0dsOtIG9ic2FodSB2IGthcnTEmy48L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgICA8c2NyaXB0PlxuICAgICAgLy8gbG9uZyBsaW5rcyBkbyBub3Qgd29yayBhdCBhbGwgaW4gSUVcbiAgICAgIC8vIG90aGVyIGJyb3dzZXJzIGdlbmVyYWxseSBhY2NlcHQgPiA4MGsgY2hhcnNcbiAgICAgIHZhciB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xuICAgICAgaWYgKHVhLmluZGV4T2YoJ01TSUUgJykgPiAwIHx8IHVhLmluZGV4T2YoJ1RyaWRlbnQvJykgPiAwKSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWlja0xpbmsnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgfVxuICAgIDwvc2NyaXB0PlxuXG5cbiAgICA8IS0tICEhISR7anNvbn0hISEgLS0+XG4gIDwvYm9keT5cbiAgPC9odG1sPmA7XG59XG5cbmZ1bmN0aW9uIHVud3JhcEV4cG9ydChodG1sKSB7XG4gIGNvbnN0IG1hdGNoZXMgPSAvPCEtLSAhISEoW1xcU1xcc10rKSEhISAtLT4vLmV4ZWMoaHRtbCk7XG4gIGlmIChtYXRjaGVzKSByZXR1cm4gSlNPTi5wYXJzZShtYXRjaGVzWzFdKTtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBleHBvcnRDYXJkKHRpdGxlLCBkYXRhKSB7XG4gIGNvbnN0IHRpdGxlRmFsbGJhY2sgPSAna2FydGEnO1xuICBjb25zdCBjb250ZW50cyA9IHdyYXBFeHBvcnQodGl0bGUgfHwgdGl0bGVGYWxsYmFjaywgZGF0YSk7XG4gIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY29udGVudHNdLCB7IHR5cGU6ICd0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgnIH0pO1xuICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICBmaWxlU2F2ZXIuc2F2ZUFzKGJsb2IsIGAke3RpdGxlIHx8IHRpdGxlRmFsbGJhY2t9LSR7dG9kYXl9Lmh0bWxgKTtcbn1cblxuZnVuY3Rpb24gZXhwb3J0VGVtcGxhdGUodGl0bGUsIGRhdGEpIHtcbiAgZXhwb3J0Q2FyZCh0aXRsZSB8fCAnxaFhYmxvbmEnLCBkYXRhKTtcbn1cblxuZnVuY3Rpb24gaW1wb3J0Q2FyZEZyb21GaWxlKGZpbGUsIGNhbGxiYWNrKSB7XG4gIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpO1xuICByZWFkZXIub25sb2FkID0gZSA9PiBjYWxsYmFjayh1bndyYXBFeHBvcnQoZS50YXJnZXQucmVzdWx0KSk7XG59XG5cbmZ1bmN0aW9uIGltcG9ydENhcmRGcm9tVXJsKHVybCwgY2FsbGJhY2spIHtcbiAgY29uc3QgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICByZXF1ZXN0Lm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG4gIHJlcXVlc3Quc2VuZCgpO1xuICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICBpZiAocmVxdWVzdC5yZWFkeVN0YXRlID09PSA0ICYmIHJlcXVlc3Quc3RhdHVzID09PSAyMDApIHtcbiAgICAgIGNhbGxiYWNrKHVud3JhcEV4cG9ydChyZXF1ZXN0LnJlc3BvbnNlVGV4dCkpO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gaW1wb3J0Q2FyZEZyb21FbmNvZGVkU3RyaW5nKHN0cmluZywgY2FsbGJhY2spIHtcbiAgY2FsbGJhY2soSlNPTi5wYXJzZShsenMuZGVjb21wcmVzc0Zyb21FbmNvZGVkVVJJQ29tcG9uZW50KHN0cmluZykpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGltcG9ydENhcmRGcm9tRmlsZSxcbiAgaW1wb3J0Q2FyZEZyb21VcmwsXG4gIGltcG9ydENhcmRGcm9tRW5jb2RlZFN0cmluZyxcbiAgZXhwb3J0Q2FyZCxcbiAgZXhwb3J0VGVtcGxhdGUsXG59O1xuIiwiY29uc3QgZGljdGlvbmFyeSA9IHtcbiAgZGF0ZUZvcm1hdDogJ0QuIE0uIFlZWVknLFxuICBwaWthZGF5TmFtZXM6IHtcbiAgICBwcmV2aW91c01vbnRoOiAnUMWZZWRjaG96w60gbcSbc8OtYycsXG4gICAgbmV4dE1vbnRoOiAnTsOhc2xlZHVqw61jw60gbcSbc8OtYycsXG4gICAgbW9udGhzOiBbJ2xlZGVuJywgJ8O6bm9yJywgJ2LFmWV6ZW4nLCAnZHViZW4nLCAna3bEm3RlbicsICfEjWVydmVuJywgJ8SNZXJ2ZW5lYycsICdzcnBlbicsICd6w6HFmcOtJywgJ8WZw61qZW4nLCAnbGlzdG9wYWQnLCAncHJvc2luZWMnXSxcbiAgICB3ZWVrZGF5czogWydOZWTEm2xlJywgJ1BvbmTEm2zDrScsICfDmnRlcsO9JywgJ1N0xZllZGEnLCAnxIx0dnJ0ZWsnLCAnUMOhdGVrJywgJ1NvYm90YSddLFxuICAgIHdlZWtkYXlzU2hvcnQ6IFsnTmUnLCAnUG8nLCAnw5p0JywgJ1N0JywgJ8SMdCcsICdQw6EnLCAnU28nXSxcbiAgfSxcbiAgYmxvY2tzOiB7XG4gICAgYmlndGV4dDogJ1ZlbGvDqSB0ZXh0b3bDqSBwb2xlJyxcbiAgICBjb3VudGxpc3Q6ICdQb2xvxb5rb3bDvSBzZXpuYW0gKGtzKScsXG4gICAgZGF0ZWlucHV0OiAnVGVybcOtbicsXG4gICAgZGF0ZW91dHB1dDogJ01pbG7DrWsgcyDDumtvbHknLFxuICAgIGRvdWJsZXRleHQ6ICdEdsSbIHRleHRvdsOhIHBvbGUnLFxuICAgIGZpbmFsOiAnWsOhdsSbcmXEjW7DvSBwYW5lbCcsXG4gICAgaGVhZGVyOiAnSGxhdmnEjWthJyxcbiAgICBpbmRpY2F0b3I6ICdJbmRpa8OhdG9yIChhbm8vbmUpJyxcbiAgICBwcmljZWxpc3Q6ICdQb2xvxb5rb3bDvSBzZXpuYW0gKGNlbmEva3MpJyxcbiAgICBub3RlOiAnUG96bsOhbWthJyxcbiAgICBudW1iZXI6ICfEjMOtc2VsbsOhIHBvbG/FvmthJyxcbiAgICBzZXBhcmF0b3I6ICdPZGTEm2xvdmHEjScsXG4gICAgc3ViaGVhZDogJ01leml0aXR1bGVrJyxcbiAgICBzdW06ICdWw71wb8SNZXQnLFxuICB9LFxuICBibG9ja05hdjoge1xuICAgIHRleHQ6ICdQb2zDrcSNa2EnLFxuICAgIGxpc3Q6ICdTZXpuYW15JyxcbiAgICBjb250ZXh0OiAnUG9waXNreScsXG4gIH0sXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHsgZGljdGlvbmFyeSB9O1xuIiwiY29uc3QgY3MgPSByZXF1aXJlKCcuL3RyYW5zbGF0aW9ucy9jcycpLmRpY3Rpb25hcnk7XG5cbmNvbnN0IGRpY3Rpb25hcmllcyA9IHtcbiAgY3MsXG59O1xuXG5sZXQgZGljdGlvbmFyeTtcblxuZnVuY3Rpb24gc2VsZWN0RGljdGlvbmFyeShsYW5nKSB7XG4gIGRpY3Rpb25hcnkgPSBkaWN0aW9uYXJpZXNbbGFuZ107XG59XG5cbmZ1bmN0aW9uIHRyYW5zbGF0ZShrZXlzKSB7XG4gIGNvbnN0IGtleWxpc3QgPSAoYXJndW1lbnRzLmxlbmd0aCA+IDEpID8gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpIDoga2V5cy5zcGxpdCgnLicpO1xuICByZXR1cm4ga2V5bGlzdC5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IChwcmV2ID8gcHJldltjdXJyXSA6IHVuZGVmaW5lZCksIGRpY3Rpb25hcnkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgc2VsZWN0RGljdGlvbmFyeSwgdHJhbnNsYXRlIH07XG4iLCJjb25zdCBxdWVyeVN0cmluZyA9IHJlcXVpcmUoJ3F1ZXJ5LXN0cmluZycpO1xuY29uc3QgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG5jb25zdCBzb3J0YWJsZSA9IHJlcXVpcmUoJ3NvcnRhYmxlanMnKTtcblxuY29uc3QgYmxvY2tzID0gcmVxdWlyZSgnLi9ibG9ja3MvYmxvY2tzJyk7XG5jb25zdCBzdG9yZSA9IHJlcXVpcmUoJy4vc3RvcmUnKTtcbmNvbnN0IHsgYWxsQXJyYXksIGZpbmRBbmNlc3RvciwgdXBkYXRlQ2FyZCB9ID0gcmVxdWlyZSgnLi91dGlsJyk7XG5jb25zdCBvcGVuZWQgPSByZXF1aXJlKCcuL29wZW5lZCcpO1xuY29uc3QgdHJhbnNsYXRvciA9IHJlcXVpcmUoJy4vdHJhbnNsYXRvcicpO1xuXG50cmFuc2xhdG9yLnNlbGVjdERpY3Rpb25hcnkoJ2NzJyk7XG5jb25zdCB0ID0gdHJhbnNsYXRvci50cmFuc2xhdGU7XG5sZXQgYmxvY2tTb3J0O1xuXG4vLyBkYXNoYm9hcmQgLyBjYXJkXG5mdW5jdGlvbiBjbG9zZUNhcmQoKSB7XG4gIG9wZW5lZC5zYXZlKHBvbGxEYXRhKCksIGdldFRlbXBsYXRlTmFtZSgpLCBnZXRDYXJkTmFtZSgpKTtcbiAgb3BlbmVkLmNsb3NlKCk7XG5cbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhcmQnKS5pbm5lckhUTUwgPSAnJztcbiAgc2hvd0Rhc2hib2FyZCgpO1xufVxuXG5mdW5jdGlvbiBzaG93RGFzaGJvYXJkKCkge1xuICByZWZyZXNoT3BlbmVkKCk7XG5cbiAgc2V0RGlzcGxheSgnY2FyZCcsICdub25lJyk7XG4gIHNldERpc3BsYXkoJ3Rvb2xiYXInLCAnbm9uZScpO1xuICBzZXREaXNwbGF5KCdkYXNoYm9hcmQnLCAnZmxleCcpO1xufVxuXG5mdW5jdGlvbiBzaG93Q2FyZCgpIHtcbiAgc2V0RGlzcGxheSgnY2FyZCcsICdibG9jaycpO1xuICBzZXREaXNwbGF5KCd0b29sYmFyJywgJ2ZsZXgnKTtcbiAgc2V0RGlzcGxheSgnZGFzaGJvYXJkJywgJ25vbmUnKTtcbn1cblxuZnVuY3Rpb24gc2V0RGlzcGxheShpZCwgdmFsKSB7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS5zdHlsZS5kaXNwbGF5ID0gdmFsO1xufVxuXG4vLyBlZGl0IC8gZmlsbCBtb2RlXG5mdW5jdGlvbiBpbml0TW9kZSgpIHtcbiAgdG9nZ2xlTW9kZSgnZmlsbCcpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZS10b2dnbGUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZU1vZGUpO1xufVxuXG5cbmNvbnN0IG1vZGVJbml0aWFsaXphdGlvbnMgPSB7XG4gIGVkaXQ6ICgpID0+IHtcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2ZpbGwtbW9kZScpO1xuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnZWRpdC1tb2RlJyk7XG4gICAgYWxsQXJyYXkoZG9jdW1lbnQuYm9keSwgJy5kZXNjJykuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJywgJ3RydWUnKTtcbiAgICB9KTtcbiAgfSxcbiAgZmlsbDogKCkgPT4ge1xuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZWRpdC1tb2RlJyk7XG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdmaWxsLW1vZGUnKTtcbiAgICBhbGxBcnJheShkb2N1bWVudC5ib2R5LCAnLmRlc2MnKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnKTtcbiAgICB9KTtcbiAgICB1cGRhdGVDYXJkKCk7XG4gIH0sXG59O1xuXG5mdW5jdGlvbiB0b2dnbGVNb2RlKG1vZGUpIHtcbiAgY29uc3QgZGV0ZWN0ZWRNb2RlID0gdHlwZW9mIG1vZGUgPT09ICdzdHJpbmcnXG4gICAgPyBtb2RlXG4gICAgOiBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnZmlsbC1tb2RlJylcbiAgICAgID8gJ2VkaXQnXG4gICAgICA6ICdmaWxsJztcblxuICBtb2RlSW5pdGlhbGl6YXRpb25zW2RldGVjdGVkTW9kZV0oKTtcbn1cblxuXG4vLyBibG9jayB0b29sc1xuY29uc3QgYmxvY2tBY3Rpb25zID0ge1xuICAnc3dhcC1ibG9ja3MnOiAoYnV0dG9uKSA9PiB7XG4gICAgY29uc3QgYmxvY2sgPSBmaW5kQW5jZXN0b3IoYnV0dG9uLCAnYmxvY2snKTtcbiAgICBjb25zdCBwcmV2aW91cyA9IGJsb2NrLnByZXZpb3VzU2libGluZztcbiAgICBpZiAocHJldmlvdXMpIGJsb2NrLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGJsb2NrLCBwcmV2aW91cyk7XG4gIH0sXG4gICdyZW1vdmUtYmxvY2snOiAoYnV0dG9uKSA9PiB7XG4gICAgY29uc3QgYmxvY2sgPSBmaW5kQW5jZXN0b3IoYnV0dG9uLCAnYmxvY2snKTtcbiAgICBibG9jay5yZW1vdmUoKTtcbiAgfSxcbiAgJ2FkZC1ibG9jayc6IChidXR0b24pID0+IHtcbiAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnb3BlbmVkJykpIHtcbiAgICAgIGZpbmRBbmNlc3RvcihidXR0b24sICdibG9jay10b29scycpLnF1ZXJ5U2VsZWN0b3IoJy5hZGQtYmxvY2stdG9vbCcpLnJlbW92ZSgpO1xuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0b29scyA9IGZpbmRBbmNlc3RvcihidXR0b24sICdibG9jay10b29scycpO1xuICAgICAgdG9vbHMuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdiZWZvcmVlbmQnLCBjcmVhdGVBZGRCbG9ja1Rvb2woKSk7XG4gICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnb3BlbmVkJyk7XG4gICAgfVxuICB9LFxuICAnYWRkLWJsb2NrLXR5cGUnOiAoYnV0dG9uKSA9PiB7XG4gICAgY29uc3QgYmxvY2sgPSBmaW5kQW5jZXN0b3IoYnV0dG9uLCAnYmxvY2snKTtcbiAgICBjb25zdCBuZXdCbG9jayA9IGJsb2Nrcy5jcmVhdGUoYnV0dG9uLmRhdGFzZXQudHlwZSk7XG4gICAgYmxvY2suaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdiZWZvcmViZWdpbicsIG5ld0Jsb2NrKTtcbiAgICB0b2dnbGVNb2RlKCdlZGl0Jyk7IC8vIGluaXRzIGVkaXQgbW9kZSBvbiBibG9ja1xuICAgIGZpbmRBbmNlc3RvcihidXR0b24sICdibG9jay10b29scycpLnF1ZXJ5U2VsZWN0b3IoJy5hZGQtYmxvY2snKS5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQnKTtcbiAgICBmaW5kQW5jZXN0b3IoYnV0dG9uLCAnYWRkLWJsb2NrLXRvb2wnKS5yZW1vdmUoKTtcbiAgfSxcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZUFkZEJsb2NrVG9vbCgpIHtcbiAgY29uc3QgYWRkQmxvY2tUb29sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XG4gIGFkZEJsb2NrVG9vbC5jbGFzc0xpc3QuYWRkKCdhZGQtYmxvY2stdG9vbCcpO1xuICBhZGRCbG9ja1Rvb2wuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJhcnJvdy11cFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJjb250ZW50IGdyaWQteCBncmlkLW1hcmdpbi14XCI+PC9kaXY+JztcbiAgY29uc3QgY29udGVudCA9IGFkZEJsb2NrVG9vbC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpO1xuXG4gIE9iamVjdC5rZXlzKGJsb2Nrcy5uYXYpLmZvckVhY2goKG5hdkdyb3VwKSA9PiB7XG4gICAgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgY29uc3Qgc2VjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlY3Rpb24nKTtcbiAgICBzZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ2NlbGwnKTtcbiAgICBzZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ21lZGl1bS00Jyk7XG4gICAgc2VjdGlvbi5pbm5lckhUTUwgPSBgPHA+JHt0KCdibG9ja05hdicsIG5hdkdyb3VwKX08L3A+YDtcbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChzZWN0aW9uKTtcblxuICAgIGJsb2Nrcy5uYXZbbmF2R3JvdXBdLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgaWYgKGtleSA9PT0gJy0tLScpIHtcbiAgICAgICAgc2VjdGlvbi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdIUicpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGJsb2NrTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0EnKTtcbiAgICAgICAgYmxvY2tMaW5rLmNsYXNzTGlzdC5hZGQoJ3Rvb2wnKTtcbiAgICAgICAgYmxvY2tMaW5rLmNsYXNzTGlzdC5hZGQoJ2FkZC1ibG9jay10eXBlJyk7XG4gICAgICAgIGJsb2NrTGluay5kYXRhc2V0LnR5cGUgPSBrZXk7XG4gICAgICAgIGJsb2NrTGluay5pbm5lckhUTUwgPSB0KCdibG9ja3MnLCBrZXkpO1xuICAgICAgICBzZWN0aW9uLmFwcGVuZENoaWxkKGJsb2NrTGluayk7XG4gICAgICB9XG5cblxuICAgIH0pO1xuXG4gICAgY29udGVudC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gIH0pO1xuXG4gIHJldHVybiBhZGRCbG9ja1Rvb2w7XG59XG5cbmZ1bmN0aW9uIGluaXRCbG9ja1Rvb2xzKCkge1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FyZCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBjb25zdCBidXR0b24gPSBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Rvb2wnKVxuICAgICAgPyBlLnRhcmdldFxuICAgICAgOiBlLnRhcmdldC5wYXJlbnROb2RlLmNsYXNzTGlzdC5jb250YWlucygndG9vbCcpXG4gICAgICAgID8gZS50YXJnZXQucGFyZW50Tm9kZVxuICAgICAgICA6IG51bGw7XG4gICAgaWYgKGJ1dHRvbikge1xuICAgICAgT2JqZWN0LmtleXMoYmxvY2tBY3Rpb25zKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgaWYgKGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoa2V5KSkgYmxvY2tBY3Rpb25zW2tleV0oYnV0dG9uKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIHByZXAgRE9NIGFuZCBhZGQgbGlzdGVuZXJzIHRvIHVpXG5mdW5jdGlvbiBpbml0KCkge1xuICBpbml0TW9kZSgpO1xuICBpbml0RXhwb3J0Q2FyZCgpO1xuICBpbml0QmxvY2tUb29scygpO1xuICBpbml0Q2xvc2VDYXJkKCk7XG4gIGluaXRPcGVuZWQoKTtcbiAgcHJldmVudFN1Ym1pdCgpO1xuICBzaG93RGFzaGJvYXJkKCk7XG5cbiAgaW5pdEltcG9ydENhcmQoKTtcbn1cblxuZnVuY3Rpb24gaW5pdEV4cG9ydENhcmQoKSB7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIHN0b3JlLmV4cG9ydENhcmQoZ2V0Q2FyZE5hbWUoKSwgcG9sbERhdGEoKSk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhdmVUZW1wbGF0ZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBzdG9yZS5leHBvcnRDYXJkKGdldFRlbXBsYXRlTmFtZSgpLCBwb2xsRGF0YSh0cnVlKSk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0Q2FyZE5hbWUoKSB7XG4gIGNvbnN0IG5hbWVFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwiX2FjdGl2aXR5LW5hbWVcIl0nKTtcbiAgcmV0dXJuIChuYW1lRWwgJiYgbmFtZUVsLnZhbHVlKSA/IG5hbWVFbC52YWx1ZSA6ICdrYXJ0YSc7XG59XG5cbmZ1bmN0aW9uIGdldFRlbXBsYXRlTmFtZSgpIHtcbiAgY29uc3QgbmFtZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtbmFtZScpO1xuICByZXR1cm4gKG5hbWVFbCAmJiBuYW1lRWwuaW5uZXJIVE1MKSA/IG5hbWVFbC5pbm5lckhUTUwgOiAnxaFhYmxvbmEnO1xufVxuXG5mdW5jdGlvbiBwb2xsRGF0YShlbXB0eSkge1xuICBjb25zdCBjYXJkRXhwb3J0ID0gW107XG4gIGFsbEFycmF5KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJkJyksICcuYmxvY2snKS5mb3JFYWNoKChibG9jaykgPT4ge1xuICAgIGNvbnN0IGluZm8gPSBibG9ja3MucG9sbChibG9jayk7XG4gICAgaWYgKGVtcHR5KSBpbmZvLmRhdGEuaW5wdXRzID0gW107XG4gICAgY2FyZEV4cG9ydC5wdXNoKGluZm8pO1xuICB9KTtcbiAgcmV0dXJuIGNhcmRFeHBvcnQ7XG59XG5cbmZ1bmN0aW9uIGluaXRJbXBvcnRDYXJkKCkge1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZEZyb21GaWxlJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICBzdG9yZS5pbXBvcnRDYXJkRnJvbUZpbGUoZS50YXJnZXQuZmlsZXNbMF0sIGxvYWRDYXJkKTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH0pO1xuXG4gIGNvbnN0IHF1ZXJ5ID0gcXVlcnlTdHJpbmcucGFyc2Uod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG4gIGlmIChxdWVyeS5lbnRyeSAmJiBxdWVyeS5lbnRyeSA9PT0gJ3NhdmVkQ2FyZCcpIHtcbiAgICBoaWdobGlnaHRGaWxlSW1wb3J0KCk7XG4gICAgcmVtb3ZlVXJsUGFyYW1zKCk7XG4gIH0gZWxzZSBpZiAocXVlcnkuY2FyZHVybCkge1xuICAgIHN0b3JlLmltcG9ydENhcmRGcm9tVXJsKHF1ZXJ5LmNhcmR1cmwsIGxvYWRDYXJkKTtcbiAgICByZW1vdmVVcmxQYXJhbXMoKTtcbiAgfSBlbHNlIGlmIChxdWVyeS5jYXJkanNvbikge1xuICAgIHN0b3JlLmltcG9ydENhcmRGcm9tRW5jb2RlZFN0cmluZyhxdWVyeS5jYXJkanNvbiwgbG9hZENhcmQpO1xuICAgIHJlbW92ZVVybFBhcmFtcygpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhpZ2hsaWdodEZpbGVJbXBvcnQoKSB7XG4gIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRGcm9tRmlsZScpO1xuICBjb25zdCBsYWJlbCA9IGZpbmRBbmNlc3RvcihpbnB1dCwgJ2NhbGxvdXQnKTtcbiAgbGFiZWwuaW5zZXJ0QmVmb3JlKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdVbG/FvmVuw70gc291Ym9yIHZ5YmVydGUgemRlOiAnKSwgaW5wdXQpO1xuICBsYWJlbC5jbGFzc0xpc3QuYWRkKCdsYWJlbEhpZ2hsaWdodCcpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVVcmxQYXJhbXMoKSB7XG4gIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBudWxsLCBgJHt3aW5kb3cubG9jYXRpb24ucGF0aG5hbWV9YCk7XG59XG5cbmZ1bmN0aW9uIGxvYWRDYXJkKGRhdGEpIHtcbiAgY29uc3QgY2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJkJyk7XG4gIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICBkYXRhLmZvckVhY2goKGJsb2NrKSA9PiB7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoYmxvY2tzLmNyZWF0ZShibG9jay50eXBlLCBibG9jay5kYXRhKSk7XG4gIH0pO1xuICBjYXJkLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgc2hvd0NhcmQoKTtcbiAgdXBkYXRlQ2FyZCgpO1xuXG4gIGlmIChibG9ja1NvcnQpIGJsb2NrU29ydC5kZXN0cm95KCk7XG4gIGJsb2NrU29ydCA9IHNvcnRhYmxlLmNyZWF0ZShjYXJkLCB7XG4gICAgYW5pbWF0aW9uOiAxNTAsXG4gICAgaGFuZGxlOiAnLmJsb2NrSGFuZGxlJyxcbiAgICBkcmFnZ2FibGU6ICcuYmxvY2snLFxuICAgIGZpbHRlcjogJy5ibG9jay1oZWFkZXIsIC5ibG9jay1maW5hbCcsXG4gICAgcHJldmVudE9uRmlsdGVyOiBmYWxzZSxcbiAgICBnaG9zdENsYXNzOiAnc29ydGFibGUtZ2hvc3QnLFxuICAgIGNob3NlbkNsYXNzOiAnc29ydGFibGUtY2hvc2VuJyxcbiAgICBkcmFnQ2xhc3M6ICdzb3J0YWJsZS1kcmFnJyxcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRDbG9zZUNhcmQoKSB7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBjbG9zZUNhcmQoKTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBwcmV2ZW50U3VibWl0KCkge1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FyZCcpLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaW5pdE9wZW5lZCgpIHtcbiAgY29uc3QgbGlzdEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wZW5lZC1saXN0Jyk7XG5cbiAgbGlzdEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYXJkLWxpbmsnKSkge1xuICAgICAgbG9hZENhcmQob3BlbmVkLm9wZW4oZS50YXJnZXQuZGF0YXNldC5pZCkuY2FyZCk7XG4gICAgfSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcmQtcmVtb3ZlJykpIHtcbiAgICAgIG9wZW5lZC5yZW1vdmUoZS50YXJnZXQuZGF0YXNldC5pZCk7XG4gICAgICByZWZyZXNoT3BlbmVkKCk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVmcmVzaE9wZW5lZCgpIHtcbiAgY29uc3QgbGlzdCA9IG9wZW5lZC5saXN0KCk7XG4gIGNvbnN0IGxpc3RFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcGVuZWQtbGlzdCcpO1xuICBsaXN0RWwuaW5uZXJIVE1MID0gJyc7XG5cbiAgaWYgKGxpc3QubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIGxpc3QuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgY29uc3QgZGF0ZSA9IG1vbWVudChjYXJkLm10aW1lKS5mb3JtYXQodCgnZGF0ZUZvcm1hdCcpKTtcbiAgICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdMSScpO1xuICAgICAgaXRlbS5pbm5lckhUTUwgPSBgPHA+XG4gICAgICAgIDxhIGNsYXNzPVwiY2FyZC1saW5rXCIgZGF0YS1pZD1cIiR7Y2FyZC5pZH1cIj4ke2NhcmQuY2FyZE5hbWV9PC9hPlxuICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXRpbWVzIGNhcmQtcmVtb3ZlXCIgZGF0YS1pZD1cIiR7Y2FyZC5pZH1cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XG4gICAgICAgIDxicj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJsYWJlbFwiPiR7Y2FyZC50ZW1wbGF0ZU5hbWV9PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cImxhYmVsXCI+JHtkYXRlfTwvc3Bhbj5cbiAgICAgIDwvcD5gO1xuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoaXRlbSk7XG4gICAgfSk7XG4gICAgbGlzdEVsLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgICBzZXREaXNwbGF5KCdvcGVuZWQtbm9uZScsICdub25lJyk7XG4gIH0gZWxzZSB7XG4gICAgc2V0RGlzcGxheSgnb3BlbmVkLW5vbmUnLCAnYmxvY2snKTtcbiAgfVxufVxuXG5cbm1vZHVsZS5leHBvcnRzID0geyBpbml0IH07XG4iLCJjb25zdCBmaWVsZHMgPSByZXF1aXJlKCcuL2ZpZWxkcy9maWVsZHMnKTtcbmNvbnN0IHBhcnNlciA9IHJlcXVpcmUoJ2V4cHItZXZhbCcpLlBhcnNlcjtcbmNvbnN0IGF1dG9zaXplID0gcmVxdWlyZSgnYXV0b3NpemUnKTtcblxubGV0IHRpbWVyO1xuXG5mdW5jdGlvbiBtYWtlQXJyYXkobm9kZWxpc3QpIHtcbiAgcmV0dXJuIFtdLnNsaWNlLmNhbGwobm9kZWxpc3QpO1xufVxuXG5mdW5jdGlvbiBhbGxBcnJheShlbCwgcXVlcnkpIHtcbiAgcmV0dXJuIG1ha2VBcnJheShlbC5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KSk7XG59XG5cbmZ1bmN0aW9uIGZpbmRBbmNlc3RvcihlbCwgY2xhc3NOYW1lKSB7XG4gIGNvbnN0IHBhcmVudCA9IGVsLnBhcmVudEVsZW1lbnQ7XG5cbiAgaWYgKHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkgcmV0dXJuIHBhcmVudDtcbiAgcmV0dXJuIGZpbmRBbmNlc3RvcihwYXJlbnQsIGNsYXNzTmFtZSk7XG59XG5cblxuY29uc3QgY3VzdG9tRnVuY3Rpb25zID0ge1xuICBkYXlzQWZ0ZXI6IChkYXRlLCBkYXlzKSA9PiBkYXRlLmNsb25lKCkuYWRkKGRheXMsICdkYXlzJyksXG4gIGRheXNCZWZvcmU6IChkYXRlLCBkYXlzKSA9PiBkYXRlLmNsb25lKCkuc3VidHJhY3QoZGF5cywgJ2RheXMnKSxcbn07XG5cbmZ1bmN0aW9uIHVwZGF0ZUNhcmQoKSB7XG4gIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FyZCcpO1xuICBjb25zdCB2YXJpYWJsZXMgPSBPYmplY3QuYXNzaWduKHt9LCBjb2xsZWN0VmFyaWFibGVzKGNhcmQpLCBjdXN0b21GdW5jdGlvbnMpO1xuICB1cGRhdGVGb3JtdWxhUmVzdWx0cyhjYXJkLCB2YXJpYWJsZXMpO1xuICBhdXRvc2l6ZS51cGRhdGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUNhcmRHZW50bHkoKSB7XG4gIGNsZWFyVGltZW91dCh0aW1lcik7XG4gIHRpbWVyID0gc2V0VGltZW91dCh1cGRhdGVDYXJkLCAxODApO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVGb3JtdWxhUmVzdWx0cyhjYXJkLCB2YXJpYWJsZXMpIHtcbiAgYWxsQXJyYXkoY2FyZCwgJy5mb3JtdWxhJykuZm9yRWFjaCgoZWwpID0+IHtcbiAgICBpZiAoZWwuZGF0YXNldC5mb3JtdWxhKSB7XG4gICAgICBmaWVsZHMud3JpdGUoZWwsIHBhcnNlci5ldmFsdWF0ZShlbC5kYXRhc2V0LmZvcm11bGEsIHZhcmlhYmxlcykpO1xuICAgICAgY29uc3QgYmxvY2sgPSBmaW5kQW5jZXN0b3IoZWwsICdibG9jaycpO1xuICAgICAgYmxvY2suZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2V4dGVybmFsVXBkYXRlJykpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNvbGxlY3RWYXJpYWJsZXMoY2FyZCkge1xuICByZXR1cm4gYWxsQXJyYXkoY2FyZCwgJ1tuYW1lXScpLnJlZHVjZSgoYWNjLCBlbCkgPT4ge1xuICAgIGFjY1tlbC5nZXRBdHRyaWJ1dGUoJ25hbWUnKV0gPSBmaWVsZHMucmVhZChlbCk7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xufVxuXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhbGxBcnJheSwgZmluZEFuY2VzdG9yLCB1cGRhdGVDYXJkLCB1cGRhdGVDYXJkR2VudGx5LFxufTtcbiJdfQ==\n"]}